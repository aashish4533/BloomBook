function RA(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const c=Object.getOwnPropertyDescriptor(r,i);c&&Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function Wv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mx={exports:{}},Fd={},px={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function LA(){if(x_)return yt;x_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),y=Symbol.iterator;function j(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function M(X,me,je){this.props=X,this.context=me,this.refs=A,this.updater=je||S}M.prototype.isReactComponent={},M.prototype.setState=function(X,me){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,me,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function R(){}R.prototype=M.prototype;function z(X,me,je){this.props=X,this.context=me,this.refs=A,this.updater=je||S}var W=z.prototype=new R;W.constructor=z,C(W,M.prototype),W.isPureReactComponent=!0;var G=Array.isArray,K=Object.prototype.hasOwnProperty,ee={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function P(X,me,je){var Ee,Re={},Ae=null,ge=null;if(me!=null)for(Ee in me.ref!==void 0&&(ge=me.ref),me.key!==void 0&&(Ae=""+me.key),me)K.call(me,Ee)&&!D.hasOwnProperty(Ee)&&(Re[Ee]=me[Ee]);var Be=arguments.length-2;if(Be===1)Re.children=je;else if(1<Be){for(var rt=Array(Be),it=0;it<Be;it++)rt[it]=arguments[it+2];Re.children=rt}if(X&&X.defaultProps)for(Ee in Be=X.defaultProps,Be)Re[Ee]===void 0&&(Re[Ee]=Be[Ee]);return{$$typeof:n,type:X,key:Ae,ref:ge,props:Re,_owner:ee.current}}function V(X,me){return{$$typeof:n,type:X.type,key:me,ref:X.ref,props:X.props,_owner:X._owner}}function B(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function U(X){var me={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(je){return me[je]})}var q=/\/+/g;function H(X,me){return typeof X=="object"&&X!==null&&X.key!=null?U(""+X.key):me.toString(36)}function se(X,me,je,Ee,Re){var Ae=typeof X;(Ae==="undefined"||Ae==="boolean")&&(X=null);var ge=!1;if(X===null)ge=!0;else switch(Ae){case"string":case"number":ge=!0;break;case"object":switch(X.$$typeof){case n:case e:ge=!0}}if(ge)return ge=X,Re=Re(ge),X=Ee===""?"."+H(ge,0):Ee,G(Re)?(je="",X!=null&&(je=X.replace(q,"$&/")+"/"),se(Re,me,je,"",function(it){return it})):Re!=null&&(B(Re)&&(Re=V(Re,je+(!Re.key||ge&&ge.key===Re.key?"":(""+Re.key).replace(q,"$&/")+"/")+X)),me.push(Re)),1;if(ge=0,Ee=Ee===""?".":Ee+":",G(X))for(var Be=0;Be<X.length;Be++){Ae=X[Be];var rt=Ee+H(Ae,Be);ge+=se(Ae,me,je,rt,Re)}else if(rt=j(X),typeof rt=="function")for(X=rt.call(X),Be=0;!(Ae=X.next()).done;)Ae=Ae.value,rt=Ee+H(Ae,Be++),ge+=se(Ae,me,je,rt,Re);else if(Ae==="object")throw me=String(X),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.");return ge}function be(X,me,je){if(X==null)return X;var Ee=[],Re=0;return se(X,Ee,"","",function(Ae){return me.call(je,Ae,Re++)}),Ee}function ie(X){if(X._status===-1){var me=X._result;me=me(),me.then(function(je){(X._status===0||X._status===-1)&&(X._status=1,X._result=je)},function(je){(X._status===0||X._status===-1)&&(X._status=2,X._result=je)}),X._status===-1&&(X._status=0,X._result=me)}if(X._status===1)return X._result.default;throw X._result}var we={current:null},Z={transition:null},ce={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:Z,ReactCurrentOwner:ee};function ue(){throw Error("act(...) is not supported in production builds of React.")}return yt.Children={map:be,forEach:function(X,me,je){be(X,function(){me.apply(this,arguments)},je)},count:function(X){var me=0;return be(X,function(){me++}),me},toArray:function(X){return be(X,function(me){return me})||[]},only:function(X){if(!B(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},yt.Component=M,yt.Fragment=t,yt.Profiler=i,yt.PureComponent=z,yt.StrictMode=r,yt.Suspense=m,yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,yt.act=ue,yt.cloneElement=function(X,me,je){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Ee=C({},X.props),Re=X.key,Ae=X.ref,ge=X._owner;if(me!=null){if(me.ref!==void 0&&(Ae=me.ref,ge=ee.current),me.key!==void 0&&(Re=""+me.key),X.type&&X.type.defaultProps)var Be=X.type.defaultProps;for(rt in me)K.call(me,rt)&&!D.hasOwnProperty(rt)&&(Ee[rt]=me[rt]===void 0&&Be!==void 0?Be[rt]:me[rt])}var rt=arguments.length-2;if(rt===1)Ee.children=je;else if(1<rt){Be=Array(rt);for(var it=0;it<rt;it++)Be[it]=arguments[it+2];Ee.children=Be}return{$$typeof:n,type:X.type,key:Re,ref:Ae,props:Ee,_owner:ge}},yt.createContext=function(X){return X={$$typeof:u,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:c,_context:X},X.Consumer=X},yt.createElement=P,yt.createFactory=function(X){var me=P.bind(null,X);return me.type=X,me},yt.createRef=function(){return{current:null}},yt.forwardRef=function(X){return{$$typeof:f,render:X}},yt.isValidElement=B,yt.lazy=function(X){return{$$typeof:w,_payload:{_status:-1,_result:X},_init:ie}},yt.memo=function(X,me){return{$$typeof:x,type:X,compare:me===void 0?null:me}},yt.startTransition=function(X){var me=Z.transition;Z.transition={};try{X()}finally{Z.transition=me}},yt.unstable_act=ue,yt.useCallback=function(X,me){return we.current.useCallback(X,me)},yt.useContext=function(X){return we.current.useContext(X)},yt.useDebugValue=function(){},yt.useDeferredValue=function(X){return we.current.useDeferredValue(X)},yt.useEffect=function(X,me){return we.current.useEffect(X,me)},yt.useId=function(){return we.current.useId()},yt.useImperativeHandle=function(X,me,je){return we.current.useImperativeHandle(X,me,je)},yt.useInsertionEffect=function(X,me){return we.current.useInsertionEffect(X,me)},yt.useLayoutEffect=function(X,me){return we.current.useLayoutEffect(X,me)},yt.useMemo=function(X,me){return we.current.useMemo(X,me)},yt.useReducer=function(X,me,je){return we.current.useReducer(X,me,je)},yt.useRef=function(X){return we.current.useRef(X)},yt.useState=function(X){return we.current.useState(X)},yt.useSyncExternalStore=function(X,me,je){return we.current.useSyncExternalStore(X,me,je)},yt.useTransition=function(){return we.current.useTransition()},yt.version="18.3.1",yt}var v_;function np(){return v_||(v_=1,px.exports=LA()),px.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function MA(){if(y_)return Fd;y_=1;var n=np(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(f,m,x){var w,y={},j=null,S=null;x!==void 0&&(j=""+x),m.key!==void 0&&(j=""+m.key),m.ref!==void 0&&(S=m.ref);for(w in m)r.call(m,w)&&!c.hasOwnProperty(w)&&(y[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)y[w]===void 0&&(y[w]=m[w]);return{$$typeof:e,type:f,key:j,ref:S,props:y,_owner:i.current}}return Fd.Fragment=t,Fd.jsx=u,Fd.jsxs=u,Fd}var w_;function DA(){return w_||(w_=1,mx.exports=MA()),mx.exports}var s=DA(),Hf={},gx={exports:{}},Hs={},xx={exports:{}},vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function OA(){return __||(__=1,(function(n){function e(Z,ce){var ue=Z.length;Z.push(ce);e:for(;0<ue;){var X=ue-1>>>1,me=Z[X];if(0<i(me,ce))Z[X]=ce,Z[ue]=me,ue=X;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ce=Z[0],ue=Z.pop();if(ue!==ce){Z[0]=ue;e:for(var X=0,me=Z.length,je=me>>>1;X<je;){var Ee=2*(X+1)-1,Re=Z[Ee],Ae=Ee+1,ge=Z[Ae];if(0>i(Re,ue))Ae<me&&0>i(ge,Re)?(Z[X]=ge,Z[Ae]=ue,X=Ae):(Z[X]=Re,Z[Ee]=ue,X=Ee);else if(Ae<me&&0>i(ge,ue))Z[X]=ge,Z[Ae]=ue,X=Ae;else break e}}return ce}function i(Z,ce){var ue=Z.sortIndex-ce.sortIndex;return ue!==0?ue:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],x=[],w=1,y=null,j=3,S=!1,C=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Z){for(var ce=t(x);ce!==null;){if(ce.callback===null)r(x);else if(ce.startTime<=Z)r(x),ce.sortIndex=ce.expirationTime,e(m,ce);else break;ce=t(x)}}function G(Z){if(A=!1,W(Z),!C)if(t(m)!==null)C=!0,ie(K);else{var ce=t(x);ce!==null&&we(G,ce.startTime-Z)}}function K(Z,ce){C=!1,A&&(A=!1,R(P),P=-1),S=!0;var ue=j;try{for(W(ce),y=t(m);y!==null&&(!(y.expirationTime>ce)||Z&&!U());){var X=y.callback;if(typeof X=="function"){y.callback=null,j=y.priorityLevel;var me=X(y.expirationTime<=ce);ce=n.unstable_now(),typeof me=="function"?y.callback=me:y===t(m)&&r(m),W(ce)}else r(m);y=t(m)}if(y!==null)var je=!0;else{var Ee=t(x);Ee!==null&&we(G,Ee.startTime-ce),je=!1}return je}finally{y=null,j=ue,S=!1}}var ee=!1,D=null,P=-1,V=5,B=-1;function U(){return!(n.unstable_now()-B<V)}function q(){if(D!==null){var Z=n.unstable_now();B=Z;var ce=!0;try{ce=D(!0,Z)}finally{ce?H():(ee=!1,D=null)}}else ee=!1}var H;if(typeof z=="function")H=function(){z(q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,be=se.port2;se.port1.onmessage=q,H=function(){be.postMessage(null)}}else H=function(){M(q,0)};function ie(Z){D=Z,ee||(ee=!0,H())}function we(Z,ce){P=M(function(){Z(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ie(K))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(Z){switch(j){case 1:case 2:case 3:var ce=3;break;default:ce=j}var ue=j;j=ce;try{return Z()}finally{j=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ue=j;j=Z;try{return ce()}finally{j=ue}},n.unstable_scheduleCallback=function(Z,ce,ue){var X=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?X+ue:X):ue=X,Z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ue+me,Z={id:w++,callback:ce,priorityLevel:Z,startTime:ue,expirationTime:me,sortIndex:-1},ue>X?(Z.sortIndex=ue,e(x,Z),t(m)===null&&Z===t(x)&&(A?(R(P),P=-1):A=!0,we(G,ue-X))):(Z.sortIndex=me,e(m,Z),C||S||(C=!0,ie(K))),Z},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Z){var ce=j;return function(){var ue=j;j=ce;try{return Z.apply(this,arguments)}finally{j=ue}}}})(vx)),vx}var b_;function FA(){return b_||(b_=1,xx.exports=OA()),xx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function VA(){if(N_)return Hs;N_=1;var n=np(),e=FA();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function c(a,l){u(a,l),u(a+"Capture",l)}function u(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},y={};function j(a){return m.call(y,a)?!0:m.call(w,a)?!1:x.test(a)?y[a]=!0:(w[a]=!0,!1)}function S(a,l,h,v){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return v?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function C(a,l,h,v){if(l===null||typeof l>"u"||S(a,l,h,v))return!0;if(v)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function A(a,l,h,v,N,E,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=v,this.attributeNamespace=N,this.mustUseProperty=h,this.propertyName=a,this.type=l,this.sanitizeURL=E,this.removeEmptyString=O}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new A(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];M[l]=new A(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new A(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new A(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new A(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new A(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new A(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new A(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new A(a,5,!1,a.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(R,z);M[l]=new A(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(R,z);M[l]=new A(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(R,z);M[l]=new A(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new A(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new A(a,1,!1,a.toLowerCase(),null,!0,!0)});function W(a,l,h,v){var N=M.hasOwnProperty(l)?M[l]:null;(N!==null?N.type!==0:v||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(C(l,h,N,v)&&(h=null),v||N===null?j(l)&&(h===null?a.removeAttribute(l):a.setAttribute(l,""+h)):N.mustUseProperty?a[N.propertyName]=h===null?N.type===3?!1:"":h:(l=N.attributeName,v=N.attributeNamespace,h===null?a.removeAttribute(l):(N=N.type,h=N===3||N===4&&h===!0?"":""+h,v?a.setAttributeNS(v,l,h):a.setAttribute(l,h))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ee=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ce(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var ue=Object.assign,X;function me(a){if(X===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+a}var je=!1;function Ee(a,l){if(!a||je)return"";je=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(fe){var v=fe}Reflect.construct(a,[],l)}else{try{l.call()}catch(fe){v=fe}a.call(l.prototype)}else{try{throw Error()}catch(fe){v=fe}a()}}catch(fe){if(fe&&v&&typeof fe.stack=="string"){for(var N=fe.stack.split(`
`),E=v.stack.split(`
`),O=N.length-1,Y=E.length-1;1<=O&&0<=Y&&N[O]!==E[Y];)Y--;for(;1<=O&&0<=Y;O--,Y--)if(N[O]!==E[Y]){if(O!==1||Y!==1)do if(O--,Y--,0>Y||N[O]!==E[Y]){var te=`
`+N[O].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=O&&0<=Y);break}}}finally{je=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?me(a):""}function Re(a){switch(a.tag){case 5:return me(a.type);case 16:return me("Lazy");case 13:return me("Suspense");case 19:return me("SuspenseList");case 0:case 2:case 15:return a=Ee(a.type,!1),a;case 11:return a=Ee(a.type.render,!1),a;case 1:return a=Ee(a.type,!0),a;default:return""}}function Ae(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case ee:return"Portal";case V:return"Profiler";case P:return"StrictMode";case H:return"Suspense";case se:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case U:return(a.displayName||"Context")+".Consumer";case B:return(a._context.displayName||"Context")+".Provider";case q:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case be:return l=a.displayName||null,l!==null?l:Ae(a.type)||"Memo";case ie:l=a._payload,a=a._init;try{return Ae(a(l))}catch{}}return null}function ge(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(l);case 8:return l===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Be(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function rt(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function it(a){var l=rt(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),v=""+a[l];if(!a.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var N=h.get,E=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return N.call(this)},set:function(O){v=""+O,E.call(this,O)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return v},setValue:function(O){v=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function xt(a){a._valueTracker||(a._valueTracker=it(a))}function wt(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var h=l.getValue(),v="";return a&&(v=rt(a)?a.checked?"true":"false":a.value),a=v,a!==h?(l.setValue(a),!0):!1}function Ht(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Xn(a,l){var h=l.checked;return ue({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function Kr(a,l){var h=l.defaultValue==null?"":l.defaultValue,v=l.checked!=null?l.checked:l.defaultChecked;h=Be(l.value!=null?l.value:h),a._wrapperState={initialChecked:v,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ks(a,l){l=l.checked,l!=null&&W(a,"checked",l,!1)}function ps(a,l){Ks(a,l);var h=Be(l.value),v=l.type;if(h!=null)v==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(v==="submit"||v==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?dn(a,l.type,h):l.hasOwnProperty("defaultValue")&&dn(a,l.type,Be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function gi(a,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var v=l.type;if(!(v!=="submit"&&v!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,h||l===a.value||(a.value=l),a.defaultValue=l}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function dn(a,l,h){(l!=="number"||Ht(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var Zt=Array.isArray;function gs(a,l,h,v){if(a=a.options,l){l={};for(var N=0;N<h.length;N++)l["$"+h[N]]=!0;for(h=0;h<a.length;h++)N=l.hasOwnProperty("$"+a[h].value),a[h].selected!==N&&(a[h].selected=N),N&&v&&(a[h].defaultSelected=!0)}else{for(h=""+Be(h),l=null,N=0;N<a.length;N++){if(a[N].value===h){a[N].selected=!0,v&&(a[N].defaultSelected=!0);return}l!==null||a[N].disabled||(l=a[N])}l!==null&&(l.selected=!0)}}function io(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ao(a,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(Zt(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}a._wrapperState={initialValue:Be(h)}}function kc(a,l){var h=Be(l.value),v=Be(l.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),l.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),v!=null&&(a.defaultValue=""+v)}function xi(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function ia(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aa(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?ia(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Zr,Pc=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,v,N){MSApp.execUnsafeLocalFunction(function(){return a(l,h,v,N)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Zr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function vi(a,l){if(l){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=l;return}}a.textContent=l}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ic=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(a){Ic.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Yr[l]=Yr[a]})});function Qr(a,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Yr.hasOwnProperty(a)&&Yr[a]?(""+l).trim():l+"px"}function yi(a,l){a=a.style;for(var h in l)if(l.hasOwnProperty(h)){var v=h.indexOf("--")===0,N=Qr(h,l[h],v);h==="float"&&(h="cssFloat"),v?a.setProperty(h,N):a[h]=N}}var oo=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zs(a,l){if(l){if(oo[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function mr(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wi=null;function lo(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var pr=null,gr=null,Wt=null;function El(a){if(a=Ta(a)){if(typeof pr!="function")throw Error(t(280));var l=a.stateNode;l&&(l=Zc(l),pr(a.stateNode,a.type,l))}}function _i(a){gr?Wt?Wt.push(a):Wt=[a]:gr=a}function bi(){if(gr){var a=gr,l=Wt;if(Wt=gr=null,El(a),l)for(a=0;a<l.length;a++)El(l[a])}}function Rc(a,l){return a(l)}function Lc(){}var xr=!1;function co(a,l,h){if(xr)return a(l,h);xr=!0;try{return Rc(a,l,h)}finally{xr=!1,(gr!==null||Wt!==null)&&(Lc(),bi())}}function oa(a,l){var h=a.stateNode;if(h===null)return null;var v=Zc(h);if(v===null)return null;h=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(a=a.type,v=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!v;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var Ni=!1;if(f)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Ni=!1}function Mc(a,l,h,v,N,E,O,Y,te){var fe=Array.prototype.slice.call(arguments,3);try{l.apply(h,fe)}catch(Ne){this.onError(Ne)}}var xn=!1,$e=null,la=!1,xs=null,Tl={onError:function(a){xn=!0,$e=a}};function Al(a,l,h,v,N,E,O,Y,te){xn=!1,$e=null,Mc.apply(Tl,arguments)}function ca(a,l,h,v,N,E,O,Y,te){if(Al.apply(this,arguments),xn){if(xn){var fe=$e;xn=!1,$e=null}else throw Error(t(198));la||(la=!0,xs=fe)}}function Rs(a){var l=a,h=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(h=l.return),a=l.return;while(a)}return l.tag===3?h:null}function vr(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function kl(a){if(Rs(a)!==a)throw Error(t(188))}function Dc(a){var l=a.alternate;if(!l){if(l=Rs(a),l===null)throw Error(t(188));return l!==a?null:a}for(var h=a,v=l;;){var N=h.return;if(N===null)break;var E=N.alternate;if(E===null){if(v=N.return,v!==null){h=v;continue}break}if(N.child===E.child){for(E=N.child;E;){if(E===h)return kl(N),a;if(E===v)return kl(N),l;E=E.sibling}throw Error(t(188))}if(h.return!==v.return)h=N,v=E;else{for(var O=!1,Y=N.child;Y;){if(Y===h){O=!0,h=N,v=E;break}if(Y===v){O=!0,v=N,h=E;break}Y=Y.sibling}if(!O){for(Y=E.child;Y;){if(Y===h){O=!0,h=E,v=N;break}if(Y===v){O=!0,v=E,h=N;break}Y=Y.sibling}if(!O)throw Error(t(189))}}if(h.alternate!==v)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?a:l}function Oc(a){return a=Dc(a),a!==null?ua(a):null}function ua(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=ua(a);if(l!==null)return l;a=a.sibling}return null}var Pl=e.unstable_scheduleCallback,da=e.unstable_cancelCallback,ha=e.unstable_shouldYield,Ls=e.unstable_requestPaint,zt=e.unstable_now,dd=e.unstable_getCurrentPriorityLevel,uo=e.unstable_ImmediatePriority,Il=e.unstable_UserBlockingPriority,fa=e.unstable_NormalPriority,ma=e.unstable_LowPriority,yr=e.unstable_IdlePriority,Ci=null,Jn=null;function Si(a){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Ci,a,void 0,(a.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:Ms,Tt=Math.log,$n=Math.LN2;function Ms(a){return a>>>=0,a===0?32:31-(Tt(a)/$n|0)|0}var Hn=64,wr=4194304;function Ve(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Mt(a,l){var h=a.pendingLanes;if(h===0)return 0;var v=0,N=a.suspendedLanes,E=a.pingedLanes,O=h&268435455;if(O!==0){var Y=O&~N;Y!==0?v=Ve(Y):(E&=O,E!==0&&(v=Ve(E)))}else O=h&~N,O!==0?v=Ve(O):E!==0&&(v=Ve(E));if(v===0)return 0;if(l!==0&&l!==v&&(l&N)===0&&(N=v&-v,E=l&-l,N>=E||N===16&&(E&4194240)!==0))return l;if((v&4)!==0&&(v|=h&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=v;0<l;)h=31-dt(l),N=1<<h,v|=a[h],l&=~N;return v}function Xr(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _r(a,l){for(var h=a.suspendedLanes,v=a.pingedLanes,N=a.expirationTimes,E=a.pendingLanes;0<E;){var O=31-dt(E),Y=1<<O,te=N[O];te===-1?((Y&h)===0||(Y&v)!==0)&&(N[O]=Xr(Y,l)):te<=l&&(a.expiredLanes|=Y),E&=~Y}}function Mn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Rl(){var a=Hn;return Hn<<=1,(Hn&4194240)===0&&(Hn=64),a}function Ei(a){for(var l=[],h=0;31>h;h++)l.push(a);return l}function vs(a,l,h){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-dt(l),a[l]=h}function Yt(a,l){var h=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var v=a.eventTimes;for(a=a.expirationTimes;0<h;){var N=31-dt(h),E=1<<N;l[N]=0,v[N]=-1,a[N]=-1,h&=~E}}function Ys(a,l){var h=a.entangledLanes|=l;for(a=a.entanglements;h;){var v=31-dt(h),N=1<<v;N&l|a[v]&l&&(a[v]|=l),h&=~N}}var pt=0;function es(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var pa,br,ga,xa,Ti,Ds=!1,Ai=[],ys=null,Qs=null,fn=null,va=new Map,tt=new Map,Qt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jr(a,l){switch(a){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":va.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":tt.delete(l.pointerId)}}function ws(a,l,h,v,N,E){return a===null||a.nativeEvent!==E?(a={blockedOn:l,domEventName:h,eventSystemFlags:v,nativeEvent:E,targetContainers:[N]},l!==null&&(l=Ta(l),l!==null&&br(l)),a):(a.eventSystemFlags|=v,l=a.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),a)}function ho(a,l,h,v,N){switch(l){case"focusin":return ys=ws(ys,a,l,h,v,N),!0;case"dragenter":return Qs=ws(Qs,a,l,h,v,N),!0;case"mouseover":return fn=ws(fn,a,l,h,v,N),!0;case"pointerover":var E=N.pointerId;return va.set(E,ws(va.get(E)||null,a,l,h,v,N)),!0;case"gotpointercapture":return E=N.pointerId,tt.set(E,ws(tt.get(E)||null,a,l,h,v,N)),!0}return!1}function ki(a){var l=Ea(a.target);if(l!==null){var h=Rs(l);if(h!==null){if(l=h.tag,l===13){if(l=vr(h),l!==null){a.blockedOn=l,Ti(a.priority,function(){ga(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function St(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var h=_a(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var v=new h.constructor(h.type,h);wi=v,h.target.dispatchEvent(v),wi=null}else return l=Ta(h),l!==null&&br(l),a.blockedOn=h,!1;l.shift()}return!0}function fo(a,l,h){St(a)&&h.delete(l)}function ya(){Ds=!1,ys!==null&&St(ys)&&(ys=null),Qs!==null&&St(Qs)&&(Qs=null),fn!==null&&St(fn)&&(fn=null),va.forEach(fo),tt.forEach(fo)}function Ut(a,l){a.blockedOn===l&&(a.blockedOn=null,Ds||(Ds=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ya)))}function ts(a){function l(N){return Ut(N,a)}if(0<Ai.length){Ut(Ai[0],a);for(var h=1;h<Ai.length;h++){var v=Ai[h];v.blockedOn===a&&(v.blockedOn=null)}}for(ys!==null&&Ut(ys,a),Qs!==null&&Ut(Qs,a),fn!==null&&Ut(fn,a),va.forEach(l),tt.forEach(l),h=0;h<Qt.length;h++)v=Qt[h],v.blockedOn===a&&(v.blockedOn=null);for(;0<Qt.length&&(h=Qt[0],h.blockedOn===null);)ki(h),h.blockedOn===null&&Qt.shift()}var Nr=G.ReactCurrentBatchConfig,jr=!0;function Cr(a,l,h,v){var N=pt,E=Nr.transition;Nr.transition=null;try{pt=1,wa(a,l,h,v)}finally{pt=N,Nr.transition=E}}function Ll(a,l,h,v){var N=pt,E=Nr.transition;Nr.transition=null;try{pt=4,wa(a,l,h,v)}finally{pt=N,Nr.transition=E}}function wa(a,l,h,v){if(jr){var N=_a(a,l,h,v);if(N===null)o(a,l,v,Sr,h),Jr(a,v);else if(ho(N,a,l,h,v))v.stopPropagation();else if(Jr(a,v),l&4&&-1<Dt.indexOf(a)){for(;N!==null;){var E=Ta(N);if(E!==null&&pa(E),E=_a(a,l,h,v),E===null&&o(a,l,v,Sr,h),E===N)break;N=E}N!==null&&v.stopPropagation()}else o(a,l,v,null,h)}}var Sr=null;function _a(a,l,h,v){if(Sr=null,a=lo(v),a=Ea(a),a!==null)if(l=Rs(a),l===null)a=null;else if(h=l.tag,h===13){if(a=vr(l),a!==null)return a;a=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Sr=a,null}function gt(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dd()){case uo:return 1;case Il:return 4;case fa:case ma:return 16;case yr:return 536870912;default:return 16}default:return 16}}var _s=null,Dn=null,bs=null;function Ml(){if(bs)return bs;var a,l=Dn,h=l.length,v,N="value"in _s?_s.value:_s.textContent,E=N.length;for(a=0;a<h&&l[a]===N[a];a++);var O=h-a;for(v=1;v<=O&&l[h-v]===N[E-v];v++);return bs=N.slice(a,1<v?1-v:void 0)}function ba(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Os(){return!0}function Dl(){return!1}function Sn(a){function l(h,v,N,E,O){this._reactName=h,this._targetInst=N,this.type=v,this.nativeEvent=E,this.target=O,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(h=a[Y],this[Y]=h?h(E):E[Y]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Os:Dl,this.isPropagationStopped=Dl,this}return ue(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),l}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Sn(Er),Tr=ue({},Er,{view:0,detail:0}),mo=Sn(Tr),Wn,po,ns,ss=ue({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:at,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ns&&(ns&&a.type==="mousemove"?(Wn=a.screenX-ns.screenX,po=a.screenY-ns.screenY):po=Wn=0,ns=a),Wn)},movementY:function(a){return"movementY"in a?a.movementY:po}}),go=Sn(ss),Ol=ue({},ss,{dataTransfer:0}),xo=Sn(Ol),vo=ue({},Tr,{relatedTarget:0}),vn=Sn(vo),Fl=ue({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=Sn(Fl),Pi=ue({},Er,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),p=Sn(Pi),T=ue({},Er,{data:0}),I=Sn(T),$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},re={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},de={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=de[a])?!!l[a]:!1}function at(){return Pe}var At=ue({},Tr,{key:function(a){if(a.key){var l=$[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ba(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?re[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:at,charCode:function(a){return a.type==="keypress"?ba(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ba(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rt=Sn(At),en=ue({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ns=Sn(en),Xs=ue({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:at}),Fs=Sn(Xs),Ar=ue({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),yo=Sn(Ar),wo=ue({},ss,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),rg=Sn(wo),Js=[9,13,27,32],Ii=f&&"CompositionEvent"in window,Vl=null;f&&"documentMode"in document&&(Vl=document.documentMode);var ei=f&&"TextEvent"in window&&!Vl,qh=f&&(!Ii||Vl&&8<Vl&&11>=Vl),ja=" ",Gh=!1;function _o(a,l){switch(a){case"keyup":return Js.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ti=!1;function ig(a,l){switch(a){case"compositionend":return hd(l);case"keypress":return l.which!==32?null:(Gh=!0,ja);case"textInput":return a=l.data,a===ja&&Gh?null:a;default:return null}}function Ri(a,l){if(ti)return a==="compositionend"||!Ii&&_o(a,l)?(a=Ml(),bs=Dn=_s=null,ti=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return qh&&l.locale!=="ko"?null:l.data;default:return null}}var Vc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Vc[a.type]:l==="textarea"}function Bc(a,l,h,v){_i(v),l=g(l,"onChange"),0<l.length&&(h=new Na("onChange","change",null,h,v),a.push({event:h,listeners:l}))}var Bl=null,js=null;function ag(a){_d(a,0)}function ni(a){var l=Aa(a);if(wt(l))return a}function og(a,l){if(a==="change")return l}var kr=!1;if(f){var bo;if(f){var zc="oninput"in document;if(!zc){var Uc=document.createElement("div");Uc.setAttribute("oninput","return;"),zc=typeof Uc.oninput=="function"}bo=zc}else bo=!1;kr=bo&&(!document.documentMode||9<document.documentMode)}function zl(){Bl&&(Bl.detachEvent("onpropertychange",$c),js=Bl=null)}function $c(a){if(a.propertyName==="value"&&ni(js)){var l=[];Bc(l,js,a,lo(a)),co(ag,l)}}function Hc(a,l,h){a==="focusin"?(zl(),Bl=l,js=h,Bl.attachEvent("onpropertychange",$c)):a==="focusout"&&zl()}function No(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ni(js)}function Wc(a,l){if(a==="click")return ni(l)}function fd(a,l){if(a==="input"||a==="change")return ni(l)}function Zh(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var er=typeof Object.is=="function"?Object.is:Zh;function Li(a,l){if(er(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var h=Object.keys(a),v=Object.keys(l);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var N=h[v];if(!m.call(l,N)||!er(a[N],l[N]))return!1}return!0}function Yh(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function md(a,l){var h=Yh(a);a=0;for(var v;h;){if(h.nodeType===3){if(v=a+h.textContent.length,a<=l&&v>=l)return{node:h,offset:l-a};a=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Yh(h)}}function Qh(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Qh(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function pd(){for(var a=window,l=Ht();l instanceof a.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)a=l.contentWindow;else break;l=Ht(a.document)}return l}function gd(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Pr(a){var l=pd(),h=a.focusedElem,v=a.selectionRange;if(l!==h&&h&&h.ownerDocument&&Qh(h.ownerDocument.documentElement,h)){if(v!==null&&gd(h)){if(l=v.start,a=v.end,a===void 0&&(a=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(a,h.value.length);else if(a=(l=h.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var N=h.textContent.length,E=Math.min(v.start,N);v=v.end===void 0?E:Math.min(v.end,N),!a.extend&&E>v&&(N=v,v=E,E=N),N=md(h,E);var O=md(h,v);N&&O&&(a.rangeCount!==1||a.anchorNode!==N.node||a.anchorOffset!==N.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),a.removeAllRanges(),E>v?(a.addRange(l),a.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),a.addRange(l)))}}for(l=[],a=h;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)a=l[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var qc=f&&"documentMode"in document&&11>=document.documentMode,jo=null,Co=null,Ul=null,Gc=!1;function Xh(a,l,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Gc||jo==null||jo!==Ht(v)||(v=jo,"selectionStart"in v&&gd(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ul&&Li(Ul,v)||(Ul=v,v=g(Co,"onSelect"),0<v.length&&(l=new Na("onSelect","select",null,l,h),a.push({event:l,listeners:v}),l.target=jo)))}function Mi(a,l){var h={};return h[a.toLowerCase()]=l.toLowerCase(),h["Webkit"+a]="webkit"+l,h["Moz"+a]="moz"+l,h}var So={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},Di={},xd={};f&&(xd=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function $l(a){if(Di[a])return Di[a];if(!So[a])return a;var l=So[a],h;for(h in l)if(l.hasOwnProperty(h)&&h in xd)return Di[a]=l[h];return a}var Jh=$l("animationend"),Ir=$l("animationiteration"),vd=$l("animationstart"),yd=$l("transitionend"),Eo=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(a,l){Eo.set(a,l),c(l,[a])}for(var Ca=0;Ca<ef.length;Ca++){var Kc=ef[Ca],tf=Kc.toLowerCase(),lg=Kc[0].toUpperCase()+Kc.slice(1);tr(tf,"on"+lg)}tr(Jh,"onAnimationEnd"),tr(Ir,"onAnimationIteration"),tr(vd,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(yd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nf=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function wd(a,l,h){var v=a.type||"unknown-event";a.currentTarget=h,ca(v,l,void 0,a),a.currentTarget=null}function _d(a,l){l=(l&4)!==0;for(var h=0;h<a.length;h++){var v=a[h],N=v.event;v=v.listeners;e:{var E=void 0;if(l)for(var O=v.length-1;0<=O;O--){var Y=v[O],te=Y.instance,fe=Y.currentTarget;if(Y=Y.listener,te!==E&&N.isPropagationStopped())break e;wd(N,Y,fe),E=te}else for(O=0;O<v.length;O++){if(Y=v[O],te=Y.instance,fe=Y.currentTarget,Y=Y.listener,te!==E&&N.isPropagationStopped())break e;wd(N,Y,fe),E=te}}}if(la)throw a=xs,la=!1,xs=null,a}function Vt(a,l){var h=l[Io];h===void 0&&(h=l[Io]=new Set);var v=a+"__bubble";h.has(v)||(sf(l,a,2,!1),h.add(v))}function bd(a,l,h){var v=0;l&&(v|=4),sf(h,a,v,l)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Ao(a){if(!a[Hl]){a[Hl]=!0,r.forEach(function(h){h!=="selectionchange"&&(nf.has(h)||bd(h,!1,a),bd(h,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Hl]||(l[Hl]=!0,bd("selectionchange",!1,l))}}function sf(a,l,h,v){switch(gt(l)){case 1:var N=Cr;break;case 4:N=Ll;break;default:N=wa}h=N.bind(null,l,h,a),N=void 0,!Ni||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),v?N!==void 0?a.addEventListener(l,h,{capture:!0,passive:N}):a.addEventListener(l,h,!0):N!==void 0?a.addEventListener(l,h,{passive:N}):a.addEventListener(l,h,!1)}function o(a,l,h,v,N){var E=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var O=v.tag;if(O===3||O===4){var Y=v.stateNode.containerInfo;if(Y===N||Y.nodeType===8&&Y.parentNode===N)break;if(O===4)for(O=v.return;O!==null;){var te=O.tag;if((te===3||te===4)&&(te=O.stateNode.containerInfo,te===N||te.nodeType===8&&te.parentNode===N))return;O=O.return}for(;Y!==null;){if(O=Ea(Y),O===null)return;if(te=O.tag,te===5||te===6){v=E=O;continue e}Y=Y.parentNode}}v=v.return}co(function(){var fe=E,Ne=lo(h),Ce=[];e:{var _e=Eo.get(a);if(_e!==void 0){var ze=Na,We=a;switch(a){case"keypress":if(ba(h)===0)break e;case"keydown":case"keyup":ze=Rt;break;case"focusin":We="focus",ze=vn;break;case"focusout":We="blur",ze=vn;break;case"beforeblur":case"afterblur":ze=vn;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=xo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=Fs;break;case Jh:case Ir:case vd:ze=Fc;break;case yd:ze=yo;break;case"scroll":ze=mo;break;case"wheel":ze=rg;break;case"copy":case"cut":case"paste":ze=p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Ns}var Ke=(l&4)!==0,mn=!Ke&&a==="scroll",oe=Ke?_e!==null?_e+"Capture":null:_e;Ke=[];for(var ne=fe,le;ne!==null;){le=ne;var Te=le.stateNode;if(le.tag===5&&Te!==null&&(le=Te,oe!==null&&(Te=oa(ne,oe),Te!=null&&Ke.push(d(ne,Te,le)))),mn)break;ne=ne.return}0<Ke.length&&(_e=new ze(_e,We,null,h,Ne),Ce.push({event:_e,listeners:Ke}))}}if((l&7)===0){e:{if(_e=a==="mouseover"||a==="pointerover",ze=a==="mouseout"||a==="pointerout",_e&&h!==wi&&(We=h.relatedTarget||h.fromElement)&&(Ea(We)||We[Ft]))break e;if((ze||_e)&&(_e=Ne.window===Ne?Ne:(_e=Ne.ownerDocument)?_e.defaultView||_e.parentWindow:window,ze?(We=h.relatedTarget||h.toElement,ze=fe,We=We?Ea(We):null,We!==null&&(mn=Rs(We),We!==mn||We.tag!==5&&We.tag!==6)&&(We=null)):(ze=null,We=fe),ze!==We)){if(Ke=go,Te="onMouseLeave",oe="onMouseEnter",ne="mouse",(a==="pointerout"||a==="pointerover")&&(Ke=Ns,Te="onPointerLeave",oe="onPointerEnter",ne="pointer"),mn=ze==null?_e:Aa(ze),le=We==null?_e:Aa(We),_e=new Ke(Te,ne+"leave",ze,h,Ne),_e.target=mn,_e.relatedTarget=le,Te=null,Ea(Ne)===fe&&(Ke=new Ke(oe,ne+"enter",We,h,Ne),Ke.target=le,Ke.relatedTarget=mn,Te=Ke),mn=Te,ze&&We)t:{for(Ke=ze,oe=We,ne=0,le=Ke;le;le=b(le))ne++;for(le=0,Te=oe;Te;Te=b(Te))le++;for(;0<ne-le;)Ke=b(Ke),ne--;for(;0<le-ne;)oe=b(oe),le--;for(;ne--;){if(Ke===oe||oe!==null&&Ke===oe.alternate)break t;Ke=b(Ke),oe=b(oe)}Ke=null}else Ke=null;ze!==null&&k(Ce,_e,ze,Ke,!1),We!==null&&mn!==null&&k(Ce,mn,We,Ke,!0)}}e:{if(_e=fe?Aa(fe):window,ze=_e.nodeName&&_e.nodeName.toLowerCase(),ze==="select"||ze==="input"&&_e.type==="file")var Ze=og;else if(Kh(_e))if(kr)Ze=fd;else{Ze=No;var nt=Hc}else(ze=_e.nodeName)&&ze.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Ze=Wc);if(Ze&&(Ze=Ze(a,fe))){Bc(Ce,Ze,h,Ne);break e}nt&&nt(a,_e,fe),a==="focusout"&&(nt=_e._wrapperState)&&nt.controlled&&_e.type==="number"&&dn(_e,"number",_e.value)}switch(nt=fe?Aa(fe):window,a){case"focusin":(Kh(nt)||nt.contentEditable==="true")&&(jo=nt,Co=fe,Ul=null);break;case"focusout":Ul=Co=jo=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,Xh(Ce,h,Ne);break;case"selectionchange":if(qc)break;case"keydown":case"keyup":Xh(Ce,h,Ne)}var st;if(Ii)e:{switch(a){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else ti?_o(a,h)&&(ut="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(ut="onCompositionStart");ut&&(qh&&h.locale!=="ko"&&(ti||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&ti&&(st=Ml()):(_s=Ne,Dn="value"in _s?_s.value:_s.textContent,ti=!0)),nt=g(fe,ut),0<nt.length&&(ut=new I(ut,a,null,h,Ne),Ce.push({event:ut,listeners:nt}),st?ut.data=st:(st=hd(h),st!==null&&(ut.data=st)))),(st=ei?ig(a,h):Ri(a,h))&&(fe=g(fe,"onBeforeInput"),0<fe.length&&(Ne=new I("onBeforeInput","beforeinput",null,h,Ne),Ce.push({event:Ne,listeners:fe}),Ne.data=st))}_d(Ce,l)})}function d(a,l,h){return{instance:a,listener:l,currentTarget:h}}function g(a,l){for(var h=l+"Capture",v=[];a!==null;){var N=a,E=N.stateNode;N.tag===5&&E!==null&&(N=E,E=oa(a,h),E!=null&&v.unshift(d(a,E,N)),E=oa(a,l),E!=null&&v.push(d(a,E,N))),a=a.return}return v}function b(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function k(a,l,h,v,N){for(var E=l._reactName,O=[];h!==null&&h!==v;){var Y=h,te=Y.alternate,fe=Y.stateNode;if(te!==null&&te===v)break;Y.tag===5&&fe!==null&&(Y=fe,N?(te=oa(h,E),te!=null&&O.unshift(d(h,te,Y))):N||(te=oa(h,E),te!=null&&O.push(d(h,te,Y)))),h=h.return}O.length!==0&&a.push({event:l,listeners:O})}var F=/\r\n?/g,Q=/\u0000|\uFFFD/g;function ae(a){return(typeof a=="string"?a:""+a).replace(F,`
`).replace(Q,"")}function he(a,l,h){if(l=ae(l),ae(a)!==l&&h)throw Error(t(425))}function ye(){}var Fe=null,Je=null;function mt(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var En=typeof setTimeout=="function"?setTimeout:void 0,yn=typeof clearTimeout=="function"?clearTimeout:void 0,Cs=typeof Promise=="function"?Promise:void 0,rs=typeof queueMicrotask=="function"?queueMicrotask:typeof Cs<"u"?function(a){return Cs.resolve(null).then(a).catch(ko)}:En;function ko(a){setTimeout(function(){throw a})}function Nd(a,l){var h=l,v=0;do{var N=h.nextSibling;if(a.removeChild(h),N&&N.nodeType===8)if(h=N.data,h==="/$"){if(v===0){a.removeChild(N),ts(l);return}v--}else h!=="$"&&h!=="$?"&&h!=="$!"||v++;h=N}while(h);ts(l)}function Oi(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function rf(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return a;l--}else h==="/$"&&l++}a=a.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),Rr="__reactFiber$"+Sa,Po="__reactProps$"+Sa,Ft="__reactContainer$"+Sa,Io="__reactEvents$"+Sa,cg="__reactListeners$"+Sa,ug="__reactHandles$"+Sa;function Ea(a){var l=a[Rr];if(l)return l;for(var h=a.parentNode;h;){if(l=h[Ft]||h[Rr]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(a=rf(a);a!==null;){if(h=a[Rr])return h;a=rf(a)}return l}a=h,h=a.parentNode}return null}function Ta(a){return a=a[Rr]||a[Ft],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Aa(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Zc(a){return a[Po]||null}var dg=[],Yc=-1;function Ro(a){return{current:a}}function qt(a){0>Yc||(a.current=dg[Yc],dg[Yc]=null,Yc--)}function $t(a,l){Yc++,dg[Yc]=a.current,a.current=l}var Lo={},is=Ro(Lo),Vs=Ro(!1),Wl=Lo;function Qc(a,l){var h=a.type.contextTypes;if(!h)return Lo;var v=a.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===l)return v.__reactInternalMemoizedMaskedChildContext;var N={},E;for(E in h)N[E]=l[E];return v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=N),N}function Bs(a){return a=a.childContextTypes,a!=null}function af(){qt(Vs),qt(is)}function V0(a,l,h){if(is.current!==Lo)throw Error(t(168));$t(is,l),$t(Vs,h)}function B0(a,l,h){var v=a.stateNode;if(l=l.childContextTypes,typeof v.getChildContext!="function")return h;v=v.getChildContext();for(var N in v)if(!(N in l))throw Error(t(108,ge(a)||"Unknown",N));return ue({},h,v)}function of(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Lo,Wl=is.current,$t(is,a),$t(Vs,Vs.current),!0}function z0(a,l,h){var v=a.stateNode;if(!v)throw Error(t(169));h?(a=B0(a,l,Wl),v.__reactInternalMemoizedMergedChildContext=a,qt(Vs),qt(is),$t(is,a)):qt(Vs),$t(Vs,h)}var ka=null,lf=!1,hg=!1;function U0(a){ka===null?ka=[a]:ka.push(a)}function XT(a){lf=!0,U0(a)}function Mo(){if(!hg&&ka!==null){hg=!0;var a=0,l=pt;try{var h=ka;for(pt=1;a<h.length;a++){var v=h[a];do v=v(!0);while(v!==null)}ka=null,lf=!1}catch(N){throw ka!==null&&(ka=ka.slice(a+1)),Pl(uo,Mo),N}finally{pt=l,hg=!1}}return null}var Xc=[],Jc=0,cf=null,uf=0,Lr=[],Mr=0,ql=null,Pa=1,Ia="";function Gl(a,l){Xc[Jc++]=uf,Xc[Jc++]=cf,cf=a,uf=l}function $0(a,l,h){Lr[Mr++]=Pa,Lr[Mr++]=Ia,Lr[Mr++]=ql,ql=a;var v=Pa;a=Ia;var N=32-dt(v)-1;v&=~(1<<N),h+=1;var E=32-dt(l)+N;if(30<E){var O=N-N%5;E=(v&(1<<O)-1).toString(32),v>>=O,N-=O,Pa=1<<32-dt(l)+N|h<<N|v,Ia=E+a}else Pa=1<<E|h<<N|v,Ia=a}function fg(a){a.return!==null&&(Gl(a,1),$0(a,1,0))}function mg(a){for(;a===cf;)cf=Xc[--Jc],Xc[Jc]=null,uf=Xc[--Jc],Xc[Jc]=null;for(;a===ql;)ql=Lr[--Mr],Lr[Mr]=null,Ia=Lr[--Mr],Lr[Mr]=null,Pa=Lr[--Mr],Lr[Mr]=null}var nr=null,sr=null,Xt=!1,si=null;function H0(a,l){var h=Vr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=a,l=a.deletions,l===null?(a.deletions=[h],a.flags|=16):l.push(h)}function W0(a,l){switch(a.tag){case 5:var h=a.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,nr=a,sr=Oi(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,nr=a,sr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=ql!==null?{id:Pa,overflow:Ia}:null,a.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Vr(18,null,null,0),h.stateNode=l,h.return=a,a.child=h,nr=a,sr=null,!0):!1;default:return!1}}function pg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function gg(a){if(Xt){var l=sr;if(l){var h=l;if(!W0(a,l)){if(pg(a))throw Error(t(418));l=Oi(h.nextSibling);var v=nr;l&&W0(a,l)?H0(v,h):(a.flags=a.flags&-4097|2,Xt=!1,nr=a)}}else{if(pg(a))throw Error(t(418));a.flags=a.flags&-4097|2,Xt=!1,nr=a}}}function q0(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;nr=a}function df(a){if(a!==nr)return!1;if(!Xt)return q0(a),Xt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!mt(a.type,a.memoizedProps)),l&&(l=sr)){if(pg(a))throw G0(),Error(t(418));for(;l;)H0(a,l),l=Oi(l.nextSibling)}if(q0(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(l===0){sr=Oi(a.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}a=a.nextSibling}sr=null}}else sr=nr?Oi(a.stateNode.nextSibling):null;return!0}function G0(){for(var a=sr;a;)a=Oi(a.nextSibling)}function eu(){sr=nr=null,Xt=!1}function xg(a){si===null?si=[a]:si.push(a)}var JT=G.ReactCurrentBatchConfig;function jd(a,l,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var v=h.stateNode}if(!v)throw Error(t(147,a));var N=v,E=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(O){var Y=N.refs;O===null?delete Y[E]:Y[E]=O},l._stringRef=E,l)}if(typeof a!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,a))}return a}function hf(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function K0(a){var l=a._init;return l(a._payload)}function Z0(a){function l(oe,ne){if(a){var le=oe.deletions;le===null?(oe.deletions=[ne],oe.flags|=16):le.push(ne)}}function h(oe,ne){if(!a)return null;for(;ne!==null;)l(oe,ne),ne=ne.sibling;return null}function v(oe,ne){for(oe=new Map;ne!==null;)ne.key!==null?oe.set(ne.key,ne):oe.set(ne.index,ne),ne=ne.sibling;return oe}function N(oe,ne){return oe=$o(oe,ne),oe.index=0,oe.sibling=null,oe}function E(oe,ne,le){return oe.index=le,a?(le=oe.alternate,le!==null?(le=le.index,le<ne?(oe.flags|=2,ne):le):(oe.flags|=2,ne)):(oe.flags|=1048576,ne)}function O(oe){return a&&oe.alternate===null&&(oe.flags|=2),oe}function Y(oe,ne,le,Te){return ne===null||ne.tag!==6?(ne=lx(le,oe.mode,Te),ne.return=oe,ne):(ne=N(ne,le),ne.return=oe,ne)}function te(oe,ne,le,Te){var Ze=le.type;return Ze===D?Ne(oe,ne,le.props.children,Te,le.key):ne!==null&&(ne.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===ie&&K0(Ze)===ne.type)?(Te=N(ne,le.props),Te.ref=jd(oe,ne,le),Te.return=oe,Te):(Te=Df(le.type,le.key,le.props,null,oe.mode,Te),Te.ref=jd(oe,ne,le),Te.return=oe,Te)}function fe(oe,ne,le,Te){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==le.containerInfo||ne.stateNode.implementation!==le.implementation?(ne=cx(le,oe.mode,Te),ne.return=oe,ne):(ne=N(ne,le.children||[]),ne.return=oe,ne)}function Ne(oe,ne,le,Te,Ze){return ne===null||ne.tag!==7?(ne=tc(le,oe.mode,Te,Ze),ne.return=oe,ne):(ne=N(ne,le),ne.return=oe,ne)}function Ce(oe,ne,le){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=lx(""+ne,oe.mode,le),ne.return=oe,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case K:return le=Df(ne.type,ne.key,ne.props,null,oe.mode,le),le.ref=jd(oe,null,ne),le.return=oe,le;case ee:return ne=cx(ne,oe.mode,le),ne.return=oe,ne;case ie:var Te=ne._init;return Ce(oe,Te(ne._payload),le)}if(Zt(ne)||ce(ne))return ne=tc(ne,oe.mode,le,null),ne.return=oe,ne;hf(oe,ne)}return null}function _e(oe,ne,le,Te){var Ze=ne!==null?ne.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Ze!==null?null:Y(oe,ne,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case K:return le.key===Ze?te(oe,ne,le,Te):null;case ee:return le.key===Ze?fe(oe,ne,le,Te):null;case ie:return Ze=le._init,_e(oe,ne,Ze(le._payload),Te)}if(Zt(le)||ce(le))return Ze!==null?null:Ne(oe,ne,le,Te,null);hf(oe,le)}return null}function ze(oe,ne,le,Te,Ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return oe=oe.get(le)||null,Y(ne,oe,""+Te,Ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case K:return oe=oe.get(Te.key===null?le:Te.key)||null,te(ne,oe,Te,Ze);case ee:return oe=oe.get(Te.key===null?le:Te.key)||null,fe(ne,oe,Te,Ze);case ie:var nt=Te._init;return ze(oe,ne,le,nt(Te._payload),Ze)}if(Zt(Te)||ce(Te))return oe=oe.get(le)||null,Ne(ne,oe,Te,Ze,null);hf(ne,Te)}return null}function We(oe,ne,le,Te){for(var Ze=null,nt=null,st=ne,ut=ne=0,Vn=null;st!==null&&ut<le.length;ut++){st.index>ut?(Vn=st,st=null):Vn=st.sibling;var Lt=_e(oe,st,le[ut],Te);if(Lt===null){st===null&&(st=Vn);break}a&&st&&Lt.alternate===null&&l(oe,st),ne=E(Lt,ne,ut),nt===null?Ze=Lt:nt.sibling=Lt,nt=Lt,st=Vn}if(ut===le.length)return h(oe,st),Xt&&Gl(oe,ut),Ze;if(st===null){for(;ut<le.length;ut++)st=Ce(oe,le[ut],Te),st!==null&&(ne=E(st,ne,ut),nt===null?Ze=st:nt.sibling=st,nt=st);return Xt&&Gl(oe,ut),Ze}for(st=v(oe,st);ut<le.length;ut++)Vn=ze(st,oe,ut,le[ut],Te),Vn!==null&&(a&&Vn.alternate!==null&&st.delete(Vn.key===null?ut:Vn.key),ne=E(Vn,ne,ut),nt===null?Ze=Vn:nt.sibling=Vn,nt=Vn);return a&&st.forEach(function(Ho){return l(oe,Ho)}),Xt&&Gl(oe,ut),Ze}function Ke(oe,ne,le,Te){var Ze=ce(le);if(typeof Ze!="function")throw Error(t(150));if(le=Ze.call(le),le==null)throw Error(t(151));for(var nt=Ze=null,st=ne,ut=ne=0,Vn=null,Lt=le.next();st!==null&&!Lt.done;ut++,Lt=le.next()){st.index>ut?(Vn=st,st=null):Vn=st.sibling;var Ho=_e(oe,st,Lt.value,Te);if(Ho===null){st===null&&(st=Vn);break}a&&st&&Ho.alternate===null&&l(oe,st),ne=E(Ho,ne,ut),nt===null?Ze=Ho:nt.sibling=Ho,nt=Ho,st=Vn}if(Lt.done)return h(oe,st),Xt&&Gl(oe,ut),Ze;if(st===null){for(;!Lt.done;ut++,Lt=le.next())Lt=Ce(oe,Lt.value,Te),Lt!==null&&(ne=E(Lt,ne,ut),nt===null?Ze=Lt:nt.sibling=Lt,nt=Lt);return Xt&&Gl(oe,ut),Ze}for(st=v(oe,st);!Lt.done;ut++,Lt=le.next())Lt=ze(st,oe,ut,Lt.value,Te),Lt!==null&&(a&&Lt.alternate!==null&&st.delete(Lt.key===null?ut:Lt.key),ne=E(Lt,ne,ut),nt===null?Ze=Lt:nt.sibling=Lt,nt=Lt);return a&&st.forEach(function(IA){return l(oe,IA)}),Xt&&Gl(oe,ut),Ze}function mn(oe,ne,le,Te){if(typeof le=="object"&&le!==null&&le.type===D&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case K:e:{for(var Ze=le.key,nt=ne;nt!==null;){if(nt.key===Ze){if(Ze=le.type,Ze===D){if(nt.tag===7){h(oe,nt.sibling),ne=N(nt,le.props.children),ne.return=oe,oe=ne;break e}}else if(nt.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===ie&&K0(Ze)===nt.type){h(oe,nt.sibling),ne=N(nt,le.props),ne.ref=jd(oe,nt,le),ne.return=oe,oe=ne;break e}h(oe,nt);break}else l(oe,nt);nt=nt.sibling}le.type===D?(ne=tc(le.props.children,oe.mode,Te,le.key),ne.return=oe,oe=ne):(Te=Df(le.type,le.key,le.props,null,oe.mode,Te),Te.ref=jd(oe,ne,le),Te.return=oe,oe=Te)}return O(oe);case ee:e:{for(nt=le.key;ne!==null;){if(ne.key===nt)if(ne.tag===4&&ne.stateNode.containerInfo===le.containerInfo&&ne.stateNode.implementation===le.implementation){h(oe,ne.sibling),ne=N(ne,le.children||[]),ne.return=oe,oe=ne;break e}else{h(oe,ne);break}else l(oe,ne);ne=ne.sibling}ne=cx(le,oe.mode,Te),ne.return=oe,oe=ne}return O(oe);case ie:return nt=le._init,mn(oe,ne,nt(le._payload),Te)}if(Zt(le))return We(oe,ne,le,Te);if(ce(le))return Ke(oe,ne,le,Te);hf(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ne!==null&&ne.tag===6?(h(oe,ne.sibling),ne=N(ne,le),ne.return=oe,oe=ne):(h(oe,ne),ne=lx(le,oe.mode,Te),ne.return=oe,oe=ne),O(oe)):h(oe,ne)}return mn}var tu=Z0(!0),Y0=Z0(!1),ff=Ro(null),mf=null,nu=null,vg=null;function yg(){vg=nu=mf=null}function wg(a){var l=ff.current;qt(ff),a._currentValue=l}function _g(a,l,h){for(;a!==null;){var v=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),a===h)break;a=a.return}}function su(a,l){mf=a,vg=nu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(zs=!0),a.firstContext=null)}function Dr(a){var l=a._currentValue;if(vg!==a)if(a={context:a,memoizedValue:l,next:null},nu===null){if(mf===null)throw Error(t(308));nu=a,mf.dependencies={lanes:0,firstContext:a}}else nu=nu.next=a;return l}var Kl=null;function bg(a){Kl===null?Kl=[a]:Kl.push(a)}function Q0(a,l,h,v){var N=l.interleaved;return N===null?(h.next=h,bg(l)):(h.next=N.next,N.next=h),l.interleaved=h,Ra(a,v)}function Ra(a,l){a.lanes|=l;var h=a.alternate;for(h!==null&&(h.lanes|=l),h=a,a=a.return;a!==null;)a.childLanes|=l,h=a.alternate,h!==null&&(h.childLanes|=l),h=a,a=a.return;return h.tag===3?h.stateNode:null}var Do=!1;function Ng(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X0(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function La(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Oo(a,l,h){var v=a.updateQueue;if(v===null)return null;if(v=v.shared,(It&2)!==0){var N=v.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),v.pending=l,Ra(a,h)}return N=v.interleaved,N===null?(l.next=l,bg(v)):(l.next=N.next,N.next=l),v.interleaved=l,Ra(a,h)}function pf(a,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var v=l.lanes;v&=a.pendingLanes,h|=v,l.lanes=h,Ys(a,h)}}function J0(a,l){var h=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var N=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};E===null?N=E=O:E=E.next=O,h=h.next}while(h!==null);E===null?N=E=l:E=E.next=l}else N=E=l;h={baseState:v.baseState,firstBaseUpdate:N,lastBaseUpdate:E,shared:v.shared,effects:v.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=l}function gf(a,l,h,v){var N=a.updateQueue;Do=!1;var E=N.firstBaseUpdate,O=N.lastBaseUpdate,Y=N.shared.pending;if(Y!==null){N.shared.pending=null;var te=Y,fe=te.next;te.next=null,O===null?E=fe:O.next=fe,O=te;var Ne=a.alternate;Ne!==null&&(Ne=Ne.updateQueue,Y=Ne.lastBaseUpdate,Y!==O&&(Y===null?Ne.firstBaseUpdate=fe:Y.next=fe,Ne.lastBaseUpdate=te))}if(E!==null){var Ce=N.baseState;O=0,Ne=fe=te=null,Y=E;do{var _e=Y.lane,ze=Y.eventTime;if((v&_e)===_e){Ne!==null&&(Ne=Ne.next={eventTime:ze,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var We=a,Ke=Y;switch(_e=l,ze=h,Ke.tag){case 1:if(We=Ke.payload,typeof We=="function"){Ce=We.call(ze,Ce,_e);break e}Ce=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Ke.payload,_e=typeof We=="function"?We.call(ze,Ce,_e):We,_e==null)break e;Ce=ue({},Ce,_e);break e;case 2:Do=!0}}Y.callback!==null&&Y.lane!==0&&(a.flags|=64,_e=N.effects,_e===null?N.effects=[Y]:_e.push(Y))}else ze={eventTime:ze,lane:_e,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ne===null?(fe=Ne=ze,te=Ce):Ne=Ne.next=ze,O|=_e;if(Y=Y.next,Y===null){if(Y=N.shared.pending,Y===null)break;_e=Y,Y=_e.next,_e.next=null,N.lastBaseUpdate=_e,N.shared.pending=null}}while(!0);if(Ne===null&&(te=Ce),N.baseState=te,N.firstBaseUpdate=fe,N.lastBaseUpdate=Ne,l=N.shared.interleaved,l!==null){N=l;do O|=N.lane,N=N.next;while(N!==l)}else E===null&&(N.shared.lanes=0);Ql|=O,a.lanes=O,a.memoizedState=Ce}}function ew(a,l,h){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var v=a[l],N=v.callback;if(N!==null){if(v.callback=null,v=h,typeof N!="function")throw Error(t(191,N));N.call(v)}}}var Cd={},Fi=Ro(Cd),Sd=Ro(Cd),Ed=Ro(Cd);function Zl(a){if(a===Cd)throw Error(t(174));return a}function jg(a,l){switch($t(Ed,l),$t(Sd,a),$t(Fi,Cd),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:aa(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=aa(l,a)}qt(Fi),$t(Fi,l)}function ru(){qt(Fi),qt(Sd),qt(Ed)}function tw(a){Zl(Ed.current);var l=Zl(Fi.current),h=aa(l,a.type);l!==h&&($t(Sd,a),$t(Fi,h))}function Cg(a){Sd.current===a&&(qt(Fi),qt(Sd))}var tn=Ro(0);function xf(a){for(var l=a;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Sg=[];function Eg(){for(var a=0;a<Sg.length;a++)Sg[a]._workInProgressVersionPrimary=null;Sg.length=0}var vf=G.ReactCurrentDispatcher,Tg=G.ReactCurrentBatchConfig,Yl=0,nn=null,Tn=null,On=null,yf=!1,Td=!1,Ad=0,eA=0;function as(){throw Error(t(321))}function Ag(a,l){if(l===null)return!1;for(var h=0;h<l.length&&h<a.length;h++)if(!er(a[h],l[h]))return!1;return!0}function kg(a,l,h,v,N,E){if(Yl=E,nn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,vf.current=a===null||a.memoizedState===null?rA:iA,a=h(v,N),Td){E=0;do{if(Td=!1,Ad=0,25<=E)throw Error(t(301));E+=1,On=Tn=null,l.updateQueue=null,vf.current=aA,a=h(v,N)}while(Td)}if(vf.current=bf,l=Tn!==null&&Tn.next!==null,Yl=0,On=Tn=nn=null,yf=!1,l)throw Error(t(300));return a}function Pg(){var a=Ad!==0;return Ad=0,a}function Vi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?nn.memoizedState=On=a:On=On.next=a,On}function Or(){if(Tn===null){var a=nn.alternate;a=a!==null?a.memoizedState:null}else a=Tn.next;var l=On===null?nn.memoizedState:On.next;if(l!==null)On=l,Tn=a;else{if(a===null)throw Error(t(310));Tn=a,a={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},On===null?nn.memoizedState=On=a:On=On.next=a}return On}function kd(a,l){return typeof l=="function"?l(a):l}function Ig(a){var l=Or(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var v=Tn,N=v.baseQueue,E=h.pending;if(E!==null){if(N!==null){var O=N.next;N.next=E.next,E.next=O}v.baseQueue=N=E,h.pending=null}if(N!==null){E=N.next,v=v.baseState;var Y=O=null,te=null,fe=E;do{var Ne=fe.lane;if((Yl&Ne)===Ne)te!==null&&(te=te.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),v=fe.hasEagerState?fe.eagerState:a(v,fe.action);else{var Ce={lane:Ne,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};te===null?(Y=te=Ce,O=v):te=te.next=Ce,nn.lanes|=Ne,Ql|=Ne}fe=fe.next}while(fe!==null&&fe!==E);te===null?O=v:te.next=Y,er(v,l.memoizedState)||(zs=!0),l.memoizedState=v,l.baseState=O,l.baseQueue=te,h.lastRenderedState=v}if(a=h.interleaved,a!==null){N=a;do E=N.lane,nn.lanes|=E,Ql|=E,N=N.next;while(N!==a)}else N===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Rg(a){var l=Or(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var v=h.dispatch,N=h.pending,E=l.memoizedState;if(N!==null){h.pending=null;var O=N=N.next;do E=a(E,O.action),O=O.next;while(O!==N);er(E,l.memoizedState)||(zs=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,v]}function nw(){}function sw(a,l){var h=nn,v=Or(),N=l(),E=!er(v.memoizedState,N);if(E&&(v.memoizedState=N,zs=!0),v=v.queue,Lg(aw.bind(null,h,v,a),[a]),v.getSnapshot!==l||E||On!==null&&On.memoizedState.tag&1){if(h.flags|=2048,Pd(9,iw.bind(null,h,v,N,l),void 0,null),Fn===null)throw Error(t(349));(Yl&30)!==0||rw(h,l,N)}return N}function rw(a,l,h){a.flags|=16384,a={getSnapshot:l,value:h},l=nn.updateQueue,l===null?(l={lastEffect:null,stores:null},nn.updateQueue=l,l.stores=[a]):(h=l.stores,h===null?l.stores=[a]:h.push(a))}function iw(a,l,h,v){l.value=h,l.getSnapshot=v,ow(l)&&lw(a)}function aw(a,l,h){return h(function(){ow(l)&&lw(a)})}function ow(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!er(a,h)}catch{return!0}}function lw(a){var l=Ra(a,1);l!==null&&oi(l,a,1,-1)}function cw(a){var l=Vi();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:a},l.queue=a,a=a.dispatch=sA.bind(null,nn,a),[l.memoizedState,a]}function Pd(a,l,h,v){return a={tag:a,create:l,destroy:h,deps:v,next:null},l=nn.updateQueue,l===null?(l={lastEffect:null,stores:null},nn.updateQueue=l,l.lastEffect=a.next=a):(h=l.lastEffect,h===null?l.lastEffect=a.next=a:(v=h.next,h.next=a,a.next=v,l.lastEffect=a)),a}function uw(){return Or().memoizedState}function wf(a,l,h,v){var N=Vi();nn.flags|=a,N.memoizedState=Pd(1|l,h,void 0,v===void 0?null:v)}function _f(a,l,h,v){var N=Or();v=v===void 0?null:v;var E=void 0;if(Tn!==null){var O=Tn.memoizedState;if(E=O.destroy,v!==null&&Ag(v,O.deps)){N.memoizedState=Pd(l,h,E,v);return}}nn.flags|=a,N.memoizedState=Pd(1|l,h,E,v)}function dw(a,l){return wf(8390656,8,a,l)}function Lg(a,l){return _f(2048,8,a,l)}function hw(a,l){return _f(4,2,a,l)}function fw(a,l){return _f(4,4,a,l)}function mw(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function pw(a,l,h){return h=h!=null?h.concat([a]):null,_f(4,4,mw.bind(null,l,a),h)}function Mg(){}function gw(a,l){var h=Or();l=l===void 0?null:l;var v=h.memoizedState;return v!==null&&l!==null&&Ag(l,v[1])?v[0]:(h.memoizedState=[a,l],a)}function xw(a,l){var h=Or();l=l===void 0?null:l;var v=h.memoizedState;return v!==null&&l!==null&&Ag(l,v[1])?v[0]:(a=a(),h.memoizedState=[a,l],a)}function vw(a,l,h){return(Yl&21)===0?(a.baseState&&(a.baseState=!1,zs=!0),a.memoizedState=h):(er(h,l)||(h=Rl(),nn.lanes|=h,Ql|=h,a.baseState=!0),l)}function tA(a,l){var h=pt;pt=h!==0&&4>h?h:4,a(!0);var v=Tg.transition;Tg.transition={};try{a(!1),l()}finally{pt=h,Tg.transition=v}}function yw(){return Or().memoizedState}function nA(a,l,h){var v=zo(a);if(h={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null},ww(a))_w(l,h);else if(h=Q0(a,l,h,v),h!==null){var N=Es();oi(h,a,v,N),bw(h,l,v)}}function sA(a,l,h){var v=zo(a),N={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null};if(ww(a))_w(l,N);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var O=l.lastRenderedState,Y=E(O,h);if(N.hasEagerState=!0,N.eagerState=Y,er(Y,O)){var te=l.interleaved;te===null?(N.next=N,bg(l)):(N.next=te.next,te.next=N),l.interleaved=N;return}}catch{}finally{}h=Q0(a,l,N,v),h!==null&&(N=Es(),oi(h,a,v,N),bw(h,l,v))}}function ww(a){var l=a.alternate;return a===nn||l!==null&&l===nn}function _w(a,l){Td=yf=!0;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}function bw(a,l,h){if((h&4194240)!==0){var v=l.lanes;v&=a.pendingLanes,h|=v,l.lanes=h,Ys(a,h)}}var bf={readContext:Dr,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},rA={readContext:Dr,useCallback:function(a,l){return Vi().memoizedState=[a,l===void 0?null:l],a},useContext:Dr,useEffect:dw,useImperativeHandle:function(a,l,h){return h=h!=null?h.concat([a]):null,wf(4194308,4,mw.bind(null,l,a),h)},useLayoutEffect:function(a,l){return wf(4194308,4,a,l)},useInsertionEffect:function(a,l){return wf(4,2,a,l)},useMemo:function(a,l){var h=Vi();return l=l===void 0?null:l,a=a(),h.memoizedState=[a,l],a},useReducer:function(a,l,h){var v=Vi();return l=h!==void 0?h(l):l,v.memoizedState=v.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},v.queue=a,a=a.dispatch=nA.bind(null,nn,a),[v.memoizedState,a]},useRef:function(a){var l=Vi();return a={current:a},l.memoizedState=a},useState:cw,useDebugValue:Mg,useDeferredValue:function(a){return Vi().memoizedState=a},useTransition:function(){var a=cw(!1),l=a[0];return a=tA.bind(null,a[1]),Vi().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,h){var v=nn,N=Vi();if(Xt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),Fn===null)throw Error(t(349));(Yl&30)!==0||rw(v,l,h)}N.memoizedState=h;var E={value:h,getSnapshot:l};return N.queue=E,dw(aw.bind(null,v,E,a),[a]),v.flags|=2048,Pd(9,iw.bind(null,v,E,h,l),void 0,null),h},useId:function(){var a=Vi(),l=Fn.identifierPrefix;if(Xt){var h=Ia,v=Pa;h=(v&~(1<<32-dt(v)-1)).toString(32)+h,l=":"+l+"R"+h,h=Ad++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=eA++,l=":"+l+"r"+h.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},iA={readContext:Dr,useCallback:gw,useContext:Dr,useEffect:Lg,useImperativeHandle:pw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:xw,useReducer:Ig,useRef:uw,useState:function(){return Ig(kd)},useDebugValue:Mg,useDeferredValue:function(a){var l=Or();return vw(l,Tn.memoizedState,a)},useTransition:function(){var a=Ig(kd)[0],l=Or().memoizedState;return[a,l]},useMutableSource:nw,useSyncExternalStore:sw,useId:yw,unstable_isNewReconciler:!1},aA={readContext:Dr,useCallback:gw,useContext:Dr,useEffect:Lg,useImperativeHandle:pw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:xw,useReducer:Rg,useRef:uw,useState:function(){return Rg(kd)},useDebugValue:Mg,useDeferredValue:function(a){var l=Or();return Tn===null?l.memoizedState=a:vw(l,Tn.memoizedState,a)},useTransition:function(){var a=Rg(kd)[0],l=Or().memoizedState;return[a,l]},useMutableSource:nw,useSyncExternalStore:sw,useId:yw,unstable_isNewReconciler:!1};function ri(a,l){if(a&&a.defaultProps){l=ue({},l),a=a.defaultProps;for(var h in a)l[h]===void 0&&(l[h]=a[h]);return l}return l}function Dg(a,l,h,v){l=a.memoizedState,h=h(v,l),h=h==null?l:ue({},l,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Nf={isMounted:function(a){return(a=a._reactInternals)?Rs(a)===a:!1},enqueueSetState:function(a,l,h){a=a._reactInternals;var v=Es(),N=zo(a),E=La(v,N);E.payload=l,h!=null&&(E.callback=h),l=Oo(a,E,N),l!==null&&(oi(l,a,N,v),pf(l,a,N))},enqueueReplaceState:function(a,l,h){a=a._reactInternals;var v=Es(),N=zo(a),E=La(v,N);E.tag=1,E.payload=l,h!=null&&(E.callback=h),l=Oo(a,E,N),l!==null&&(oi(l,a,N,v),pf(l,a,N))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var h=Es(),v=zo(a),N=La(h,v);N.tag=2,l!=null&&(N.callback=l),l=Oo(a,N,v),l!==null&&(oi(l,a,v,h),pf(l,a,v))}};function Nw(a,l,h,v,N,E,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,E,O):l.prototype&&l.prototype.isPureReactComponent?!Li(h,v)||!Li(N,E):!0}function jw(a,l,h){var v=!1,N=Lo,E=l.contextType;return typeof E=="object"&&E!==null?E=Dr(E):(N=Bs(l)?Wl:is.current,v=l.contextTypes,E=(v=v!=null)?Qc(a,N):Lo),l=new l(h,E),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Nf,a.stateNode=l,l._reactInternals=a,v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=N,a.__reactInternalMemoizedMaskedChildContext=E),l}function Cw(a,l,h,v){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,v),l.state!==a&&Nf.enqueueReplaceState(l,l.state,null)}function Og(a,l,h,v){var N=a.stateNode;N.props=h,N.state=a.memoizedState,N.refs={},Ng(a);var E=l.contextType;typeof E=="object"&&E!==null?N.context=Dr(E):(E=Bs(l)?Wl:is.current,N.context=Qc(a,E)),N.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(Dg(a,l,E,h),N.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&Nf.enqueueReplaceState(N,N.state,null),gf(a,h,N,v),N.state=a.memoizedState),typeof N.componentDidMount=="function"&&(a.flags|=4194308)}function iu(a,l){try{var h="",v=l;do h+=Re(v),v=v.return;while(v);var N=h}catch(E){N=`
Error generating stack: `+E.message+`
`+E.stack}return{value:a,source:l,stack:N,digest:null}}function Fg(a,l,h){return{value:a,source:null,stack:h??null,digest:l??null}}function Vg(a,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var oA=typeof WeakMap=="function"?WeakMap:Map;function Sw(a,l,h){h=La(-1,h),h.tag=3,h.payload={element:null};var v=l.value;return h.callback=function(){kf||(kf=!0,ex=v),Vg(a,l)},h}function Ew(a,l,h){h=La(-1,h),h.tag=3;var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var N=l.value;h.payload=function(){return v(N)},h.callback=function(){Vg(a,l)}}var E=a.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(h.callback=function(){Vg(a,l),typeof v!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),h}function Tw(a,l,h){var v=a.pingCache;if(v===null){v=a.pingCache=new oA;var N=new Set;v.set(l,N)}else N=v.get(l),N===void 0&&(N=new Set,v.set(l,N));N.has(h)||(N.add(h),a=_A.bind(null,a,l,h),l.then(a,a))}function Aw(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function kw(a,l,h,v,N){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=La(-1,1),l.tag=2,Oo(h,l,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=N,a)}var lA=G.ReactCurrentOwner,zs=!1;function Ss(a,l,h,v){l.child=a===null?Y0(l,null,h,v):tu(l,a.child,h,v)}function Pw(a,l,h,v,N){h=h.render;var E=l.ref;return su(l,N),v=kg(a,l,h,v,E,N),h=Pg(),a!==null&&!zs?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~N,Ma(a,l,N)):(Xt&&h&&fg(l),l.flags|=1,Ss(a,l,v,N),l.child)}function Iw(a,l,h,v,N){if(a===null){var E=h.type;return typeof E=="function"&&!ox(E)&&E.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=E,Rw(a,l,E,v,N)):(a=Df(h.type,null,v,l,l.mode,N),a.ref=l.ref,a.return=l,l.child=a)}if(E=a.child,(a.lanes&N)===0){var O=E.memoizedProps;if(h=h.compare,h=h!==null?h:Li,h(O,v)&&a.ref===l.ref)return Ma(a,l,N)}return l.flags|=1,a=$o(E,v),a.ref=l.ref,a.return=l,l.child=a}function Rw(a,l,h,v,N){if(a!==null){var E=a.memoizedProps;if(Li(E,v)&&a.ref===l.ref)if(zs=!1,l.pendingProps=v=E,(a.lanes&N)!==0)(a.flags&131072)!==0&&(zs=!0);else return l.lanes=a.lanes,Ma(a,l,N)}return Bg(a,l,h,v,N)}function Lw(a,l,h){var v=l.pendingProps,N=v.children,E=a!==null?a.memoizedState:null;if(v.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(ou,rr),rr|=h;else{if((h&1073741824)===0)return a=E!==null?E.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,$t(ou,rr),rr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=E!==null?E.baseLanes:h,$t(ou,rr),rr|=v}else E!==null?(v=E.baseLanes|h,l.memoizedState=null):v=h,$t(ou,rr),rr|=v;return Ss(a,l,N,h),l.child}function Mw(a,l){var h=l.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function Bg(a,l,h,v,N){var E=Bs(h)?Wl:is.current;return E=Qc(l,E),su(l,N),h=kg(a,l,h,v,E,N),v=Pg(),a!==null&&!zs?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~N,Ma(a,l,N)):(Xt&&v&&fg(l),l.flags|=1,Ss(a,l,h,N),l.child)}function Dw(a,l,h,v,N){if(Bs(h)){var E=!0;of(l)}else E=!1;if(su(l,N),l.stateNode===null)Cf(a,l),jw(l,h,v),Og(l,h,v,N),v=!0;else if(a===null){var O=l.stateNode,Y=l.memoizedProps;O.props=Y;var te=O.context,fe=h.contextType;typeof fe=="object"&&fe!==null?fe=Dr(fe):(fe=Bs(h)?Wl:is.current,fe=Qc(l,fe));var Ne=h.getDerivedStateFromProps,Ce=typeof Ne=="function"||typeof O.getSnapshotBeforeUpdate=="function";Ce||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==v||te!==fe)&&Cw(l,O,v,fe),Do=!1;var _e=l.memoizedState;O.state=_e,gf(l,v,O,N),te=l.memoizedState,Y!==v||_e!==te||Vs.current||Do?(typeof Ne=="function"&&(Dg(l,h,Ne,v),te=l.memoizedState),(Y=Do||Nw(l,h,Y,v,_e,te,fe))?(Ce||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=te),O.props=v,O.state=te,O.context=fe,v=Y):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{O=l.stateNode,X0(a,l),Y=l.memoizedProps,fe=l.type===l.elementType?Y:ri(l.type,Y),O.props=fe,Ce=l.pendingProps,_e=O.context,te=h.contextType,typeof te=="object"&&te!==null?te=Dr(te):(te=Bs(h)?Wl:is.current,te=Qc(l,te));var ze=h.getDerivedStateFromProps;(Ne=typeof ze=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==Ce||_e!==te)&&Cw(l,O,v,te),Do=!1,_e=l.memoizedState,O.state=_e,gf(l,v,O,N);var We=l.memoizedState;Y!==Ce||_e!==We||Vs.current||Do?(typeof ze=="function"&&(Dg(l,h,ze,v),We=l.memoizedState),(fe=Do||Nw(l,h,fe,v,_e,We,te)||!1)?(Ne||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,We,te),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,We,te)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===a.memoizedProps&&_e===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&_e===a.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=We),O.props=v,O.state=We,O.context=te,v=fe):(typeof O.componentDidUpdate!="function"||Y===a.memoizedProps&&_e===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&_e===a.memoizedState||(l.flags|=1024),v=!1)}return zg(a,l,h,v,E,N)}function zg(a,l,h,v,N,E){Mw(a,l);var O=(l.flags&128)!==0;if(!v&&!O)return N&&z0(l,h,!1),Ma(a,l,E);v=l.stateNode,lA.current=l;var Y=O&&typeof h.getDerivedStateFromError!="function"?null:v.render();return l.flags|=1,a!==null&&O?(l.child=tu(l,a.child,null,E),l.child=tu(l,null,Y,E)):Ss(a,l,Y,E),l.memoizedState=v.state,N&&z0(l,h,!0),l.child}function Ow(a){var l=a.stateNode;l.pendingContext?V0(a,l.pendingContext,l.pendingContext!==l.context):l.context&&V0(a,l.context,!1),jg(a,l.containerInfo)}function Fw(a,l,h,v,N){return eu(),xg(N),l.flags|=256,Ss(a,l,h,v),l.child}var Ug={dehydrated:null,treeContext:null,retryLane:0};function $g(a){return{baseLanes:a,cachePool:null,transitions:null}}function Vw(a,l,h){var v=l.pendingProps,N=tn.current,E=!1,O=(l.flags&128)!==0,Y;if((Y=O)||(Y=a!==null&&a.memoizedState===null?!1:(N&2)!==0),Y?(E=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(N|=1),$t(tn,N&1),a===null)return gg(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=v.children,a=v.fallback,E?(v=l.mode,E=l.child,O={mode:"hidden",children:O},(v&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=O):E=Of(O,v,0,null),a=tc(a,v,h,null),E.return=l,a.return=l,E.sibling=a,l.child=E,l.child.memoizedState=$g(h),l.memoizedState=Ug,a):Hg(l,O));if(N=a.memoizedState,N!==null&&(Y=N.dehydrated,Y!==null))return cA(a,l,O,v,Y,N,h);if(E){E=v.fallback,O=l.mode,N=a.child,Y=N.sibling;var te={mode:"hidden",children:v.children};return(O&1)===0&&l.child!==N?(v=l.child,v.childLanes=0,v.pendingProps=te,l.deletions=null):(v=$o(N,te),v.subtreeFlags=N.subtreeFlags&14680064),Y!==null?E=$o(Y,E):(E=tc(E,O,h,null),E.flags|=2),E.return=l,v.return=l,v.sibling=E,l.child=v,v=E,E=l.child,O=a.child.memoizedState,O=O===null?$g(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},E.memoizedState=O,E.childLanes=a.childLanes&~h,l.memoizedState=Ug,v}return E=a.child,a=E.sibling,v=$o(E,{mode:"visible",children:v.children}),(l.mode&1)===0&&(v.lanes=h),v.return=l,v.sibling=null,a!==null&&(h=l.deletions,h===null?(l.deletions=[a],l.flags|=16):h.push(a)),l.child=v,l.memoizedState=null,v}function Hg(a,l){return l=Of({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function jf(a,l,h,v){return v!==null&&xg(v),tu(l,a.child,null,h),a=Hg(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function cA(a,l,h,v,N,E,O){if(h)return l.flags&256?(l.flags&=-257,v=Fg(Error(t(422))),jf(a,l,O,v)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(E=v.fallback,N=l.mode,v=Of({mode:"visible",children:v.children},N,0,null),E=tc(E,N,O,null),E.flags|=2,v.return=l,E.return=l,v.sibling=E,l.child=v,(l.mode&1)!==0&&tu(l,a.child,null,O),l.child.memoizedState=$g(O),l.memoizedState=Ug,E);if((l.mode&1)===0)return jf(a,l,O,null);if(N.data==="$!"){if(v=N.nextSibling&&N.nextSibling.dataset,v)var Y=v.dgst;return v=Y,E=Error(t(419)),v=Fg(E,v,void 0),jf(a,l,O,v)}if(Y=(O&a.childLanes)!==0,zs||Y){if(v=Fn,v!==null){switch(O&-O){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(v.suspendedLanes|O))!==0?0:N,N!==0&&N!==E.retryLane&&(E.retryLane=N,Ra(a,N),oi(v,a,N,-1))}return ax(),v=Fg(Error(t(421))),jf(a,l,O,v)}return N.data==="$?"?(l.flags|=128,l.child=a.child,l=bA.bind(null,a),N._reactRetry=l,null):(a=E.treeContext,sr=Oi(N.nextSibling),nr=l,Xt=!0,si=null,a!==null&&(Lr[Mr++]=Pa,Lr[Mr++]=Ia,Lr[Mr++]=ql,Pa=a.id,Ia=a.overflow,ql=l),l=Hg(l,v.children),l.flags|=4096,l)}function Bw(a,l,h){a.lanes|=l;var v=a.alternate;v!==null&&(v.lanes|=l),_g(a.return,l,h)}function Wg(a,l,h,v,N){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:N}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=v,E.tail=h,E.tailMode=N)}function zw(a,l,h){var v=l.pendingProps,N=v.revealOrder,E=v.tail;if(Ss(a,l,v.children,h),v=tn.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Bw(a,h,l);else if(a.tag===19)Bw(a,h,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}v&=1}if($t(tn,v),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(h=l.child,N=null;h!==null;)a=h.alternate,a!==null&&xf(a)===null&&(N=h),h=h.sibling;h=N,h===null?(N=l.child,l.child=null):(N=h.sibling,h.sibling=null),Wg(l,!1,N,h,E);break;case"backwards":for(h=null,N=l.child,l.child=null;N!==null;){if(a=N.alternate,a!==null&&xf(a)===null){l.child=N;break}a=N.sibling,N.sibling=h,h=N,N=a}Wg(l,!0,h,null,E);break;case"together":Wg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Cf(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ma(a,l,h){if(a!==null&&(l.dependencies=a.dependencies),Ql|=l.lanes,(h&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,h=$o(a,a.pendingProps),l.child=h,h.return=l;a.sibling!==null;)a=a.sibling,h=h.sibling=$o(a,a.pendingProps),h.return=l;h.sibling=null}return l.child}function uA(a,l,h){switch(l.tag){case 3:Ow(l),eu();break;case 5:tw(l);break;case 1:Bs(l.type)&&of(l);break;case 4:jg(l,l.stateNode.containerInfo);break;case 10:var v=l.type._context,N=l.memoizedProps.value;$t(ff,v._currentValue),v._currentValue=N;break;case 13:if(v=l.memoizedState,v!==null)return v.dehydrated!==null?($t(tn,tn.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Vw(a,l,h):($t(tn,tn.current&1),a=Ma(a,l,h),a!==null?a.sibling:null);$t(tn,tn.current&1);break;case 19:if(v=(h&l.childLanes)!==0,(a.flags&128)!==0){if(v)return zw(a,l,h);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),$t(tn,tn.current),v)break;return null;case 22:case 23:return l.lanes=0,Lw(a,l,h)}return Ma(a,l,h)}var Uw,qg,$w,Hw;Uw=function(a,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},qg=function(){},$w=function(a,l,h,v){var N=a.memoizedProps;if(N!==v){a=l.stateNode,Zl(Fi.current);var E=null;switch(h){case"input":N=Xn(a,N),v=Xn(a,v),E=[];break;case"select":N=ue({},N,{value:void 0}),v=ue({},v,{value:void 0}),E=[];break;case"textarea":N=io(a,N),v=io(a,v),E=[];break;default:typeof N.onClick!="function"&&typeof v.onClick=="function"&&(a.onclick=ye)}Zs(h,v);var O;h=null;for(fe in N)if(!v.hasOwnProperty(fe)&&N.hasOwnProperty(fe)&&N[fe]!=null)if(fe==="style"){var Y=N[fe];for(O in Y)Y.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(i.hasOwnProperty(fe)?E||(E=[]):(E=E||[]).push(fe,null));for(fe in v){var te=v[fe];if(Y=N?.[fe],v.hasOwnProperty(fe)&&te!==Y&&(te!=null||Y!=null))if(fe==="style")if(Y){for(O in Y)!Y.hasOwnProperty(O)||te&&te.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in te)te.hasOwnProperty(O)&&Y[O]!==te[O]&&(h||(h={}),h[O]=te[O])}else h||(E||(E=[]),E.push(fe,h)),h=te;else fe==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Y=Y?Y.__html:void 0,te!=null&&Y!==te&&(E=E||[]).push(fe,te)):fe==="children"?typeof te!="string"&&typeof te!="number"||(E=E||[]).push(fe,""+te):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(fe)?(te!=null&&fe==="onScroll"&&Vt("scroll",a),E||Y===te||(E=[])):(E=E||[]).push(fe,te))}h&&(E=E||[]).push("style",h);var fe=E;(l.updateQueue=fe)&&(l.flags|=4)}},Hw=function(a,l,h,v){h!==v&&(l.flags|=4)};function Id(a,l){if(!Xt)switch(a.tailMode){case"hidden":l=a.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function os(a){var l=a.alternate!==null&&a.alternate.child===a.child,h=0,v=0;if(l)for(var N=a.child;N!==null;)h|=N.lanes|N.childLanes,v|=N.subtreeFlags&14680064,v|=N.flags&14680064,N.return=a,N=N.sibling;else for(N=a.child;N!==null;)h|=N.lanes|N.childLanes,v|=N.subtreeFlags,v|=N.flags,N.return=a,N=N.sibling;return a.subtreeFlags|=v,a.childLanes=h,l}function dA(a,l,h){var v=l.pendingProps;switch(mg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(l),null;case 1:return Bs(l.type)&&af(),os(l),null;case 3:return v=l.stateNode,ru(),qt(Vs),qt(is),Eg(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(a===null||a.child===null)&&(df(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,si!==null&&(sx(si),si=null))),qg(a,l),os(l),null;case 5:Cg(l);var N=Zl(Ed.current);if(h=l.type,a!==null&&l.stateNode!=null)$w(a,l,h,v,N),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!v){if(l.stateNode===null)throw Error(t(166));return os(l),null}if(a=Zl(Fi.current),df(l)){v=l.stateNode,h=l.type;var E=l.memoizedProps;switch(v[Rr]=l,v[Po]=E,a=(l.mode&1)!==0,h){case"dialog":Vt("cancel",v),Vt("close",v);break;case"iframe":case"object":case"embed":Vt("load",v);break;case"video":case"audio":for(N=0;N<To.length;N++)Vt(To[N],v);break;case"source":Vt("error",v);break;case"img":case"image":case"link":Vt("error",v),Vt("load",v);break;case"details":Vt("toggle",v);break;case"input":Kr(v,E),Vt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!E.multiple},Vt("invalid",v);break;case"textarea":ao(v,E),Vt("invalid",v)}Zs(h,E),N=null;for(var O in E)if(E.hasOwnProperty(O)){var Y=E[O];O==="children"?typeof Y=="string"?v.textContent!==Y&&(E.suppressHydrationWarning!==!0&&he(v.textContent,Y,a),N=["children",Y]):typeof Y=="number"&&v.textContent!==""+Y&&(E.suppressHydrationWarning!==!0&&he(v.textContent,Y,a),N=["children",""+Y]):i.hasOwnProperty(O)&&Y!=null&&O==="onScroll"&&Vt("scroll",v)}switch(h){case"input":xt(v),gi(v,E,!0);break;case"textarea":xt(v),xi(v);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(v.onclick=ye)}v=N,l.updateQueue=v,v!==null&&(l.flags|=4)}else{O=N.nodeType===9?N:N.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ia(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof v.is=="string"?a=O.createElement(h,{is:v.is}):(a=O.createElement(h),h==="select"&&(O=a,v.multiple?O.multiple=!0:v.size&&(O.size=v.size))):a=O.createElementNS(a,h),a[Rr]=l,a[Po]=v,Uw(a,l,!1,!1),l.stateNode=a;e:{switch(O=mr(h,v),h){case"dialog":Vt("cancel",a),Vt("close",a),N=v;break;case"iframe":case"object":case"embed":Vt("load",a),N=v;break;case"video":case"audio":for(N=0;N<To.length;N++)Vt(To[N],a);N=v;break;case"source":Vt("error",a),N=v;break;case"img":case"image":case"link":Vt("error",a),Vt("load",a),N=v;break;case"details":Vt("toggle",a),N=v;break;case"input":Kr(a,v),N=Xn(a,v),Vt("invalid",a);break;case"option":N=v;break;case"select":a._wrapperState={wasMultiple:!!v.multiple},N=ue({},v,{value:void 0}),Vt("invalid",a);break;case"textarea":ao(a,v),N=io(a,v),Vt("invalid",a);break;default:N=v}Zs(h,N),Y=N;for(E in Y)if(Y.hasOwnProperty(E)){var te=Y[E];E==="style"?yi(a,te):E==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Pc(a,te)):E==="children"?typeof te=="string"?(h!=="textarea"||te!=="")&&vi(a,te):typeof te=="number"&&vi(a,""+te):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?te!=null&&E==="onScroll"&&Vt("scroll",a):te!=null&&W(a,E,te,O))}switch(h){case"input":xt(a),gi(a,v,!1);break;case"textarea":xt(a),xi(a);break;case"option":v.value!=null&&a.setAttribute("value",""+Be(v.value));break;case"select":a.multiple=!!v.multiple,E=v.value,E!=null?gs(a,!!v.multiple,E,!1):v.defaultValue!=null&&gs(a,!!v.multiple,v.defaultValue,!0);break;default:typeof N.onClick=="function"&&(a.onclick=ye)}switch(h){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return os(l),null;case 6:if(a&&l.stateNode!=null)Hw(a,l,a.memoizedProps,v);else{if(typeof v!="string"&&l.stateNode===null)throw Error(t(166));if(h=Zl(Ed.current),Zl(Fi.current),df(l)){if(v=l.stateNode,h=l.memoizedProps,v[Rr]=l,(E=v.nodeValue!==h)&&(a=nr,a!==null))switch(a.tag){case 3:he(v.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&he(v.nodeValue,h,(a.mode&1)!==0)}E&&(l.flags|=4)}else v=(h.nodeType===9?h:h.ownerDocument).createTextNode(v),v[Rr]=l,l.stateNode=v}return os(l),null;case 13:if(qt(tn),v=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Xt&&sr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)G0(),eu(),l.flags|=98560,E=!1;else if(E=df(l),v!==null&&v.dehydrated!==null){if(a===null){if(!E)throw Error(t(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[Rr]=l}else eu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;os(l),E=!1}else si!==null&&(sx(si),si=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(v=v!==null,v!==(a!==null&&a.memoizedState!==null)&&v&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(tn.current&1)!==0?An===0&&(An=3):ax())),l.updateQueue!==null&&(l.flags|=4),os(l),null);case 4:return ru(),qg(a,l),a===null&&Ao(l.stateNode.containerInfo),os(l),null;case 10:return wg(l.type._context),os(l),null;case 17:return Bs(l.type)&&af(),os(l),null;case 19:if(qt(tn),E=l.memoizedState,E===null)return os(l),null;if(v=(l.flags&128)!==0,O=E.rendering,O===null)if(v)Id(E,!1);else{if(An!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(O=xf(a),O!==null){for(l.flags|=128,Id(E,!1),v=O.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),l.subtreeFlags=0,v=h,h=l.child;h!==null;)E=h,a=v,E.flags&=14680066,O=E.alternate,O===null?(E.childLanes=0,E.lanes=a,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=O.childLanes,E.lanes=O.lanes,E.child=O.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=O.memoizedProps,E.memoizedState=O.memoizedState,E.updateQueue=O.updateQueue,E.type=O.type,a=O.dependencies,E.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return $t(tn,tn.current&1|2),l.child}a=a.sibling}E.tail!==null&&zt()>lu&&(l.flags|=128,v=!0,Id(E,!1),l.lanes=4194304)}else{if(!v)if(a=xf(O),a!==null){if(l.flags|=128,v=!0,h=a.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Id(E,!0),E.tail===null&&E.tailMode==="hidden"&&!O.alternate&&!Xt)return os(l),null}else 2*zt()-E.renderingStartTime>lu&&h!==1073741824&&(l.flags|=128,v=!0,Id(E,!1),l.lanes=4194304);E.isBackwards?(O.sibling=l.child,l.child=O):(h=E.last,h!==null?h.sibling=O:l.child=O,E.last=O)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=zt(),l.sibling=null,h=tn.current,$t(tn,v?h&1|2:h&1),l):(os(l),null);case 22:case 23:return ix(),v=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==v&&(l.flags|=8192),v&&(l.mode&1)!==0?(rr&1073741824)!==0&&(os(l),l.subtreeFlags&6&&(l.flags|=8192)):os(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function hA(a,l){switch(mg(l),l.tag){case 1:return Bs(l.type)&&af(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return ru(),qt(Vs),qt(is),Eg(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Cg(l),null;case 13:if(qt(tn),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));eu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return qt(tn),null;case 4:return ru(),null;case 10:return wg(l.type._context),null;case 22:case 23:return ix(),null;case 24:return null;default:return null}}var Sf=!1,ls=!1,fA=typeof WeakSet=="function"?WeakSet:Set,He=null;function au(a,l){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(v){hn(a,l,v)}else h.current=null}function Gg(a,l,h){try{h()}catch(v){hn(a,l,v)}}var Ww=!1;function mA(a,l){if(Fe=jr,a=pd(),gd(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var N=v.anchorOffset,E=v.focusNode;v=v.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var O=0,Y=-1,te=-1,fe=0,Ne=0,Ce=a,_e=null;t:for(;;){for(var ze;Ce!==h||N!==0&&Ce.nodeType!==3||(Y=O+N),Ce!==E||v!==0&&Ce.nodeType!==3||(te=O+v),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(ze=Ce.firstChild)!==null;)_e=Ce,Ce=ze;for(;;){if(Ce===a)break t;if(_e===h&&++fe===N&&(Y=O),_e===E&&++Ne===v&&(te=O),(ze=Ce.nextSibling)!==null)break;Ce=_e,_e=Ce.parentNode}Ce=ze}h=Y===-1||te===-1?null:{start:Y,end:te}}else h=null}h=h||{start:0,end:0}}else h=null;for(Je={focusedElem:a,selectionRange:h},jr=!1,He=l;He!==null;)if(l=He,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,He=a;else for(;He!==null;){l=He;try{var We=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var Ke=We.memoizedProps,mn=We.memoizedState,oe=l.stateNode,ne=oe.getSnapshotBeforeUpdate(l.elementType===l.type?Ke:ri(l.type,Ke),mn);oe.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var le=l.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Te){hn(l,l.return,Te)}if(a=l.sibling,a!==null){a.return=l.return,He=a;break}He=l.return}return We=Ww,Ww=!1,We}function Rd(a,l,h){var v=l.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var N=v=v.next;do{if((N.tag&a)===a){var E=N.destroy;N.destroy=void 0,E!==void 0&&Gg(l,h,E)}N=N.next}while(N!==v)}}function Ef(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&a)===a){var v=h.create;h.destroy=v()}h=h.next}while(h!==l)}}function Kg(a){var l=a.ref;if(l!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof l=="function"?l(a):l.current=a}}function qw(a){var l=a.alternate;l!==null&&(a.alternate=null,qw(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Rr],delete l[Po],delete l[Io],delete l[cg],delete l[ug])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Gw(a){return a.tag===5||a.tag===3||a.tag===4}function Kw(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Gw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Zg(a,l,h){var v=a.tag;if(v===5||v===6)a=a.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(a,l):h.insertBefore(a,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(a,h)):(l=h,l.appendChild(a)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=ye));else if(v!==4&&(a=a.child,a!==null))for(Zg(a,l,h),a=a.sibling;a!==null;)Zg(a,l,h),a=a.sibling}function Yg(a,l,h){var v=a.tag;if(v===5||v===6)a=a.stateNode,l?h.insertBefore(a,l):h.appendChild(a);else if(v!==4&&(a=a.child,a!==null))for(Yg(a,l,h),a=a.sibling;a!==null;)Yg(a,l,h),a=a.sibling}var qn=null,ii=!1;function Fo(a,l,h){for(h=h.child;h!==null;)Zw(a,l,h),h=h.sibling}function Zw(a,l,h){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Ci,h)}catch{}switch(h.tag){case 5:ls||au(h,l);case 6:var v=qn,N=ii;qn=null,Fo(a,l,h),qn=v,ii=N,qn!==null&&(ii?(a=qn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):qn.removeChild(h.stateNode));break;case 18:qn!==null&&(ii?(a=qn,h=h.stateNode,a.nodeType===8?Nd(a.parentNode,h):a.nodeType===1&&Nd(a,h),ts(a)):Nd(qn,h.stateNode));break;case 4:v=qn,N=ii,qn=h.stateNode.containerInfo,ii=!0,Fo(a,l,h),qn=v,ii=N;break;case 0:case 11:case 14:case 15:if(!ls&&(v=h.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){N=v=v.next;do{var E=N,O=E.destroy;E=E.tag,O!==void 0&&((E&2)!==0||(E&4)!==0)&&Gg(h,l,O),N=N.next}while(N!==v)}Fo(a,l,h);break;case 1:if(!ls&&(au(h,l),v=h.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=h.memoizedProps,v.state=h.memoizedState,v.componentWillUnmount()}catch(Y){hn(h,l,Y)}Fo(a,l,h);break;case 21:Fo(a,l,h);break;case 22:h.mode&1?(ls=(v=ls)||h.memoizedState!==null,Fo(a,l,h),ls=v):Fo(a,l,h);break;default:Fo(a,l,h)}}function Yw(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new fA),l.forEach(function(v){var N=NA.bind(null,a,v);h.has(v)||(h.add(v),v.then(N,N))})}}function ai(a,l){var h=l.deletions;if(h!==null)for(var v=0;v<h.length;v++){var N=h[v];try{var E=a,O=l,Y=O;e:for(;Y!==null;){switch(Y.tag){case 5:qn=Y.stateNode,ii=!1;break e;case 3:qn=Y.stateNode.containerInfo,ii=!0;break e;case 4:qn=Y.stateNode.containerInfo,ii=!0;break e}Y=Y.return}if(qn===null)throw Error(t(160));Zw(E,O,N),qn=null,ii=!1;var te=N.alternate;te!==null&&(te.return=null),N.return=null}catch(fe){hn(N,l,fe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Qw(l,a),l=l.sibling}function Qw(a,l){var h=a.alternate,v=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ai(l,a),Bi(a),v&4){try{Rd(3,a,a.return),Ef(3,a)}catch(Ke){hn(a,a.return,Ke)}try{Rd(5,a,a.return)}catch(Ke){hn(a,a.return,Ke)}}break;case 1:ai(l,a),Bi(a),v&512&&h!==null&&au(h,h.return);break;case 5:if(ai(l,a),Bi(a),v&512&&h!==null&&au(h,h.return),a.flags&32){var N=a.stateNode;try{vi(N,"")}catch(Ke){hn(a,a.return,Ke)}}if(v&4&&(N=a.stateNode,N!=null)){var E=a.memoizedProps,O=h!==null?h.memoizedProps:E,Y=a.type,te=a.updateQueue;if(a.updateQueue=null,te!==null)try{Y==="input"&&E.type==="radio"&&E.name!=null&&Ks(N,E),mr(Y,O);var fe=mr(Y,E);for(O=0;O<te.length;O+=2){var Ne=te[O],Ce=te[O+1];Ne==="style"?yi(N,Ce):Ne==="dangerouslySetInnerHTML"?Pc(N,Ce):Ne==="children"?vi(N,Ce):W(N,Ne,Ce,fe)}switch(Y){case"input":ps(N,E);break;case"textarea":kc(N,E);break;case"select":var _e=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!E.multiple;var ze=E.value;ze!=null?gs(N,!!E.multiple,ze,!1):_e!==!!E.multiple&&(E.defaultValue!=null?gs(N,!!E.multiple,E.defaultValue,!0):gs(N,!!E.multiple,E.multiple?[]:"",!1))}N[Po]=E}catch(Ke){hn(a,a.return,Ke)}}break;case 6:if(ai(l,a),Bi(a),v&4){if(a.stateNode===null)throw Error(t(162));N=a.stateNode,E=a.memoizedProps;try{N.nodeValue=E}catch(Ke){hn(a,a.return,Ke)}}break;case 3:if(ai(l,a),Bi(a),v&4&&h!==null&&h.memoizedState.isDehydrated)try{ts(l.containerInfo)}catch(Ke){hn(a,a.return,Ke)}break;case 4:ai(l,a),Bi(a);break;case 13:ai(l,a),Bi(a),N=a.child,N.flags&8192&&(E=N.memoizedState!==null,N.stateNode.isHidden=E,!E||N.alternate!==null&&N.alternate.memoizedState!==null||(Jg=zt())),v&4&&Yw(a);break;case 22:if(Ne=h!==null&&h.memoizedState!==null,a.mode&1?(ls=(fe=ls)||Ne,ai(l,a),ls=fe):ai(l,a),Bi(a),v&8192){if(fe=a.memoizedState!==null,(a.stateNode.isHidden=fe)&&!Ne&&(a.mode&1)!==0)for(He=a,Ne=a.child;Ne!==null;){for(Ce=He=Ne;He!==null;){switch(_e=He,ze=_e.child,_e.tag){case 0:case 11:case 14:case 15:Rd(4,_e,_e.return);break;case 1:au(_e,_e.return);var We=_e.stateNode;if(typeof We.componentWillUnmount=="function"){v=_e,h=_e.return;try{l=v,We.props=l.memoizedProps,We.state=l.memoizedState,We.componentWillUnmount()}catch(Ke){hn(v,h,Ke)}}break;case 5:au(_e,_e.return);break;case 22:if(_e.memoizedState!==null){e_(Ce);continue}}ze!==null?(ze.return=_e,He=ze):e_(Ce)}Ne=Ne.sibling}e:for(Ne=null,Ce=a;;){if(Ce.tag===5){if(Ne===null){Ne=Ce;try{N=Ce.stateNode,fe?(E=N.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(Y=Ce.stateNode,te=Ce.memoizedProps.style,O=te!=null&&te.hasOwnProperty("display")?te.display:null,Y.style.display=Qr("display",O))}catch(Ke){hn(a,a.return,Ke)}}}else if(Ce.tag===6){if(Ne===null)try{Ce.stateNode.nodeValue=fe?"":Ce.memoizedProps}catch(Ke){hn(a,a.return,Ke)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===a)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===a)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===a)break e;Ne===Ce&&(Ne=null),Ce=Ce.return}Ne===Ce&&(Ne=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:ai(l,a),Bi(a),v&4&&Yw(a);break;case 21:break;default:ai(l,a),Bi(a)}}function Bi(a){var l=a.flags;if(l&2){try{e:{for(var h=a.return;h!==null;){if(Gw(h)){var v=h;break e}h=h.return}throw Error(t(160))}switch(v.tag){case 5:var N=v.stateNode;v.flags&32&&(vi(N,""),v.flags&=-33);var E=Kw(a);Yg(a,E,N);break;case 3:case 4:var O=v.stateNode.containerInfo,Y=Kw(a);Zg(a,Y,O);break;default:throw Error(t(161))}}catch(te){hn(a,a.return,te)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function pA(a,l,h){He=a,Xw(a)}function Xw(a,l,h){for(var v=(a.mode&1)!==0;He!==null;){var N=He,E=N.child;if(N.tag===22&&v){var O=N.memoizedState!==null||Sf;if(!O){var Y=N.alternate,te=Y!==null&&Y.memoizedState!==null||ls;Y=Sf;var fe=ls;if(Sf=O,(ls=te)&&!fe)for(He=N;He!==null;)O=He,te=O.child,O.tag===22&&O.memoizedState!==null?t_(N):te!==null?(te.return=O,He=te):t_(N);for(;E!==null;)He=E,Xw(E),E=E.sibling;He=N,Sf=Y,ls=fe}Jw(a)}else(N.subtreeFlags&8772)!==0&&E!==null?(E.return=N,He=E):Jw(a)}}function Jw(a){for(;He!==null;){var l=He;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:ls||Ef(5,l);break;case 1:var v=l.stateNode;if(l.flags&4&&!ls)if(h===null)v.componentDidMount();else{var N=l.elementType===l.type?h.memoizedProps:ri(l.type,h.memoizedProps);v.componentDidUpdate(N,h.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&ew(l,E,v);break;case 3:var O=l.updateQueue;if(O!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}ew(l,O,h)}break;case 5:var Y=l.stateNode;if(h===null&&l.flags&4){h=Y;var te=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&h.focus();break;case"img":te.src&&(h.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var fe=l.alternate;if(fe!==null){var Ne=fe.memoizedState;if(Ne!==null){var Ce=Ne.dehydrated;Ce!==null&&ts(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ls||l.flags&512&&Kg(l)}catch(_e){hn(l,l.return,_e)}}if(l===a){He=null;break}if(h=l.sibling,h!==null){h.return=l.return,He=h;break}He=l.return}}function e_(a){for(;He!==null;){var l=He;if(l===a){He=null;break}var h=l.sibling;if(h!==null){h.return=l.return,He=h;break}He=l.return}}function t_(a){for(;He!==null;){var l=He;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Ef(4,l)}catch(te){hn(l,h,te)}break;case 1:var v=l.stateNode;if(typeof v.componentDidMount=="function"){var N=l.return;try{v.componentDidMount()}catch(te){hn(l,N,te)}}var E=l.return;try{Kg(l)}catch(te){hn(l,E,te)}break;case 5:var O=l.return;try{Kg(l)}catch(te){hn(l,O,te)}}}catch(te){hn(l,l.return,te)}if(l===a){He=null;break}var Y=l.sibling;if(Y!==null){Y.return=l.return,He=Y;break}He=l.return}}var gA=Math.ceil,Tf=G.ReactCurrentDispatcher,Qg=G.ReactCurrentOwner,Fr=G.ReactCurrentBatchConfig,It=0,Fn=null,wn=null,Gn=0,rr=0,ou=Ro(0),An=0,Ld=null,Ql=0,Af=0,Xg=0,Md=null,Us=null,Jg=0,lu=1/0,Da=null,kf=!1,ex=null,Vo=null,Pf=!1,Bo=null,If=0,Dd=0,tx=null,Rf=-1,Lf=0;function Es(){return(It&6)!==0?zt():Rf!==-1?Rf:Rf=zt()}function zo(a){return(a.mode&1)===0?1:(It&2)!==0&&Gn!==0?Gn&-Gn:JT.transition!==null?(Lf===0&&(Lf=Rl()),Lf):(a=pt,a!==0||(a=window.event,a=a===void 0?16:gt(a.type)),a)}function oi(a,l,h,v){if(50<Dd)throw Dd=0,tx=null,Error(t(185));vs(a,h,v),((It&2)===0||a!==Fn)&&(a===Fn&&((It&2)===0&&(Af|=h),An===4&&Uo(a,Gn)),$s(a,v),h===1&&It===0&&(l.mode&1)===0&&(lu=zt()+500,lf&&Mo()))}function $s(a,l){var h=a.callbackNode;_r(a,l);var v=Mt(a,a===Fn?Gn:0);if(v===0)h!==null&&da(h),a.callbackNode=null,a.callbackPriority=0;else if(l=v&-v,a.callbackPriority!==l){if(h!=null&&da(h),l===1)a.tag===0?XT(s_.bind(null,a)):U0(s_.bind(null,a)),rs(function(){(It&6)===0&&Mo()}),h=null;else{switch(es(v)){case 1:h=uo;break;case 4:h=Il;break;case 16:h=fa;break;case 536870912:h=yr;break;default:h=fa}h=d_(h,n_.bind(null,a))}a.callbackPriority=l,a.callbackNode=h}}function n_(a,l){if(Rf=-1,Lf=0,(It&6)!==0)throw Error(t(327));var h=a.callbackNode;if(cu()&&a.callbackNode!==h)return null;var v=Mt(a,a===Fn?Gn:0);if(v===0)return null;if((v&30)!==0||(v&a.expiredLanes)!==0||l)l=Mf(a,v);else{l=v;var N=It;It|=2;var E=i_();(Fn!==a||Gn!==l)&&(Da=null,lu=zt()+500,Jl(a,l));do try{yA();break}catch(Y){r_(a,Y)}while(!0);yg(),Tf.current=E,It=N,wn!==null?l=0:(Fn=null,Gn=0,l=An)}if(l!==0){if(l===2&&(N=Mn(a),N!==0&&(v=N,l=nx(a,N))),l===1)throw h=Ld,Jl(a,0),Uo(a,v),$s(a,zt()),h;if(l===6)Uo(a,v);else{if(N=a.current.alternate,(v&30)===0&&!xA(N)&&(l=Mf(a,v),l===2&&(E=Mn(a),E!==0&&(v=E,l=nx(a,E))),l===1))throw h=Ld,Jl(a,0),Uo(a,v),$s(a,zt()),h;switch(a.finishedWork=N,a.finishedLanes=v,l){case 0:case 1:throw Error(t(345));case 2:ec(a,Us,Da);break;case 3:if(Uo(a,v),(v&130023424)===v&&(l=Jg+500-zt(),10<l)){if(Mt(a,0)!==0)break;if(N=a.suspendedLanes,(N&v)!==v){Es(),a.pingedLanes|=a.suspendedLanes&N;break}a.timeoutHandle=En(ec.bind(null,a,Us,Da),l);break}ec(a,Us,Da);break;case 4:if(Uo(a,v),(v&4194240)===v)break;for(l=a.eventTimes,N=-1;0<v;){var O=31-dt(v);E=1<<O,O=l[O],O>N&&(N=O),v&=~E}if(v=N,v=zt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*gA(v/1960))-v,10<v){a.timeoutHandle=En(ec.bind(null,a,Us,Da),v);break}ec(a,Us,Da);break;case 5:ec(a,Us,Da);break;default:throw Error(t(329))}}}return $s(a,zt()),a.callbackNode===h?n_.bind(null,a):null}function nx(a,l){var h=Md;return a.current.memoizedState.isDehydrated&&(Jl(a,l).flags|=256),a=Mf(a,l),a!==2&&(l=Us,Us=h,l!==null&&sx(l)),a}function sx(a){Us===null?Us=a:Us.push.apply(Us,a)}function xA(a){for(var l=a;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var v=0;v<h.length;v++){var N=h[v],E=N.getSnapshot;N=N.value;try{if(!er(E(),N))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Uo(a,l){for(l&=~Xg,l&=~Af,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var h=31-dt(l),v=1<<h;a[h]=-1,l&=~v}}function s_(a){if((It&6)!==0)throw Error(t(327));cu();var l=Mt(a,0);if((l&1)===0)return $s(a,zt()),null;var h=Mf(a,l);if(a.tag!==0&&h===2){var v=Mn(a);v!==0&&(l=v,h=nx(a,v))}if(h===1)throw h=Ld,Jl(a,0),Uo(a,l),$s(a,zt()),h;if(h===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,ec(a,Us,Da),$s(a,zt()),null}function rx(a,l){var h=It;It|=1;try{return a(l)}finally{It=h,It===0&&(lu=zt()+500,lf&&Mo())}}function Xl(a){Bo!==null&&Bo.tag===0&&(It&6)===0&&cu();var l=It;It|=1;var h=Fr.transition,v=pt;try{if(Fr.transition=null,pt=1,a)return a()}finally{pt=v,Fr.transition=h,It=l,(It&6)===0&&Mo()}}function ix(){rr=ou.current,qt(ou)}function Jl(a,l){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,yn(h)),wn!==null)for(h=wn.return;h!==null;){var v=h;switch(mg(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&af();break;case 3:ru(),qt(Vs),qt(is),Eg();break;case 5:Cg(v);break;case 4:ru();break;case 13:qt(tn);break;case 19:qt(tn);break;case 10:wg(v.type._context);break;case 22:case 23:ix()}h=h.return}if(Fn=a,wn=a=$o(a.current,null),Gn=rr=l,An=0,Ld=null,Xg=Af=Ql=0,Us=Md=null,Kl!==null){for(l=0;l<Kl.length;l++)if(h=Kl[l],v=h.interleaved,v!==null){h.interleaved=null;var N=v.next,E=h.pending;if(E!==null){var O=E.next;E.next=N,v.next=O}h.pending=v}Kl=null}return a}function r_(a,l){do{var h=wn;try{if(yg(),vf.current=bf,yf){for(var v=nn.memoizedState;v!==null;){var N=v.queue;N!==null&&(N.pending=null),v=v.next}yf=!1}if(Yl=0,On=Tn=nn=null,Td=!1,Ad=0,Qg.current=null,h===null||h.return===null){An=1,Ld=l,wn=null;break}e:{var E=a,O=h.return,Y=h,te=l;if(l=Gn,Y.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var fe=te,Ne=Y,Ce=Ne.tag;if((Ne.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var _e=Ne.alternate;_e?(Ne.updateQueue=_e.updateQueue,Ne.memoizedState=_e.memoizedState,Ne.lanes=_e.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var ze=Aw(O);if(ze!==null){ze.flags&=-257,kw(ze,O,Y,E,l),ze.mode&1&&Tw(E,fe,l),l=ze,te=fe;var We=l.updateQueue;if(We===null){var Ke=new Set;Ke.add(te),l.updateQueue=Ke}else We.add(te);break e}else{if((l&1)===0){Tw(E,fe,l),ax();break e}te=Error(t(426))}}else if(Xt&&Y.mode&1){var mn=Aw(O);if(mn!==null){(mn.flags&65536)===0&&(mn.flags|=256),kw(mn,O,Y,E,l),xg(iu(te,Y));break e}}E=te=iu(te,Y),An!==4&&(An=2),Md===null?Md=[E]:Md.push(E),E=O;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var oe=Sw(E,te,l);J0(E,oe);break e;case 1:Y=te;var ne=E.type,le=E.stateNode;if((E.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Vo===null||!Vo.has(le)))){E.flags|=65536,l&=-l,E.lanes|=l;var Te=Ew(E,Y,l);J0(E,Te);break e}}E=E.return}while(E!==null)}o_(h)}catch(Ze){l=Ze,wn===h&&h!==null&&(wn=h=h.return);continue}break}while(!0)}function i_(){var a=Tf.current;return Tf.current=bf,a===null?bf:a}function ax(){(An===0||An===3||An===2)&&(An=4),Fn===null||(Ql&268435455)===0&&(Af&268435455)===0||Uo(Fn,Gn)}function Mf(a,l){var h=It;It|=2;var v=i_();(Fn!==a||Gn!==l)&&(Da=null,Jl(a,l));do try{vA();break}catch(N){r_(a,N)}while(!0);if(yg(),It=h,Tf.current=v,wn!==null)throw Error(t(261));return Fn=null,Gn=0,An}function vA(){for(;wn!==null;)a_(wn)}function yA(){for(;wn!==null&&!ha();)a_(wn)}function a_(a){var l=u_(a.alternate,a,rr);a.memoizedProps=a.pendingProps,l===null?o_(a):wn=l,Qg.current=null}function o_(a){var l=a;do{var h=l.alternate;if(a=l.return,(l.flags&32768)===0){if(h=dA(h,l,rr),h!==null){wn=h;return}}else{if(h=hA(h,l),h!==null){h.flags&=32767,wn=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{An=6,wn=null;return}}if(l=l.sibling,l!==null){wn=l;return}wn=l=a}while(l!==null);An===0&&(An=5)}function ec(a,l,h){var v=pt,N=Fr.transition;try{Fr.transition=null,pt=1,wA(a,l,h,v)}finally{Fr.transition=N,pt=v}return null}function wA(a,l,h,v){do cu();while(Bo!==null);if((It&6)!==0)throw Error(t(327));h=a.finishedWork;var N=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var E=h.lanes|h.childLanes;if(Yt(a,E),a===Fn&&(wn=Fn=null,Gn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Pf||(Pf=!0,d_(fa,function(){return cu(),null})),E=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||E){E=Fr.transition,Fr.transition=null;var O=pt;pt=1;var Y=It;It|=4,Qg.current=null,mA(a,h),Qw(h,a),Pr(Je),jr=!!Fe,Je=Fe=null,a.current=h,pA(h),Ls(),It=Y,pt=O,Fr.transition=E}else a.current=h;if(Pf&&(Pf=!1,Bo=a,If=N),E=a.pendingLanes,E===0&&(Vo=null),Si(h.stateNode),$s(a,zt()),l!==null)for(v=a.onRecoverableError,h=0;h<l.length;h++)N=l[h],v(N.value,{componentStack:N.stack,digest:N.digest});if(kf)throw kf=!1,a=ex,ex=null,a;return(If&1)!==0&&a.tag!==0&&cu(),E=a.pendingLanes,(E&1)!==0?a===tx?Dd++:(Dd=0,tx=a):Dd=0,Mo(),null}function cu(){if(Bo!==null){var a=es(If),l=Fr.transition,h=pt;try{if(Fr.transition=null,pt=16>a?16:a,Bo===null)var v=!1;else{if(a=Bo,Bo=null,If=0,(It&6)!==0)throw Error(t(331));var N=It;for(It|=4,He=a.current;He!==null;){var E=He,O=E.child;if((He.flags&16)!==0){var Y=E.deletions;if(Y!==null){for(var te=0;te<Y.length;te++){var fe=Y[te];for(He=fe;He!==null;){var Ne=He;switch(Ne.tag){case 0:case 11:case 15:Rd(8,Ne,E)}var Ce=Ne.child;if(Ce!==null)Ce.return=Ne,He=Ce;else for(;He!==null;){Ne=He;var _e=Ne.sibling,ze=Ne.return;if(qw(Ne),Ne===fe){He=null;break}if(_e!==null){_e.return=ze,He=_e;break}He=ze}}}var We=E.alternate;if(We!==null){var Ke=We.child;if(Ke!==null){We.child=null;do{var mn=Ke.sibling;Ke.sibling=null,Ke=mn}while(Ke!==null)}}He=E}}if((E.subtreeFlags&2064)!==0&&O!==null)O.return=E,He=O;else e:for(;He!==null;){if(E=He,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Rd(9,E,E.return)}var oe=E.sibling;if(oe!==null){oe.return=E.return,He=oe;break e}He=E.return}}var ne=a.current;for(He=ne;He!==null;){O=He;var le=O.child;if((O.subtreeFlags&2064)!==0&&le!==null)le.return=O,He=le;else e:for(O=ne;He!==null;){if(Y=He,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Ef(9,Y)}}catch(Ze){hn(Y,Y.return,Ze)}if(Y===O){He=null;break e}var Te=Y.sibling;if(Te!==null){Te.return=Y.return,He=Te;break e}He=Y.return}}if(It=N,Mo(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Ci,a)}catch{}v=!0}return v}finally{pt=h,Fr.transition=l}}return!1}function l_(a,l,h){l=iu(h,l),l=Sw(a,l,1),a=Oo(a,l,1),l=Es(),a!==null&&(vs(a,1,l),$s(a,l))}function hn(a,l,h){if(a.tag===3)l_(a,a,h);else for(;l!==null;){if(l.tag===3){l_(l,a,h);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Vo===null||!Vo.has(v))){a=iu(h,a),a=Ew(l,a,1),l=Oo(l,a,1),a=Es(),l!==null&&(vs(l,1,a),$s(l,a));break}}l=l.return}}function _A(a,l,h){var v=a.pingCache;v!==null&&v.delete(l),l=Es(),a.pingedLanes|=a.suspendedLanes&h,Fn===a&&(Gn&h)===h&&(An===4||An===3&&(Gn&130023424)===Gn&&500>zt()-Jg?Jl(a,0):Xg|=h),$s(a,l)}function c_(a,l){l===0&&((a.mode&1)===0?l=1:(l=wr,wr<<=1,(wr&130023424)===0&&(wr=4194304)));var h=Es();a=Ra(a,l),a!==null&&(vs(a,l,h),$s(a,h))}function bA(a){var l=a.memoizedState,h=0;l!==null&&(h=l.retryLane),c_(a,h)}function NA(a,l){var h=0;switch(a.tag){case 13:var v=a.stateNode,N=a.memoizedState;N!==null&&(h=N.retryLane);break;case 19:v=a.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(l),c_(a,h)}var u_;u_=function(a,l,h){if(a!==null)if(a.memoizedProps!==l.pendingProps||Vs.current)zs=!0;else{if((a.lanes&h)===0&&(l.flags&128)===0)return zs=!1,uA(a,l,h);zs=(a.flags&131072)!==0}else zs=!1,Xt&&(l.flags&1048576)!==0&&$0(l,uf,l.index);switch(l.lanes=0,l.tag){case 2:var v=l.type;Cf(a,l),a=l.pendingProps;var N=Qc(l,is.current);su(l,h),N=kg(null,l,v,a,N,h);var E=Pg();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Bs(v)?(E=!0,of(l)):E=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ng(l),N.updater=Nf,l.stateNode=N,N._reactInternals=l,Og(l,v,a,h),l=zg(null,l,v,!0,E,h)):(l.tag=0,Xt&&E&&fg(l),Ss(null,l,N,h),l=l.child),l;case 16:v=l.elementType;e:{switch(Cf(a,l),a=l.pendingProps,N=v._init,v=N(v._payload),l.type=v,N=l.tag=CA(v),a=ri(v,a),N){case 0:l=Bg(null,l,v,a,h);break e;case 1:l=Dw(null,l,v,a,h);break e;case 11:l=Pw(null,l,v,a,h);break e;case 14:l=Iw(null,l,v,ri(v.type,a),h);break e}throw Error(t(306,v,""))}return l;case 0:return v=l.type,N=l.pendingProps,N=l.elementType===v?N:ri(v,N),Bg(a,l,v,N,h);case 1:return v=l.type,N=l.pendingProps,N=l.elementType===v?N:ri(v,N),Dw(a,l,v,N,h);case 3:e:{if(Ow(l),a===null)throw Error(t(387));v=l.pendingProps,E=l.memoizedState,N=E.element,X0(a,l),gf(l,v,null,h);var O=l.memoizedState;if(v=O.element,E.isDehydrated)if(E={element:v,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){N=iu(Error(t(423)),l),l=Fw(a,l,v,h,N);break e}else if(v!==N){N=iu(Error(t(424)),l),l=Fw(a,l,v,h,N);break e}else for(sr=Oi(l.stateNode.containerInfo.firstChild),nr=l,Xt=!0,si=null,h=Y0(l,null,v,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(eu(),v===N){l=Ma(a,l,h);break e}Ss(a,l,v,h)}l=l.child}return l;case 5:return tw(l),a===null&&gg(l),v=l.type,N=l.pendingProps,E=a!==null?a.memoizedProps:null,O=N.children,mt(v,N)?O=null:E!==null&&mt(v,E)&&(l.flags|=32),Mw(a,l),Ss(a,l,O,h),l.child;case 6:return a===null&&gg(l),null;case 13:return Vw(a,l,h);case 4:return jg(l,l.stateNode.containerInfo),v=l.pendingProps,a===null?l.child=tu(l,null,v,h):Ss(a,l,v,h),l.child;case 11:return v=l.type,N=l.pendingProps,N=l.elementType===v?N:ri(v,N),Pw(a,l,v,N,h);case 7:return Ss(a,l,l.pendingProps,h),l.child;case 8:return Ss(a,l,l.pendingProps.children,h),l.child;case 12:return Ss(a,l,l.pendingProps.children,h),l.child;case 10:e:{if(v=l.type._context,N=l.pendingProps,E=l.memoizedProps,O=N.value,$t(ff,v._currentValue),v._currentValue=O,E!==null)if(er(E.value,O)){if(E.children===N.children&&!Vs.current){l=Ma(a,l,h);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var Y=E.dependencies;if(Y!==null){O=E.child;for(var te=Y.firstContext;te!==null;){if(te.context===v){if(E.tag===1){te=La(-1,h&-h),te.tag=2;var fe=E.updateQueue;if(fe!==null){fe=fe.shared;var Ne=fe.pending;Ne===null?te.next=te:(te.next=Ne.next,Ne.next=te),fe.pending=te}}E.lanes|=h,te=E.alternate,te!==null&&(te.lanes|=h),_g(E.return,h,l),Y.lanes|=h;break}te=te.next}}else if(E.tag===10)O=E.type===l.type?null:E.child;else if(E.tag===18){if(O=E.return,O===null)throw Error(t(341));O.lanes|=h,Y=O.alternate,Y!==null&&(Y.lanes|=h),_g(O,h,l),O=E.sibling}else O=E.child;if(O!==null)O.return=E;else for(O=E;O!==null;){if(O===l){O=null;break}if(E=O.sibling,E!==null){E.return=O.return,O=E;break}O=O.return}E=O}Ss(a,l,N.children,h),l=l.child}return l;case 9:return N=l.type,v=l.pendingProps.children,su(l,h),N=Dr(N),v=v(N),l.flags|=1,Ss(a,l,v,h),l.child;case 14:return v=l.type,N=ri(v,l.pendingProps),N=ri(v.type,N),Iw(a,l,v,N,h);case 15:return Rw(a,l,l.type,l.pendingProps,h);case 17:return v=l.type,N=l.pendingProps,N=l.elementType===v?N:ri(v,N),Cf(a,l),l.tag=1,Bs(v)?(a=!0,of(l)):a=!1,su(l,h),jw(l,v,N),Og(l,v,N,h),zg(null,l,v,!0,a,h);case 19:return zw(a,l,h);case 22:return Lw(a,l,h)}throw Error(t(156,l.tag))};function d_(a,l){return Pl(a,l)}function jA(a,l,h,v){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(a,l,h,v){return new jA(a,l,h,v)}function ox(a){return a=a.prototype,!(!a||!a.isReactComponent)}function CA(a){if(typeof a=="function")return ox(a)?1:0;if(a!=null){if(a=a.$$typeof,a===q)return 11;if(a===be)return 14}return 2}function $o(a,l){var h=a.alternate;return h===null?(h=Vr(a.tag,l,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=l,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,l=a.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Df(a,l,h,v,N,E){var O=2;if(v=a,typeof a=="function")ox(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case D:return tc(h.children,N,E,l);case P:O=8,N|=8;break;case V:return a=Vr(12,h,l,N|2),a.elementType=V,a.lanes=E,a;case H:return a=Vr(13,h,l,N),a.elementType=H,a.lanes=E,a;case se:return a=Vr(19,h,l,N),a.elementType=se,a.lanes=E,a;case we:return Of(h,N,E,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case B:O=10;break e;case U:O=9;break e;case q:O=11;break e;case be:O=14;break e;case ie:O=16,v=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=Vr(O,h,l,N),l.elementType=a,l.type=v,l.lanes=E,l}function tc(a,l,h,v){return a=Vr(7,a,v,l),a.lanes=h,a}function Of(a,l,h,v){return a=Vr(22,a,v,l),a.elementType=we,a.lanes=h,a.stateNode={isHidden:!1},a}function lx(a,l,h){return a=Vr(6,a,null,l),a.lanes=h,a}function cx(a,l,h){return l=Vr(4,a.children!==null?a.children:[],a.key,l),l.lanes=h,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function SA(a,l,h,v,N){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ei(0),this.expirationTimes=Ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.identifierPrefix=v,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function ux(a,l,h,v,N,E,O,Y,te){return a=new SA(a,l,h,Y,te),l===1?(l=1,E===!0&&(l|=8)):l=0,E=Vr(3,null,null,l),a.current=E,E.stateNode=a,E.memoizedState={element:v,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ng(E),a}function EA(a,l,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:v==null?null:""+v,children:a,containerInfo:l,implementation:h}}function h_(a){if(!a)return Lo;a=a._reactInternals;e:{if(Rs(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Bs(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var h=a.type;if(Bs(h))return B0(a,h,l)}return l}function f_(a,l,h,v,N,E,O,Y,te){return a=ux(h,v,!0,a,N,E,O,Y,te),a.context=h_(null),h=a.current,v=Es(),N=zo(h),E=La(v,N),E.callback=l??null,Oo(h,E,N),a.current.lanes=N,vs(a,N,v),$s(a,v),a}function Ff(a,l,h,v){var N=l.current,E=Es(),O=zo(N);return h=h_(h),l.context===null?l.context=h:l.pendingContext=h,l=La(E,O),l.payload={element:a},v=v===void 0?null:v,v!==null&&(l.callback=v),a=Oo(N,l,O),a!==null&&(oi(a,N,O,E),pf(a,N,O)),O}function Vf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function m_(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<l?h:l}}function dx(a,l){m_(a,l),(a=a.alternate)&&m_(a,l)}function TA(){return null}var p_=typeof reportError=="function"?reportError:function(a){console.error(a)};function hx(a){this._internalRoot=a}Bf.prototype.render=hx.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));Ff(a,l,null,null)},Bf.prototype.unmount=hx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Xl(function(){Ff(null,a,null,null)}),l[Ft]=null}};function Bf(a){this._internalRoot=a}Bf.prototype.unstable_scheduleHydration=function(a){if(a){var l=xa();a={blockedOn:null,target:a,priority:l};for(var h=0;h<Qt.length&&l!==0&&l<Qt[h].priority;h++);Qt.splice(h,0,a),h===0&&ki(a)}};function fx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function zf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function g_(){}function AA(a,l,h,v,N){if(N){if(typeof v=="function"){var E=v;v=function(){var fe=Vf(O);E.call(fe)}}var O=f_(l,v,a,0,null,!1,!1,"",g_);return a._reactRootContainer=O,a[Ft]=O.current,Ao(a.nodeType===8?a.parentNode:a),Xl(),O}for(;N=a.lastChild;)a.removeChild(N);if(typeof v=="function"){var Y=v;v=function(){var fe=Vf(te);Y.call(fe)}}var te=ux(a,0,!1,null,null,!1,!1,"",g_);return a._reactRootContainer=te,a[Ft]=te.current,Ao(a.nodeType===8?a.parentNode:a),Xl(function(){Ff(l,te,h,v)}),te}function Uf(a,l,h,v,N){var E=h._reactRootContainer;if(E){var O=E;if(typeof N=="function"){var Y=N;N=function(){var te=Vf(O);Y.call(te)}}Ff(l,O,a,N)}else O=AA(h,l,a,N,v);return Vf(O)}pa=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var h=Ve(l.pendingLanes);h!==0&&(Ys(l,h|1),$s(l,zt()),(It&6)===0&&(lu=zt()+500,Mo()))}break;case 13:Xl(function(){var v=Ra(a,1);if(v!==null){var N=Es();oi(v,a,1,N)}}),dx(a,1)}},br=function(a){if(a.tag===13){var l=Ra(a,134217728);if(l!==null){var h=Es();oi(l,a,134217728,h)}dx(a,134217728)}},ga=function(a){if(a.tag===13){var l=zo(a),h=Ra(a,l);if(h!==null){var v=Es();oi(h,a,l,v)}dx(a,l)}},xa=function(){return pt},Ti=function(a,l){var h=pt;try{return pt=a,l()}finally{pt=h}},pr=function(a,l,h){switch(l){case"input":if(ps(a,h),l=h.name,h.type==="radio"&&l!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var v=h[l];if(v!==a&&v.form===a.form){var N=Zc(v);if(!N)throw Error(t(90));wt(v),ps(v,N)}}}break;case"textarea":kc(a,h);break;case"select":l=h.value,l!=null&&gs(a,!!h.multiple,l,!1)}},Rc=rx,Lc=Xl;var kA={usingClientEntryPoint:!1,Events:[Ta,Aa,Zc,_i,bi,rx]},Od={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PA={bundleType:Od.bundleType,version:Od.version,rendererPackageName:Od.rendererPackageName,rendererConfig:Od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Oc(a),a===null?null:a.stateNode},findFiberByHostInstance:Od.findFiberByHostInstance||TA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Ci=$f.inject(PA),Jn=$f}catch{}}return Hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kA,Hs.createPortal=function(a,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fx(l))throw Error(t(200));return EA(a,l,null,h)},Hs.createRoot=function(a,l){if(!fx(a))throw Error(t(299));var h=!1,v="",N=p_;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=ux(a,1,!1,null,null,h,!1,v,N),a[Ft]=l.current,Ao(a.nodeType===8?a.parentNode:a),new hx(l)},Hs.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Oc(l),a=a===null?null:a.stateNode,a},Hs.flushSync=function(a){return Xl(a)},Hs.hydrate=function(a,l,h){if(!zf(l))throw Error(t(200));return Uf(null,a,l,!0,h)},Hs.hydrateRoot=function(a,l,h){if(!fx(a))throw Error(t(405));var v=h!=null&&h.hydratedSources||null,N=!1,E="",O=p_;if(h!=null&&(h.unstable_strictMode===!0&&(N=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),l=f_(l,null,a,1,h??null,N,!1,E,O),a[Ft]=l.current,Ao(a),v)for(a=0;a<v.length;a++)h=v[a],N=h._getVersion,N=N(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,N]:l.mutableSourceEagerHydrationData.push(h,N);return new Bf(l)},Hs.render=function(a,l,h){if(!zf(l))throw Error(t(200));return Uf(null,a,l,!1,h)},Hs.unmountComponentAtNode=function(a){if(!zf(a))throw Error(t(40));return a._reactRootContainer?(Xl(function(){Uf(null,null,a,!1,function(){a._reactRootContainer=null,a[Ft]=null})}),!0):!1},Hs.unstable_batchedUpdates=rx,Hs.unstable_renderSubtreeIntoContainer=function(a,l,h,v){if(!zf(h))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Uf(a,l,h,!1,v)},Hs.version="18.3.1-next-f1338f8080-20240426",Hs}var j_;function QN(){if(j_)return gx.exports;j_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gx.exports=VA(),gx.exports}var C_;function BA(){if(C_)return Hf;C_=1;var n=QN();return Hf.createRoot=n.createRoot,Hf.hydrateRoot=n.hydrateRoot,Hf}var zA=BA(),_=np();const ds=Wv(_),qv=RA({__proto__:null,default:ds},[_]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$A=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),S_=n=>{const e=$A(n);return e.charAt(0).toUpperCase()+e.slice(1)},XN=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:u,...f},m)=>_.createElement("svg",{ref:m,...HA,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:XN("lucide",i),...f},[...u.map(([x,w])=>_.createElement(x,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(n,e)=>{const t=_.forwardRef(({className:r,...i},c)=>_.createElement(WA,{ref:c,iconNode:e,className:XN(`lucide-${UA(S_(n))}`,`lucide-${n}`,r),...i}));return t.displayName=S_(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],JN=Se("archive",qA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Wr=Se("arrow-left",GA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ZA=Se("award",KA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],QA=Se("ban",YA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ha=Se("bell",XA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ar=Se("book-open",JA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],tk=Se("book",ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],yx=Se("bot",nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],rk=Se("building-2",sk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gs=Se("calendar",ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],E_=Se("camera",ak);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ll=Se("check",ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sp=Se("chevron-down",lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rp=Se("chevron-left",ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xo=Se("chevron-right",uk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hk=Se("chevron-up",dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bh=Se("circle-alert",fk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cr=Se("circle-check-big",mk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],im=Se("circle-check",pk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xk=Se("circle-user-round",gk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yk=Se("circle",vk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ip=Se("clock",wk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Pu=Se("credit-card",_k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Wa=Se("dollar-sign",bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Iu=Se("download",Nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],e1=Se("ellipsis-vertical",jk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bu=Se("eye-off",Ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ur=Se("eye",Sk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kx=Se("file-text",Ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],wx=Se("flag",Tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Gv=Se("funnel",Ak);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ym=Se("globe",kk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],_x=Se("graduation-cap",Pk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Rk=Se("grid-3x3",Ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Mk=Se("headphones",Lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],$i=Se("heart",Dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Fk=Se("history",Ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ru=Se("house",Vk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sh=Se("image",Bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Uk=Se("languages",zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Hk=Se("list",$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],T_=Se("loader-circle",Wk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fs=Se("lock",qk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Kk=Se("log-in",Gk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],rh=Se("log-out",Zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],_c=Se("mail",Yk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],In=Se("map-pin",Qk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],Jk=Se("map-pinned",Xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],tP=Se("maximize",eP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],qs=Se("message-circle",nP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Zx=Se("message-square",sP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],bx=Se("mic",rP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],aP=Se("navigation",iP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],$r=Se("package",oP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],cP=Se("paperclip",lP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],A_=Se("pause",uP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Yx=Se("pen",dP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ih=Se("phone",hP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],k_=Se("play",fP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cl=Se("plus",mP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],gP=Se("printer",pP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],t1=Se("refresh-cw",xP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],yP=Se("rotate-cw",vP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],n1=Se("save",wP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ln=Se("search",_P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wm=Se("send",bP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nh=Se("settings",NP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],CP=Se("share-2",jP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qx=Se("shield-check",SP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ul=Se("shield",EP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Xx=Se("shopping-bag",TP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Kv=Se("shopping-cart",AP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],s1=Se("sliders-horizontal",kP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],r1=Se("smile",PP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],P_=Se("sparkles",IP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],i1=Se("square-pen",RP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],lc=Se("star",LP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],I_=Se("tag",MP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],OP=Se("thumbs-up",DP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],cc=Se("trash-2",FP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],a1=Se("trending-up",VP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Lu=Se("truck",BP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],o1=Se("upload",zP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$P=Se("user-minus",UP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],l1=Se("user-plus",HP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ah=Se("user",WP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],gn=Se("users",qP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Jx=Se("video",GP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ZP=Se("volume-2",KP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],QP=Se("volume-x",YP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],JP=Se("wallet",XP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ot=Se("x",eI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nI=Se("zoom-in",tI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],rI=Se("zoom-out",sI);function R_(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function eo(...n){return e=>{let t=!1;const r=n.map(i=>{const c=R_(i,e);return!t&&typeof c=="function"&&(t=!0),c});if(t)return()=>{for(let i=0;i<r.length;i++){const c=r[i];typeof c=="function"?c():R_(n[i],null)}}}}function ct(...n){return _.useCallback(eo(...n),n)}var iI=Symbol.for("react.lazy"),_m=qv[" use ".trim().toString()];function aI(n){return typeof n=="object"&&n!==null&&"then"in n}function c1(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===iI&&"_payload"in n&&aI(n._payload)}function ap(n){const e=oI(n),t=_.forwardRef((r,i)=>{let{children:c,...u}=r;c1(c)&&typeof _m=="function"&&(c=_m(c._payload));const f=_.Children.toArray(c),m=f.find(cI);if(m){const x=m.props.children,w=f.map(y=>y===m?_.Children.count(x)>1?_.Children.only(null):_.isValidElement(x)?x.props.children:null:y);return s.jsx(e,{...u,ref:i,children:_.isValidElement(x)?_.cloneElement(x,void 0,w):null})}return s.jsx(e,{...u,ref:i,children:c})});return t.displayName=`${n}.Slot`,t}var u1=ap("Slot");function oI(n){const e=_.forwardRef((t,r)=>{let{children:i,...c}=t;if(c1(i)&&typeof _m=="function"&&(i=_m(i._payload)),_.isValidElement(i)){const u=dI(i),f=uI(c,i.props);return i.type!==_.Fragment&&(f.ref=r?eo(r,u):u),_.cloneElement(i,f)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var lI=Symbol("radix.slottable");function cI(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===lI}function uI(n,e){const t={...e};for(const r in e){const i=n[r],c=e[r];/^on[A-Z]/.test(r)?i&&c?t[r]=(...f)=>{const m=c(...f);return i(...f),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...c}:r==="className"&&(t[r]=[i,c].filter(Boolean).join(" "))}return{...n,...t}}function dI(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function d1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=d1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function h1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=d1(n))&&(r&&(r+=" "),r+=e);return r}const L_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,M_=h1,f1=(n,e)=>t=>{var r;if(e?.variants==null)return M_(n,t?.class,t?.className);const{variants:i,defaultVariants:c}=e,u=Object.keys(i).map(x=>{const w=t?.[x],y=c?.[x];if(w===null)return null;const j=L_(w)||L_(y);return i[x][j]}),f=t&&Object.entries(t).reduce((x,w)=>{let[y,j]=w;return j===void 0||(x[y]=j),x},{}),m=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((x,w)=>{let{class:y,className:j,...S}=w;return Object.entries(S).every(C=>{let[A,M]=C;return Array.isArray(M)?M.includes({...c,...f}[A]):{...c,...f}[A]===M})?[...x,y,j]:x},[]);return M_(n,u,m,t?.class,t?.className)},hI=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},fI=(n,e)=>({classGroupId:n,validator:e}),m1=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),bm="-",D_=[],mI="arbitrary..",pI=n=>{const e=xI(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return gI(u);const f=u.split(bm),m=f[0]===""&&f.length>1?1:0;return p1(f,m,e)},getConflictingClassGroupIds:(u,f)=>{if(f){const m=r[u],x=t[u];return m?x?hI(x,m):m:x||D_}return t[u]||D_}}},p1=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const i=n[e],c=t.nextPart.get(i);if(c){const x=p1(n,e+1,c);if(x)return x}const u=t.validators;if(u===null)return;const f=e===0?n.join(bm):n.slice(e).join(bm),m=u.length;for(let x=0;x<m;x++){const w=u[x];if(w.validator(f))return w.classGroupId}},gI=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?mI+r:void 0})(),xI=n=>{const{theme:e,classGroups:t}=n;return vI(t,e)},vI=(n,e)=>{const t=m1();for(const r in n){const i=n[r];Zv(i,t,r,e)}return t},Zv=(n,e,t,r)=>{const i=n.length;for(let c=0;c<i;c++){const u=n[c];yI(u,e,t,r)}},yI=(n,e,t,r)=>{if(typeof n=="string"){wI(n,e,t);return}if(typeof n=="function"){_I(n,e,t,r);return}bI(n,e,t,r)},wI=(n,e,t)=>{const r=n===""?e:g1(e,n);r.classGroupId=t},_I=(n,e,t,r)=>{if(NI(n)){Zv(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(fI(t,n))},bI=(n,e,t,r)=>{const i=Object.entries(n),c=i.length;for(let u=0;u<c;u++){const[f,m]=i[u];Zv(m,g1(e,f),t,r)}},g1=(n,e)=>{let t=n;const r=e.split(bm),i=r.length;for(let c=0;c<i;c++){const u=r[c];let f=t.nextPart.get(u);f||(f=m1(),t.nextPart.set(u,f)),t=f}return t},NI=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,jI=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const i=(c,u)=>{t[c]=u,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(c){let u=t[c];if(u!==void 0)return u;if((u=r[c])!==void 0)return i(c,u),u},set(c,u){c in t?t[c]=u:i(c,u)}}},ev="!",O_=":",CI=[],F_=(n,e,t,r,i)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:i}),SI=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const c=[];let u=0,f=0,m=0,x;const w=i.length;for(let A=0;A<w;A++){const M=i[A];if(u===0&&f===0){if(M===O_){c.push(i.slice(m,A)),m=A+1;continue}if(M==="/"){x=A;continue}}M==="["?u++:M==="]"?u--:M==="("?f++:M===")"&&f--}const y=c.length===0?i:i.slice(m);let j=y,S=!1;y.endsWith(ev)?(j=y.slice(0,-1),S=!0):y.startsWith(ev)&&(j=y.slice(1),S=!0);const C=x&&x>m?x-m:void 0;return F_(c,S,j,C)};if(e){const i=e+O_,c=r;r=u=>u.startsWith(i)?c(u.slice(i.length)):F_(CI,!1,u,void 0,!0)}if(t){const i=r;r=c=>t({className:c,parseClassName:i})}return r},EI=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let i=[];for(let c=0;c<t.length;c++){const u=t[c],f=u[0]==="[",m=e.has(u);f||m?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(u)):i.push(u)}return i.length>0&&(i.sort(),r.push(...i)),r}},TI=n=>({cache:jI(n.cacheSize),parseClassName:SI(n),sortModifiers:EI(n),...pI(n)}),AI=/\s+/,kI=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:c}=e,u=[],f=n.trim().split(AI);let m="";for(let x=f.length-1;x>=0;x-=1){const w=f[x],{isExternal:y,modifiers:j,hasImportantModifier:S,baseClassName:C,maybePostfixModifierPosition:A}=t(w);if(y){m=w+(m.length>0?" "+m:m);continue}let M=!!A,R=r(M?C.substring(0,A):C);if(!R){if(!M){m=w+(m.length>0?" "+m:m);continue}if(R=r(C),!R){m=w+(m.length>0?" "+m:m);continue}M=!1}const z=j.length===0?"":j.length===1?j[0]:c(j).join(":"),W=S?z+ev:z,G=W+R;if(u.indexOf(G)>-1)continue;u.push(G);const K=i(R,M);for(let ee=0;ee<K.length;++ee){const D=K[ee];u.push(W+D)}m=w+(m.length>0?" "+m:m)}return m},PI=(...n)=>{let e=0,t,r,i="";for(;e<n.length;)(t=n[e++])&&(r=x1(t))&&(i&&(i+=" "),i+=r);return i},x1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=x1(n[r]))&&(t&&(t+=" "),t+=e);return t},II=(n,...e)=>{let t,r,i,c;const u=m=>{const x=e.reduce((w,y)=>y(w),n());return t=TI(x),r=t.cache.get,i=t.cache.set,c=f,f(m)},f=m=>{const x=r(m);if(x)return x;const w=kI(m,t);return i(m,w),w};return c=u,(...m)=>c(PI(...m))},RI=[],kn=n=>{const e=t=>t[n]||RI;return e.isThemeGetter=!0,e},v1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,y1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,LI=/^\d+\/\d+$/,MI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,FI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,uu=n=>LI.test(n),vt=n=>!!n&&!Number.isNaN(Number(n)),Wo=n=>!!n&&Number.isInteger(Number(n)),Nx=n=>n.endsWith("%")&&vt(n.slice(0,-1)),Oa=n=>MI.test(n),BI=()=>!0,zI=n=>DI.test(n)&&!OI.test(n),w1=()=>!1,UI=n=>FI.test(n),$I=n=>VI.test(n),HI=n=>!qe(n)&&!Ge(n),WI=n=>Ku(n,N1,w1),qe=n=>v1.test(n),nc=n=>Ku(n,j1,zI),jx=n=>Ku(n,YI,vt),V_=n=>Ku(n,_1,w1),qI=n=>Ku(n,b1,$I),Wf=n=>Ku(n,C1,UI),Ge=n=>y1.test(n),Vd=n=>Zu(n,j1),GI=n=>Zu(n,QI),B_=n=>Zu(n,_1),KI=n=>Zu(n,N1),ZI=n=>Zu(n,b1),qf=n=>Zu(n,C1,!0),Ku=(n,e,t)=>{const r=v1.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Zu=(n,e,t=!1)=>{const r=y1.exec(n);return r?r[1]?e(r[1]):t:!1},_1=n=>n==="position"||n==="percentage",b1=n=>n==="image"||n==="url",N1=n=>n==="length"||n==="size"||n==="bg-size",j1=n=>n==="length",YI=n=>n==="number",QI=n=>n==="family-name",C1=n=>n==="shadow",XI=()=>{const n=kn("color"),e=kn("font"),t=kn("text"),r=kn("font-weight"),i=kn("tracking"),c=kn("leading"),u=kn("breakpoint"),f=kn("container"),m=kn("spacing"),x=kn("radius"),w=kn("shadow"),y=kn("inset-shadow"),j=kn("text-shadow"),S=kn("drop-shadow"),C=kn("blur"),A=kn("perspective"),M=kn("aspect"),R=kn("ease"),z=kn("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...G(),Ge,qe],ee=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],P=()=>[Ge,qe,m],V=()=>[uu,"full","auto",...P()],B=()=>[Wo,"none","subgrid",Ge,qe],U=()=>["auto",{span:["full",Wo,Ge,qe]},Wo,Ge,qe],q=()=>[Wo,"auto",Ge,qe],H=()=>["auto","min","max","fr",Ge,qe],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],be=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...P()],we=()=>[uu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],Z=()=>[n,Ge,qe],ce=()=>[...G(),B_,V_,{position:[Ge,qe]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",KI,WI,{size:[Ge,qe]}],me=()=>[Nx,Vd,nc],je=()=>["","none","full",x,Ge,qe],Ee=()=>["",vt,Vd,nc],Re=()=>["solid","dashed","dotted","double"],Ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[vt,Nx,B_,V_],Be=()=>["","none",C,Ge,qe],rt=()=>["none",vt,Ge,qe],it=()=>["none",vt,Ge,qe],xt=()=>[vt,Ge,qe],wt=()=>[uu,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Oa],breakpoint:[Oa],color:[BI],container:[Oa],"drop-shadow":[Oa],ease:["in","out","in-out"],font:[HI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Oa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Oa],shadow:[Oa],spacing:["px",vt],text:[Oa],"text-shadow":[Oa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",uu,qe,Ge,M]}],container:["container"],columns:[{columns:[vt,qe,Ge,f]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[Wo,"auto",Ge,qe]}],basis:[{basis:[uu,"full","auto",f,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[vt,uu,"auto","initial","none",qe]}],grow:[{grow:["",vt,Ge,qe]}],shrink:[{shrink:["",vt,Ge,qe]}],order:[{order:[Wo,"first","last","none",Ge,qe]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...be(),"normal"]}],"justify-self":[{"justify-self":["auto",...be()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...be(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...be(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...be(),"baseline"]}],"place-self":[{"place-self":["auto",...be()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:we()}],w:[{w:[f,"screen",...we()]}],"min-w":[{"min-w":[f,"screen","none",...we()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...we()]}],h:[{h:["screen","lh",...we()]}],"min-h":[{"min-h":["screen","lh","none",...we()]}],"max-h":[{"max-h":["screen","lh",...we()]}],"font-size":[{text:["base",t,Vd,nc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ge,jx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Nx,qe]}],"font-family":[{font:[GI,qe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ge,qe]}],"line-clamp":[{"line-clamp":[vt,"none",Ge,jx]}],leading:[{leading:[c,...P()]}],"list-image":[{"list-image":["none",Ge,qe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,qe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:[vt,"from-font","auto",Ge,nc]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[vt,"auto",Ge,qe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wo,Ge,qe],radial:["",Ge,qe],conic:[Wo,Ge,qe]},ZI,qI]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:je()}],"rounded-s":[{"rounded-s":je()}],"rounded-e":[{"rounded-e":je()}],"rounded-t":[{"rounded-t":je()}],"rounded-r":[{"rounded-r":je()}],"rounded-b":[{"rounded-b":je()}],"rounded-l":[{"rounded-l":je()}],"rounded-ss":[{"rounded-ss":je()}],"rounded-se":[{"rounded-se":je()}],"rounded-ee":[{"rounded-ee":je()}],"rounded-es":[{"rounded-es":je()}],"rounded-tl":[{"rounded-tl":je()}],"rounded-tr":[{"rounded-tr":je()}],"rounded-br":[{"rounded-br":je()}],"rounded-bl":[{"rounded-bl":je()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Re(),"hidden","none"]}],"divide-style":[{divide:[...Re(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[vt,Ge,qe]}],"outline-w":[{outline:["",vt,Vd,nc]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",w,qf,Wf]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",y,qf,Wf]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[vt,nc]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",j,qf,Wf]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[vt,Ge,qe]}],"mix-blend":[{"mix-blend":[...Ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[vt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ge,qe]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[vt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,qe]}],filter:[{filter:["","none",Ge,qe]}],blur:[{blur:Be()}],brightness:[{brightness:[vt,Ge,qe]}],contrast:[{contrast:[vt,Ge,qe]}],"drop-shadow":[{"drop-shadow":["","none",S,qf,Wf]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",vt,Ge,qe]}],"hue-rotate":[{"hue-rotate":[vt,Ge,qe]}],invert:[{invert:["",vt,Ge,qe]}],saturate:[{saturate:[vt,Ge,qe]}],sepia:[{sepia:["",vt,Ge,qe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,qe]}],"backdrop-blur":[{"backdrop-blur":Be()}],"backdrop-brightness":[{"backdrop-brightness":[vt,Ge,qe]}],"backdrop-contrast":[{"backdrop-contrast":[vt,Ge,qe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",vt,Ge,qe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[vt,Ge,qe]}],"backdrop-invert":[{"backdrop-invert":["",vt,Ge,qe]}],"backdrop-opacity":[{"backdrop-opacity":[vt,Ge,qe]}],"backdrop-saturate":[{"backdrop-saturate":[vt,Ge,qe]}],"backdrop-sepia":[{"backdrop-sepia":["",vt,Ge,qe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,qe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[vt,"initial",Ge,qe]}],ease:[{ease:["linear","initial",R,Ge,qe]}],delay:[{delay:[vt,Ge,qe]}],animate:[{animate:["none",z,Ge,qe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Ge,qe]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:rt()}],"rotate-x":[{"rotate-x":rt()}],"rotate-y":[{"rotate-y":rt()}],"rotate-z":[{"rotate-z":rt()}],scale:[{scale:it()}],"scale-x":[{"scale-x":it()}],"scale-y":[{"scale-y":it()}],"scale-z":[{"scale-z":it()}],"scale-3d":["scale-3d"],skew:[{skew:xt()}],"skew-x":[{"skew-x":xt()}],"skew-y":[{"skew-y":xt()}],transform:[{transform:[Ge,qe,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:wt()}],"translate-x":[{"translate-x":wt()}],"translate-y":[{"translate-y":wt()}],"translate-z":[{"translate-z":wt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,qe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,qe]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[vt,Vd,nc,jx]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},JI=II(XI);function ft(...n){return JI(h1(n))}const Yv=f1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function J({className:n,variant:e,size:t,asChild:r=!1,...i}){const c=r?u1:"button";return s.jsx(c,{"data-slot":"button",className:ft(Yv({variant:e,size:t,className:n})),...i})}const e4=f1("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xe({className:n,variant:e,asChild:t=!1,...r}){const i=t?u1:"span";return s.jsx(i,{"data-slot":"badge",className:ft(e4({variant:e}),n),...r})}var Yu=QN();const t4=Wv(Yu);function n4(n){const e=s4(n),t=_.forwardRef((r,i)=>{const{children:c,...u}=r,f=_.Children.toArray(c),m=f.find(i4);if(m){const x=m.props.children,w=f.map(y=>y===m?_.Children.count(x)>1?_.Children.only(null):_.isValidElement(x)?x.props.children:null:y);return s.jsx(e,{...u,ref:i,children:_.isValidElement(x)?_.cloneElement(x,void 0,w):null})}return s.jsx(e,{...u,ref:i,children:c})});return t.displayName=`${n}.Slot`,t}function s4(n){const e=_.forwardRef((t,r)=>{const{children:i,...c}=t;if(_.isValidElement(i)){const u=o4(i),f=a4(c,i.props);return i.type!==_.Fragment&&(f.ref=r?eo(r,u):u),_.cloneElement(i,f)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var r4=Symbol("radix.slottable");function i4(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===r4}function a4(n,e){const t={...e};for(const r in e){const i=n[r],c=e[r];/^on[A-Z]/.test(r)?i&&c?t[r]=(...f)=>{const m=c(...f);return i(...f),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...c}:r==="className"&&(t[r]=[i,c].filter(Boolean).join(" "))}return{...n,...t}}function o4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var l4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=l4.reduce((n,e)=>{const t=n4(`Primitive.${e}`),r=_.forwardRef((i,c)=>{const{asChild:u,...f}=i,m=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(m,{...f,ref:c})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function S1(n,e){n&&Yu.flushSync(()=>n.dispatchEvent(e))}var jn=globalThis?.document?_.useLayoutEffect:()=>{};function c4(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var ks=n=>{const{present:e,children:t}=n,r=u4(e),i=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),c=ct(r.ref,d4(i));return typeof t=="function"||r.isPresent?_.cloneElement(i,{ref:c}):null};ks.displayName="Presence";function u4(n){const[e,t]=_.useState(),r=_.useRef(null),i=_.useRef(n),c=_.useRef("none"),u=n?"mounted":"unmounted",[f,m]=c4(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const x=Gf(r.current);c.current=f==="mounted"?x:"none"},[f]),jn(()=>{const x=r.current,w=i.current;if(w!==n){const j=c.current,S=Gf(x);n?m("MOUNT"):S==="none"||x?.display==="none"?m("UNMOUNT"):m(w&&j!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,m]),jn(()=>{if(e){let x;const w=e.ownerDocument.defaultView??window,y=S=>{const A=Gf(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&A&&(m("ANIMATION_END"),!i.current)){const M=e.style.animationFillMode;e.style.animationFillMode="forwards",x=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=M)})}},j=S=>{S.target===e&&(c.current=Gf(r.current))};return e.addEventListener("animationstart",j),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{w.clearTimeout(x),e.removeEventListener("animationstart",j),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:_.useCallback(x=>{r.current=x?getComputedStyle(x):null,t(x)},[])}}function Gf(n){return n?.animationName||"none"}function d4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function h4(n,e){const t=_.createContext(e),r=c=>{const{children:u,...f}=c,m=_.useMemo(()=>f,Object.values(f));return s.jsx(t.Provider,{value:m,children:u})};r.displayName=n+"Provider";function i(c){const u=_.useContext(t);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${c}\` must be used within \`${n}\``)}return[r,i]}function Ps(n,e=[]){let t=[];function r(c,u){const f=_.createContext(u),m=t.length;t=[...t,u];const x=y=>{const{scope:j,children:S,...C}=y,A=j?.[n]?.[m]||f,M=_.useMemo(()=>C,Object.values(C));return s.jsx(A.Provider,{value:M,children:S})};x.displayName=c+"Provider";function w(y,j){const S=j?.[n]?.[m]||f,C=_.useContext(S);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${c}\``)}return[x,w]}const i=()=>{const c=t.map(u=>_.createContext(u));return function(f){const m=f?.[n]||c;return _.useMemo(()=>({[`__scope${n}`]:{...f,[n]:m}}),[f,m])}};return i.scopeName=n,[r,f4(i,...e)]}function f4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const u=r.reduce((f,{useScope:m,scopeName:x})=>{const y=m(c)[`__scope${x}`];return{...f,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return t.scopeName=e.scopeName,t}function Un(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>e.current?.(...t),[])}var m4=_.createContext(void 0);function bc(n){const e=_.useContext(m4);return n||e||"ltr"}function oh(n,[e,t]){return Math.min(t,Math.max(e,n))}function Le(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function p4(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var Qv="ScrollArea",[E1]=Ps(Qv),[g4,Gr]=E1(Qv),T1=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:i,scrollHideDelay:c=600,...u}=n,[f,m]=_.useState(null),[x,w]=_.useState(null),[y,j]=_.useState(null),[S,C]=_.useState(null),[A,M]=_.useState(null),[R,z]=_.useState(0),[W,G]=_.useState(0),[K,ee]=_.useState(!1),[D,P]=_.useState(!1),V=ct(e,U=>m(U)),B=bc(i);return s.jsx(g4,{scope:t,type:r,dir:B,scrollHideDelay:c,scrollArea:f,viewport:x,onViewportChange:w,content:y,onContentChange:j,scrollbarX:S,onScrollbarXChange:C,scrollbarXEnabled:K,onScrollbarXEnabledChange:ee,scrollbarY:A,onScrollbarYChange:M,scrollbarYEnabled:D,onScrollbarYEnabledChange:P,onCornerWidthChange:z,onCornerHeightChange:G,children:s.jsx(Ye.div,{dir:B,...u,ref:V,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":W+"px",...n.style}})})});T1.displayName=Qv;var A1="ScrollAreaViewport",k1=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:i,...c}=n,u=Gr(A1,t),f=_.useRef(null),m=ct(e,f,u.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Ye.div,{"data-radix-scroll-area-viewport":"",...c,ref:m,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...n.style},children:s.jsx("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});k1.displayName=A1;var sa="ScrollAreaScrollbar",P1=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Gr(sa,n.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:u}=i,f=n.orientation==="horizontal";return _.useEffect(()=>(f?c(!0):u(!0),()=>{f?c(!1):u(!1)}),[f,c,u]),i.type==="hover"?s.jsx(x4,{...r,ref:e,forceMount:t}):i.type==="scroll"?s.jsx(v4,{...r,ref:e,forceMount:t}):i.type==="auto"?s.jsx(I1,{...r,ref:e,forceMount:t}):i.type==="always"?s.jsx(Xv,{...r,ref:e}):null});P1.displayName=sa;var x4=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Gr(sa,n.__scopeScrollArea),[c,u]=_.useState(!1);return _.useEffect(()=>{const f=i.scrollArea;let m=0;if(f){const x=()=>{window.clearTimeout(m),u(!0)},w=()=>{m=window.setTimeout(()=>u(!1),i.scrollHideDelay)};return f.addEventListener("pointerenter",x),f.addEventListener("pointerleave",w),()=>{window.clearTimeout(m),f.removeEventListener("pointerenter",x),f.removeEventListener("pointerleave",w)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(ks,{present:t||c,children:s.jsx(I1,{"data-state":c?"visible":"hidden",...r,ref:e})})}),v4=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Gr(sa,n.__scopeScrollArea),c=n.orientation==="horizontal",u=lp(()=>m("SCROLL_END"),100),[f,m]=p4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(f==="idle"){const x=window.setTimeout(()=>m("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(x)}},[f,i.scrollHideDelay,m]),_.useEffect(()=>{const x=i.viewport,w=c?"scrollLeft":"scrollTop";if(x){let y=x[w];const j=()=>{const S=x[w];y!==S&&(m("SCROLL"),u()),y=S};return x.addEventListener("scroll",j),()=>x.removeEventListener("scroll",j)}},[i.viewport,c,m,u]),s.jsx(ks,{present:t||f!=="hidden",children:s.jsx(Xv,{"data-state":f==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Le(n.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:Le(n.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),I1=_.forwardRef((n,e)=>{const t=Gr(sa,n.__scopeScrollArea),{forceMount:r,...i}=n,[c,u]=_.useState(!1),f=n.orientation==="horizontal",m=lp(()=>{if(t.viewport){const x=t.viewport.offsetWidth<t.viewport.scrollWidth,w=t.viewport.offsetHeight<t.viewport.scrollHeight;u(f?x:w)}},10);return Mu(t.viewport,m),Mu(t.content,m),s.jsx(ks,{present:r||c,children:s.jsx(Xv,{"data-state":c?"visible":"hidden",...i,ref:e})})}),Xv=_.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,i=Gr(sa,n.__scopeScrollArea),c=_.useRef(null),u=_.useRef(0),[f,m]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),x=O1(f.viewport,f.content),w={...r,sizes:f,onSizesChange:m,hasThumb:x>0&&x<1,onThumbChange:j=>c.current=j,onThumbPointerUp:()=>u.current=0,onThumbPointerDown:j=>u.current=j};function y(j,S){return j4(j,u.current,f,S)}return t==="horizontal"?s.jsx(y4,{...w,ref:e,onThumbPositionChange:()=>{if(i.viewport&&c.current){const j=i.viewport.scrollLeft,S=z_(j,f,i.dir);c.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:j=>{i.viewport&&(i.viewport.scrollLeft=j)},onDragScroll:j=>{i.viewport&&(i.viewport.scrollLeft=y(j,i.dir))}}):t==="vertical"?s.jsx(w4,{...w,ref:e,onThumbPositionChange:()=>{if(i.viewport&&c.current){const j=i.viewport.scrollTop,S=z_(j,f);c.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:j=>{i.viewport&&(i.viewport.scrollTop=j)},onDragScroll:j=>{i.viewport&&(i.viewport.scrollTop=y(j))}}):null}),y4=_.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,c=Gr(sa,n.__scopeScrollArea),[u,f]=_.useState(),m=_.useRef(null),x=ct(e,m,c.onScrollbarXChange);return _.useEffect(()=>{m.current&&f(getComputedStyle(m.current))},[m]),s.jsx(L1,{"data-orientation":"horizontal",...i,ref:x,sizes:t,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":op(t)+"px",...n.style},onThumbPointerDown:w=>n.onThumbPointerDown(w.x),onDragScroll:w=>n.onDragScroll(w.x),onWheelScroll:(w,y)=>{if(c.viewport){const j=c.viewport.scrollLeft+w.deltaX;n.onWheelScroll(j),V1(j,y)&&w.preventDefault()}},onResize:()=>{m.current&&c.viewport&&u&&r({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:m.current.clientWidth,paddingStart:jm(u.paddingLeft),paddingEnd:jm(u.paddingRight)}})}})}),w4=_.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,c=Gr(sa,n.__scopeScrollArea),[u,f]=_.useState(),m=_.useRef(null),x=ct(e,m,c.onScrollbarYChange);return _.useEffect(()=>{m.current&&f(getComputedStyle(m.current))},[m]),s.jsx(L1,{"data-orientation":"vertical",...i,ref:x,sizes:t,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":op(t)+"px",...n.style},onThumbPointerDown:w=>n.onThumbPointerDown(w.y),onDragScroll:w=>n.onDragScroll(w.y),onWheelScroll:(w,y)=>{if(c.viewport){const j=c.viewport.scrollTop+w.deltaY;n.onWheelScroll(j),V1(j,y)&&w.preventDefault()}},onResize:()=>{m.current&&c.viewport&&u&&r({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:m.current.clientHeight,paddingStart:jm(u.paddingTop),paddingEnd:jm(u.paddingBottom)}})}})}),[_4,R1]=E1(sa),L1=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:i,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:f,onThumbPositionChange:m,onDragScroll:x,onWheelScroll:w,onResize:y,...j}=n,S=Gr(sa,t),[C,A]=_.useState(null),M=ct(e,V=>A(V)),R=_.useRef(null),z=_.useRef(""),W=S.viewport,G=r.content-r.viewport,K=Un(w),ee=Un(m),D=lp(y,10);function P(V){if(R.current){const B=V.clientX-R.current.left,U=V.clientY-R.current.top;x({x:B,y:U})}}return _.useEffect(()=>{const V=B=>{const U=B.target;C?.contains(U)&&K(B,G)};return document.addEventListener("wheel",V,{passive:!1}),()=>document.removeEventListener("wheel",V,{passive:!1})},[W,C,G,K]),_.useEffect(ee,[r,ee]),Mu(C,D),Mu(S.content,D),s.jsx(_4,{scope:t,scrollbar:C,hasThumb:i,onThumbChange:Un(c),onThumbPointerUp:Un(u),onThumbPositionChange:ee,onThumbPointerDown:Un(f),children:s.jsx(Ye.div,{...j,ref:M,style:{position:"absolute",...j.style},onPointerDown:Le(n.onPointerDown,V=>{V.button===0&&(V.target.setPointerCapture(V.pointerId),R.current=C.getBoundingClientRect(),z.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),P(V))}),onPointerMove:Le(n.onPointerMove,P),onPointerUp:Le(n.onPointerUp,V=>{const B=V.target;B.hasPointerCapture(V.pointerId)&&B.releasePointerCapture(V.pointerId),document.body.style.webkitUserSelect=z.current,S.viewport&&(S.viewport.style.scrollBehavior=""),R.current=null})})})}),Nm="ScrollAreaThumb",M1=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=R1(Nm,n.__scopeScrollArea);return s.jsx(ks,{present:t||i.hasThumb,children:s.jsx(b4,{ref:e,...r})})}),b4=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...i}=n,c=Gr(Nm,t),u=R1(Nm,t),{onThumbPositionChange:f}=u,m=ct(e,y=>u.onThumbChange(y)),x=_.useRef(void 0),w=lp(()=>{x.current&&(x.current(),x.current=void 0)},100);return _.useEffect(()=>{const y=c.viewport;if(y){const j=()=>{if(w(),!x.current){const S=C4(y,f);x.current=S,f()}};return f(),y.addEventListener("scroll",j),()=>y.removeEventListener("scroll",j)}},[c.viewport,w,f]),s.jsx(Ye.div,{"data-state":u.hasThumb?"visible":"hidden",...i,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Le(n.onPointerDownCapture,y=>{const S=y.target.getBoundingClientRect(),C=y.clientX-S.left,A=y.clientY-S.top;u.onThumbPointerDown({x:C,y:A})}),onPointerUp:Le(n.onPointerUp,u.onThumbPointerUp)})});M1.displayName=Nm;var Jv="ScrollAreaCorner",D1=_.forwardRef((n,e)=>{const t=Gr(Jv,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?s.jsx(N4,{...n,ref:e}):null});D1.displayName=Jv;var N4=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,i=Gr(Jv,t),[c,u]=_.useState(0),[f,m]=_.useState(0),x=!!(c&&f);return Mu(i.scrollbarX,()=>{const w=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(w),m(w)}),Mu(i.scrollbarY,()=>{const w=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(w),u(w)}),x?s.jsx(Ye.div,{...r,ref:e,style:{width:c,height:f,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function jm(n){return n?parseInt(n,10):0}function O1(n,e){const t=n/e;return isNaN(t)?0:t}function op(n){const e=O1(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function j4(n,e,t,r="ltr"){const i=op(t),c=i/2,u=e||c,f=i-u,m=t.scrollbar.paddingStart+u,x=t.scrollbar.size-t.scrollbar.paddingEnd-f,w=t.content-t.viewport,y=r==="ltr"?[0,w]:[w*-1,0];return F1([m,x],y)(n)}function z_(n,e,t="ltr"){const r=op(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,c=e.scrollbar.size-i,u=e.content-e.viewport,f=c-r,m=t==="ltr"?[0,u]:[u*-1,0],x=oh(n,m);return F1([0,u],[0,f])(x)}function F1(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function V1(n,e){return n>0&&n<e}var C4=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function i(){const c={left:n.scrollLeft,top:n.scrollTop},u=t.left!==c.left,f=t.top!==c.top;(u||f)&&e(),t=c,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function lp(n,e){const t=Un(n),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Mu(n,e){const t=Un(e);jn(()=>{let r=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(r),i.unobserve(n)}}},[n,t])}var S4=T1,E4=k1,T4=D1;function A4({className:n,children:e,...t}){return s.jsxs(S4,{"data-slot":"scroll-area",className:ft("relative",n),...t,children:[s.jsx(E4,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),s.jsx(k4,{}),s.jsx(T4,{})]})}function k4({className:n,orientation:e="vertical",...t}){return s.jsx(P1,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ft("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:s.jsx(M1,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function P4(){const[n,e]=_.useState(!1),[t,r]=_.useState([{id:"1",type:"order",title:"Order Shipped",message:"Your order #TXN123456 has been shipped and is on the way!",timestamp:"5 minutes ago",read:!1},{id:"2",type:"message",title:"New Message",message:'Sarah Johnson sent you a message about "Dune"',timestamp:"1 hour ago",read:!1},{id:"3",type:"community",title:"New Post in Science Fiction Lovers",message:'John posted: "Just finished reading Foundation..."',timestamp:"2 hours ago",read:!1},{id:"4",type:"system",title:"Price Drop Alert",message:"A book in your wishlist is now 20% off!",timestamp:"1 day ago",read:!0},{id:"5",type:"order",title:"Rental Reminder",message:'Your rental of "The Hobbit" is due in 3 days',timestamp:"1 day ago",read:!0}]),i=_.useRef(null),c=t.filter(y=>!y.read).length;_.useEffect(()=>{const y=j=>{i.current&&!i.current.contains(j.target)&&e(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const u=y=>{r(t.map(j=>j.id===y?{...j,read:!0}:j))},f=()=>{r(t.map(y=>({...y,read:!0})))},m=y=>{r(t.filter(j=>j.id!==y))},x=()=>{r([])},w=y=>{switch(y){case"order":return"bg-green-100 text-green-600";case"message":return"bg-blue-100 text-blue-600";case"community":return"bg-purple-100 text-purple-600";case"system":return"bg-orange-100 text-orange-600";default:return"bg-gray-100 text-gray-600"}};return s.jsxs("div",{className:"relative",ref:i,children:[s.jsxs("button",{onClick:()=>e(!n),className:"relative p-2 text-[#2C3E50] hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(Ha,{className:"w-6 h-6"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-pulse",children:c>9?"9+":c})]}),n&&s.jsxs("div",{className:"absolute right-0 mt-2 w-96 max-w-[calc(100vw-2rem)] bg-white rounded-lg shadow-xl border border-gray-200 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Notifications"}),c>0&&s.jsxs(Xe,{variant:"default",className:"bg-red-500",children:[c," new"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[c>0&&s.jsx("button",{onClick:f,className:"text-xs text-[#C4A672] hover:underline",children:"Mark all read"}),s.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ot,{className:"w-5 h-5"})})]})]}),t.length>0?s.jsxs(s.Fragment,{children:[s.jsx(A4,{className:"max-h-96",children:s.jsx("div",{className:"divide-y divide-gray-100",children:t.map(y=>s.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${y.read?"":"bg-blue-50/50"}`,children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${w(y.type)}`,children:[y.type==="order"&&"",y.type==="message"&&"",y.type==="community"&&"",y.type==="system"&&""]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h4",{className:"text-[#2C3E50] text-sm",children:y.title}),!y.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:y.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:y.timestamp}),s.jsxs("div",{className:"flex items-center gap-1",children:[!y.read&&s.jsx("button",{onClick:()=>u(y.id),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Mark as read",children:s.jsx(Ur,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>m(y.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:s.jsx(cc,{className:"w-4 h-4"})})]})]})]})]})},y.id))})}),s.jsxs("div",{className:"p-3 border-t border-gray-200 flex items-center justify-between",children:[s.jsxs(J,{variant:"ghost",size:"sm",onClick:x,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Clear All"]}),s.jsxs(J,{variant:"ghost",size:"sm",className:"text-[#C4A672] hover:text-[#8B7355]",children:[s.jsx(Nh,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}):s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Ha,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-sm text-gray-400",children:"You're all caught up!"})]})]})]})}function du({isLoggedIn:n,currentPage:e,onNavigateHome:t,onNavigateBuy:r,onNavigateRent:i,onNavigateSell:c,onNavigateCommunities:u,onNavigateSearch:f,onNavigateWishlist:m,onNavigateTuition:x,onNavigateAnnouncements:w,onNavigateAbout:y,onNavigateLogin:j,onNavigateRegister:S,onNavigateProfile:C,onLogout:A}){const[M,R]=_.useState(!1),z=_.useRef(null);_.useEffect(()=>{const K=ee=>{z.current&&!z.current.contains(ee.target)&&R(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]);const W=[{id:"home",label:"Home",icon:Ru,onClick:t,page:"home"},{id:"buy",label:"Buy",icon:Xx,onClick:r,page:"marketplace"},{id:"rent",label:"Rent",icon:Gs,onClick:i,page:"rent"},{id:"sell",label:"Sell",icon:Wa,onClick:c,page:"sell"},{id:"communities",label:"Communities",icon:gn,onClick:u||(()=>{}),page:"communities-browse"}],G=[{id:"home",label:"Home",icon:Ru,onClick:t,page:"home",showAlways:!0},{id:"search",label:"Search",icon:Ln,onClick:f||(()=>{}),page:"advanced-search",showAlways:!0},{id:"wishlist",label:"Wishlist",icon:$i,onClick:m||(()=>{}),page:"wishlist",showAlways:!1,requireLogin:!0},{id:"sell",label:"Sell",icon:Wa,onClick:c,page:"sell",showAlways:!0},{id:"profile",label:"Profile",icon:ah,onClick:n?C:j,page:"user-dashboard",showAlways:!0}];return s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"hidden md:block fixed top-0 left-0 right-0 bg-[#C4A672] shadow-lg z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#2C3E50] rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white",children:"BO"})}),s.jsx("span",{className:"text-[#2C3E50] text-xl",children:"BookOra"})]}),s.jsx("div",{className:"flex items-center gap-1",children:W.map(K=>{const ee=K.icon,D=e===K.page;return s.jsxs("button",{onClick:K.onClick,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${D?"bg-[#2C3E50] text-white":"text-[#2C3E50] hover:bg-[#8B7355] hover:text-white"}`,children:[s.jsx(ee,{className:"w-5 h-5"}),s.jsx("span",{children:K.label})]},K.id)})}),s.jsx("div",{className:"flex items-center gap-3",children:n?s.jsxs(s.Fragment,{children:[s.jsx(P4,{}),s.jsxs("div",{className:"relative",ref:z,children:[s.jsxs("button",{onClick:()=>R(!M),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#2C3E50] text-white hover:bg-[#1a252f] transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center",children:s.jsx(ah,{className:"w-5 h-5 text-white"})}),s.jsx("span",{className:"hidden lg:inline",children:"Profile"}),s.jsx(sp,{className:`w-4 h-4 transition-transform ${M?"rotate-180":""}`})]}),M&&s.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 py-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Signed in as"}),s.jsx("p",{className:"text-[#2C3E50]",children:"user@example.com"})]}),s.jsxs("div",{className:"py-2",children:[s.jsxs("button",{onClick:()=>{C(),R(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(xk,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"My Profile"}),s.jsx("p",{className:"text-xs text-gray-500",children:"View & edit details"})]})]}),s.jsxs("button",{onClick:()=>{C(),R(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(Fk,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"Order History"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Purchases & rentals"})]})]}),s.jsxs("button",{onClick:()=>{C(),R(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx($i,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"Wishlist"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Saved favorites"})]})]}),s.jsxs("button",{onClick:()=>{C(),R(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(Nh,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"Settings"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Security & preferences"})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-2",children:s.jsxs("button",{onClick:()=>{A(),R(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(rh,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(J,{onClick:j,variant:"outline",className:"border-[#2C3E50] text-[#2C3E50] hover:bg-[#2C3E50] hover:text-white",children:[s.jsx(Kk,{className:"w-4 h-4 mr-2"}),"Login"]}),s.jsxs(J,{onClick:S,className:"bg-[#2C3E50] text-white hover:bg-[#1a252f]",children:[s.jsx(l1,{className:"w-4 h-4 mr-2"}),"Register"]})]})})]})})}),s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-[#C4A672] border-t border-[#8B7355] shadow-lg z-50",children:s.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:G.map(K=>{const ee=K.icon,D=e===K.page;return(K.showAlways||K.requireLogin&&n)&&s.jsxs("button",{onClick:K.onClick,className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors ${D?"text-[#2C3E50]":"text-[#2C3E50]/60"}`,children:[s.jsx(ee,{className:`w-6 h-6 ${D?"fill-[#2C3E50]":""}`}),s.jsx("span",{className:"text-xs",children:K.label})]},K.id)})})}),s.jsx("div",{className:"hidden md:block h-16"}),s.jsx("div",{className:"md:hidden h-16"})]})}function Ie({className:n,type:e,...t}){return s.jsx("input",{type:e,"data-slot":"input",className:ft("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}function hu({onNavigateToAbout:n,onNavigateToBuy:e,onNavigateToRent:t,onNavigateToSell:r,onNavigateToAnnouncements:i}){return s.jsx("footer",{className:"bg-[#2C3E50] text-white py-8 px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("nav",{className:"flex items-center justify-center gap-8 mb-4",children:[s.jsx("button",{onClick:e,className:"hover:opacity-80 transition-opacity",children:"Buy"}),s.jsx("button",{onClick:t,className:"hover:opacity-80 transition-opacity",children:"Rent"}),s.jsx("button",{onClick:r,className:"hover:opacity-80 transition-opacity",children:"Resell"}),s.jsx("button",{onClick:i,className:"hover:opacity-80 transition-opacity",children:"Announcements"}),s.jsx("button",{onClick:n,className:"hover:opacity-80 transition-opacity",children:"About"})]}),s.jsx("p",{className:"text-center text-sm mb-6",children:" 2025 BookOra. All rights reserved."}),s.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-md mx-auto",children:[s.jsx(Ie,{type:"email",placeholder:"Subscribe to our newsletter",className:"flex-1 bg-white text-black border-none"}),s.jsx(J,{className:"bg-[#F5A623] hover:bg-[#E69610] text-white px-6",children:"Subscribe"})]})]})})}var I4=qv[" useInsertionEffect ".trim().toString()]||jn;function Ji({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,c,u]=R4({defaultProp:e,onChange:t}),f=n!==void 0,m=f?n:i;{const w=_.useRef(n!==void 0);_.useEffect(()=>{const y=w.current;y!==f&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),w.current=f},[f,r])}const x=_.useCallback(w=>{if(f){const y=L4(w)?w(n):w;y!==n&&u.current?.(y)}else c(w)},[f,n,c,u]);return[m,x]}function R4({defaultProp:n,onChange:e}){const[t,r]=_.useState(n),i=_.useRef(t),c=_.useRef(e);return I4(()=>{c.current=e},[e]),_.useEffect(()=>{i.current!==t&&(c.current?.(t),i.current=t)},[t,i]),[t,r,c]}function L4(n){return typeof n=="function"}function jh(n){const e=_.useRef({value:n,previous:n});return _.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function Ch(n){const[e,t]=_.useState(void 0);return jn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let u,f;if("borderBoxSize"in c){const m=c.borderBoxSize,x=Array.isArray(m)?m[0]:m;u=x.inlineSize,f=x.blockSize}else u=n.offsetWidth,f=n.offsetHeight;t({width:u,height:f})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var cp="Checkbox",[M4]=Ps(cp),[D4,ey]=M4(cp);function O4(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:c,form:u,name:f,onCheckedChange:m,required:x,value:w="on",internal_do_not_use_render:y}=n,[j,S]=Ji({prop:t,defaultProp:i??!1,onChange:m,caller:cp}),[C,A]=_.useState(null),[M,R]=_.useState(null),z=_.useRef(!1),W=C?!!u||!!C.closest("form"):!0,G={checked:j,disabled:c,setChecked:S,control:C,setControl:A,name:f,form:u,value:w,hasConsumerStoppedPropagationRef:z,required:x,defaultChecked:Jo(i)?!1:i,isFormControl:W,bubbleInput:M,setBubbleInput:R};return s.jsx(D4,{scope:e,...G,children:F4(y)?y(G):r})}var B1="CheckboxTrigger",z1=_.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:c,value:u,disabled:f,checked:m,required:x,setControl:w,setChecked:y,hasConsumerStoppedPropagationRef:j,isFormControl:S,bubbleInput:C}=ey(B1,n),A=ct(i,w),M=_.useRef(m);return _.useEffect(()=>{const R=c?.form;if(R){const z=()=>y(M.current);return R.addEventListener("reset",z),()=>R.removeEventListener("reset",z)}},[c,y]),s.jsx(Ye.button,{type:"button",role:"checkbox","aria-checked":Jo(m)?"mixed":m,"aria-required":x,"data-state":G1(m),"data-disabled":f?"":void 0,disabled:f,value:u,...r,ref:A,onKeyDown:Le(e,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:Le(t,R=>{y(z=>Jo(z)?!0:!z),C&&S&&(j.current=R.isPropagationStopped(),j.current||R.stopPropagation())})})});z1.displayName=B1;var U1=_.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:c,required:u,disabled:f,value:m,onCheckedChange:x,form:w,...y}=n;return s.jsx(O4,{__scopeCheckbox:t,checked:i,defaultChecked:c,disabled:f,required:u,onCheckedChange:x,name:r,form:w,value:m,internal_do_not_use_render:({isFormControl:j})=>s.jsxs(s.Fragment,{children:[s.jsx(z1,{...y,ref:e,__scopeCheckbox:t}),j&&s.jsx(q1,{__scopeCheckbox:t})]})})});U1.displayName=cp;var $1="CheckboxIndicator",H1=_.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,c=ey($1,t);return s.jsx(ks,{present:r||Jo(c.checked)||c.checked===!0,children:s.jsx(Ye.span,{"data-state":G1(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});H1.displayName=$1;var W1="CheckboxBubbleInput",q1=_.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:u,required:f,disabled:m,name:x,value:w,form:y,bubbleInput:j,setBubbleInput:S}=ey(W1,n),C=ct(t,S),A=jh(c),M=Ch(r);_.useEffect(()=>{const z=j;if(!z)return;const W=window.HTMLInputElement.prototype,K=Object.getOwnPropertyDescriptor(W,"checked").set,ee=!i.current;if(A!==c&&K){const D=new Event("click",{bubbles:ee});z.indeterminate=Jo(c),K.call(z,Jo(c)?!1:c),z.dispatchEvent(D)}},[j,A,c,i]);const R=_.useRef(Jo(c)?!1:c);return s.jsx(Ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??R.current,required:f,disabled:m,name:x,value:w,form:y,...e,tabIndex:-1,ref:C,style:{...e.style,...M,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q1.displayName=W1;function F4(n){return typeof n=="function"}function Jo(n){return n==="indeterminate"}function G1(n){return Jo(n)?"indeterminate":n?"checked":"unchecked"}function Qu({className:n,...e}){return s.jsx(U1,{"data-slot":"checkbox",className:ft("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:s.jsx(H1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(ll,{className:"size-3.5"})})})}const V4=()=>{};var U_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},B4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const c=n[t++];e[r++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=n[t++],u=n[t++],f=n[t++],m=((i&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const c=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Z1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const c=n[i],u=i+1<n.length,f=u?n[i+1]:0,m=i+2<n.length,x=m?n[i+2]:0,w=c>>2,y=(c&3)<<4|f>>4;let j=(f&15)<<2|x>>6,S=x&63;m||(S=64,u||(j=64)),r.push(t[w],t[y],t[j],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):B4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const c=t[n.charAt(i++)],f=i<n.length?t[n.charAt(i)]:0;++i;const x=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,c==null||f==null||x==null||y==null)throw new z4;const j=c<<2|f>>4;if(r.push(j),x!==64){const S=f<<4&240|x>>2;if(r.push(S),y!==64){const C=x<<6&192|y;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class z4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U4=function(n){const e=K1(n);return Z1.encodeByteArray(e,!0)},Cm=function(n){return U4(n).replace(/\./g,"")},Y1=function(n){try{return Z1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=()=>$4().__FIREBASE_DEFAULTS__,W4=()=>{if(typeof process>"u"||typeof U_>"u")return;const n=U_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Y1(n[1]);return e&&JSON.parse(e)},up=()=>{try{return V4()||H4()||W4()||q4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Q1=n=>up()?.emulatorHosts?.[n],G4=n=>{const e=Q1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},X1=()=>up()?.config,J1=n=>up()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ej(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Cm(JSON.stringify(t)),Cm(JSON.stringify(u)),""].join(".")}const Yd={};function Y4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yd))Yd[e]?n.emulator.push(e):n.prod.push(e);return n}function Q4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let $_=!1;function tj(n,e){if(typeof window>"u"||typeof document>"u"||!Xu(window.location.host)||Yd[n]===e||Yd[n]||$_)return;Yd[n]=e;function t(j){return`__firebase__banner__${j}`}const r="__firebase__banner",c=Y4().prod.length>0;function u(){const j=document.getElementById(r);j&&j.remove()}function f(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function m(j,S){j.setAttribute("width","24"),j.setAttribute("id",S),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function x(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{$_=!0,u()},j}function w(j,S){j.setAttribute("id",S),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function y(){const j=Q4(r),S=t("text"),C=document.getElementById(S)||document.createElement("span"),A=t("learnmore"),M=document.getElementById(A)||document.createElement("a"),R=t("preprendIcon"),z=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const W=j.element;f(W),w(M,A);const G=x();m(z,R),W.append(z,C,M,G),document.body.appendChild(W)}c?(C.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ms())}function J4(){const n=up()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sR(){const n=ms();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rR(){return!J4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iR(){try{return typeof indexedDB=="object"}catch{return!1}}function aR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="FirebaseError";class to extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oR,Object.setPrototypeOf(this,to.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],u=c?lR(c,r):"Error",f=`${this.serviceName}: ${u} (${i}).`;return new to(i,f,r)}}function lR(n,e){return n.replace(cR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cR=/\{\$([^}]+)}/g;function uR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const c=n[i],u=e[i];if(H_(c)&&H_(u)){if(!qa(c,u))return!1}else if(c!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function H_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,c]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(c)}}),e}function zd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dR(n,e){const t=new hR(n,e);return t.subscribe.bind(t)}class hR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Cx),i.error===void 0&&(i.error=Cx),i.complete===void 0&&(i.complete=Cx);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(n){return n&&n._delegate?n._delegate:n}class uc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new K4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:sc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});r.resolve(c)}catch{}}}}clearInstance(e=sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sc){return this.instances.has(e)}getOptions(e=sc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);r===f&&u.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const c=this.instances.get(r);return c&&e(c,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sc){return this.component?this.component.multipleInstances?e:sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(n){return n===sc?void 0:n}function gR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(bt||(bt={}));const vR={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},yR=bt.INFO,wR={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},_R=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=wR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ty{constructor(e){this.name=e,this._logLevel=yR,this._logHandler=_R,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const bR=(n,e)=>e.some(t=>n instanceof t);let W_,q_;function NR(){return W_||(W_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jR(){return q_||(q_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nj=new WeakMap,tv=new WeakMap,sj=new WeakMap,Sx=new WeakMap,ny=new WeakMap;function CR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",c),n.removeEventListener("error",u)},c=()=>{t(el(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",c),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&nj.set(t,n)}).catch(()=>{}),ny.set(e,n),e}function SR(n){if(tv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",u),n.removeEventListener("abort",u)},c=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",c),n.addEventListener("error",u),n.addEventListener("abort",u)});tv.set(n,e)}let nv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sj.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return el(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ER(n){nv=n(nv)}function TR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ex(this),e,...t);return sj.set(r,e.sort?e.sort():[e]),el(r)}:jR().includes(n)?function(...e){return n.apply(Ex(this),e),el(nj.get(this))}:function(...e){return el(n.apply(Ex(this),e))}}function AR(n){return typeof n=="function"?TR(n):(n instanceof IDBTransaction&&SR(n),bR(n,NR())?new Proxy(n,nv):n)}function el(n){if(n instanceof IDBRequest)return CR(n);if(Sx.has(n))return Sx.get(n);const e=AR(n);return e!==n&&(Sx.set(n,e),ny.set(e,n)),e}const Ex=n=>ny.get(n);function kR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:c}={}){const u=indexedDB.open(n,e),f=el(u);return r&&u.addEventListener("upgradeneeded",m=>{r(el(u.result),m.oldVersion,m.newVersion,el(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),i&&m.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const PR=["get","getKey","getAll","getAllKeys","count"],IR=["put","add","delete","clear"],Tx=new Map;function G_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Tx.get(e))return Tx.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=IR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PR.includes(t)))return;const c=async function(u,...f){const m=this.transaction(u,i?"readwrite":"readonly");let x=m.store;return r&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),i&&m.done]))[0]};return Tx.set(e,c),c}ER(n=>({...n,get:(e,t,r)=>G_(e,t)||n.get(e,t,r),has:(e,t)=>!!G_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function LR(n){return n.getComponent()?.type==="VERSION"}const sv="@firebase/app",K_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=new ty("@firebase/app"),MR="@firebase/app-compat",DR="@firebase/analytics-compat",OR="@firebase/analytics",FR="@firebase/app-check-compat",VR="@firebase/app-check",BR="@firebase/auth",zR="@firebase/auth-compat",UR="@firebase/database",$R="@firebase/data-connect",HR="@firebase/database-compat",WR="@firebase/functions",qR="@firebase/functions-compat",GR="@firebase/installations",KR="@firebase/installations-compat",ZR="@firebase/messaging",YR="@firebase/messaging-compat",QR="@firebase/performance",XR="@firebase/performance-compat",JR="@firebase/remote-config",e5="@firebase/remote-config-compat",t5="@firebase/storage",n5="@firebase/storage-compat",s5="@firebase/firestore",r5="@firebase/ai",i5="@firebase/firestore-compat",a5="firebase",o5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="[DEFAULT]",l5={[sv]:"fire-core",[MR]:"fire-core-compat",[OR]:"fire-analytics",[DR]:"fire-analytics-compat",[VR]:"fire-app-check",[FR]:"fire-app-check-compat",[BR]:"fire-auth",[zR]:"fire-auth-compat",[UR]:"fire-rtdb",[$R]:"fire-data-connect",[HR]:"fire-rtdb-compat",[WR]:"fire-fn",[qR]:"fire-fn-compat",[GR]:"fire-iid",[KR]:"fire-iid-compat",[ZR]:"fire-fcm",[YR]:"fire-fcm-compat",[QR]:"fire-perf",[XR]:"fire-perf-compat",[JR]:"fire-rc",[e5]:"fire-rc-compat",[t5]:"fire-gcs",[n5]:"fire-gcs-compat",[s5]:"fire-fst",[i5]:"fire-fst-compat",[r5]:"fire-vertex","fire-js":"fire-js",[a5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new Map,c5=new Map,iv=new Map;function Z_(n,e){try{n.container.addComponent(e)}catch(t){Ga.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Du(n){const e=n.name;if(iv.has(e))return Ga.debug(`There were multiple attempts to register component ${e}.`),!1;iv.set(e,n);for(const t of Sm.values())Z_(t,n);for(const t of c5.values())Z_(t,n);return!0}function sy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tl=new Sh("app","Firebase",u5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=o5;function rj(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:rv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw tl.create("bad-app-name",{appName:String(i)});if(t||(t=X1()),!t)throw tl.create("no-options");const c=Sm.get(i);if(c){if(qa(t,c.options)&&qa(r,c.config))return c;throw tl.create("duplicate-app",{appName:i})}const u=new xR(i);for(const m of iv.values())u.addComponent(m);const f=new d5(t,r,u);return Sm.set(i,f),f}function ij(n=rv){const e=Sm.get(n);if(!e&&n===rv&&X1())return rj();if(!e)throw tl.create("no-app",{appName:n});return e}function nl(n,e,t){let r=l5[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ga.warn(u.join(" "));return}Du(new uc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="firebase-heartbeat-database",f5=1,lh="firebase-heartbeat-store";let Ax=null;function aj(){return Ax||(Ax=kR(h5,f5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lh)}catch(t){console.warn(t)}}}}).catch(n=>{throw tl.create("idb-open",{originalErrorMessage:n.message})})),Ax}async function m5(n){try{const t=(await aj()).transaction(lh),r=await t.objectStore(lh).get(oj(n));return await t.done,r}catch(e){if(e instanceof to)Ga.warn(e.message);else{const t=tl.create("idb-get",{originalErrorMessage:e?.message});Ga.warn(t.message)}}}async function Y_(n,e){try{const r=(await aj()).transaction(lh,"readwrite");await r.objectStore(lh).put(e,oj(n)),await r.done}catch(t){if(t instanceof to)Ga.warn(t.message);else{const r=tl.create("idb-set",{originalErrorMessage:t?.message});Ga.warn(r.message)}}}function oj(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=1024,g5=30;class x5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new y5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Q_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>g5){const i=w5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ga.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q_(),{heartbeatsToSend:t,unsentEntries:r}=v5(this._heartbeatsCache.heartbeats),i=Cm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ga.warn(e),""}}}function Q_(){return new Date().toISOString().substring(0,10)}function v5(n,e=p5){const t=[];let r=n.slice();for(const i of n){const c=t.find(u=>u.agent===i.agent);if(c){if(c.dates.push(i.date),X_(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),X_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class y5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iR()?aR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await m5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function X_(n){return Cm(JSON.stringify({version:2,heartbeats:n})).length}function w5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(n){Du(new uc("platform-logger",e=>new RR(e),"PRIVATE")),Du(new uc("heartbeat",e=>new x5(e),"PRIVATE")),nl(sv,K_,n),nl(sv,K_,"esm2020"),nl("fire-js","")}_5("");var b5="firebase",N5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nl(b5,N5,"app");function lj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j5=lj,cj=new Sh("auth","Firebase",lj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new ty("@firebase/auth");function C5(n,...e){Em.logLevel<=bt.WARN&&Em.warn(`Auth (${Ju}): ${n}`,...e)}function am(n,...e){Em.logLevel<=bt.ERROR&&Em.error(`Auth (${Ju}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n,...e){throw iy(n,...e)}function di(n,...e){return iy(n,...e)}function ry(n,e,t){const r={...j5(),[e]:t};return new Sh("auth","Firebase",r).create(e,{appName:n.name})}function Ua(n){return ry(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&qr(n,"argument-error"),ry(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cj.create(n,...e)}function lt(n,e,...t){if(!n)throw iy(e,...t)}function Ba(n){const e="INTERNAL ASSERTION FAILED: "+n;throw am(e),new Error(e)}function Ka(n,e){n||Ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(){return typeof self<"u"&&self.location?.href||""}function E5(){return J_()==="http:"||J_()==="https:"}function J_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E5()||tR()||"connection"in navigator)?navigator.onLine:!0}function A5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ka(t>e,"Short delay should be less than long delay!"),this.isMobile=X4()||nR()}get(){return T5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(n,e){Ka(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I5=new Th(3e4,6e4);function _l(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function no(n,e,t,r,i={}){return dj(n,i,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const f=Eh({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const x={method:e,headers:m,...c};return eR()||(x.referrerPolicy="no-referrer"),n.emulatorConfig&&Xu(n.emulatorConfig.host)&&(x.credentials="include"),uj.fetch()(await hj(n,n.config.apiHost,t,f),x)})}async function dj(n,e,t){n._canInitEmulator=!1;const r={...k5,...e};try{const i=new L5(n),c=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Kf(n,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[m,x]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kf(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Kf(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Kf(n,"user-disabled",u);const w=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw ry(n,w,x);qr(n,w)}}catch(i){if(i instanceof to)throw i;qr(n,"network-request-failed",{message:String(i)})}}async function Ah(n,e,t,r,i={}){const c=await no(n,e,t,r,i);return"mfaPendingCredential"in c&&qr(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function hj(n,e,t,r){const i=`${e}${t}?${r}`,c=n,u=c.config.emulator?ay(n.config,i):`${n.config.apiScheme}://${i}`;return P5.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function R5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),I5.get())})}}function Kf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=di(n,e,r);return i.customData._tokenResponse=t,i}function eb(n){return n!==void 0&&n.enterprise!==void 0}class M5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return R5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D5(n,e){return no(n,"GET","/v2/recaptchaConfig",_l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(n,e){return no(n,"POST","/v1/accounts:delete",e)}async function Tm(n,e){return no(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F5(n,e=!1){const t=cn(n),r=await t.getIdToken(e),i=oy(r);lt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,u=c?.sign_in_provider;return{claims:i,token:r,authTime:Qd(kx(i.auth_time)),issuedAtTime:Qd(kx(i.iat)),expirationTime:Qd(kx(i.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function kx(n){return Number(n)*1e3}function oy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return am("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y1(t);return i?JSON.parse(i):(am("Failed to decode base64 JWT payload"),null)}catch(i){return am("Caught error parsing JWT payload as JSON",i?.toString()),null}}function tb(n){const e=oy(n);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof to&&V5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function V5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qd(this.lastLoginAt),this.creationTime=Qd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(n){const e=n.auth,t=await n.getIdToken(),r=await Ou(n,Tm(e,{idToken:t}));lt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const c=i.providerUserInfo?.length?fj(i.providerUserInfo):[],u=U5(n.providerData,c),f=n.isAnonymous,m=!(n.email&&i.passwordHash)&&!u?.length,x=f?m:!1,w={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new ov(i.createdAt,i.lastLoginAt),isAnonymous:x};Object.assign(n,w)}async function z5(n){const e=cn(n);await Am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function U5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fj(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(n,e){const t=await dj(n,{},async()=>{const r=Eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=n.config,u=await hj(n,i,"/v1/token",`key=${c}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return n.emulatorConfig&&Xu(n.emulatorConfig.host)&&(m.credentials="include"),uj.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function H5(n,e){return no(n,"POST","/v2/accounts:revokeToken",_l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const t=tb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:c}=await $5(e,t);this.updateTokensAndExpiration(r,i,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:c}=t,u=new Nu;return r&&(lt(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(lt(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),c&&(lt(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nu,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(n,e){lt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new B5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ov(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ou(this,this.stsTokenManager.getToken(this.auth,e));return lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return F5(this,e)}reload(){return z5(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Am(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Ua(this.auth));const e=await this.getIdToken();return await Ou(this,O5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,x=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:y,emailVerified:j,isAnonymous:S,providerData:C,stsTokenManager:A}=t;lt(y&&A,e,"internal-error");const M=Nu.fromJSON(this.name,A);lt(typeof y=="string",e,"internal-error"),qo(r,e.name),qo(i,e.name),lt(typeof j=="boolean",e,"internal-error"),lt(typeof S=="boolean",e,"internal-error"),qo(c,e.name),qo(u,e.name),qo(f,e.name),qo(m,e.name),qo(x,e.name),qo(w,e.name);const R=new ci({uid:y,auth:e,email:i,emailVerified:j,displayName:r,isAnonymous:S,photoURL:u,phoneNumber:c,tenantId:f,stsTokenManager:M,createdAt:x,lastLoginAt:w});return C&&Array.isArray(C)&&(R.providerData=C.map(z=>({...z}))),m&&(R._redirectEventId=m),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new Nu;i.updateFromServerResponse(t);const c=new ci({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Am(c),c}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];lt(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?fj(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!c?.length,f=new Nu;f.updateFromIdToken(r);const m=new ci({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:u}),x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new ov(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(m,x),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Map;function za(n){Ka(n instanceof Function,"Expected a class definition");let e=nb.get(n);return e?(Ka(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mj.type="NONE";const sb=mj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(n,e,t){return`firebase:${n}:${e}:${t}`}class ju{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:c}=this.auth;this.fullUserKey=om(this.userKey,i.apiKey,c),this.fullPersistenceKey=om("persistence",i.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tm(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ju(za(sb),e,r);const i=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=i[0]||za(sb);const u=om(r,e.config.apiKey,e.name);let f=null;for(const x of t)try{const w=await x._get(u);if(w){let y;if(typeof w=="string"){const j=await Tm(e,{idToken:w}).catch(()=>{});if(!j)break;y=await ci._fromGetAccountInfoResponse(e,j,w)}else y=ci._fromJSON(e,w);x!==c&&(f=y),c=x;break}}catch{}const m=i.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new ju(c,e,r):(c=m[0],f&&await c._set(u,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(u)}catch{}})),new ju(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wj(e))return"Blackberry";if(_j(e))return"Webos";if(gj(e))return"Safari";if((e.includes("chrome/")||xj(e))&&!e.includes("edge/"))return"Chrome";if(yj(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function pj(n=ms()){return/firefox\//i.test(n)}function gj(n=ms()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xj(n=ms()){return/crios\//i.test(n)}function vj(n=ms()){return/iemobile/i.test(n)}function yj(n=ms()){return/android/i.test(n)}function wj(n=ms()){return/blackberry/i.test(n)}function _j(n=ms()){return/webos/i.test(n)}function ly(n=ms()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function W5(n=ms()){return ly(n)&&!!window.navigator?.standalone}function q5(){return sR()&&document.documentMode===10}function bj(n=ms()){return ly(n)||yj(n)||_j(n)||wj(n)||/windows phone/i.test(n)||vj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(n,e=[]){let t;switch(n){case"Browser":t=rb(ms());break;case"Worker":t=`${rb(ms())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ju}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,f)=>{try{const m=e(c);u(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(n,e={}){return no(n,"GET","/v2/passwordPolicy",_l(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=6;class Y5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Z5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ib(this),this.idTokenSubscription=new ib(this),this.beforeStateQueue=new G5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=za(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ju.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tm(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(or(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&f?.user&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Am(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Ua(this));const t=e?cn(e):null;return t&&lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(za(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K5(this),t=new Y5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await H5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&za(e)||this._popupRedirectResolver;lt(t,this,"argument-error"),this.redirectPersistenceManager=await ju.create(this,[za(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,i);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&C5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bl(n){return cn(n)}class ib{constructor(e){this.auth=e,this.observer=null,this.addObserver=dR(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X5(n){dp=n}function jj(n){return dp.loadJS(n)}function J5(){return dp.recaptchaEnterpriseScript}function e6(){return dp.gapiScript}function t6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class n6{constructor(){this.enterprise=new s6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class s6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const r6="recaptcha-enterprise",Cj="NO_RECAPTCHA";class i6{constructor(e){this.type=r6,this.auth=bl(e)}async verify(e="verify",t=!1){async function r(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{D5(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new M5(m);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,u(x.siteKey)}}).catch(m=>{f(m)})})}function i(c,u,f){const m=window.grecaptcha;eb(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(x=>{u(x)}).catch(()=>{u(Cj)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new n6().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{r(this.auth).then(f=>{if(!t&&eb(window.grecaptcha))i(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=J5();m.length!==0&&(m+=f),jj(m).then(()=>{i(f,c,u)}).catch(x=>{u(x)})}}).catch(f=>{u(f)})})}}async function ab(n,e,t,r=!1,i=!1){const c=new i6(n);let u;if(i)u=Cj;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:x,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function lv(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ab(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ab(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(n,e){const t=sy(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),c=t.getOptions();if(qa(c,e??{}))return i;qr(i,"already-initialized")}return t.initialize({options:e})}function o6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(za);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Sj(n,e,t){const r=bl(n);lt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,c=Ej(e),{host:u,port:f}=l6(e),m=f===null?"":`:${f}`,x={url:`${c}//${u}${m}/`},w=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){lt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),lt(qa(x,r.config.emulator)&&qa(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Xu(u)?(ej(`${c}//${u}${m}`),tj("Auth",!0)):i||c6()}function Ej(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function l6(n){const e=Ej(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const c=i[1];return{host:c,port:ob(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:ob(u)}}}function ob(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function c6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,t){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}async function u6(n,e){return no(n,"POST","/v1/accounts:update",e)}async function d6(n,e){return no(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(n,e){return Ah(n,"POST","/v1/accounts:signInWithPassword",_l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(n,e){return Ah(n,"POST","/v1/accounts:signInWithEmailLink",_l(n,e))}async function m6(n,e){return Ah(n,"POST","/v1/accounts:signInWithEmailLink",_l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends cy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ch(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ch(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lv(e,t,"signInWithPassword",h6);case"emailLink":return f6(e,{email:this._email,oobCode:this._password});default:qr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lv(e,r,"signUpPassword",d6);case"emailLink":return m6(e,{idToken:t,email:this._email,oobCode:this._password});default:qr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(n,e){return Ah(n,"POST","/v1/accounts:signInWithIdp",_l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="http://localhost";class dc extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...c}=t;if(!r||!i)return null;const u=new dc(r,i);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Cu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cu(e,t)}buildRequest(){const e={requestUri:p6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x6(n){const e=Bd(zd(n)).link,t=e?Bd(zd(e)).deep_link_id:null,r=Bd(zd(n)).deep_link_id;return(r?Bd(zd(r)).link:null)||r||t||e||n}class uy{constructor(e){const t=Bd(zd(e)),r=t.apiKey??null,i=t.oobCode??null,c=g6(t.mode??null);lt(r&&i&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=x6(e);try{return new uy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.providerId=Nc.PROVIDER_ID}static credential(e,t){return ch._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=uy.parseLink(t);return lt(r,"argument-error"),ch._fromEmailAndCode(e,r.code,r.tenantId)}}Nc.PROVIDER_ID="password";Nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends dy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends kh{constructor(){super("facebook.com")}static credential(e){return dc._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends kh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return dc._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Va.credentialFromTaggedObject(e)}static credentialFromError(e){return Va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Va.credential(t,r)}catch{return null}}}Va.GOOGLE_SIGN_IN_METHOD="google.com";Va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends kh{constructor(){super("github.com")}static credential(e){return dc._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ko.credential(e.oauthAccessToken)}catch{return null}}}Ko.GITHUB_SIGN_IN_METHOD="github.com";Ko.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends kh{constructor(){super("twitter.com")}static credential(e,t){return dc._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zo.credential(t,r)}catch{return null}}}Zo.TWITTER_SIGN_IN_METHOD="twitter.com";Zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(n,e){return Ah(n,"POST","/v1/accounts:signUp",_l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const c=await ci._fromIdTokenResponse(e,r,i),u=lb(r);return new hc({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=lb(r);return new hc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function lb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends to{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new km(e,t,r,i)}}function Tj(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(n,c,e,r):c})}async function y6(n,e,t=!1){const r=await Ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(n,e,t=!1){const{auth:r}=n;if(or(r.app))return Promise.reject(Ua(r));const i="reauthenticate";try{const c=await Ou(n,Tj(r,i,e,n),t);lt(c.idToken,r,"internal-error");const u=oy(c.idToken);lt(u,r,"internal-error");const{sub:f}=u;return lt(n.uid===f,r,"user-mismatch"),hc._forOperation(n,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&qr(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(n,e,t=!1){if(or(n.app))return Promise.reject(Ua(n));const r="signIn",i=await Tj(n,r,e),c=await hc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(c.user),c}async function w6(n,e){return kj(bl(n),e)}async function _6(n,e){return Aj(cn(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(n){const e=bl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function b6(n,e,t){if(or(n.app))return Promise.reject(Ua(n));const r=bl(n),u=await lv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v6).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Pj(n),m}),f=await hc._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function Ij(n,e,t){return or(n.app)?Promise.reject(Ua(n)):w6(cn(n),Nc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Pj(n),r})}function N6(n,e){return j6(cn(n),null,e)}async function j6(n,e,t){const{auth:r}=n,c={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(c.password=t);const u=await Ou(n,u6(r,c));await n._updateTokensIfNecessary(u,!0)}function C6(n,e,t,r){return cn(n).onIdTokenChanged(e,t,r)}function S6(n,e,t){return cn(n).beforeAuthStateChanged(e,t)}function E6(n,e,t,r){return cn(n).onAuthStateChanged(e,t,r)}async function T6(n){return cn(n).delete()}const Pm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pm,"1"),this.storage.removeItem(Pm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=1e3,k6=10;class Lj extends Rj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);q5()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,k6):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},A6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lj.type="LOCAL";const P6=Lj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj extends Rj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mj.type="SESSION";const Dj=Mj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new hp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:c}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const f=Array.from(u).map(async x=>x(t.origin,c)),m=await I6(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,u;return new Promise((f,m)=>{const x=hy("",20);i.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(y){const j=y;if(j.data.eventId===x)switch(j.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(j.data.response);break;default:clearTimeout(w),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function L6(n){Wi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function M6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D6(){return navigator?.serviceWorker?.controller||null}function O6(){return Oj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="firebaseLocalStorageDb",F6=1,Im="firebaseLocalStorage",Vj="fbase_key";class Ph{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fp(n,e){return n.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function V6(){const n=indexedDB.deleteDatabase(Fj);return new Ph(n).toPromise()}function cv(){const n=indexedDB.open(Fj,F6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Im,{keyPath:Vj})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Im)?e(r):(r.close(),await V6(),e(await cv()))})})}async function cb(n,e,t){const r=fp(n,!0).put({[Vj]:e,value:t});return new Ph(r).toPromise()}async function B6(n,e){const t=fp(n,!1).get(e),r=await new Ph(t).toPromise();return r===void 0?null:r.value}function ub(n,e){const t=fp(n,!0).delete(e);return new Ph(t).toPromise()}const z6=800,U6=3;class Bj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>U6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Oj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hp._getInstance(O6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await M6(),!this.activeServiceWorker)return;this.sender=new R6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cv();return await cb(e,Pm,"1"),await ub(e,Pm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>B6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ub(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=fp(i,!1).getAll();return new Ph(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bj.type="LOCAL";const $6=Bj;new Th(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n,e){return e?za(e):(lt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function H6(n){return kj(n.auth,new fy(n),n.bypassAuthState)}function W6(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),Aj(t,new fy(n),n.bypassAuthState)}async function q6(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),y6(t,new fy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,t,r,i,c=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H6;case"linkViaPopup":case"linkViaRedirect":return q6;case"reauthViaPopup":case"reauthViaRedirect":return W6;default:qr(this.auth,"internal-error")}}resolve(e){Ka(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ka(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new Th(2e3,1e4);async function uv(n,e,t){if(or(n.app))return Promise.reject(di(n,"operation-not-supported-in-this-environment"));const r=bl(n);S5(n,e,dy);const i=zj(r,t);return new ic(r,"signInViaPopup",e,i).executeNotNull()}class ic extends Uj{constructor(e,t,r,i,c){super(e,t,i,c),this.provider=r,this.authWindow=null,this.pollId=null,ic.currentPopupAction&&ic.currentPopupAction.cancel(),ic.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){Ka(this.filter.length===1,"Popup operations only handle one event");const e=hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ic.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G6.get())};e()}}ic.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="pendingRedirect",lm=new Map;class Z6 extends Uj{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lm.get(this.auth._key());if(!e){try{const r=await Y6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lm.set(this.auth._key(),e)}return this.bypassAuthState||lm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y6(n,e){const t=J6(e),r=X6(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Q6(n,e){lm.set(n._key(),e)}function X6(n){return za(n._redirectPersistence)}function J6(n){return om(K6,n.config.apiKey,n.name)}async function e3(n,e,t=!1){if(or(n.app))return Promise.reject(Ua(n));const r=bl(n),i=zj(r,e),u=await new Z6(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=600*1e3;class n3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$j(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t3&&this.cachedEventUids.clear(),this.cachedEventUids.has(db(e))}saveEventToCache(e){this.cachedEventUids.add(db(e)),this.lastProcessedEventTime=Date.now()}}function db(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $j({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function s3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $j(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(n,e={}){return no(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a3=/^https?/;async function o3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await r3(n);for(const t of e)try{if(l3(t))return}catch{}qr(n,"unauthorized-domain")}function l3(n){const e=av(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!a3.test(t))return!1;if(i3.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new Th(3e4,6e4);function hb(){const n=Wi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function u3(n){return new Promise((e,t)=>{function r(){hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hb(),t(di(n,"network-request-failed"))},timeout:c3.get()})}if(Wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wi().gapi?.load)r();else{const i=t6("iframefcb");return Wi()[i]=()=>{gapi.load?r():t(di(n,"network-request-failed"))},jj(`${e6()}?onload=${i}`).catch(c=>t(c))}}).catch(e=>{throw cm=null,e})}let cm=null;function d3(n){return cm=cm||u3(n),cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=new Th(5e3,15e3),f3="__/auth/iframe",m3="emulator/auth/iframe",p3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x3(n){const e=n.config;lt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ay(e,m3):`https://${n.config.authDomain}/${f3}`,r={apiKey:e.apiKey,appName:n.name,v:Ju},i=g3.get(n.config.apiHost);i&&(r.eid=i);const c=n._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Eh(r).slice(1)}`}async function v3(n){const e=await d3(n),t=Wi().gapi;return lt(t,n,"internal-error"),e.open({where:document.body,url:x3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p3,dontclear:!0},r=>new Promise(async(i,c)=>{await r.restyle({setHideOnLeave:!1});const u=di(n,"network-request-failed"),f=Wi().setTimeout(()=>{c(u)},h3.get());function m(){Wi().clearTimeout(f),i(r)}r.ping(m).then(m,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w3=500,_3=600,b3="_blank",N3="http://localhost";class fb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j3(n,e,t,r=w3,i=_3){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...y3,width:r.toString(),height:i.toString(),top:c,left:u},x=ms().toLowerCase();t&&(f=xj(x)?b3:t),pj(x)&&(e=e||N3,m.scrollbars="yes");const w=Object.entries(m).reduce((j,[S,C])=>`${j}${S}=${C},`,"");if(W5(x)&&f!=="_self")return C3(e||"",f),new fb(null);const y=window.open(e||"",f,w);lt(y,n,"popup-blocked");try{y.focus()}catch{}return new fb(y)}function C3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="__/auth/handler",E3="emulator/auth/handler",T3=encodeURIComponent("fac");async function mb(n,e,t,r,i,c){lt(n.config.authDomain,n,"auth-domain-config-required"),lt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ju,eventId:i};if(e instanceof dy){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",uR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,y]of Object.entries({}))u[w]=y}if(e instanceof kh){const w=e.getScopes().filter(y=>y!=="");w.length>0&&(u.scopes=w.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const m=await n._getAppCheckToken(),x=m?`#${T3}=${encodeURIComponent(m)}`:"";return`${A3(n)}?${Eh(f).slice(1)}${x}`}function A3({config:n}){return n.emulator?ay(n,E3):`https://${n.authDomain}/${S3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="webStorageSupport";class k3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dj,this._completeRedirectFn=e3,this._overrideRedirectResult=Q6}async _openPopup(e,t,r,i){Ka(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await mb(e,t,r,av(),i);return j3(e,c,hy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const c=await mb(e,t,r,av(),i);return L6(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:c}=this.eventManagers[t];return i?Promise.resolve(i):(Ka(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await v3(e),r=new n3(e);return t.register("authEvent",i=>(lt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Px,{type:Px},i=>{const c=i?.[0]?.[Px];c!==void 0&&t(!!c),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=o3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bj()||gj()||ly()}}const P3=k3;var pb="@firebase/auth",gb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L3(n){Du(new uc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;lt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nj(n)},x=new Q5(r,i,c,m);return o6(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Du(new uc("auth-internal",e=>{const t=bl(e.getProvider("auth").getImmediate());return(r=>new I3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nl(pb,gb,R3(n)),nl(pb,gb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=300,D3=J1("authIdTokenMaxAge")||M3;let xb=null;const O3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>D3)return;const i=t?.token;xb!==i&&(xb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function F3(n=ij()){const e=sy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=a6(n,{popupRedirectResolver:P3,persistence:[$6,P6,Dj]}),r=J1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=O3(c.toString());S6(t,u,()=>u(t.currentUser)),C6(t,f=>u(f))}}const i=Q1("auth");return i&&Sj(t,`http://${i}`),t}function V3(){return document.getElementsByTagName("head")?.[0]??document}X5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const c=di("internal-error");c.customData=i,t(c)},r.type="text/javascript",r.charset="UTF-8",V3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L3("Browser");var vb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sl,Hj;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function V(){}V.prototype=P.prototype,D.F=P.prototype,D.prototype=new V,D.prototype.constructor=D,D.D=function(B,U,q){for(var H=Array(arguments.length-2),se=2;se<arguments.length;se++)H[se-2]=arguments[se];return P.prototype[U].apply(B,H)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,P,V){V||(V=0);const B=Array(16);if(typeof P=="string")for(var U=0;U<16;++U)B[U]=P.charCodeAt(V++)|P.charCodeAt(V++)<<8|P.charCodeAt(V++)<<16|P.charCodeAt(V++)<<24;else for(U=0;U<16;++U)B[U]=P[V++]|P[V++]<<8|P[V++]<<16|P[V++]<<24;P=D.g[0],V=D.g[1],U=D.g[2];let q=D.g[3],H;H=P+(q^V&(U^q))+B[0]+3614090360&4294967295,P=V+(H<<7&4294967295|H>>>25),H=q+(U^P&(V^U))+B[1]+3905402710&4294967295,q=P+(H<<12&4294967295|H>>>20),H=U+(V^q&(P^V))+B[2]+606105819&4294967295,U=q+(H<<17&4294967295|H>>>15),H=V+(P^U&(q^P))+B[3]+3250441966&4294967295,V=U+(H<<22&4294967295|H>>>10),H=P+(q^V&(U^q))+B[4]+4118548399&4294967295,P=V+(H<<7&4294967295|H>>>25),H=q+(U^P&(V^U))+B[5]+1200080426&4294967295,q=P+(H<<12&4294967295|H>>>20),H=U+(V^q&(P^V))+B[6]+2821735955&4294967295,U=q+(H<<17&4294967295|H>>>15),H=V+(P^U&(q^P))+B[7]+4249261313&4294967295,V=U+(H<<22&4294967295|H>>>10),H=P+(q^V&(U^q))+B[8]+1770035416&4294967295,P=V+(H<<7&4294967295|H>>>25),H=q+(U^P&(V^U))+B[9]+2336552879&4294967295,q=P+(H<<12&4294967295|H>>>20),H=U+(V^q&(P^V))+B[10]+4294925233&4294967295,U=q+(H<<17&4294967295|H>>>15),H=V+(P^U&(q^P))+B[11]+2304563134&4294967295,V=U+(H<<22&4294967295|H>>>10),H=P+(q^V&(U^q))+B[12]+1804603682&4294967295,P=V+(H<<7&4294967295|H>>>25),H=q+(U^P&(V^U))+B[13]+4254626195&4294967295,q=P+(H<<12&4294967295|H>>>20),H=U+(V^q&(P^V))+B[14]+2792965006&4294967295,U=q+(H<<17&4294967295|H>>>15),H=V+(P^U&(q^P))+B[15]+1236535329&4294967295,V=U+(H<<22&4294967295|H>>>10),H=P+(U^q&(V^U))+B[1]+4129170786&4294967295,P=V+(H<<5&4294967295|H>>>27),H=q+(V^U&(P^V))+B[6]+3225465664&4294967295,q=P+(H<<9&4294967295|H>>>23),H=U+(P^V&(q^P))+B[11]+643717713&4294967295,U=q+(H<<14&4294967295|H>>>18),H=V+(q^P&(U^q))+B[0]+3921069994&4294967295,V=U+(H<<20&4294967295|H>>>12),H=P+(U^q&(V^U))+B[5]+3593408605&4294967295,P=V+(H<<5&4294967295|H>>>27),H=q+(V^U&(P^V))+B[10]+38016083&4294967295,q=P+(H<<9&4294967295|H>>>23),H=U+(P^V&(q^P))+B[15]+3634488961&4294967295,U=q+(H<<14&4294967295|H>>>18),H=V+(q^P&(U^q))+B[4]+3889429448&4294967295,V=U+(H<<20&4294967295|H>>>12),H=P+(U^q&(V^U))+B[9]+568446438&4294967295,P=V+(H<<5&4294967295|H>>>27),H=q+(V^U&(P^V))+B[14]+3275163606&4294967295,q=P+(H<<9&4294967295|H>>>23),H=U+(P^V&(q^P))+B[3]+4107603335&4294967295,U=q+(H<<14&4294967295|H>>>18),H=V+(q^P&(U^q))+B[8]+1163531501&4294967295,V=U+(H<<20&4294967295|H>>>12),H=P+(U^q&(V^U))+B[13]+2850285829&4294967295,P=V+(H<<5&4294967295|H>>>27),H=q+(V^U&(P^V))+B[2]+4243563512&4294967295,q=P+(H<<9&4294967295|H>>>23),H=U+(P^V&(q^P))+B[7]+1735328473&4294967295,U=q+(H<<14&4294967295|H>>>18),H=V+(q^P&(U^q))+B[12]+2368359562&4294967295,V=U+(H<<20&4294967295|H>>>12),H=P+(V^U^q)+B[5]+4294588738&4294967295,P=V+(H<<4&4294967295|H>>>28),H=q+(P^V^U)+B[8]+2272392833&4294967295,q=P+(H<<11&4294967295|H>>>21),H=U+(q^P^V)+B[11]+1839030562&4294967295,U=q+(H<<16&4294967295|H>>>16),H=V+(U^q^P)+B[14]+4259657740&4294967295,V=U+(H<<23&4294967295|H>>>9),H=P+(V^U^q)+B[1]+2763975236&4294967295,P=V+(H<<4&4294967295|H>>>28),H=q+(P^V^U)+B[4]+1272893353&4294967295,q=P+(H<<11&4294967295|H>>>21),H=U+(q^P^V)+B[7]+4139469664&4294967295,U=q+(H<<16&4294967295|H>>>16),H=V+(U^q^P)+B[10]+3200236656&4294967295,V=U+(H<<23&4294967295|H>>>9),H=P+(V^U^q)+B[13]+681279174&4294967295,P=V+(H<<4&4294967295|H>>>28),H=q+(P^V^U)+B[0]+3936430074&4294967295,q=P+(H<<11&4294967295|H>>>21),H=U+(q^P^V)+B[3]+3572445317&4294967295,U=q+(H<<16&4294967295|H>>>16),H=V+(U^q^P)+B[6]+76029189&4294967295,V=U+(H<<23&4294967295|H>>>9),H=P+(V^U^q)+B[9]+3654602809&4294967295,P=V+(H<<4&4294967295|H>>>28),H=q+(P^V^U)+B[12]+3873151461&4294967295,q=P+(H<<11&4294967295|H>>>21),H=U+(q^P^V)+B[15]+530742520&4294967295,U=q+(H<<16&4294967295|H>>>16),H=V+(U^q^P)+B[2]+3299628645&4294967295,V=U+(H<<23&4294967295|H>>>9),H=P+(U^(V|~q))+B[0]+4096336452&4294967295,P=V+(H<<6&4294967295|H>>>26),H=q+(V^(P|~U))+B[7]+1126891415&4294967295,q=P+(H<<10&4294967295|H>>>22),H=U+(P^(q|~V))+B[14]+2878612391&4294967295,U=q+(H<<15&4294967295|H>>>17),H=V+(q^(U|~P))+B[5]+4237533241&4294967295,V=U+(H<<21&4294967295|H>>>11),H=P+(U^(V|~q))+B[12]+1700485571&4294967295,P=V+(H<<6&4294967295|H>>>26),H=q+(V^(P|~U))+B[3]+2399980690&4294967295,q=P+(H<<10&4294967295|H>>>22),H=U+(P^(q|~V))+B[10]+4293915773&4294967295,U=q+(H<<15&4294967295|H>>>17),H=V+(q^(U|~P))+B[1]+2240044497&4294967295,V=U+(H<<21&4294967295|H>>>11),H=P+(U^(V|~q))+B[8]+1873313359&4294967295,P=V+(H<<6&4294967295|H>>>26),H=q+(V^(P|~U))+B[15]+4264355552&4294967295,q=P+(H<<10&4294967295|H>>>22),H=U+(P^(q|~V))+B[6]+2734768916&4294967295,U=q+(H<<15&4294967295|H>>>17),H=V+(q^(U|~P))+B[13]+1309151649&4294967295,V=U+(H<<21&4294967295|H>>>11),H=P+(U^(V|~q))+B[4]+4149444226&4294967295,P=V+(H<<6&4294967295|H>>>26),H=q+(V^(P|~U))+B[11]+3174756917&4294967295,q=P+(H<<10&4294967295|H>>>22),H=U+(P^(q|~V))+B[2]+718787259&4294967295,U=q+(H<<15&4294967295|H>>>17),H=V+(q^(U|~P))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(U+(H<<21&4294967295|H>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+q&4294967295}r.prototype.v=function(D,P){P===void 0&&(P=D.length);const V=P-this.blockSize,B=this.C;let U=this.h,q=0;for(;q<P;){if(U==0)for(;q<=V;)i(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<P;)if(B[U++]=D.charCodeAt(q++),U==this.blockSize){i(this,B),U=0;break}}else for(;q<P;)if(B[U++]=D[q++],U==this.blockSize){i(this,B),U=0;break}}this.h=U,this.o+=P},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;P=this.o*8;for(var V=D.length-8;V<D.length;++V)D[V]=P&255,P/=256;for(this.v(D),D=Array(16),P=0,V=0;V<4;++V)for(let B=0;B<32;B+=8)D[P++]=this.g[V]>>>B&255;return D};function c(D,P){var V=f;return Object.prototype.hasOwnProperty.call(V,D)?V[D]:V[D]=P(D)}function u(D,P){this.h=P;const V=[];let B=!0;for(let U=D.length-1;U>=0;U--){const q=D[U]|0;B&&q==P||(V[U]=q,B=!1)}this.g=V}var f={};function m(D){return-128<=D&&D<128?c(D,function(P){return new u([P|0],P<0?-1:0)}):new u([D|0],D<0?-1:0)}function x(D){if(isNaN(D)||!isFinite(D))return y;if(D<0)return M(x(-D));const P=[];let V=1;for(let B=0;D>=V;B++)P[B]=D/V|0,V*=4294967296;return new u(P,0)}function w(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return M(w(D.substring(1),P));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=x(Math.pow(P,8));let B=y;for(let q=0;q<D.length;q+=8){var U=Math.min(8,D.length-q);const H=parseInt(D.substring(q,q+U),P);U<8?(U=x(Math.pow(P,U)),B=B.j(U).add(x(H))):(B=B.j(V),B=B.add(x(H)))}return B}var y=m(0),j=m(1),S=m(16777216);n=u.prototype,n.m=function(){if(A(this))return-M(this).m();let D=0,P=1;for(let V=0;V<this.g.length;V++){const B=this.i(V);D+=(B>=0?B:4294967296+B)*P,P*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(A(this))return"-"+M(this).toString(D);const P=x(Math.pow(D,6));var V=this;let B="";for(;;){const U=G(V,P).g;V=R(V,U.j(P));let q=((V.g.length>0?V.g[0]:V.h)>>>0).toString(D);if(V=U,C(V))return q+B;for(;q.length<6;)q="0"+q;B=q+B}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(let P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function A(D){return D.h==-1}n.l=function(D){return D=R(this,D),A(D)?-1:C(D)?0:1};function M(D){const P=D.g.length,V=[];for(let B=0;B<P;B++)V[B]=~D.g[B];return new u(V,~D.h).add(j)}n.abs=function(){return A(this)?M(this):this},n.add=function(D){const P=Math.max(this.g.length,D.g.length),V=[];let B=0;for(let U=0;U<=P;U++){let q=B+(this.i(U)&65535)+(D.i(U)&65535),H=(q>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);B=H>>>16,q&=65535,H&=65535,V[U]=H<<16|q}return new u(V,V[V.length-1]&-2147483648?-1:0)};function R(D,P){return D.add(M(P))}n.j=function(D){if(C(this)||C(D))return y;if(A(this))return A(D)?M(this).j(M(D)):M(M(this).j(D));if(A(D))return M(this.j(M(D)));if(this.l(S)<0&&D.l(S)<0)return x(this.m()*D.m());const P=this.g.length+D.g.length,V=[];for(var B=0;B<2*P;B++)V[B]=0;for(B=0;B<this.g.length;B++)for(let U=0;U<D.g.length;U++){const q=this.i(B)>>>16,H=this.i(B)&65535,se=D.i(U)>>>16,be=D.i(U)&65535;V[2*B+2*U]+=H*be,z(V,2*B+2*U),V[2*B+2*U+1]+=q*be,z(V,2*B+2*U+1),V[2*B+2*U+1]+=H*se,z(V,2*B+2*U+1),V[2*B+2*U+2]+=q*se,z(V,2*B+2*U+2)}for(D=0;D<P;D++)V[D]=V[2*D+1]<<16|V[2*D];for(D=P;D<2*P;D++)V[D]=0;return new u(V,0)};function z(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function W(D,P){this.g=D,this.h=P}function G(D,P){if(C(P))throw Error("division by zero");if(C(D))return new W(y,y);if(A(D))return P=G(M(D),P),new W(M(P.g),M(P.h));if(A(P))return P=G(D,M(P)),new W(M(P.g),P.h);if(D.g.length>30){if(A(D)||A(P))throw Error("slowDivide_ only works with positive integers.");for(var V=j,B=P;B.l(D)<=0;)V=K(V),B=K(B);var U=ee(V,1),q=ee(B,1);for(B=ee(B,2),V=ee(V,2);!C(B);){var H=q.add(B);H.l(D)<=0&&(U=U.add(V),q=H),B=ee(B,1),V=ee(V,1)}return P=R(D,U.j(P)),new W(U,P)}for(U=y;D.l(P)>=0;){for(V=Math.max(1,Math.floor(D.m()/P.m())),B=Math.ceil(Math.log(V)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),q=x(V),H=q.j(P);A(H)||H.l(D)>0;)V-=B,q=x(V),H=q.j(P);C(q)&&(q=j),U=U.add(q),D=R(D,H)}return new W(U,D)}n.B=function(D){return G(this,D).h},n.and=function(D){const P=Math.max(this.g.length,D.g.length),V=[];for(let B=0;B<P;B++)V[B]=this.i(B)&D.i(B);return new u(V,this.h&D.h)},n.or=function(D){const P=Math.max(this.g.length,D.g.length),V=[];for(let B=0;B<P;B++)V[B]=this.i(B)|D.i(B);return new u(V,this.h|D.h)},n.xor=function(D){const P=Math.max(this.g.length,D.g.length),V=[];for(let B=0;B<P;B++)V[B]=this.i(B)^D.i(B);return new u(V,this.h^D.h)};function K(D){const P=D.g.length+1,V=[];for(let B=0;B<P;B++)V[B]=D.i(B)<<1|D.i(B-1)>>>31;return new u(V,D.h)}function ee(D,P){const V=P>>5;P%=32;const B=D.g.length-V,U=[];for(let q=0;q<B;q++)U[q]=P>0?D.i(q+V)>>>P|D.i(q+V+1)<<32-P:D.i(q+V);return new u(U,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hj=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=x,u.fromString=w,sl=u}).apply(typeof vb<"u"?vb:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wj,Ud,qj,um,dv,Gj,Kj,Zj;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var T=0;T<p.length;++T){var I=p[T];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=t(this);function i(p,T){if(T)e:{var I=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var re=p[$];if(!(re in I))break e;I=I[re]}p=p[p.length-1],$=I[p],T=T($),T!=$&&T!=null&&e(I,p,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(T){var I=[],$;for($ in T)Object.prototype.hasOwnProperty.call(T,$)&&I.push([$,T[$]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function f(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function m(p,T,I){return p.call.apply(p.bind,arguments)}function x(p,T,I){return x=m,x.apply(null,arguments)}function w(p,T){var I=Array.prototype.slice.call(arguments,1);return function(){var $=I.slice();return $.push.apply($,arguments),p.apply(this,$)}}function y(p,T){function I(){}I.prototype=T.prototype,p.Z=T.prototype,p.prototype=new I,p.prototype.constructor=p,p.Ob=function($,re,de){for(var Pe=Array(arguments.length-2),at=2;at<arguments.length;at++)Pe[at-2]=arguments[at];return T.prototype[re].apply($,Pe)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function S(p){const T=p.length;if(T>0){const I=Array(T);for(let $=0;$<T;$++)I[$]=p[$];return I}return[]}function C(p,T){for(let $=1;$<arguments.length;$++){const re=arguments[$];var I=typeof re;if(I=I!="object"?I:re?Array.isArray(re)?"array":I:"null",I=="array"||I=="object"&&typeof re.length=="number"){I=p.length||0;const de=re.length||0;p.length=I+de;for(let Pe=0;Pe<de;Pe++)p[I+Pe]=re[Pe]}else p.push(re)}}class A{constructor(T,I){this.i=T,this.j=I,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function M(p){u.setTimeout(()=>{throw p},0)}function R(){var p=D;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class z{constructor(){this.h=this.g=null}add(T,I){const $=W.get();$.set(T,I),this.h?this.h.next=$:this.g=$,this.h=$}}var W=new A(()=>new G,p=>p.reset());class G{constructor(){this.next=this.g=this.h=null}set(T,I){this.h=T,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let K,ee=!1,D=new z,P=()=>{const p=Promise.resolve(void 0);K=()=>{p.then(V)}};function V(){for(var p;p=R();){try{p.h.call(p.g)}catch(I){M(I)}var T=W;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}ee=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};u.addEventListener("test",I,T),u.removeEventListener("test",I,T)}catch{}return p})();function H(p){return/^[\s\xa0]*$/.test(p)}function se(p,T){U.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}y(se,U),se.prototype.init=function(p,T){const I=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(I=="mouseover"?T=p.fromElement:I=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),ie=0;function we(p,T,I,$,re){this.listener=p,this.proxy=null,this.src=T,this.type=I,this.capture=!!$,this.ha=re,this.key=++ie,this.da=this.fa=!1}function Z(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ce(p,T,I){for(const $ in p)T.call(I,p[$],$,p)}function ue(p,T){for(const I in p)T.call(void 0,p[I],I,p)}function X(p){const T={};for(const I in p)T[I]=p[I];return T}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function je(p,T){let I,$;for(let re=1;re<arguments.length;re++){$=arguments[re];for(I in $)p[I]=$[I];for(let de=0;de<me.length;de++)I=me[de],Object.prototype.hasOwnProperty.call($,I)&&(p[I]=$[I])}}function Ee(p){this.src=p,this.g={},this.h=0}Ee.prototype.add=function(p,T,I,$,re){const de=p.toString();p=this.g[de],p||(p=this.g[de]=[],this.h++);const Pe=Ae(p,T,$,re);return Pe>-1?(T=p[Pe],I||(T.fa=!1)):(T=new we(T,this.src,de,!!$,re),T.fa=I,p.push(T)),T};function Re(p,T){const I=T.type;if(I in p.g){var $=p.g[I],re=Array.prototype.indexOf.call($,T,void 0),de;(de=re>=0)&&Array.prototype.splice.call($,re,1),de&&(Z(T),p.g[I].length==0&&(delete p.g[I],p.h--))}}function Ae(p,T,I,$){for(let re=0;re<p.length;++re){const de=p[re];if(!de.da&&de.listener==T&&de.capture==!!I&&de.ha==$)return re}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Be={};function rt(p,T,I,$,re){if(Array.isArray(T)){for(let de=0;de<T.length;de++)rt(p,T[de],I,$,re);return null}return I=gi(I),p&&p[be]?p.J(T,I,f($)?!!$.capture:!1,re):it(p,T,I,!1,$,re)}function it(p,T,I,$,re,de){if(!T)throw Error("Invalid event type");const Pe=f(re)?!!re.capture:!!re;let at=Ks(p);if(at||(p[ge]=at=new Ee(p)),I=at.add(T,I,$,Pe,de),I.proxy)return I;if($=xt(),I.proxy=$,$.src=p,$.listener=I,p.addEventListener)q||(re=Pe),re===void 0&&(re=!1),p.addEventListener(T.toString(),$,re);else if(p.attachEvent)p.attachEvent(Xn(T.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return I}function xt(){function p(I){return T.call(p.src,p.listener,I)}const T=Kr;return p}function wt(p,T,I,$,re){if(Array.isArray(T))for(var de=0;de<T.length;de++)wt(p,T[de],I,$,re);else $=f($)?!!$.capture:!!$,I=gi(I),p&&p[be]?(p=p.i,de=String(T).toString(),de in p.g&&(T=p.g[de],I=Ae(T,I,$,re),I>-1&&(Z(T[I]),Array.prototype.splice.call(T,I,1),T.length==0&&(delete p.g[de],p.h--)))):p&&(p=Ks(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Ae(T,I,$,re)),(I=p>-1?T[p]:null)&&Ht(I))}function Ht(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[be])Re(T.i,p);else{var I=p.type,$=p.proxy;T.removeEventListener?T.removeEventListener(I,$,p.capture):T.detachEvent?T.detachEvent(Xn(I),$):T.addListener&&T.removeListener&&T.removeListener($),(I=Ks(T))?(Re(I,p),I.h==0&&(I.src=null,T[ge]=null)):Z(p)}}}function Xn(p){return p in Be?Be[p]:Be[p]="on"+p}function Kr(p,T){if(p.da)p=!0;else{T=new se(T,this);const I=p.listener,$=p.ha||p.src;p.fa&&Ht(p),p=I.call($,T)}return p}function Ks(p){return p=p[ge],p instanceof Ee?p:null}var ps="__closure_events_fn_"+(Math.random()*1e9>>>0);function gi(p){return typeof p=="function"?p:(p[ps]||(p[ps]=function(T){return p.handleEvent(T)}),p[ps])}function dn(){B.call(this),this.i=new Ee(this),this.M=this,this.G=null}y(dn,B),dn.prototype[be]=!0,dn.prototype.removeEventListener=function(p,T,I,$){wt(this,p,T,I,$)};function Zt(p,T){var I,$=p.G;if($)for(I=[];$;$=$.G)I.push($);if(p=p.M,$=T.type||T,typeof T=="string")T=new U(T,p);else if(T instanceof U)T.target=T.target||p;else{var re=T;T=new U($,p),je(T,re)}re=!0;let de,Pe;if(I)for(Pe=I.length-1;Pe>=0;Pe--)de=T.g=I[Pe],re=gs(de,$,!0,T)&&re;if(de=T.g=p,re=gs(de,$,!0,T)&&re,re=gs(de,$,!1,T)&&re,I)for(Pe=0;Pe<I.length;Pe++)de=T.g=I[Pe],re=gs(de,$,!1,T)&&re}dn.prototype.N=function(){if(dn.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const I=p.g[T];for(let $=0;$<I.length;$++)Z(I[$]);delete p.g[T],p.h--}}this.G=null},dn.prototype.J=function(p,T,I,$){return this.i.add(String(p),T,!1,I,$)},dn.prototype.K=function(p,T,I,$){return this.i.add(String(p),T,!0,I,$)};function gs(p,T,I,$){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let re=!0;for(let de=0;de<T.length;++de){const Pe=T[de];if(Pe&&!Pe.da&&Pe.capture==I){const at=Pe.listener,At=Pe.ha||Pe.src;Pe.fa&&Re(p.i,Pe),re=at.call(At,$)!==!1&&re}}return re&&!$.defaultPrevented}function io(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=x(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(p,T||0)}function ao(p){p.g=io(()=>{p.g=null,p.i&&(p.i=!1,ao(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class kc extends B{constructor(T,I){super(),this.m=T,this.l=I,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ao(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xi(p){B.call(this),this.h=p,this.g={}}y(xi,B);var ia=[];function aa(p){ce(p.g,function(T,I){this.g.hasOwnProperty(I)&&Ht(T)},p),p.g={}}xi.prototype.N=function(){xi.Z.N.call(this),aa(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=u.JSON.stringify,Pc=u.JSON.parse,vi=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Yr(){}function Ic(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yi(){U.call(this,"d")}y(yi,U);function oo(){U.call(this,"c")}y(oo,U);var Zs={},mr=null;function wi(){return mr=mr||new dn}Zs.Ia="serverreachability";function lo(p){U.call(this,Zs.Ia,p)}y(lo,U);function pr(p){const T=wi();Zt(T,new lo(T))}Zs.STAT_EVENT="statevent";function gr(p,T){U.call(this,Zs.STAT_EVENT,p),this.stat=T}y(gr,U);function Wt(p){const T=wi();Zt(T,new gr(T,p))}Zs.Ja="timingevent";function El(p,T){U.call(this,Zs.Ja,p),this.size=T}y(El,U);function _i(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},T)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function Rc(p,T,I,$,re,de){p.info(function(){if(p.g)if(de){var Pe="",at=de.split("&");for(let Rt=0;Rt<at.length;Rt++){var At=at[Rt].split("=");if(At.length>1){const en=At[0];At=At[1];const Ns=en.split("_");Pe=Ns.length>=2&&Ns[1]=="type"?Pe+(en+"="+At+"&"):Pe+(en+"=redacted&")}}}else Pe=null;else Pe=de;return"XMLHTTP REQ ("+$+") [attempt "+re+"]: "+T+`
`+I+`
`+Pe})}function Lc(p,T,I,$,re,de,Pe){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+re+"]: "+T+`
`+I+`
`+de+" "+Pe})}function xr(p,T,I,$){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+oa(p,I)+($?" "+$:"")})}function co(p,T){p.info(function(){return"TIMEOUT: "+T})}bi.prototype.info=function(){};function oa(p,T){if(!p.g)return T;if(!T)return null;try{const de=JSON.parse(T);if(de){for(p=0;p<de.length;p++)if(Array.isArray(de[p])){var I=de[p];if(!(I.length<2)){var $=I[1];if(Array.isArray($)&&!($.length<1)){var re=$[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Pe=1;Pe<$.length;Pe++)$[Pe]=""}}}}return Zr(de)}catch{return T}}var Ni={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ji={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mc;function xn(){}y(xn,Yr),xn.prototype.g=function(){return new XMLHttpRequest},Mc=new xn;function $e(p){return encodeURIComponent(String(p))}function la(p){var T=1;p=p.split(":");const I=[];for(;T>0&&p.length;)I.push(p.shift()),T--;return p.length&&I.push(p.join(":")),I}function xs(p,T,I,$){this.j=p,this.i=T,this.l=I,this.S=$||1,this.V=new xi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Tl}function Tl(){this.i=null,this.g="",this.h=!1}var Al={},ca={};function Rs(p,T,I){p.M=1,p.A=Mt($n(T)),p.u=I,p.R=!0,vr(p,null)}function vr(p,T){p.F=Date.now(),ua(p),p.B=$n(p.A);var I=p.B,$=p.S;Array.isArray($)||($=[String($)]),xa(I.i,"t",$),p.C=0,I=p.j.L,p.h=new Tl,p.g=Ol(p.j,I?T:null,!p.u),p.P>0&&(p.O=new kc(x(p.Y,p,p.g),p.P)),T=p.V,I=p.g,$=p.ba;var re="readystatechange";Array.isArray(re)||(re&&(ia[0]=re.toString()),re=ia);for(let de=0;de<re.length;de++){const Pe=rt(I,re[de],$||T.handleEvent,!1,T.h||T);if(!Pe)break;T.g[Pe.key]=Pe}T=p.J?X(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),pr(),Rc(p.i,p.v,p.B,p.l,p.S,p.u)}xs.prototype.ba=function(p){p=p.target;const T=this.O;T&&Cr(p)==3?T.j():this.Y(p)},xs.prototype.Y=function(p){try{if(p==this.g)e:{const at=Cr(this.g),At=this.g.ya(),Rt=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||at!=4||At==7||(At==8||Rt<=0?pr(3):pr(2)),da(this);var T=this.g.ca();this.X=T;var I=kl(this);if(this.o=T==200,Lc(this.i,this.v,this.B,this.l,this.S,at,T),this.o){if(this.U&&!this.L){t:{if(this.g){var $,re=this.g;if(($=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H($)){var de=$;break t}}de=null}if(p=de)xr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zt(this,p);else{this.o=!1,this.m=3,Wt(12),Ls(this),ha(this);break e}}if(this.R){p=!0;let en;for(;!this.K&&this.C<I.length;)if(en=Oc(this,I),en==ca){at==4&&(this.m=4,Wt(14),p=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Al){this.m=4,Wt(15),xr(this.i,this.l,I,"[Invalid Chunk]"),p=!1;break}else xr(this.i,this.l,en,null),zt(this,en);if(Dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||I.length!=0||this.h.h||(this.m=1,Wt(16),p=!1),this.o=this.o&&p,!p)xr(this.i,this.l,I,"[Invalid Chunked Response]"),Ls(this),ha(this);else if(I.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Na(Pe),Pe.P=!0,Wt(11))}}else xr(this.i,this.l,I,null),zt(this,I);at==4&&Ls(this),this.o&&!this.K&&(at==4?Wn(this.j,this):(this.o=!1,ua(this)))}else wa(this.g),T==400&&I.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),Ls(this),ha(this)}}}catch{}finally{}};function kl(p){if(!Dc(p))return p.g.la();const T=Ll(p.g);if(T==="")return"";let I="";const $=T.length,re=Cr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Ls(p),ha(p),"";p.h.i=new u.TextDecoder}for(let de=0;de<$;de++)p.h.h=!0,I+=p.h.i.decode(T[de],{stream:!(re&&de==$-1)});return T.length=0,p.h.g+=I,p.C=0,p.h.g}function Dc(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Oc(p,T){var I=p.C,$=T.indexOf(`
`,I);return $==-1?ca:(I=Number(T.substring(I,$)),isNaN(I)?Al:($+=1,$+I>T.length?ca:(T=T.slice($,$+I),p.C=$+I,T)))}xs.prototype.cancel=function(){this.K=!0,Ls(this)};function ua(p){p.T=Date.now()+p.H,Pl(p,p.H)}function Pl(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=_i(x(p.aa,p),T)}function da(p){p.D&&(u.clearTimeout(p.D),p.D=null)}xs.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(co(this.i,this.B),this.M!=2&&(pr(),Wt(17)),Ls(this),this.m=2,ha(this)):Pl(this,this.T-p)};function ha(p){p.j.I==0||p.K||Wn(p.j,p)}function Ls(p){da(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,aa(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function zt(p,T){try{var I=p.j;if(I.I!=0&&(I.g==p||ma(I.h,p))){if(!p.L&&ma(I.h,p)&&I.I==3){try{var $=I.Ba.g.parse(T)}catch{$=null}if(Array.isArray($)&&$.length==3){var re=$;if(re[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<p.F)mo(I),_s(I);else break e;Er(I),Wt(18)}}else I.xa=re[1],0<I.xa-I.K&&re[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=_i(x(I.Va,I),6e3));fa(I.h)<=1&&I.ta&&(I.ta=void 0)}else ns(I,11)}else if((p.L||I.g==p)&&mo(I),!H(T))for(re=I.Ba.g.parse(T),T=0;T<re.length;T++){let Rt=re[T];const en=Rt[0];if(!(en<=I.K))if(I.K=en,Rt=Rt[1],I.I==2)if(Rt[0]=="c"){I.M=Rt[1],I.ba=Rt[2];const Ns=Rt[3];Ns!=null&&(I.ka=Ns,I.j.info("VER="+I.ka));const Xs=Rt[4];Xs!=null&&(I.za=Xs,I.j.info("SVER="+I.za));const Fs=Rt[5];Fs!=null&&typeof Fs=="number"&&Fs>0&&($=1.5*Fs,I.O=$,I.j.info("backChannelRequestTimeoutMs_="+$)),$=I;const Ar=p.g;if(Ar){const yo=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var de=$.h;de.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(yr(de,de.h),de.h=null))}if($.G){const wo=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;wo&&($.wa=wo,Ve($.J,$.G,wo))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-p.F,I.j.info("Handshake RTT: "+I.T+"ms")),$=I;var Pe=p;if($.na=go($,$.L?$.ba:null,$.W),Pe.L){Ci($.h,Pe);var at=Pe,At=$.O;At&&(at.H=At),at.D&&(da(at),ua(at)),$.g=Pe}else Sn($);I.i.length>0&&bs(I)}else Rt[0]!="stop"&&Rt[0]!="close"||ns(I,7);else I.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?ns(I,7):gt(I):Rt[0]!="noop"&&I.l&&I.l.qa(Rt),I.A=0)}}pr(4)}catch{}}var dd=class{constructor(p,T){this.g=p,this.map=T}};function uo(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function fa(p){return p.h?1:p.g?p.g.size:0}function ma(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function yr(p,T){p.g?p.g.add(T):p.h=T}function Ci(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}uo.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Jn(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const I of p.g.values())T=T.concat(I.G);return T}return S(p.i)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(p,T){if(p){p=p.split("&");for(let I=0;I<p.length;I++){const $=p[I].indexOf("=");let re,de=null;$>=0?(re=p[I].substring(0,$),de=p[I].substring($+1)):re=p[I],T(re,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function Tt(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof Tt?(this.l=p.l,Ms(this,p.j),this.o=p.o,this.g=p.g,Hn(this,p.u),this.h=p.h,wr(this,Ti(p.i)),this.m=p.m):p&&(T=String(p).match(Si))?(this.l=!1,Ms(this,T[1]||"",!0),this.o=Xr(T[2]||""),this.g=Xr(T[3]||"",!0),Hn(this,T[4]),this.h=Xr(T[5]||"",!0),wr(this,T[6]||"",!0),this.m=Xr(T[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}Tt.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(_r(T,Rl,!0),":");var I=this.g;return(I||T=="file")&&(p.push("//"),(T=this.o)&&p.push(_r(T,Rl,!0),"@"),p.push($e(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&p.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(_r(I,I.charAt(0)=="/"?vs:Ei,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",_r(I,Ys)),p.join("")},Tt.prototype.resolve=function(p){const T=$n(this);let I=!!p.j;I?Ms(T,p.j):I=!!p.o,I?T.o=p.o:I=!!p.g,I?T.g=p.g:I=p.u!=null;var $=p.h;if(I)Hn(T,p.u);else if(I=!!p.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var re=T.h.lastIndexOf("/");re!=-1&&($=T.h.slice(0,re+1)+$)}if(re=$,re==".."||re==".")$="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){$=re.lastIndexOf("/",0)==0,re=re.split("/");const de=[];for(let Pe=0;Pe<re.length;){const at=re[Pe++];at=="."?$&&Pe==re.length&&de.push(""):at==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),$&&Pe==re.length&&de.push("")):(de.push(at),$=!0)}$=de.join("/")}else $=re}return I?T.h=$:I=p.i.toString()!=="",I?wr(T,Ti(p.i)):I=!!p.m,I&&(T.m=p.m),T};function $n(p){return new Tt(p)}function Ms(p,T,I){p.j=I?Xr(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function Hn(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function wr(p,T,I){T instanceof pt?(p.i=T,Ai(p.i,p.l)):(I||(T=_r(T,Yt)),p.i=new pt(T,p.l))}function Ve(p,T,I){p.i.set(T,I)}function Mt(p){return Ve(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Xr(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function _r(p,T,I){return typeof p=="string"?(p=encodeURI(p).replace(T,Mn),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Mn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Rl=/[#\/\?@]/g,Ei=/[#\?:]/g,vs=/[#\?]/g,Yt=/[#\?@]/g,Ys=/#/g;function pt(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function es(p){p.g||(p.g=new Map,p.h=0,p.i&&dt(p.i,function(T,I){p.add(decodeURIComponent(T.replace(/\+/g," ")),I)}))}n=pt.prototype,n.add=function(p,T){es(this),this.i=null,p=Ds(this,p);let I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(T),this.h+=1,this};function pa(p,T){es(p),T=Ds(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function br(p,T){return es(p),T=Ds(p,T),p.g.has(T)}n.forEach=function(p,T){es(this),this.g.forEach(function(I,$){I.forEach(function(re){p.call(T,re,$,this)},this)},this)};function ga(p,T){es(p);let I=[];if(typeof T=="string")br(p,T)&&(I=I.concat(p.g.get(Ds(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)I=I.concat(p[T]);return I}n.set=function(p,T){return es(this),this.i=null,p=Ds(this,p),br(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},n.get=function(p,T){return p?(p=ga(this,p),p.length>0?String(p[0]):T):T};function xa(p,T,I){pa(p,T),I.length>0&&(p.i=null,p.g.set(Ds(p,T),S(I)),p.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let $=0;$<T.length;$++){var I=T[$];const re=$e(I);I=ga(this,I);for(let de=0;de<I.length;de++){let Pe=re;I[de]!==""&&(Pe+="="+$e(I[de])),p.push(Pe)}}return this.i=p.join("&")};function Ti(p){const T=new pt;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function Ds(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function Ai(p,T){T&&!p.j&&(es(p),p.i=null,p.g.forEach(function(I,$){const re=$.toLowerCase();$!=re&&(pa(this,$),xa(this,re,I))},p)),p.j=T}function ys(p,T){const I=new bi;if(u.Image){const $=new Image;$.onload=w(fn,I,"TestLoadImage: loaded",!0,T,$),$.onerror=w(fn,I,"TestLoadImage: error",!1,T,$),$.onabort=w(fn,I,"TestLoadImage: abort",!1,T,$),$.ontimeout=w(fn,I,"TestLoadImage: timeout",!1,T,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else T(!1)}function Qs(p,T){const I=new bi,$=new AbortController,re=setTimeout(()=>{$.abort(),fn(I,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:$.signal}).then(de=>{clearTimeout(re),de.ok?fn(I,"TestPingServer: ok",!0,T):fn(I,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(re),fn(I,"TestPingServer: error",!1,T)})}function fn(p,T,I,$,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),$(I)}catch{}}function va(){this.g=new vi}function tt(p){this.i=p.Sb||null,this.h=p.ab||!1}y(tt,Yr),tt.prototype.g=function(){return new Qt(this.i,this.h)};function Qt(p,T){dn.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Qt,dn),n=Qt.prototype,n.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,ws(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dt(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dt(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?Jr(this):ws(this),this.readyState==3&&Dt(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Jr(this))},n.Na=function(p){this.g&&(this.response=p,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ws(p)}n.setRequestHeader=function(p,T){this.A.append(p,T)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var I=T.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=T.next();return p.join(`\r
`)};function ws(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Qt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ho(p){let T="";return ce(p,function(I,$){T+=$,T+=":",T+=I,T+=`\r
`}),T}function ki(p,T,I){e:{for($ in I){var $=!1;break e}$=!0}$||(I=ho(I),typeof p=="string"?I!=null&&$e(I):Ve(p,T,I))}function St(p){dn.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(St,dn);var fo=/^https?$/i,ya=["POST","PUT"];n=St.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,T,I,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mc.g(),this.g.onreadystatechange=j(x(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(de){Ut(this,de);return}if(p=I||"",I=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var re in $)I.set(re,$[re]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const de of $.keys())I.set(de,$.get(de));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(I.keys()).find(de=>de.toLowerCase()=="content-type"),re=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(ya,T,void 0)>=0)||$||re||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Pe]of I)this.g.setRequestHeader(de,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(de){Ut(this,de)}};function Ut(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,ts(p),jr(p)}function ts(p){p.A||(p.A=!0,Zt(p,"complete"),Zt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Zt(this,"complete"),Zt(this,"abort"),jr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),St.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Nr(this):this.Xa())},n.Xa=function(){Nr(this)};function Nr(p){if(p.h&&typeof c<"u"){if(p.v&&Cr(p)==4)setTimeout(p.Ca.bind(p),0);else if(Zt(p,"readystatechange"),Cr(p)==4){p.h=!1;try{const de=p.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var I;if(!(I=T)){var $;if($=de===0){let Pe=String(p.D).match(Si)[1]||null;!Pe&&u.self&&u.self.location&&(Pe=u.self.location.protocol.slice(0,-1)),$=!fo.test(Pe?Pe.toLowerCase():"")}I=$}if(I)Zt(p,"complete"),Zt(p,"success");else{p.o=6;try{var re=Cr(p)>2?p.g.statusText:""}catch{re=""}p.l=re+" ["+p.ca()+"]",ts(p)}}finally{jr(p)}}}}function jr(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const I=p.g;p.g=null,T||Zt(p,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Cr(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Cr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),Pc(T)}};function Ll(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function wa(p){const T={};p=(p.g&&Cr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(H(p[$]))continue;var I=la(p[$]);const re=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const de=T[re]||[];T[re]=de,de.push(I)}ue(T,function($){return $.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(p,T,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||T}function _a(p){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sr("baseRetryDelayMs",5e3,p),this.Za=Sr("retryDelaySeedMs",1e4,p),this.Ta=Sr("forwardChannelMaxRetries",2,p),this.va=Sr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new uo(p&&p.concurrentRequestLimit),this.Ba=new va,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_a.prototype,n.ka=8,n.I=1,n.connect=function(p,T,I,$){Wt(0),this.W=p,this.H=T||{},I&&$!==void 0&&(this.H.OSID=I,this.H.OAID=$),this.F=this.X,this.J=go(this,null,this.W),bs(this)};function gt(p){if(Dn(p),p.I==3){var T=p.V++,I=$n(p.J);if(Ve(I,"SID",p.M),Ve(I,"RID",T),Ve(I,"TYPE","terminate"),Os(p,I),T=new xs(p,p.j,T),T.M=2,T.A=Mt($n(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!I&&u.Image&&(new Image().src=T.A,I=!0),I||(T.g=Ol(T.j,null),T.g.ea(T.A)),T.F=Date.now(),ua(T)}ss(p)}function _s(p){p.g&&(Na(p),p.g.cancel(),p.g=null)}function Dn(p){_s(p),p.v&&(u.clearTimeout(p.v),p.v=null),mo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function bs(p){if(!Il(p.h)&&!p.m){p.m=!0;var T=p.Ea;K||P(),ee||(K(),ee=!0),D.add(T,p),p.D=0}}function Ml(p,T){return fa(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=_i(x(p.Ea,p,T),po(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const re=new xs(this,this.j,p);let de=this.o;if(this.U&&(de?(de=X(de),je(de,this.U)):de=this.U),this.u!==null||this.R||(re.J=de,de=null),this.S)e:{for(var T=0,I=0;I<this.i.length;I++){t:{var $=this.i[I];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(T+=$,T>4096){T=I;break e}if(T===4096||I===this.i.length-1){T=I+1;break e}}T=1e3}else T=1e3;T=Dl(this,re,T),I=$n(this.J),Ve(I,"RID",p),Ve(I,"CVER",22),this.G&&Ve(I,"X-HTTP-Session-Id",this.G),Os(this,I),de&&(this.R?T="headers="+$e(ho(de))+"&"+T:this.u&&ki(I,this.u,de)),yr(this.h,re),this.Ra&&Ve(I,"TYPE","init"),this.S?(Ve(I,"$req",T),Ve(I,"SID","null"),re.U=!0,Rs(re,I,null)):Rs(re,I,T),this.I=2}}else this.I==3&&(p?ba(this,p):this.i.length==0||Il(this.h)||ba(this))};function ba(p,T){var I;T?I=T.l:I=p.V++;const $=$n(p.J);Ve($,"SID",p.M),Ve($,"RID",I),Ve($,"AID",p.K),Os(p,$),p.u&&p.o&&ki($,p.u,p.o),I=new xs(p,p.j,I,p.D+1),p.u===null&&(I.J=p.o),T&&(p.i=T.G.concat(p.i)),T=Dl(p,I,1e3),I.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),yr(p.h,I),Rs(I,$,T)}function Os(p,T){p.H&&ce(p.H,function(I,$){Ve(T,$,I)}),p.l&&ce({},function(I,$){Ve(T,$,I)})}function Dl(p,T,I){I=Math.min(p.i.length,I);const $=p.l?x(p.l.Ka,p.l,p):null;e:{var re=p.i;let at=-1;for(;;){const At=["count="+I];at==-1?I>0?(at=re[0].g,At.push("ofs="+at)):at=0:At.push("ofs="+at);let Rt=!0;for(let en=0;en<I;en++){var de=re[en].g;const Ns=re[en].map;if(de-=at,de<0)at=Math.max(0,re[en].g-100),Rt=!1;else try{de="req"+de+"_"||"";try{var Pe=Ns instanceof Map?Ns:Object.entries(Ns);for(const[Xs,Fs]of Pe){let Ar=Fs;f(Fs)&&(Ar=Zr(Fs)),At.push(de+Xs+"="+encodeURIComponent(Ar))}}catch(Xs){throw At.push(de+"type="+encodeURIComponent("_badmap")),Xs}}catch{$&&$(Ns)}}if(Rt){Pe=At.join("&");break e}}Pe=void 0}return p=p.i.splice(0,I),T.G=p,Pe}function Sn(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;K||P(),ee||(K(),ee=!0),D.add(T,p),p.A=0}}function Er(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=_i(x(p.Da,p),po(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Tr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=_i(x(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),_s(this),Tr(this))};function Na(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Tr(p){p.g=new xs(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=$n(p.na);Ve(T,"RID","rpc"),Ve(T,"SID",p.M),Ve(T,"AID",p.K),Ve(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ve(T,"TO",p.ia),Ve(T,"TYPE","xmlhttp"),Os(p,T),p.u&&p.o&&ki(T,p.u,p.o),p.O&&(p.g.H=p.O);var I=p.g;p=p.ba,I.M=1,I.A=Mt($n(T)),I.u=null,I.R=!0,vr(I,p)}n.Va=function(){this.C!=null&&(this.C=null,_s(this),Er(this),Wt(19))};function mo(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Wn(p,T){var I=null;if(p.g==T){mo(p),Na(p),p.g=null;var $=2}else if(ma(p.h,T))I=T.G,Ci(p.h,T),$=1;else return;if(p.I!=0){if(T.o)if($==1){I=T.u?T.u.length:0,T=Date.now()-T.F;var re=p.D;$=wi(),Zt($,new El($,I)),bs(p)}else Sn(p);else if(re=T.m,re==3||re==0&&T.X>0||!($==1&&Ml(p,T)||$==2&&Er(p)))switch(I&&I.length>0&&(T=p.h,T.i=T.i.concat(I)),re){case 1:ns(p,5);break;case 4:ns(p,10);break;case 3:ns(p,6);break;default:ns(p,2)}}}function po(p,T){let I=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(I*=2),I*T}function ns(p,T){if(p.j.info("Error code "+T),T==2){var I=x(p.bb,p),$=p.Ua;const re=!$;$=new Tt($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ms($,"https"),Mt($),re?ys($.toString(),I):Qs($.toString(),I)}else Wt(2);p.I=0,p.l&&p.l.pa(T),ss(p),Dn(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function ss(p){if(p.I=0,p.ja=[],p.l){const T=Jn(p.h);(T.length!=0||p.i.length!=0)&&(C(p.ja,T),C(p.ja,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.oa()}}function go(p,T,I){var $=I instanceof Tt?$n(I):new Tt(I);if($.g!="")T&&($.g=T+"."+$.g),Hn($,$.u);else{var re=u.location;$=re.protocol,T=T?T+"."+re.hostname:re.hostname,re=+re.port;const de=new Tt(null);$&&Ms(de,$),T&&(de.g=T),re&&Hn(de,re),I&&(de.h=I),$=de}return I=p.G,T=p.wa,I&&T&&Ve($,I,T),Ve($,"VER",p.ka),Os(p,$),$}function Ol(p,T,I){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new St(new tt({ab:I})):new St(p.ma),T.Fa(p.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xo(){}n=xo.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function vo(){}vo.prototype.g=function(p,T){return new vn(p,T)};function vn(p,T){dn.call(this),this.g=new _a(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!H(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!H(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Pi(this)}y(vn,dn),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){gt(this.g)},vn.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.v&&(I={},I.__data__=Zr(p),p=I);T.i.push(new dd(T.Ya++,p)),T.I==3&&bs(T)},vn.prototype.N=function(){this.g.l=null,delete this.j,gt(this.g),delete this.g,vn.Z.N.call(this)};function Fl(p){yi.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const I in T){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}y(Fl,yi);function Fc(){oo.call(this),this.status=1}y(Fc,oo);function Pi(p){this.g=p}y(Pi,xo),Pi.prototype.ra=function(){Zt(this.g,"a")},Pi.prototype.qa=function(p){Zt(this.g,new Fl(p))},Pi.prototype.pa=function(p){Zt(this.g,new Fc)},Pi.prototype.oa=function(){Zt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,Zj=function(){return new vo},Kj=function(){return wi()},Gj=Zs,dv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,um=Ni,ji.COMPLETE="complete",qj=ji,Ic.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",dn.prototype.listen=dn.prototype.J,Ud=Ic,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,Wj=St}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});const yb="@firebase/firestore",wb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}us.UNAUTHENTICATED=new us(null),us.GOOGLE_CREDENTIALS=new us("google-credentials-uid"),us.FIRST_PARTY=new us("first-party-uid"),us.MOCK_USER=new us("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new ty("@firebase/firestore");function xu(){return fc.logLevel}function Ue(n,...e){if(fc.logLevel<=bt.DEBUG){const t=e.map(my);fc.debug(`Firestore (${ed}): ${n}`,...t)}}function Za(n,...e){if(fc.logLevel<=bt.ERROR){const t=e.map(my);fc.error(`Firestore (${ed}): ${n}`,...t)}}function Fu(n,...e){if(fc.logLevel<=bt.WARN){const t=e.map(my);fc.warn(`Firestore (${ed}): ${n}`,...t)}}function my(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Yj(n,r,t)}function Yj(n,e,t){let r=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Za(r),new Error(r)}function Pt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Yj(e,i,r)}function ht(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends to{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(us.UNAUTHENTICATED)))}shutdown(){}}class z3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class U3{constructor(e){this.t=e,this.currentUser=us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pt(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let c=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qi,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt(typeof r.accessToken=="string",31837,{l:r}),new Qj(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new us(e)}}class $3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=us.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(us.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _b{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pt(this.o===void 0,3512);const r=c=>{c.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,Ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const i=c=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _b(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _b(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=q3(40);for(let c=0;c<i.length;++c)r.length<20&&i[c]<t&&(r+=e.charAt(i[c]%62))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function hv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),c=e.charAt(r);if(i!==c)return Ix(i)===Ix(c)?Nt(i,c):Ix(i)?1:-1}return Nt(n.length,e.length)}const G3=55296,K3=57343;function Ix(n){const e=n.charCodeAt(0);return e>=G3&&e<=K3}function Vu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="__name__";class zi{constructor(e,t,r){t===void 0?t=0:t>e.length&&et(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&et(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const c=zi.compareSegments(e.get(i),t.get(i));if(c!==0)return c}return Nt(e.length,t.length)}static compareSegments(e,t){const r=zi.isNumericId(e),i=zi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?zi.extractNumericId(e).compare(zi.extractNumericId(t)):hv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sl.fromString(e.substring(4,e.length-2))}}class Bt extends zi{construct(e,t,r){return new Bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Bt(t)}static emptyPath(){return new Bt([])}}const Z3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends zi{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return Z3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bb}static keyField(){return new Zn([bb])}static fromServerFormat(e){const t=[];let r="",i=0;const c=()=>{if(r.length===0)throw new Me(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new Me(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Me(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else f==="`"?(u=!u,i++):f!=="."||u?(r+=f,i++):(c(),i++)}if(c(),u)throw new Me(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Bt.fromString(e))}static fromName(e){return new Qe(Bt.fromString(e).popFirst(5))}static empty(){return new Qe(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(n,e,t){if(!t)throw new Me(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Y3(n,e,t,r){if(e===!0&&r===!0)throw new Me(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nb(n){if(!Qe.isDocumentKey(n))throw new Me(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jb(n){if(Qe.isDocumentKey(n))throw new Me(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jj(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":et(12329,{type:typeof n})}function As(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mp(n);throw new Me(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Q3(n,e){if(e<=0)throw new Me(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ih(n,e){if(!Jj(n))throw new Me(pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new Me(pe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=-62135596800,Sb=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Sb);return new Kt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cb)throw new Me(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sb}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ih(e,Kt._jsonSchema))return new Kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:Nn("string",Kt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new Kt(0,0))}static max(){return new ot(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=-1;function X3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ot.fromTimestamp(r===1e9?new Kt(t+1,0):new Kt(t,r));return new dl(i,Qe.empty(),e)}function J3(n){return new dl(n.readTime,n.key,uh)}class dl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dl(ot.min(),Qe.empty(),uh)}static max(){return new dl(ot.max(),Qe.empty(),uh)}}function eL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Qe.comparator(n.documentKey,e.documentKey),t!==0?t:Nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==tL)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve(((r,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.reject(t)}static resolve(e){return new ve(((t,r)=>{t(e)}))}static reject(e){return new ve(((t,r)=>{r(e)}))}static waitFor(e){return new ve(((t,r)=>{let i=0,c=0,u=!1;e.forEach((f=>{++i,f.next((()=>{++c,u&&c===i&&t()}),(m=>r(m)))})),u=!0,c===i&&t()}))}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next((i=>i?ve.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,c)=>{r.push(t.call(this,i,c))})),this.waitFor(r)}static mapArray(e,t){return new ve(((r,i)=>{const c=e.length,u=new Array(c);let f=0;for(let m=0;m<c;m++){const x=m;t(e[x]).next((w=>{u[x]=w,++f,f===c&&r(u)}),(w=>i(w)))}}))}static doWhile(e,t){return new ve(((r,i)=>{const c=()=>{e()===!0?t().next((()=>{c()}),i):r()};c()}))}}function sL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nd(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=-1;function Rh(n){return n==null}function Rm(n){return n===0&&1/n==-1/0}function rL(n){return typeof n=="number"&&Number.isInteger(n)&&!Rm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="";function iL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Eb(e)),e=aL(n.get(t),e);return Eb(e)}function aL(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const c=n.charAt(i);switch(c){case"\0":t+="";break;case e2:t+="";break;default:t+=c}}return t}function Eb(n){return n+e2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function t2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yf(this.root,e,this.comparator,!0)}}class Yf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kn{constructor(e,t,r,i,c){this.key=e,this.value=t,this.color=r??Kn.RED,this.left=i??Kn.EMPTY,this.right=c??Kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,c){return new Kn(e??this.key,t??this.value,r??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const c=r(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,r),null):c===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Kn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,t,r,i,c){return this}insert(e,t,r){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=r.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class Ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new ur([])}unionWith(e){let t=new Rn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new n2("Invalid base64 string: "+c):c}})(e);return new Qn(t)}static fromUint8Array(e){const t=(function(i){let c="";for(let u=0;u<i.length;++u)c+=String.fromCharCode(i[u]);return c})(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const oL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(Pt(!!n,39018),typeof n=="string"){let e=0;const t=oL.exec(n);if(Pt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(n.seconds),nanos:pn(n.nanos)}}function pn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fl(n){return typeof n=="string"?Qn.fromBase64String(n):Qn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="server_timestamp",r2="__type__",i2="__previous_value__",a2="__local_write_time__";function xy(n){return(n?.mapValue?.fields||{})[r2]?.stringValue===s2}function gp(n){const e=n.mapValue.fields[i2];return xy(e)?gp(e):e}function dh(n){const e=hl(n.mapValue.fields[a2].timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,t,r,i,c,u,f,m,x,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=x,this.isUsingEmulator=w}}const Lm="(default)";class hh{constructor(e,t){this.projectId=e,this.database=t||Lm}static empty(){return new hh("","")}get isDefaultDatabase(){return this.database===Lm}isEqual(e){return e instanceof hh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="__type__",cL="__max__",Qf={mapValue:{}},l2="__vector__",Mm="value";function ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xy(n)?4:dL(n)?9007199254740991:uL(n)?10:11:et(28295,{value:n})}function ea(n,e){if(n===e)return!0;const t=ml(n);if(t!==ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dh(n).isEqual(dh(e));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const u=hl(i.timestampValue),f=hl(c.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,c){return fl(i.bytesValue).isEqual(fl(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,c){return pn(i.geoPointValue.latitude)===pn(c.geoPointValue.latitude)&&pn(i.geoPointValue.longitude)===pn(c.geoPointValue.longitude)})(n,e);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return pn(i.integerValue)===pn(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const u=pn(i.doubleValue),f=pn(c.doubleValue);return u===f?Rm(u)===Rm(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Vu(n.arrayValue.values||[],e.arrayValue.values||[],ea);case 10:case 11:return(function(i,c){const u=i.mapValue.fields||{},f=c.mapValue.fields||{};if(Tb(u)!==Tb(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!ea(u[m],f[m])))return!1;return!0})(n,e);default:return et(52216,{left:n})}}function fh(n,e){return(n.values||[]).find((t=>ea(t,e)))!==void 0}function Bu(n,e){if(n===e)return 0;const t=ml(n),r=ml(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return(function(c,u){const f=pn(c.integerValue||c.doubleValue),m=pn(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return kb(n.timestampValue,e.timestampValue);case 4:return kb(dh(n),dh(e));case 5:return hv(n.stringValue,e.stringValue);case 6:return(function(c,u){const f=fl(c),m=fl(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(c,u){const f=c.split("/"),m=u.split("/");for(let x=0;x<f.length&&x<m.length;x++){const w=Nt(f[x],m[x]);if(w!==0)return w}return Nt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,u){const f=Nt(pn(c.latitude),pn(u.latitude));return f!==0?f:Nt(pn(c.longitude),pn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Pb(n.arrayValue,e.arrayValue);case 10:return(function(c,u){const f=c.fields||{},m=u.fields||{},x=f[Mm]?.arrayValue,w=m[Mm]?.arrayValue,y=Nt(x?.values?.length||0,w?.values?.length||0);return y!==0?y:Pb(x,w)})(n.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Qf.mapValue&&u===Qf.mapValue)return 0;if(c===Qf.mapValue)return 1;if(u===Qf.mapValue)return-1;const f=c.fields||{},m=Object.keys(f),x=u.fields||{},w=Object.keys(x);m.sort(),w.sort();for(let y=0;y<m.length&&y<w.length;++y){const j=hv(m[y],w[y]);if(j!==0)return j;const S=Bu(f[m[y]],x[w[y]]);if(S!==0)return S}return Nt(m.length,w.length)})(n.mapValue,e.mapValue);default:throw et(23264,{he:t})}}function kb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Nt(n,e);const t=hl(n),r=hl(e),i=Nt(t.seconds,r.seconds);return i!==0?i:Nt(t.nanos,r.nanos)}function Pb(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const c=Bu(t[i],r[i]);if(c)return c}return Nt(t.length,r.length)}function zu(n){return fv(n)}function fv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=hl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Qe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const c of t.values||[])i?i=!1:r+=",",r+=fv(c);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",c=!0;for(const u of r)c?c=!1:i+=",",i+=`${u}:${fv(t.fields[u])}`;return i+"}"})(n.mapValue):et(61005,{value:n})}function dm(n){switch(ml(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gp(n);return e?16+dm(e):16;case 5:return 2*n.stringValue.length;case 6:return fl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,c)=>i+dm(c)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Nl(r.fields,((c,u)=>{i+=c.length+dm(u)})),i})(n.mapValue);default:throw et(13486,{value:n})}}function Ib(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mv(n){return!!n&&"integerValue"in n}function vy(n){return!!n&&"arrayValue"in n}function Rb(n){return!!n&&"nullValue"in n}function Lb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hm(n){return!!n&&"mapValue"in n}function uL(n){return(n?.mapValue?.fields||{})[o2]?.stringValue===l2}function Xd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Nl(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Xd(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xd(n.arrayValue.values[t]);return e}return{...n}}function dL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.value=e}static empty(){return new Ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xd(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=Xd(u):i.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,i)}delete(e){const t=this.field(e.popLast());hm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nl(t,((i,c)=>e[i]=c));for(const i of r)delete e[i]}clone(){return new Ts(Xd(this.value))}}function c2(n){const e=[];return Nl(n.fields,((t,r)=>{const i=new Zn([t]);if(hm(r)){const c=c2(r.mapValue).fields;if(c.length===0)e.push(i);else for(const u of c)e.push(i.child(u))}else e.push(i)})),new ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,r,i,c,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=c,this.data=u,this.documentState=f}static newInvalidDocument(e){return new zn(e,0,ot.min(),ot.min(),ot.min(),Ts.empty(),0)}static newFoundDocument(e,t,r,i){return new zn(e,1,t,ot.min(),r,i,0)}static newNoDocument(e,t){return new zn(e,2,t,ot.min(),ot.min(),Ts.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,ot.min(),ot.min(),Ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t){this.position=e,this.inclusive=t}}function Mb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const c=e[i],u=n.position[i];if(c.field.isKeyField()?r=Qe.comparator(Qe.fromName(u.referenceValue),t.key):r=Bu(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Db(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ea(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function hL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{}class bn extends u2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mL(e,t,r):t==="array-contains"?new xL(e,r):t==="in"?new vL(e,r):t==="not-in"?new yL(e,r):t==="array-contains-any"?new wL(e,r):new bn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new pL(e,r):new gL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bu(t,this.value)):t!==null&&ml(this.value)===ml(t)&&this.matchesComparison(Bu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends u2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return d2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d2(n){return n.op==="and"}function h2(n){return fL(n)&&d2(n)}function fL(n){for(const e of n.filters)if(e instanceof hi)return!1;return!0}function pv(n){if(n instanceof bn)return n.field.canonicalString()+n.op.toString()+zu(n.value);if(h2(n))return n.filters.map((e=>pv(e))).join(",");{const e=n.filters.map((t=>pv(t))).join(",");return`${n.op}(${e})`}}function f2(n,e){return n instanceof bn?(function(r,i){return i instanceof bn&&r.op===i.op&&r.field.isEqual(i.field)&&ea(r.value,i.value)})(n,e):n instanceof hi?(function(r,i){return i instanceof hi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((c,u,f)=>c&&f2(u,i.filters[f])),!0):!1})(n,e):void et(19439)}function m2(n){return n instanceof bn?(function(t){return`${t.field.canonicalString()} ${t.op} ${zu(t.value)}`})(n):n instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(m2).join(" ,")+"}"})(n):"Filter"}class mL extends bn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class pL extends bn{constructor(e,t){super(e,"in",t),this.keys=p2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gL extends bn{constructor(e,t){super(e,"not-in",t),this.keys=p2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function p2(n,e){return(e.arrayValue?.values||[]).map((t=>Qe.fromName(t.referenceValue)))}class xL extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vy(t)&&fh(t.arrayValue,this.value)}}class vL extends bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fh(this.value.arrayValue,t)}}class yL extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fh(this.value.arrayValue,t)}}class wL extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>fh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,t=null,r=[],i=[],c=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=c,this.startAt=u,this.endAt=f,this.Te=null}}function Ob(n,e=null,t=[],r=[],i=null,c=null,u=null){return new _L(n,e,t,r,i,c,u)}function yy(n){const e=ht(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>pv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Rh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>zu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>zu(r))).join(",")),e.Te=t}return e.Te}function wy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!f2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Db(n.startAt,e.startAt)&&Db(n.endAt,e.endAt)}function gv(n){return Qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t=null,r=[],i=[],c=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bL(n,e,t,r,i,c,u,f){return new sd(n,e,t,r,i,c,u,f)}function xp(n){return new sd(n)}function Fb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function g2(n){return n.collectionGroup!==null}function Jd(n){const e=ht(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Rn(Zn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new mh(c,r))})),t.has(Zn.keyField().canonicalString())||e.Ie.push(new mh(Zn.keyField(),r))}return e.Ie}function Gi(n){const e=ht(n);return e.Ee||(e.Ee=NL(e,Jd(n))),e.Ee}function NL(n,e){if(n.limitType==="F")return Ob(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new mh(i.field,c)}));const t=n.endAt?new Dm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dm(n.startAt.position,n.startAt.inclusive):null;return Ob(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xv(n,e){const t=n.filters.concat([e]);return new sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Om(n,e,t){return new sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vp(n,e){return wy(Gi(n),Gi(e))&&n.limitType===e.limitType}function x2(n){return`${yy(Gi(n))}|lt:${n.limitType}`}function vu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>m2(i))).join(", ")}]`),Rh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>zu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>zu(i))).join(",")),`Target(${r})`})(Gi(n))}; limitType=${n.limitType})`}function yp(n,e){return e.isFoundDocument()&&(function(r,i){const c=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Qe.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(n,e)&&(function(r,i){for(const c of Jd(r))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const c of r.filters)if(!c.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(u,f,m){const x=Mb(u,f,m);return u.inclusive?x<=0:x<0})(r.startAt,Jd(r),i)||r.endAt&&!(function(u,f,m){const x=Mb(u,f,m);return u.inclusive?x>=0:x>0})(r.endAt,Jd(r),i))})(n,e)}function jL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v2(n){return(e,t)=>{let r=!1;for(const i of Jd(n)){const c=CL(i,e,t);if(c!==0)return c;r=r||i.field.isKeyField()}return 0}}function CL(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):(function(c,u,f){const m=u.data.field(c),x=f.data.field(c);return m!==null&&x!==null?Bu(m,x):et(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,c]of r)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nl(this.inner,((t,r)=>{for(const[i,c]of r)e(i,c)}))}isEmpty(){return t2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=new un(Qe.comparator);function Ya(){return SL}const y2=new un(Qe.comparator);function $d(...n){let e=y2;for(const t of n)e=e.insert(t.key,t);return e}function w2(n){let e=y2;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ac(){return eh()}function _2(){return eh()}function eh(){return new jc((n=>n.toString()),((n,e)=>n.isEqual(e)))}const EL=new un(Qe.comparator),TL=new Rn(Qe.comparator);function Ct(...n){let e=TL;for(const t of n)e=e.add(t);return e}const AL=new Rn(Nt);function kL(){return AL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rm(e)?"-0":e}}function b2(n){return{integerValue:""+n}}function N2(n,e){return rL(e)?b2(e):_y(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this._=void 0}}function PL(n,e,t){return n instanceof ph?(function(i,c){const u={fields:{[r2]:{stringValue:s2},[a2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&xy(c)&&(c=gp(c)),c&&(u.fields[i2]=c),{mapValue:u}})(t,e):n instanceof Uu?C2(n,e):n instanceof $u?S2(n,e):(function(i,c){const u=j2(i,c),f=Vb(u)+Vb(i.Ae);return mv(u)&&mv(i.Ae)?b2(f):_y(i.serializer,f)})(n,e)}function IL(n,e,t){return n instanceof Uu?C2(n,e):n instanceof $u?S2(n,e):t}function j2(n,e){return n instanceof gh?(function(r){return mv(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class ph extends wp{}class Uu extends wp{constructor(e){super(),this.elements=e}}function C2(n,e){const t=E2(e);for(const r of n.elements)t.some((i=>ea(i,r)))||t.push(r);return{arrayValue:{values:t}}}class $u extends wp{constructor(e){super(),this.elements=e}}function S2(n,e){let t=E2(e);for(const r of n.elements)t=t.filter((i=>!ea(i,r)));return{arrayValue:{values:t}}}class gh extends wp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vb(n){return pn(n.integerValue||n.doubleValue)}function E2(n){return vy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.field=e,this.transform=t}}function RL(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Uu&&i instanceof Uu||r instanceof $u&&i instanceof $u?Vu(r.elements,i.elements,ea):r instanceof gh&&i instanceof gh?ea(r.Ae,i.Ae):r instanceof ph&&i instanceof ph})(n.transform,e.transform)}class LL{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bp{}function T2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Np(n.key,Yn.none()):new Lh(n.key,n.data,Yn.none());{const t=n.data,r=Ts.empty();let i=new Rn(Zn.comparator);for(let c of e.fields)if(!i.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),i=i.add(c)}return new jl(n.key,r,new ur(i.toArray()),Yn.none())}}function ML(n,e,t){n instanceof Lh?(function(i,c,u){const f=i.value.clone(),m=zb(i.fieldTransforms,c,u.transformResults);f.setAll(m),c.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof jl?(function(i,c,u){if(!fm(i.precondition,c))return void c.convertToUnknownDocument(u.version);const f=zb(i.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(A2(i)),m.setAll(f),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(i,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function th(n,e,t,r){return n instanceof Lh?(function(c,u,f,m){if(!fm(c.precondition,u))return f;const x=c.value.clone(),w=Ub(c.fieldTransforms,m,u);return x.setAll(w),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),null})(n,e,t,r):n instanceof jl?(function(c,u,f,m){if(!fm(c.precondition,u))return f;const x=Ub(c.fieldTransforms,m,u),w=u.data;return w.setAll(A2(c)),w.setAll(x),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(c,u,f){return fm(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function DL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),c=j2(r.transform,i||null);c!=null&&(t===null&&(t=Ts.empty()),t.set(r.field,c))}return t||null}function Bb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vu(r,i,((c,u)=>RL(c,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lh extends bp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jl extends bp{constructor(e,t,r,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function A2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function zb(n,e,t){const r=new Map;Pt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const c=n[i],u=c.transform,f=e.data.field(c.field);r.set(c.field,IL(u,f,t[i]))}return r}function Ub(n,e,t){const r=new Map;for(const i of n){const c=i.transform,u=t.data.field(i.field);r.set(i.field,PL(c,u,e))}return r}class Np extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k2 extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&ML(c,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=th(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=th(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_2();return this.mutations.forEach((i=>{const c=e.get(i.key),u=c.overlayedDocument;let f=this.applyToLocalView(u,c.mutatedFields);f=t.has(i.key)?null:f;const m=T2(u,f);m!==null&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(ot.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ct())}isEqual(e){return this.batchId===e.batchId&&Vu(this.mutations,e.mutations,((t,r)=>Bb(t,r)))&&Vu(this.baseMutations,e.baseMutations,((t,r)=>Bb(t,r)))}}class by{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return EL})();const c=e.mutations;for(let u=0;u<c.length;u++)i=i.insert(c[u].key,r[u].version);return new by(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FL=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,kt;function P2(n){switch(n){case pe.OK:return et(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return et(15467,{code:n})}}function I2(n){if(n===void 0)return Za("GRPC error has no .code"),pe.UNKNOWN;switch(n){case _n.OK:return pe.OK;case _n.CANCELLED:return pe.CANCELLED;case _n.UNKNOWN:return pe.UNKNOWN;case _n.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case _n.INTERNAL:return pe.INTERNAL;case _n.UNAVAILABLE:return pe.UNAVAILABLE;case _n.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case _n.NOT_FOUND:return pe.NOT_FOUND;case _n.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case _n.ABORTED:return pe.ABORTED;case _n.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case _n.DATA_LOSS:return pe.DATA_LOSS;default:return et(39323,{code:n})}}(kt=_n||(_n={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=new sl([4294967295,4294967295],0);function $b(n){const e=BL().encode(n),t=new Hj;return t.update(e),new Uint8Array(t.digest())}function Hb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new sl([t,r],0),new sl([i,c],0)]}class Ny{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hd(`Invalid padding: ${t}`);if(r<0)throw new Hd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=sl.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(sl.fromNumber(r)));return i.compare(zL)===1&&(i=new sl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$b(e),[r,i]=Hb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,i,c);if(!this.we(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Ny(c,i,t);return r.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=$b(e),[r,i]=Hb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,i,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t,r,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jp(ot.min(),i,new un(Nt),Ya(),Ct())}}class Mh{constructor(e,t,r,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mh(r,t,Ct(),Ct(),Ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class R2{constructor(e,t){this.targetId=e,this.Ce=t}}class L2{constructor(e,t,r=Qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Wb{constructor(){this.ve=0,this.Fe=qb(),this.Me=Qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ct(),t=Ct(),r=Ct();return this.Fe.forEach(((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et(38017,{changeType:c})}})),new Mh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=qb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ya(),this.Je=Xf(),this.He=Xf(),this.Ye=new un(Nt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:et(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const c=i.target;if(gv(c))if(r===0){const u=new Qe(c.path);this.et(t,u,zn.newNoDocument(u,ot.min()))}else Pt(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const x=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:c=0}=t;let u,f;try{u=fl(r).toUint8Array()}catch(m){if(m instanceof n2)return Fu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Ny(u,i,c)}catch(m){return Fu(m instanceof Hd?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((c=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const f=this.ot(u);if(f){if(c.current&&gv(f.target)){const m=new Qe(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,zn.newNoDocument(m,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let r=Ct();this.He.forEach(((c,u)=>{let f=!0;u.forEachWhile((m=>{const x=this.ot(m);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const i=new jp(e,t,this.Ye,this.je,r);return this.je=Ya(),this.Je=Xf(),this.He=Xf(),this.Ye=new un(Nt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Wb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rn(Nt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rn(Nt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xf(){return new un(Qe.comparator)}function qb(){return new un(Qe.comparator)}const $L={asc:"ASCENDING",desc:"DESCENDING"},HL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WL={and:"AND",or:"OR"};class qL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vv(n,e){return n.useProto3Json||Rh(e)?e:{value:e}}function Fm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GL(n,e){return Fm(n,e.toTimestamp())}function dr(n){return Pt(!!n,49232),ot.fromTimestamp((function(t){const r=hl(t);return new Kt(r.seconds,r.nanos)})(n))}function jy(n,e){return yv(n,e).canonicalString()}function yv(n,e){const t=(function(i){return new Bt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function D2(n){const e=Bt.fromString(n);return Pt(U2(e),10190,{key:e.toString()}),e}function Vm(n,e){return jy(n.databaseId,e.path)}function nh(n,e){const t=D2(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(F2(t))}function O2(n,e){return jy(n.databaseId,e)}function KL(n){const e=D2(n);return e.length===4?Bt.emptyPath():F2(e)}function wv(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F2(n){return Pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gb(n,e,t){return{name:Vm(n,e),fields:t.value.mapValue.fields}}function ZL(n,e){return"found"in e?(function(r,i){Pt(!!i.found,43571),i.found.name,i.found.updateTime;const c=nh(r,i.found.name),u=dr(i.found.updateTime),f=i.found.createTime?dr(i.found.createTime):ot.min(),m=new Ts({mapValue:{fields:i.found.fields}});return zn.newFoundDocument(c,u,f,m)})(n,e):"missing"in e?(function(r,i){Pt(!!i.missing,3894),Pt(!!i.readTime,22933);const c=nh(r,i.missing),u=dr(i.readTime);return zn.newNoDocument(c,u)})(n,e):et(7234,{result:e})}function YL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:et(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=(function(x,w){return x.useProto3Json?(Pt(w===void 0||typeof w=="string",58123),Qn.fromBase64String(w||"")):(Pt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Qn.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(x){const w=x.code===void 0?pe.UNKNOWN:I2(x.code);return new Me(w,x.message||"")})(u);t=new L2(r,i,c,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=nh(n,r.document.name),c=dr(r.document.updateTime),u=r.document.createTime?dr(r.document.createTime):ot.min(),f=new Ts({mapValue:{fields:r.document.fields}}),m=zn.newFoundDocument(i,c,u,f),x=r.targetIds||[],w=r.removedTargetIds||[];t=new mm(x,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=nh(n,r.document),c=r.readTime?dr(r.readTime):ot.min(),u=zn.newNoDocument(i,c),f=r.removedTargetIds||[];t=new mm([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=nh(n,r.document),c=r.removedTargetIds||[];t=new mm([],c,i,null)}else{if(!("filter"in e))return et(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:c}=r,u=new VL(i,c),f=r.targetId;t=new R2(f,u)}}return t}function V2(n,e){let t;if(e instanceof Lh)t={update:Gb(n,e.key,e.value)};else if(e instanceof Np)t={delete:Vm(n,e.key)};else if(e instanceof jl)t={update:Gb(n,e.key,e.data),updateMask:iM(e.fieldMask)};else{if(!(e instanceof k2))return et(16599,{Vt:e.type});t={verify:Vm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const f=u.transform;if(f instanceof ph)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof $u)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gh)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw et(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:GL(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:et(27497)})(n,e.precondition)),t}function QL(n,e){return n&&n.length>0?(Pt(e!==void 0,14353),n.map((t=>(function(i,c){let u=i.updateTime?dr(i.updateTime):dr(c);return u.isEqual(ot.min())&&(u=dr(c)),new LL(u,i.transformResults||[])})(t,e)))):[]}function XL(n,e){return{documents:[O2(n,e.path)]}}function JL(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=O2(n,i);const c=(function(x){if(x.length!==0)return z2(hi.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(x){if(x.length!==0)return x.map((w=>(function(j){return{field:yu(j.field),direction:nM(j.dir)}})(w)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=vv(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:i}}function eM(n){let e=KL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(r===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(y){const j=B2(y);return j instanceof hi&&h2(j)?j.getFilters():[j]})(t.where));let u=[];t.orderBy&&(u=(function(y){return y.map((j=>(function(C){return new mh(wu(C.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(j)))})(t.orderBy));let f=null;t.limit&&(f=(function(y){let j;return j=typeof y=="object"?y.value:y,Rh(j)?null:j})(t.limit));let m=null;t.startAt&&(m=(function(y){const j=!!y.before,S=y.values||[];return new Dm(S,j)})(t.startAt));let x=null;return t.endAt&&(x=(function(y){const j=!y.before,S=y.values||[];return new Dm(S,j)})(t.endAt)),bL(e,i,u,c,f,"F",m,x)}function tM(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function B2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wu(t.unaryFilter.field);return bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wu(t.unaryFilter.field);return bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=wu(t.unaryFilter.field);return bn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wu(t.unaryFilter.field);return bn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bn.create(wu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((r=>B2(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return et(1026)}})(t.compositeFilter.op))})(n):et(30097,{filter:n})}function nM(n){return $L[n]}function sM(n){return HL[n]}function rM(n){return WL[n]}function yu(n){return{fieldPath:n.canonicalString()}}function wu(n){return Zn.fromServerFormat(n.fieldPath)}function z2(n){return n instanceof bn?(function(t){if(t.op==="=="){if(Lb(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NAN"}};if(Rb(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lb(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NOT_NAN"}};if(Rb(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yu(t.field),op:sM(t.op),value:t.value}}})(n):n instanceof hi?(function(t){const r=t.getFilters().map((i=>z2(i)));return r.length===1?r[0]:{compositeFilter:{op:rM(t.op),filters:r}}})(n):et(54877,{filter:n})}function iM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function U2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t,r,i,c=ot.min(),u=ot.min(),f=Qn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.yt=e}}function oM(n){const e=eM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Om(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.Cn=new cM}addToCollectionParentIndex(e,t){return this.Cn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(dl.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(dl.min())}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class cM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn(Bt.comparator),c=!i.has(r);return this.index[t]=i.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$2=41943040;class Ws{static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws($2,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hu(0)}static cr(){return new Hu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="LruGarbageCollector",uM=1048576;function Yb([n,e],[t,r]){const i=Nt(n,t);return i===0?Nt(e,r):i}class dM{constructor(e){this.Ir=e,this.buffer=new Rn(Yb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Yb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(Zb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nd(t)?Ue(Zb,"Ignoring IndexedDB error during garbage collection: ",t):await td(t)}await this.Vr(3e5)}))}}class fM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ve.resolve(pp.ce);const r=new dM(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Kb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,c,u,f,m,x;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,u=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(r=y,f=Date.now(),this.removeTargets(e,r,t)))).next((y=>(c=y,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(x=Date.now(),xu()<=bt.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-w}ms
	Determined least recently used ${i} in `+(f-u)+`ms
	Removed ${c} targets in `+(m-f)+`ms
	Removed ${y} documents in `+(x-m)+`ms
Total Duration: ${x-w}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:y}))))}}function mM(n,e){return new fM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.changes=new jc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&th(r.mutation,i,ur.empty(),Kt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ct()){const i=ac();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((c=>{let u=$d();return c.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=ac();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ct())))}populateOverlays(e,t,r){const i=[];return r.forEach((c=>{t.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(e,i).next((c=>{c.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,r,i){let c=Ya();const u=eh(),f=(function(){return eh()})();return t.forEach(((m,x)=>{const w=r.get(x.key);i.has(x.key)&&(w===void 0||w.mutation instanceof jl)?c=c.insert(x.key,x):w!==void 0?(u.set(x.key,w.mutation.getFieldMask()),th(w.mutation,x,w.mutation.getFieldMask(),Kt.now())):u.set(x.key,ur.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((x,w)=>u.set(x,w))),t.forEach(((x,w)=>f.set(x,new gM(w,u.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=eh();let i=new un(((u,f)=>u-f)),c=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const x=t.get(m);if(x===null)return;let w=r.get(m)||ur.empty();w=f.applyToLocalView(x,w),r.set(m,w);const y=(i.get(f.batchId)||Ct()).add(m);i=i.insert(f.batchId,y)}))})).next((()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),x=m.key,w=m.value,y=_2();w.forEach((j=>{if(!c.has(j)){const S=T2(t.get(j),r.get(j));S!==null&&y.set(j,S),c=c.add(j)}})),u.push(this.documentOverlayCache.saveOverlays(e,x,y))}return ve.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(u){return Qe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((c=>{const u=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-c.size):ve.resolve(ac());let f=uh,m=c;return u.next((x=>ve.forEach(x,((w,y)=>(f<y.largestBatchId&&(f=y.largestBatchId),c.get(w)?ve.resolve():this.remoteDocumentCache.getEntry(e,w).next((j=>{m=m.insert(w,j)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,m,x,Ct()))).next((w=>({batchId:f,changes:w2(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next((r=>{let i=$d();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const c=t.collectionGroup;let u=$d();return this.indexManager.getCollectionParents(e,c).next((f=>ve.forEach(f,(m=>{const x=(function(y,j){return new sd(j,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,r,i).next((w=>{w.forEach(((y,j)=>{u=u.insert(y,j)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,i)))).next((u=>{c.forEach(((m,x)=>{const w=x.getKey();u.get(w)===null&&(u=u.insert(w,zn.newInvalidDocument(w)))}));let f=$d();return u.forEach(((m,x)=>{const w=c.get(m);w!==void 0&&th(w.mutation,x,ur.empty(),Kt.now()),yp(t,x)&&(f=f.insert(m,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ve.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}})(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:oM(i.bundledQuery),readTime:dr(i.readTime)}})(t)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.overlays=new un(Qe.comparator),this.qr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ac();return ve.forEach(t,(i=>this.getOverlay(e,i).next((c=>{c!==null&&r.set(i,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,c)=>{this.St(e,t,c)})),ve.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const i=ac(),c=t.length+1,u=new Qe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,x=m.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ve.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let c=new un(((x,w)=>x-w));const u=this.overlays.getIterator();for(;u.hasNext();){const x=u.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>r){let w=c.get(x.largestBatchId);w===null&&(w=ac(),c=c.insert(x.largestBatchId,w)),w.set(x.getKey(),x)}}const f=ac(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((x,w)=>f.set(x,w))),!(f.size()>=i)););return ve.resolve(f)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new FL(t,r));let c=this.qr.get(t);c===void 0&&(c=Ct(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.Qr=new Rn(Bn.$r),this.Ur=new Rn(Bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Bn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Bn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Qe(new Bt([])),r=new Bn(t,e),i=new Bn(t,e+1),c=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Qe(new Bt([])),r=new Bn(t,e),i=new Bn(t,e+1);let c=Ct();return this.Ur.forEachInRange([r,i],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new Bn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Qe.comparator(e.key,t.key)||Nt(e.Yr,t.Yr)}static Kr(e,t){return Nt(e.Yr,t.Yr)||Qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rn(Bn.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new OL(c,t,r,i);this.mutationQueue.push(u);for(const f of i)this.Zr=this.Zr.add(new Bn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ve.resolve(u)}lookupMutationBatch(e,t){return ve.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),c=i<0?0:i;return ve.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?gy:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bn(t,0),i=new Bn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,i],(u=>{const f=this.Xr(u.Yr);c.push(f)})),ve.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Nt);return t.forEach((i=>{const c=new Bn(i,0),u=new Bn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(f=>{r=r.add(f.Yr)}))})),ve.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let c=r;Qe.isDocumentKey(c)||(c=c.child(""));const u=new Bn(new Qe(c),0);let f=new Rn(Nt);return this.Zr.forEachWhile((m=>{const x=m.key.path;return!!r.isPrefixOf(x)&&(x.length===i&&(f=f.add(m.Yr)),!0)}),u),ve.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Pt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ve.forEach(t.mutations,(i=>{const c=new Bn(i.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Bn(t,0),i=this.Zr.firstAfterOrEqual(r);return ve.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.ri=e,this.docs=(function(){return new un(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),c=i?i.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Ya();return t.forEach((i=>{const c=this.docs.get(i);r=r.insert(i,c?c.document.mutableCopy():zn.newInvalidDocument(i))})),ve.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let c=Ya();const u=t.path,f=new Qe(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:x,value:{document:w}}=m.getNext();if(!u.isPrefixOf(x.path))break;x.path.length>u.length+1||eL(J3(w),r)<=0||(i.has(w.key)||yp(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return ve.resolve(c)}getAllFromCollectionGroup(e,t,r,i){et(9500)}ii(e,t){return ve.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new NM(this)}getSize(e){return ve.resolve(this.size)}}class NM extends pM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ve.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.persistence=e,this.si=new jc((t=>yy(t)),wy),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.oi=0,this._i=new Cy,this.targetCount=0,this.ai=Hu.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ve.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Hu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Pr(t),ve.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let i=0;const c=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),ve.waitFor(c).next((()=>i))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach((u=>{c.push(i.markPotentiallyOrphaned(e,u))})),ve.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,t){this.ui={},this.overlays={},this.ci=new pp(0),this.li=!1,this.li=!0,this.hi=new wM,this.referenceDelegate=e(this),this.Pi=new jM(this),this.indexManager=new lM,this.remoteDocumentCache=(function(i){return new bM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new aM(t),this.Ii=new vM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new _M(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new CM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((c=>this.referenceDelegate.di(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}Ai(e,t){return ve.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class CM extends nL{constructor(e){super(),this.currentSequenceNumber=e}}class Sy{constructor(e){this.persistence=e,this.Ri=new Cy,this.Vi=null}static mi(e){return new Sy(e)}get fi(){if(this.Vi)return this.Vi;throw et(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(r=>{const i=Qe.fromPath(r);return this.gi(e,i).next((c=>{c||t.removeEntry(i,ot.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ve.or([()=>ve.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bm{constructor(e,t){this.persistence=e,this.pi=new jc((r=>iL(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=mM(this,t)}static mi(e,t){return new Bm(e,t)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ve.forEach(this.pi,((r,i)=>this.br(e,r,i).next((c=>c?ve.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,t).next((f=>{f||(r++,c.removeEntry(u,ot.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ve.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dm(e.data.value)),t}br(e,t,r){return ve.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ve.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ct(),i=Ct();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Ey(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rR()?8:sL(ms())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,i,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new SM;return this.Ss(e,t,u).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>c.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(xu()<=bt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(xu()<=bt.DEBUG&&Ue("QueryEngine","Query:",vu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(xu()<=bt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):ve.resolve())}ys(e,t){if(Fb(t))return ve.resolve(null);let r=Gi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Om(t,null,"F"),r=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=Ct(...c);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const x=this.Ds(t,f);return this.Cs(t,x,u,m.readTime)?this.ys(e,Om(t,null,"F")):this.vs(e,x,t,m)}))))})))))}ws(e,t,r,i){return Fb(t)||i.isEqual(ot.min())?ve.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,r,i)?ve.resolve(null):(xu()<=bt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vu(t)),this.vs(e,u,t,X3(i,uh)).next((f=>f)))}))}Ds(e,t){let r=new Rn(v2(e));return t.forEach(((i,c)=>{yp(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}Ss(e,t,r){return xu()<=bt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",vu(t)),this.ps.getDocumentsMatchingQuery(e,t,dl.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LocalStore",TM=3e8;class AM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new un(Nt),this.xs=new jc((c=>yy(c)),wy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kM(n,e,t,r){return new AM(n,e,t,r)}async function W2(n,e){const t=ht(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((c=>(i=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],f=[];let m=Ct();for(const x of i){u.push(x.batchId);for(const w of x.mutations)m=m.add(w.key)}for(const x of c){f.push(x.batchId);for(const w of x.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(r,m).next((x=>({Ls:x,removedBatchIds:u,addedBatchIds:f})))}))}))}function PM(n,e){const t=ht(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,x,w){const y=x.batch,j=y.keys();let S=ve.resolve();return j.forEach((C=>{S=S.next((()=>w.getEntry(m,C))).next((A=>{const M=x.docVersions.get(C);Pt(M!==null,48541),A.version.compareTo(M)<0&&(y.applyToRemoteDocument(A,x),A.isValidDocument()&&(A.setReadTime(x.commitVersion),w.addEntry(A)))}))})),S.next((()=>f.mutationQueue.removeMutationBatch(m,y)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=Ct();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(m=m.add(f.batch.mutations[x].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function q2(n){const e=ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function IM(n,e){const t=ht(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const f=[];e.targetChanges.forEach(((w,y)=>{const j=i.get(y);if(!j)return;f.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,y))));let S=j.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Qn.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):w.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(w.resumeToken,r)),i=i.insert(y,S),(function(A,M,R){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=TM?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(j,S,w)&&f.push(t.Pi.updateTargetData(c,S))}));let m=Ya(),x=Ct();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),f.push(RM(c,u,e.documentUpdates).next((w=>{m=w.ks,x=w.qs}))),!r.isEqual(ot.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((y=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));f.push(w)}return ve.waitFor(f).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,m,x))).next((()=>m))})).then((c=>(t.Ms=i,c)))}function RM(n,e,t){let r=Ct(),i=Ct();return t.forEach((c=>r=r.add(c))),e.getEntries(n,r).next((c=>{let u=Ya();return t.forEach(((f,m)=>{const x=c.get(f);m.isFoundDocument()!==x.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(ot.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!x.isValidDocument()||m.version.compareTo(x.version)>0||m.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Ue(Ty,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",m.version)})),{ks:u,qs:i}}))}function LM(n,e){const t=ht(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=gy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function MM(n,e){const t=ht(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((c=>c?(i=c,ve.resolve(i)):t.Pi.allocateTargetId(r).next((u=>(i=new Qo(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function _v(n,e,t){const r=ht(n),i=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!nd(u))throw u;Ue(Ty,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Qb(n,e,t){const r=ht(n);let i=ot.min(),c=Ct();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,x,w){const y=ht(m),j=y.xs.get(w);return j!==void 0?ve.resolve(y.Ms.get(j)):y.Pi.getTargetData(x,w)})(r,u,Gi(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{c=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?i:ot.min(),t?c:Ct()))).next((f=>(DM(r,jL(e),f),{documents:f,Qs:c})))))}function DM(n,e,t){let r=n.Os.get(e)||ot.min();t.forEach(((i,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),n.Os.set(e,r)}class Xb{constructor(){this.activeTargetIds=kL()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OM{constructor(){this.Mo=new Xb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="ConnectivityMonitor";class eN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(Jb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(Jb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=null;function bv(){return Jf===null?Jf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jf++,"0x"+Jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="RestConnection",VM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Lm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,c){const u=bv(),f=this.zo(e,t.toUriEncodedString());Ue(Rx,`Sending RPC '${e}' ${u}:`,f,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,c);const{host:x}=new URL(f),w=Xu(x);return this.Jo(e,f,m,r,w).then((y=>(Ue(Rx,`Received RPC '${e}' ${u}: `,y),y)),(y=>{throw Fu(Rx,`RPC '${e}' ${u} failed with error: `,y,"url: ",f,"request:",r),y}))}Ho(e,t,r,i,c,u){return this.Go(e,t,r,i,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ed})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,c)=>e[c]=i)),r&&r.headers.forEach(((i,c)=>e[c]=i))}zo(e,t){const r=VM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="WebChannelConnection";class UM extends BM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,c){const u=bv();return new Promise(((f,m)=>{const x=new Wj;x.setWithCredentials(!0),x.listenOnce(qj.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case um.NO_ERROR:const y=x.getResponseJson();Ue(cs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),f(y);break;case um.TIMEOUT:Ue(cs,`RPC '${e}' ${u} timed out`),m(new Me(pe.DEADLINE_EXCEEDED,"Request time out"));break;case um.HTTP_ERROR:const j=x.getStatus();if(Ue(cs,`RPC '${e}' ${u} failed with status:`,j,"response text:",x.getResponseText()),j>0){let S=x.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S?.error;if(C&&C.status&&C.message){const A=(function(R){const z=R.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(z)>=0?z:pe.UNKNOWN})(C.status);m(new Me(A,C.message))}else m(new Me(pe.UNKNOWN,"Server responded with status "+x.getStatus()))}else m(new Me(pe.UNAVAILABLE,"Connection failed."));break;default:et(9055,{l_:e,streamId:u,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ue(cs,`RPC '${e}' ${u} completed.`)}}));const w=JSON.stringify(i);Ue(cs,`RPC '${e}' ${u} sending request:`,i),x.send(t,"POST",w,r,15)}))}T_(e,t,r){const i=bv(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Zj(),f=Kj(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(m.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=c.join("");Ue(cs,`Creating RPC '${e}' stream ${i}: ${w}`,m);const y=u.createWebChannel(w,m);this.I_(y);let j=!1,S=!1;const C=new zM({Yo:M=>{S?Ue(cs,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(j||(Ue(cs,`Opening RPC '${e}' stream ${i} transport.`),y.open(),j=!0),Ue(cs,`RPC '${e}' stream ${i} sending:`,M),y.send(M))},Zo:()=>y.close()}),A=(M,R,z)=>{M.listen(R,(W=>{try{z(W)}catch(G){setTimeout((()=>{throw G}),0)}}))};return A(y,Ud.EventType.OPEN,(()=>{S||(Ue(cs,`RPC '${e}' stream ${i} transport opened.`),C.o_())})),A(y,Ud.EventType.CLOSE,(()=>{S||(S=!0,Ue(cs,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(y))})),A(y,Ud.EventType.ERROR,(M=>{S||(S=!0,Fu(cs,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),C.a_(new Me(pe.UNAVAILABLE,"The operation could not be completed")))})),A(y,Ud.EventType.MESSAGE,(M=>{if(!S){const R=M.data[0];Pt(!!R,16349);const z=R,W=z?.error||z[0]?.error;if(W){Ue(cs,`RPC '${e}' stream ${i} received error:`,W);const G=W.status;let K=(function(P){const V=_n[P];if(V!==void 0)return I2(V)})(G),ee=W.message;K===void 0&&(K=pe.INTERNAL,ee="Unknown error status: "+G+" with message "+W.message),S=!0,C.a_(new Me(K,ee)),y.close()}else Ue(cs,`RPC '${e}' stream ${i} received:`,R),C.u_(R)}})),A(f,Gj.STAT_EVENT,(M=>{M.stat===dv.PROXY?Ue(cs,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===dv.NOPROXY&&Ue(cs,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Lx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n){return new qL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,r=1e3,i=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="PersistentStream";class G2{constructor(e,t,r,i,c,u,f,m){this.Mi=e,this.S_=r,this.b_=i,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ay(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Za(t.toString()),Za("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Me(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(tN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ue(tN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $M extends G2{constructor(e,t,r,i,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=YL(this.serializer,e),r=(function(c){if(!("targetChange"in c))return ot.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?ot.min():u.readTime?dr(u.readTime):ot.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=wv(this.serializer),t.addTarget=(function(c,u){let f;const m=u.target;if(f=gv(m)?{documents:XL(c,m)}:{query:JL(c,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=M2(c,u.resumeToken);const x=vv(c,u.expectedCount);x!==null&&(f.expectedCount=x)}else if(u.snapshotVersion.compareTo(ot.min())>0){f.readTime=Fm(c,u.snapshotVersion.toTimestamp());const x=vv(c,u.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const r=tM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=wv(this.serializer),t.removeTarget=e,this.q_(t)}}class HM extends G2{constructor(e,t,r,i,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=QL(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=wv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>V2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{}class qM extends WM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,yv(t,r),i,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Me(pe.UNKNOWN,c.toString())}))}Ho(e,t,r,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,yv(t,r),i,u,f,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(pe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Za(t),this.aa=!1):Ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc="RemoteStore";class KM{constructor(e,t,r,i,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Cc(this)&&(Ue(mc,"Restarting streams for network reachability change."),await(async function(m){const x=ht(m);x.Ea.add(4),await Dh(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Sp(x)})(this))}))})),this.Ra=new GM(r,i)}}async function Sp(n){if(Cc(n))for(const e of n.da)await e(!0)}async function Dh(n){for(const e of n.da)await e(!1)}function K2(n,e){const t=ht(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ry(t)?Iy(t):rd(t).O_()&&Py(t,e))}function ky(n,e){const t=ht(n),r=rd(t);t.Ia.delete(e),r.O_()&&Z2(t,e),t.Ia.size===0&&(r.O_()?r.L_():Cc(t)&&t.Ra.set("Unknown"))}function Py(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rd(n).Y_(e)}function Z2(n,e){n.Va.Ue(e),rd(n).Z_(e)}function Iy(n){n.Va=new UL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),rd(n).start(),n.Ra.ua()}function Ry(n){return Cc(n)&&!rd(n).x_()&&n.Ia.size>0}function Cc(n){return ht(n).Ea.size===0}function Y2(n){n.Va=void 0}async function ZM(n){n.Ra.set("Online")}async function YM(n){n.Ia.forEach(((e,t)=>{Py(n,e)}))}async function QM(n,e){Y2(n),Ry(n)?(n.Ra.ha(e),Iy(n)):n.Ra.set("Unknown")}async function XM(n,e,t){if(n.Ra.set("Online"),e instanceof L2&&e.state===2&&e.cause)try{await(async function(i,c){const u=c.cause;for(const f of c.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,u),i.Ia.delete(f),i.Va.removeTarget(f))})(n,e)}catch(r){Ue(mc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zm(n,r)}else if(e instanceof mm?n.Va.Ze(e):e instanceof R2?n.Va.st(e):n.Va.tt(e),!t.isEqual(ot.min()))try{const r=await q2(n.localStore);t.compareTo(r)>=0&&await(function(c,u){const f=c.Va.Tt(u);return f.targetChanges.forEach(((m,x)=>{if(m.resumeToken.approximateByteSize()>0){const w=c.Ia.get(x);w&&c.Ia.set(x,w.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,x)=>{const w=c.Ia.get(m);if(!w)return;c.Ia.set(m,w.withResumeToken(Qn.EMPTY_BYTE_STRING,w.snapshotVersion)),Z2(c,m);const y=new Qo(w.target,m,x,w.sequenceNumber);Py(c,y)})),c.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){Ue(mc,"Failed to raise snapshot:",r),await zm(n,r)}}async function zm(n,e,t){if(!nd(e))throw e;n.Ea.add(1),await Dh(n),n.Ra.set("Offline"),t||(t=()=>q2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ue(mc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sp(n)}))}function Q2(n,e){return e().catch((t=>zm(n,t,e)))}async function Ep(n){const e=ht(n),t=pl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gy;for(;JM(e);)try{const i=await LM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,eD(e,i)}catch(i){await zm(e,i)}X2(e)&&J2(e)}function JM(n){return Cc(n)&&n.Ta.length<10}function eD(n,e){n.Ta.push(e);const t=pl(n);t.O_()&&t.X_&&t.ea(e.mutations)}function X2(n){return Cc(n)&&!pl(n).x_()&&n.Ta.length>0}function J2(n){pl(n).start()}async function tD(n){pl(n).ra()}async function nD(n){const e=pl(n);for(const t of n.Ta)e.ea(t.mutations)}async function sD(n,e,t){const r=n.Ta.shift(),i=by.from(r,e,t);await Q2(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ep(n)}async function rD(n,e){e&&pl(n).X_&&await(async function(r,i){if((function(u){return P2(u)&&u!==pe.ABORTED})(i.code)){const c=r.Ta.shift();pl(r).B_(),await Q2(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i))),await Ep(r)}})(n,e),X2(n)&&J2(n)}async function nN(n,e){const t=ht(n);t.asyncQueue.verifyOperationInProgress(),Ue(mc,"RemoteStore received new credentials");const r=Cc(t);t.Ea.add(3),await Dh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sp(t)}async function iD(n,e){const t=ht(n);e?(t.Ea.delete(2),await Sp(t)):e||(t.Ea.add(2),await Dh(t),t.Ra.set("Unknown"))}function rd(n){return n.ma||(n.ma=(function(t,r,i){const c=ht(t);return c.sa(),new $M(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(n.datastore,n.asyncQueue,{Xo:ZM.bind(null,n),t_:YM.bind(null,n),r_:QM.bind(null,n),H_:XM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ry(n)?Iy(n):n.Ra.set("Unknown")):(await n.ma.stop(),Y2(n))}))),n.ma}function pl(n){return n.fa||(n.fa=(function(t,r,i){const c=ht(t);return c.sa(),new HM(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:tD.bind(null,n),r_:rD.bind(null,n),ta:nD.bind(null,n),na:sD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ep(n)):(await n.fa.stop(),n.Ta.length>0&&(Ue(mc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,r,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=c,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,c){const u=Date.now()+r,f=new Ly(e,t,u,i,c);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(n,e){if(Za("AsyncQueue",`${e}: ${n}`),nd(n))return new Me(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{static emptySet(e){return new Su(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=$d(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Su)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=r.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Su;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.ga=new un(Qe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):et(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Wu{constructor(e,t,r,i,c,u,f,m,x){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=x}static fromInitialDocuments(e,t,r,i,c){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Wu(e,t,Su.emptySet(t),u,r,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oD{constructor(){this.queries=rN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ht(t),c=i.queries;i.queries=rN(),c.forEach(((u,f)=>{for(const m of f.Sa)m.onError(r)}))})(this,new Me(pe.ABORTED,"Firestore shutting down"))}}function rN(){return new jc((n=>x2(n)),vp)}async function Dy(n,e){const t=ht(n);let r=3;const i=e.query;let c=t.queries.get(i);c?!c.ba()&&e.Da()&&(r=2):(c=new aD,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(i,!0);break;case 1:c.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const f=My(u,`Initialization of query '${vu(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Fy(t)}async function Oy(n,e){const t=ht(n),r=e.query;let i=3;const c=t.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?i=e.Da()?0:1:!c.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function lD(n,e){const t=ht(n);let r=!1;for(const i of e){const c=i.query,u=t.queries.get(c);if(u){for(const f of u.Sa)f.Fa(i)&&(r=!0);u.wa=i}}r&&Fy(t)}function cD(n,e,t){const r=ht(n),i=r.queries.get(e);if(i)for(const c of i.Sa)c.onError(t);r.queries.delete(e)}function Fy(n){n.Ca.forEach((e=>{e.next()}))}var Nv,iN;(iN=Nv||(Nv={})).Ma="default",iN.Cache="cache";class Vy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Nv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class uD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ct(),this.mutatedKeys=Ct(),this.eu=v2(e),this.tu=new Su(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new sN,i=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,x=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((w,y)=>{const j=i.get(w),S=yp(this.query,y)?y:null,C=!!j&&this.mutatedKeys.has(j.key),A=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;j&&S?j.data.isEqual(S.data)?C!==A&&(r.track({type:3,doc:S}),M=!0):this.su(j,S)||(r.track({type:2,doc:S}),M=!0,(m&&this.eu(S,m)>0||x&&this.eu(S,x)<0)&&(f=!0)):!j&&S?(r.track({type:0,doc:S}),M=!0):j&&!S&&(r.track({type:1,doc:j}),M=!0,(m||x)&&(f=!0)),M&&(S?(u=u.add(S),c=A?c.add(w):c.delete(w)):(u=u.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const w=this.query.limitType==="F"?u.last():u.first();u=u.delete(w.key),c=c.delete(w.key),r.track({type:1,doc:w})}return{tu:u,iu:r,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((w,y)=>(function(S,C){const A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Rt:M})}};return A(S)-A(C)})(w.type,y.type)||this.eu(w.doc,y.doc))),this.ou(r),i=i??!1;const f=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,x=m!==this.Za;return this.Za=m,u.length!==0||x?{snapshot:new Wu(this.query,e.tu,c,u,e.mutatedKeys,m===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new tC(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new eC(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const By="SyncEngine";class dD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hD{constructor(e){this.key=e,this.hu=!1}}class fD{constructor(e,t,r,i,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new jc((f=>x2(f)),vp),this.Iu=new Map,this.Eu=new Set,this.du=new un(Qe.comparator),this.Au=new Map,this.Ru=new Cy,this.Vu={},this.mu=new Map,this.fu=Hu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mD(n,e,t=!0){const r=oC(n);let i;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await nC(r,e,t,!0),i}async function pD(n,e){const t=oC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,r){const i=await MM(n.localStore,Gi(e)),c=i.targetId,u=n.sharedClientState.addLocalQueryTarget(c,t);let f;return r&&(f=await gD(n,e,c,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&K2(n.remoteStore,i),f}async function gD(n,e,t,r,i){n.pu=(y,j,S)=>(async function(A,M,R,z){let W=M.view.ru(R);W.Cs&&(W=await Qb(A.localStore,M.query,!1).then((({documents:D})=>M.view.ru(D,W))));const G=z&&z.targetChanges.get(M.targetId),K=z&&z.targetMismatches.get(M.targetId)!=null,ee=M.view.applyChanges(W,A.isPrimaryClient,G,K);return oN(A,M.targetId,ee.au),ee.snapshot})(n,y,j,S);const c=await Qb(n.localStore,e,!0),u=new uD(e,c.Qs),f=u.ru(c.documents),m=Mh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),x=u.applyChanges(f,n.isPrimaryClient,m);oN(n,t,x.au);const w=new dD(e,t,u);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),x.snapshot}async function xD(n,e,t){const r=ht(n),i=r.Tu.get(e),c=r.Iu.get(i.targetId);if(c.length>1)return r.Iu.set(i.targetId,c.filter((u=>!vp(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _v(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ky(r.remoteStore,i.targetId),jv(r,i.targetId)})).catch(td)):(jv(r,i.targetId),await _v(r.localStore,i.targetId,!0))}async function vD(n,e){const t=ht(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ky(t.remoteStore,r.targetId))}async function yD(n,e,t){const r=SD(n);try{const i=await(function(u,f){const m=ht(u),x=Kt.now(),w=f.reduce(((S,C)=>S.add(C.key)),Ct());let y,j;return m.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let C=Ya(),A=Ct();return m.Ns.getEntries(S,w).next((M=>{C=M,C.forEach(((R,z)=>{z.isValidDocument()||(A=A.add(R))}))})).next((()=>m.localDocuments.getOverlayedDocuments(S,C))).next((M=>{y=M;const R=[];for(const z of f){const W=DL(z,y.get(z.key).overlayedDocument);W!=null&&R.push(new jl(z.key,W,c2(W.value.mapValue),Yn.exists(!0)))}return m.mutationQueue.addMutationBatch(S,x,R,f)})).next((M=>{j=M;const R=M.applyToLocalDocumentSet(y,A);return m.documentOverlayCache.saveOverlays(S,M.batchId,R)}))})).then((()=>({batchId:j.batchId,changes:w2(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,f,m){let x=u.Vu[u.currentUser.toKey()];x||(x=new un(Nt)),x=x.insert(f,m),u.Vu[u.currentUser.toKey()]=x})(r,i.batchId,t),await Oh(r,i.changes),await Ep(r.remoteStore)}catch(i){const c=My(i,"Failed to persist write");t.reject(c)}}async function sC(n,e){const t=ht(n);try{const r=await IM(t.localStore,e);e.targetChanges.forEach(((i,c)=>{const u=t.Au.get(c);u&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Pt(u.hu,14607):i.removedDocuments.size>0&&(Pt(u.hu,42227),u.hu=!1))})),await Oh(t,r,e)}catch(r){await td(r)}}function aN(n,e,t){const r=ht(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((c,u)=>{const f=u.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(u,f){const m=ht(u);m.onlineState=f;let x=!1;m.queries.forEach(((w,y)=>{for(const j of y.Sa)j.va(f)&&(x=!0)})),x&&Fy(m)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wD(n,e,t){const r=ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),c=i&&i.key;if(c){let u=new un(Qe.comparator);u=u.insert(c,zn.newNoDocument(c,ot.min()));const f=Ct().add(c),m=new jp(ot.min(),new Map,new un(Nt),u,f);await sC(r,m),r.du=r.du.remove(c),r.Au.delete(e),zy(r)}else await _v(r.localStore,e,!1).then((()=>jv(r,e,t))).catch(td)}async function _D(n,e){const t=ht(n),r=e.batch.batchId;try{const i=await PM(t.localStore,e);iC(t,r,null),rC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Oh(t,i)}catch(i){await td(i)}}async function bD(n,e,t){const r=ht(n);try{const i=await(function(u,f){const m=ht(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let w;return m.mutationQueue.lookupMutationBatch(x,f).next((y=>(Pt(y!==null,37113),w=y.keys(),m.mutationQueue.removeMutationBatch(x,y)))).next((()=>m.mutationQueue.performConsistencyCheck(x))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(x,w,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,w))).next((()=>m.localDocuments.getDocuments(x,w)))}))})(r.localStore,e);iC(r,e,t),rC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Oh(r,i)}catch(i){await td(i)}}function rC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function iC(n,e,t){const r=ht(n);let i=r.Vu[r.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function jv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||aC(n,r)}))}function aC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ky(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),zy(n))}function oN(n,e,t){for(const r of t)r instanceof eC?(n.Ru.addReference(r.key,e),ND(n,r)):r instanceof tC?(Ue(By,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||aC(n,r.key)):et(19791,{wu:r})}function ND(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ue(By,"New document in limbo: "+t),n.Eu.add(r),zy(n))}function zy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Qe(Bt.fromString(e)),r=n.fu.next();n.Au.set(r,new hD(t)),n.du=n.du.insert(t,r),K2(n.remoteStore,new Qo(Gi(xp(t.path)),r,"TargetPurposeLimboResolution",pp.ce))}}async function Oh(n,e,t){const r=ht(n),i=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{u.push(r.pu(m,e,t).then((x=>{if((x||t)&&r.isPrimaryClient){const w=x?!x.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(x){i.push(x);const w=Ey.As(m.targetId,x);c.push(w)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(m,x){const w=ht(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ve.forEach(x,(j=>ve.forEach(j.Es,(S=>w.persistence.referenceDelegate.addReference(y,j.targetId,S))).next((()=>ve.forEach(j.ds,(S=>w.persistence.referenceDelegate.removeReference(y,j.targetId,S)))))))))}catch(y){if(!nd(y))throw y;Ue(Ty,"Failed to update sequence numbers: "+y)}for(const y of x){const j=y.targetId;if(!y.fromCache){const S=w.Ms.get(j),C=S.snapshotVersion,A=S.withLastLimboFreeSnapshotVersion(C);w.Ms=w.Ms.insert(j,A)}}})(r.localStore,c))}async function jD(n,e){const t=ht(n);if(!t.currentUser.isEqual(e)){Ue(By,"User change. New user:",e.toKey());const r=await W2(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((f=>{f.forEach((m=>{m.reject(new Me(pe.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oh(t,r.Ls)}}function CD(n,e){const t=ht(n),r=t.Au.get(e);if(r&&r.hu)return Ct().add(r.key);{let i=Ct();const c=t.Iu.get(e);if(!c)return i;for(const u of c){const f=t.Tu.get(u);i=i.unionWith(f.view.nu)}return i}}function oC(n){const e=ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wD.bind(null,e),e.Pu.H_=lD.bind(null,e.eventManager),e.Pu.yu=cD.bind(null,e.eventManager),e}function SD(n){const e=ht(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bD.bind(null,e),e}class Um{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kM(this.persistence,new EM,e.initialUser,this.serializer)}Cu(e){return new H2(Sy.mi,this.serializer)}Du(e){return new OM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Um.provider={build:()=>new Um};class ED extends Um{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pt(this.persistence.referenceDelegate instanceof Bm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hM(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new H2((r=>Bm.mi(r,t)),this.serializer)}}class Cv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jD.bind(null,this.syncEngine),await iD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oD})()}createDatastore(e){const t=Cp(e.databaseInfo.databaseId),r=(function(c){return new UM(c)})(e.databaseInfo);return(function(c,u,f,m){return new qM(c,u,f,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,c,u,f){return new KM(r,i,c,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>aN(this.syncEngine,t,0)),(function(){return eN.v()?new eN:new FM})())}createSyncEngine(e,t){return(function(i,c,u,f,m,x,w){const y=new fD(i,c,u,f,m,x);return w&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ht(t);Ue(mc,"RemoteStore shutting down."),r.Ea.add(5),await Dh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cv.provider={build:()=>new Cv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Za("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Me(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,c){const u=ht(i),f={documents:c.map((y=>Vm(u.serializer,y)))},m=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Bt.emptyPath(),f,c.length),x=new Map;m.forEach((y=>{const j=ZL(u.serializer,y);x.set(j.key.toString(),j)}));const w=[];return c.forEach((y=>{const j=x.get(y.toString());Pt(!!j,55234,{key:y}),w.push(j)})),w})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Np(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Qe.fromPath(r);this.mutations.push(new k2(i,this.precondition(i)))})),await(async function(r,i){const c=ht(r),u={writes:i.map((f=>V2(c.serializer,f)))};await c.Go("Commit",c.serializer.databaseId,Bt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et(50498,{Gu:e.constructor.name});t=ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ot.min())?Yn.exists(!1):Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ot.min()))throw new Me(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,r,i,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=c,this.zu=r.maxAttempts,this.M_=new Ay(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new TD(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Rh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!P2(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="FirestoreClient";class kD{constructor(e,t,r,i,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=us.UNAUTHENTICATED,this.clientId=py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{Ue(gl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Ue(gl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=My(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Mx(n,e){n.asyncQueue.verifyOperationInProgress(),Ue(gl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await W2(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function lN(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PD(n);Ue(gl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>nN(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>nN(e.remoteStore,i))),n._onlineComponents=e}async function PD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue(gl,"Using user provided OfflineComponentProvider");try{await Mx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Fu("Error using user provided cache. Falling back to memory cache: "+t),await Mx(n,new Um)}}else Ue(gl,"Using default OfflineComponentProvider"),await Mx(n,new ED(void 0));return n._offlineComponents}async function $y(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue(gl,"Using user provided OnlineComponentProvider"),await lN(n,n._uninitializedComponentsProvider._online)):(Ue(gl,"Using default OnlineComponentProvider"),await lN(n,new Cv))),n._onlineComponents}function ID(n){return $y(n).then((e=>e.syncEngine))}function RD(n){return $y(n).then((e=>e.datastore))}async function $m(n){const e=await $y(n),t=e.eventManager;return t.onListen=mD.bind(null,e.syncEngine),t.onUnlisten=xD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vD.bind(null,e.syncEngine),t}function LD(n,e,t={}){const r=new qi;return n.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,x){const w=new Uy({next:j=>{w.Nu(),u.enqueueAndForget((()=>Oy(c,y)));const S=j.docs.has(f);!S&&j.fromCache?x.reject(new Me(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&j.fromCache&&m&&m.source==="server"?x.reject(new Me(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(j)},error:j=>x.reject(j)}),y=new Vy(xp(f.path),w,{includeMetadataChanges:!0,qa:!0});return Dy(c,y)})(await $m(n),n.asyncQueue,e,t,r))),r.promise}function MD(n,e,t={}){const r=new qi;return n.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,x){const w=new Uy({next:j=>{w.Nu(),u.enqueueAndForget((()=>Oy(c,y))),j.fromCache&&m.source==="server"?x.reject(new Me(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(j)},error:j=>x.reject(j)}),y=new Vy(f,w,{includeMetadataChanges:!0,qa:!0});return Dy(c,y)})(await $m(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firestore.googleapis.com",uN=!0;class dN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cC,this.ssl=uN}else this.host=e.host,this.ssl=e.ssl??uN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uM)throw new Me(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lC(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new B3;switch(r.type){case"firstParty":return new H3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=cN.get(t);r&&(Ue("ComponentProvider","Removing Datastore"),cN.delete(t),r.terminate())})(this),Promise.resolve()}}function uC(n,e,t,r={}){n=As(n,Tp);const i=Xu(e),c=n._getSettings(),u={...c,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;i&&(ej(`https://${f}`),tj("Firestore",!0)),c.host!==cC&&c.host!==f&&Fu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:f,ssl:i,emulatorOptions:r};if(!qa(m,u)&&(n._setSettings(m),r.mockUserToken)){let x,w;if(typeof r.mockUserToken=="string")x=r.mockUserToken,w=us.MOCK_USER;else{x=Z4(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Me(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new us(y)}n._authCredentials=new z3(new Qj(x,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ih(t,sn._jsonSchema))return new sn(e,r||null,new Qe(Bt.fromString(t.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:Nn("string",sn._jsonSchemaVersion),referencePath:Nn("string")};class rl extends so{constructor(e,t,r){super(e,t,xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Qe(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function _t(n,e,...t){if(n=cn(n),Xj("collection","path",e),n instanceof Tp){const r=Bt.fromString(e,...t);return jb(r),new rl(n,null,r)}{if(!(n instanceof sn||n instanceof rl))throw new Me(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return jb(r),new rl(n.firestore,null,r)}}function jt(n,e,...t){if(n=cn(n),arguments.length===1&&(e=py.newId()),Xj("doc","path",e),n instanceof Tp){const r=Bt.fromString(e,...t);return Nb(r),new sn(n,null,new Qe(r))}{if(!(n instanceof sn||n instanceof rl))throw new Me(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return Nb(r),new sn(n.firestore,n instanceof rl?n.converter:null,new Qe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="AsyncQueue";class fN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ay(this,"async_queue_retry"),this._c=()=>{const r=Lx();r&&Ue(hN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nd(e))throw e;Ue(hN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Za("INTERNAL UNHANDLED ERROR: ",mN(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Ly.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(i),i}uc(){this.nc&&et(47125,{Pc:mN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const c of r)if(c in i&&typeof i[c]=="function")return!0;return!1})(n,["next","error","complete"])}class ta extends Tp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fN,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fN(e),this._firestoreClient=void 0,await e}}}function DD(n,e){const t=typeof n=="object"?n:ij(),r=typeof n=="string"?n:Lm,i=sy(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const c=G4("firestore");c&&uC(i,...c)}return i}function Fh(n){if(n._terminated)throw new Me(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OD(n),n._firestoreClient}function OD(n){const e=n._freezeSettings(),t=(function(i,c,u,f){return new lL(i,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,lC(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new kD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(Qn.fromBase64String(e))}catch(t){throw new Me(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ih(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Nn("string",lr._jsonSchemaVersion),bytes:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Me(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(Ih(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:Nn("string",Ki._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==i[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ih(e,Zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zi(e.vectorValues);throw new Me(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:Nn("string",Zi._jsonSchemaVersion),vectorValues:Nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=/^__.*__$/;class VD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lh(e,this.data,t,this.fieldTransforms)}}class dC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{Ac:n})}}class Ap{constructor(e,t,r,i,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hC(this.Ac)&&FD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cp(e)}Cc(e,t,r,i=!1){return new Ap({Ac:e,methodName:t,Dc:r,path:Zn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bh(n){const e=n._freezeSettings(),t=Cp(n._databaseId);return new BD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hy(n,e,t,r,i,c={}){const u=n.Cc(c.merge||c.mergeFields?2:0,e,t,i);Zy("Data must be an object, but it was:",u,r);const f=gC(r,u);let m,x;if(c.merge)m=new ur(u.fieldMask),x=u.fieldTransforms;else if(c.mergeFields){const w=[];for(const y of c.mergeFields){const j=Sv(e,y,t);if(!u.contains(j))throw new Me(pe.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);vC(w,j)||w.push(j)}m=new ur(w),x=u.fieldTransforms.filter((y=>m.covers(y.field)))}else m=null,x=u.fieldTransforms;return new VD(new Ts(f),m,x)}class kp extends Sc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}function fC(n,e,t){return new Ap({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wy extends Sc{_toFieldTransform(e){return new _p(e.path,new ph)}isEqual(e){return e instanceof Wy}}class qy extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=fC(this,e,!0),r=this.vc.map((c=>Ec(c,t))),i=new Uu(r);return new _p(e.path,i)}isEqual(e){return e instanceof qy&&qa(this.vc,e.vc)}}class Gy extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=fC(this,e,!0),r=this.vc.map((c=>Ec(c,t))),i=new $u(r);return new _p(e.path,i)}isEqual(e){return e instanceof Gy&&qa(this.vc,e.vc)}}class Ky extends Sc{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new gh(e.serializer,N2(e.serializer,this.Fc));return new _p(e.path,t)}isEqual(e){return e instanceof Ky&&this.Fc===e.Fc}}function mC(n,e,t,r){const i=n.Cc(1,e,t);Zy("Data must be an object, but it was:",i,r);const c=[],u=Ts.empty();Nl(r,((m,x)=>{const w=Yy(e,m,t);x=cn(x);const y=i.yc(w);if(x instanceof kp)c.push(w);else{const j=Ec(x,y);j!=null&&(c.push(w),u.set(w,j))}}));const f=new ur(c);return new dC(u,f,i.fieldTransforms)}function pC(n,e,t,r,i,c){const u=n.Cc(1,e,t),f=[Sv(e,r,t)],m=[i];if(c.length%2!=0)throw new Me(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<c.length;j+=2)f.push(Sv(e,c[j])),m.push(c[j+1]);const x=[],w=Ts.empty();for(let j=f.length-1;j>=0;--j)if(!vC(x,f[j])){const S=f[j];let C=m[j];C=cn(C);const A=u.yc(S);if(C instanceof kp)x.push(S);else{const M=Ec(C,A);M!=null&&(x.push(S),w.set(S,M))}}const y=new ur(x);return new dC(w,y,u.fieldTransforms)}function zD(n,e,t,r=!1){return Ec(t,n.Cc(r?4:3,e))}function Ec(n,e){if(xC(n=cn(n)))return Zy("Unsupported field value:",e,n),gC(n,e);if(n instanceof Sc)return(function(r,i){if(!hC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const c=[];let u=0;for(const f of r){let m=Ec(f,i.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(n,e)}return(function(r,i){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Kt.fromDate(r);return{timestampValue:Fm(i.serializer,c)}}if(r instanceof Kt){const c=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fm(i.serializer,c)}}if(r instanceof Ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:M2(i.serializer,r._byteString)};if(r instanceof sn){const c=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:jy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zi)return(function(u,f){return{mapValue:{fields:{[o2]:{stringValue:l2},[Mm]:{arrayValue:{values:u.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return _y(f.serializer,x)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${mp(r)}`)})(n,e)}function gC(n,e){const t={};return t2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nl(n,((r,i)=>{const c=Ec(i,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function xC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kt||n instanceof Ki||n instanceof lr||n instanceof sn||n instanceof Sc||n instanceof Zi)}function Zy(n,e,t){if(!xC(t)||!Jj(t)){const r=mp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Sv(n,e,t){if((e=cn(e))instanceof Vh)return e._internalPath;if(typeof e=="string")return Yy(n,e);throw Hm("Field path arguments must be of type string or ",n,!1,void 0,t)}const UD=new RegExp("[~\\*/\\[\\]]");function Yy(n,e,t){if(e.search(UD)>=0)throw Hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vh(...e.split("."))._internalPath}catch{throw Hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hm(n,e,t,r,i){const c=r&&!r.isEmpty(),u=i!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Me(pe.INVALID_ARGUMENT,f+n+m)}function vC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,r,i,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $D extends Wm{data(){return super.data()}}function Pp(n,e){return typeof e=="string"?Yy(n,e):e instanceof Vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Me(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qy{}class Xy extends Qy{}function Gt(n,e,...t){let r=[];e instanceof Qy&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((m=>m instanceof Jy)).length,f=c.filter((m=>m instanceof Ip)).length;if(u>1||u>0&&f>0)throw new Me(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Ip extends Xy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ip(e,t,r)}_apply(e){const t=this._parse(e);return wC(e._query,t),new so(e.firestore,e.converter,xv(e._query,t))}_parse(e){const t=Bh(e.firestore);return(function(c,u,f,m,x,w,y){let j;if(x.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){xN(y,w);const C=[];for(const A of y)C.push(gN(m,c,A));j={arrayValue:{values:C}}}else j=gN(m,c,y)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||xN(y,w),j=zD(f,u,y,w==="in"||w==="not-in");return bn.create(x,w,j)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hs(n,e,t){const r=e,i=Pp("where",n);return Ip._create(i,r,t)}class Jy extends Qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,c){let u=i;const f=c.getFlattenedFilters();for(const m of f)wC(u,m),u=xv(u,m)})(e._query,t),new so(e.firestore,e.converter,xv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class e0 extends Xy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new e0(e,t)}_apply(e){const t=(function(i,c,u){if(i.startAt!==null)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mh(c,u)})(e._query,this._field,this._direction);return new so(e.firestore,e.converter,(function(i,c){const u=i.explicitOrderBy.concat([c]);return new sd(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function fr(n,e="asc"){const t=e,r=Pp("orderBy",n);return e0._create(r,t)}class t0 extends Xy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new t0(e,t,r)}_apply(e){return new so(e.firestore,e.converter,Om(e._query,this._limit,this._limitType))}}function id(n){return Q3("limit",n),t0._create("limit",n,"F")}function gN(n,e,t){if(typeof(t=cn(t))=="string"){if(t==="")throw new Me(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g2(e)&&t.indexOf("/")!==-1)throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Bt.fromString(t));if(!Qe.isDocumentKey(r))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ib(n,new Qe(r))}if(t instanceof sn)return Ib(n,t._key);throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mp(t)}.`)}function xN(n,e){if(!Array.isArray(n)||n.length===0)throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wC(n,e){const t=(function(i,c){for(const u of i)for(const f of u.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Me(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _C{convertValue(e,t="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nl(e,((i,c)=>{r[i]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[Mm].arrayValue?.values?.map((r=>pn(r.doubleValue)));return new Zi(t)}convertGeoPoint(e){return new Ki(pn(e.latitude),pn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=hl(e);return new Kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Bt.fromString(e);Pt(U2(r),9688,{name:e});const i=new hh(r.get(1),r.get(3)),c=new Qe(r.popFirst(5));return i.isEqual(t)||Za(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class HD extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}class _u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class il extends Wm{constructor(e,t,r,i,c,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=il._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}il._jsonSchemaVersion="firestore/documentSnapshot/1.0",il._jsonSchema={type:Nn("string",il._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class pm extends il{data(e={}){return super.data(e)}}class oc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _u(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new pm(this._firestore,this._userDataWriter,r.key,r,new _u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((f=>{const m=new pm(i._firestore,i._userDataWriter,f.doc.key,f.doc,new _u(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const m=new pm(i._firestore,i._userDataWriter,f.doc.key,f.doc,new _u(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let x=-1,w=-1;return f.type!==0&&(x=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),w=u.indexOf(f.doc.key)),{type:WD(f.type),doc:m,oldIndex:x,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n){n=As(n,sn);const e=As(n.firestore,ta);return LD(Fh(e),n._key).then((t=>bC(e,n,t)))}oc._jsonSchemaVersion="firestore/querySnapshot/1.0",oc._jsonSchema={type:Nn("string",oc._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class Lp extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function Cn(n){n=As(n,so);const e=As(n.firestore,ta),t=Fh(e),r=new Lp(e);return yC(n._query),MD(t,n._query).then((i=>new oc(e,r,n,i)))}function s0(n,e,t){n=As(n,sn);const r=As(n.firestore,ta),i=n0(n.converter,e,t);return Mp(r,[Hy(Bh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Yn.none())])}function Pn(n,e,t,...r){n=As(n,sn);const i=As(n.firestore,ta),c=Bh(i);let u;return u=typeof(e=cn(e))=="string"||e instanceof Vh?pC(c,"updateDoc",n._key,e,t,r):mC(c,"updateDoc",n._key,e),Mp(i,[u.toMutation(n._key,Yn.exists(!0))])}function qu(n){return Mp(As(n.firestore,ta),[new Np(n._key,Yn.none())])}function Qa(n,e){const t=As(n.firestore,ta),r=jt(n),i=n0(n.converter,e);return Mp(t,[Hy(Bh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then((()=>r))}function al(n,...e){n=cn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pN(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pN(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let c,u,f;if(n instanceof sn)u=As(n.firestore,ta),f=xp(n._key.path),c={next:m=>{e[r]&&e[r](bC(u,n,m))},error:e[r+1],complete:e[r+2]};else{const m=As(n,so);u=As(m.firestore,ta),f=m._query;const x=new Lp(u);c={next:w=>{e[r]&&e[r](new oc(u,x,m,w))},error:e[r+1],complete:e[r+2]},yC(n._query)}return(function(x,w,y,j){const S=new Uy(j),C=new Vy(w,S,y);return x.asyncQueue.enqueueAndForget((async()=>Dy(await $m(x),C))),()=>{S.Nu(),x.asyncQueue.enqueueAndForget((async()=>Oy(await $m(x),C)))}})(Fh(u),f,i,c)}function Mp(n,e){return(function(r,i){const c=new qi;return r.asyncQueue.enqueueAndForget((async()=>yD(await ID(r),i,c))),c.promise})(Fh(n),e)}function bC(n,e,t){const r=t.docs.get(e._key),i=new Lp(n);return new il(n,i,e._key,r,new _u(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={maxAttempts:5};function Wd(n,e){if((n=cn(n)).firestore!==e)throw new Me(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bh(e)}get(e){const t=Wd(e,this._firestore),r=new HD(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return et(24041);const c=i[0];if(c.isFoundDocument())return new Wm(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Wm(this._firestore,r,t._key,null,t.converter);throw et(18433,{doc:c})}))}set(e,t,r){const i=Wd(e,this._firestore),c=n0(i.converter,t,r),u=Hy(this._dataReader,"Transaction.set",i._key,c,i.converter!==null,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const c=Wd(e,this._firestore);let u;return u=typeof(t=cn(t))=="string"||t instanceof Vh?pC(this._dataReader,"Transaction.update",c._key,t,r,i):mC(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=Wd(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD extends GD{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wd(e,this._firestore),r=new Lp(this._firestore);return super.get(e).then((i=>new il(this._firestore,r,t._key,i._document,new _u(!1,!1),t.converter)))}}function vN(n,e,t){n=As(n,ta);const r={...qD,...t};return(function(c){if(c.maxAttempts<1)throw new Me(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,f){const m=new qi;return c.asyncQueue.enqueueAndForget((async()=>{const x=await RD(c);new AD(c.asyncQueue,x,f,u,m).ju()})),m.promise})(Fh(n),(i=>e(new KD(n,i))),r)}function pc(){return new Wy("serverTimestamp")}function Eu(...n){return new qy("arrayUnion",n)}function qd(...n){return new Gy("arrayRemove",n)}function Yo(n){return new Ky("increment",n)}(function(e,t=!0){(function(i){ed=i})(Ju),Du(new uc("firestore",((r,{instanceIdentifier:i,options:c})=>{const u=r.getProvider("app").getImmediate(),f=new ta(new U3(r.getProvider("auth-internal")),new W3(u,r.getProvider("app-check-internal")),(function(x,w){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Me(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hh(x.options.projectId,w)})(u,i),u);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),nl(yb,wb,e),nl(yb,wb,"esm2020")})();const ZD={apiKey:"dummy-key",authDomain:"localhost",projectId:"book-bloom-emulator",storageBucket:"default-bucket",messagingSenderId:"123456",appId:"1:123456:web:abcdef"},NC=rj(ZD),Jt=F3(NC),Oe=DD(NC);if(window.location.hostname==="localhost")try{Sj(Jt,"http://127.0.0.1:9099",{disableWarnings:!0}),uC(Oe,"127.0.0.1",8080),console.log("Connected to Firebase Emulators (Auth & Firestore)")}catch(n){console.warn("Firebase emulator connection:",n)}const jC=new Va,YD=new Fa;function QD({onSwitchToSignUp:n,onLogin:e}){const[t,r]=_.useState(!1),[i,c]=_.useState(""),[u,f]=_.useState(""),[m,x]=_.useState(null),w=async S=>{S.preventDefault(),x(null);try{await Ij(Jt,i,u),console.log("Login successful"),e&&e()}catch(C){x(C.message||"Login failed. Please try again.")}},y=async()=>{x(null);try{await uv(Jt,jC),console.log("Google login successful"),e&&e()}catch(S){x(S.message||"Google login failed.")}},j=async()=>{x(null);try{await uv(Jt,YD),console.log("Facebook login successful"),e&&e()}catch(S){x(S.message||"Facebook login failed.")}};return s.jsxs("div",{className:"min-h-[calc(100vh-200px)] flex",children:[s.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#C4A672] to-[#8B7355] items-center justify-center p-12",children:s.jsxs("div",{className:"max-w-md text-center space-y-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm mb-4",children:s.jsx(Ru,{className:"w-12 h-12 text-white"})}),s.jsx("h2",{className:"text-white text-4xl",children:"Welcome to Book Bloom"}),s.jsx("p",{className:"text-white/90 text-lg",children:"Your trusted platform for buying, selling, and renting books. Discover your next great read today."}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-3xl mb-1",children:"50K+"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Books"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-3xl mb-1",children:"10K+"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Happy Readers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-3xl mb-1",children:"100+"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Communities"})]})]})]})}),s.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-[#F5F5F5]",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h1",{className:"text-[#2C3E50]",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-600",children:"Please login to your account"})]}),s.jsxs("form",{onSubmit:w,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm text-gray-700",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"email",type:"email",placeholder:"Enter your email",value:i,onChange:S=>c(S.target.value),className:"pl-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672]",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"password",type:t?"text":"password",placeholder:"Enter your password",value:u,onChange:S=>f(S.target.value),className:"pl-10 pr-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672]",required:!0}),s.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t?s.jsx(bu,{className:"w-5 h-5"}):s.jsx(Ur,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qu,{id:"remember"}),s.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-600 cursor-pointer",children:"Remember me"})]}),s.jsx("a",{href:"#",className:"text-sm text-[#C4A672] hover:text-[#8B7355] hover:underline",children:"Forgot Password?"})]}),s.jsx(J,{type:"submit",className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Login"}),m&&s.jsx("p",{className:"text-sm text-red-500",children:m}),"  ",s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(J,{type:"button",variant:"outline",className:"h-11 border-gray-200 hover:bg-gray-50",onClick:y,children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),s.jsxs(J,{type:"button",variant:"outline",className:"h-11 border-gray-200 hover:bg-gray-50",onClick:j,children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]})]}),s.jsx("div",{className:"text-center pt-4",children:s.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",s.jsx("button",{onClick:n,className:"text-[#C4A672] hover:text-[#8B7355] hover:underline",children:"Sign up for free"})]})})]})})})]})}function XD({onSwitchToLogin:n,onSignUp:e}){const[t,r]=_.useState(!1),[i,c]=_.useState(!1),[u,f]=_.useState(""),[m,x]=_.useState(""),[w,y]=_.useState(""),[j,S]=_.useState(!1),[C,A]=_.useState({}),[M,R]=_.useState(null),z=()=>{const D={};return u?/\S+@\S+\.\S+/.test(u)||(D.email="Email is invalid"):D.email="Email is required",m?m.length<8&&(D.password="Password must be at least 8 characters"):D.password="Password is required",w?m!==w&&(D.confirmPassword="Passwords do not match"):D.confirmPassword="Please confirm your password",j||(D.terms="You must agree to the terms and conditions"),A(D),Object.keys(D).length===0},W=async D=>{if(D.preventDefault(),R(null),z())try{await b6(Jt,u,m),console.log("Signup successful"),e&&e()}catch(P){R(P.message||"Signup failed. Please try again.")}},G=async()=>{R(null);try{await uv(Jt,jC),console.log("Google signup successful"),e&&e()}catch(D){R(D.message||"Google signup failed.")}},ee=m?m.length<6?{text:"Weak",color:"text-red-500"}:m.length<10?{text:"Medium",color:"text-yellow-500"}:{text:"Strong",color:"text-green-500"}:null;return s.jsxs("div",{className:"min-h-[calc(100vh-200px)] flex",children:[s.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#8B7355] to-[#C4A672] items-center justify-center p-12",children:s.jsxs("div",{className:"max-w-md text-center space-y-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm mb-4",children:s.jsx(Ru,{className:"w-12 h-12 text-white"})}),s.jsx("h2",{className:"text-white text-4xl",children:"Join BookOra Today"}),s.jsx("p",{className:"text-white/90 text-lg",children:"Create your account and start your journey to finding the perfect property."}),s.jsxs("div",{className:"space-y-4 pt-8 text-left",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(im,{className:"w-6 h-6 text-white flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white",children:"Access Thousands of Properties"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Browse our extensive real estate listings"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(im,{className:"w-6 h-6 text-white flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white",children:"Save Your Favorites"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Keep track of properties you love"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(im,{className:"w-6 h-6 text-white flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white",children:"Connect with Agents"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Get expert guidance from professionals"})]})]})]})]})}),s.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-[#F5F5F5]",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h1",{className:"text-[#2C3E50]",children:"Create Account"}),s.jsx("p",{className:"text-gray-600",children:"Sign up to get started"})]}),s.jsxs("form",{onSubmit:W,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm text-gray-700",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"email",type:"email",placeholder:"Enter your email",value:u,onChange:D=>{f(D.target.value),A({...C,email:""})},className:`pl-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672] ${C.email?"border-red-500":""}`})]}),C.email&&s.jsx("p",{className:"text-sm text-red-500",children:C.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"password",type:t?"text":"password",placeholder:"Enter your password",value:m,onChange:D=>{x(D.target.value),A({...C,password:""})},className:`pl-10 pr-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672] ${C.password?"border-red-500":""}`}),s.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t?s.jsx(bu,{className:"w-5 h-5"}):s.jsx(Ur,{className:"w-5 h-5"})})]}),ee&&s.jsxs("p",{className:`text-sm ${ee.color}`,children:["Password strength: ",ee.text]}),C.password&&s.jsx("p",{className:"text-sm text-red-500",children:C.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"text-sm text-gray-700",children:"Re-enter Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"confirmPassword",type:i?"text":"password",placeholder:"Re-enter your password",value:w,onChange:D=>{y(D.target.value),A({...C,confirmPassword:""})},className:`pl-10 pr-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672] ${C.confirmPassword?"border-red-500":""}`}),s.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(bu,{className:"w-5 h-5"}):s.jsx(Ur,{className:"w-5 h-5"})})]}),C.confirmPassword&&s.jsx("p",{className:"text-sm text-red-500",children:C.confirmPassword})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Qu,{id:"terms",checked:j,onCheckedChange:D=>{S(D===!0),A({...C,terms:""})},className:C.terms?"border-red-500":""}),s.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600 cursor-pointer leading-tight",children:["I agree to the"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Terms and Conditions"})," ","and"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Privacy Policy"})]})]}),C.terms&&s.jsx("p",{className:"text-sm text-red-500 pl-6",children:C.terms})]}),s.jsx(J,{type:"submit",className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Create Account"}),M&&s.jsx("p",{className:"text-sm text-red-500 text-center",children:M}),"  ",s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or sign up with"})})]}),s.jsxs(J,{type:"button",variant:"outline",onClick:G,className:"w-full h-12 border-gray-200 hover:bg-gray-50",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign up with Google"]})]}),s.jsx("div",{className:"text-center pt-4",children:s.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",s.jsx("button",{onClick:n,className:"text-[#C4A672] hover:text-[#8B7355] hover:underline",children:"Login here"})]})})]})})})]})}function JD({onViewAll:n}){const[e,t]=_.useState(0),[r,i]=_.useState(!0),[c,u]=_.useState([]);_.useEffect(()=>{(async()=>{const y=Gt(_t(Oe,"announcements"),fr("date","desc"),id(3)),S=(await Cn(y)).docs.map(C=>({id:C.id,...C.data()}));u(S)})()},[]),_.useEffect(()=>{if(!r||c.length===0)return;const w=setInterval(()=>{t(y=>(y+1)%c.length)},5e3);return()=>clearInterval(w)},[r,c.length]);const f=()=>{i(!1),t(w=>(w-1+c.length)%c.length)},m=()=>{i(!1),t(w=>(w+1)%c.length)};if(c.length===0)return s.jsx("div",{children:"Loading announcements..."});c[e];const x=w=>{switch(w){case"promo":return"from-[#C4A672] to-[#8B7355]";case"update":return"from-[#2C3E50] to-[#34495E]";default:return"from-[#3498db] to-[#2980b9]"}};return s.jsxs("div",{className:"relative w-full bg-gradient-to-r overflow-hidden",children:[s.jsx("div",{className:"relative h-64 md:h-80",children:c.map((w,y)=>s.jsxs("div",{className:`absolute inset-0 transition-opacity duration-500 ${y===e?"opacity-100":"opacity-0"}`,children:[w.image&&s.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.image})`},children:s.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${x(w.type)} opacity-90`})}),s.jsx("div",{className:`relative h-full ${w.image?"":`bg-gradient-to-r ${x(w.type)}`}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 h-full flex items-center",children:s.jsxs("div",{className:"text-white max-w-2xl",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ha,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm opacity-90",children:w.date})]}),s.jsx("h2",{className:"text-3xl md:text-4xl mb-4",children:w.title}),s.jsx("p",{className:"text-lg md:text-xl opacity-95 mb-6",children:w.content}),s.jsx(J,{onClick:n,variant:"secondary",size:"lg",className:"bg-white text-[#2C3E50] hover:bg-gray-100",children:"View All Announcements "})]})})})]},w.id))}),s.jsx("button",{onClick:f,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-colors",children:s.jsx(rp,{className:"w-6 h-6"})}),s.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-colors",children:s.jsx(Xo,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:c.map((w,y)=>s.jsx("button",{onClick:()=>{i(!1),t(y)},className:`w-2 h-2 rounded-full transition-all ${y===e?"w-8 bg-white":"bg-white/50 hover:bg-white/75"}`},y))})]})}function eO({activeTab:n,onNavigateToBook:e}){const[t,r]=_.useState([]);return _.useEffect(()=>{(async()=>{const c=Gt(_t(Oe,"books"),hs("type","==",n),id(4)),f=(await Cn(c)).docs.map(m=>({id:m.id,...m.data()}));r(f)})()},[n]),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.map(i=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",onClick:()=>e(i.id),children:[s.jsxs("div",{className:"relative h-64 bg-gray-100 overflow-hidden",children:[s.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx(Xe,{className:"absolute top-3 right-3 bg-[#C4A672] text-white border-0",children:i.condition})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1 line-clamp-1 group-hover:text-[#C4A672] transition-colors",children:i.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:i.author}),s.jsxs("div",{className:"flex items-center justify-between",children:[n==="rent"&&i.rentalPrice?s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",i.rentalPrice.monthly,"/mo"]}),s.jsxs("span",{className:"text-gray-500 text-xs",children:["$",i.rentalPrice.weekly,"/wk"]})]}):s.jsxs("span",{className:"text-[#C4A672] text-2xl",children:["$",i.price]}),s.jsxs(J,{size:"sm",className:"bg-[#2C3E50] hover:bg-[#1a252f] text-white",children:[n==="buy"&&"View",n==="sell"&&"List",n==="rent"&&"Rent"]})]})]})]},i.id)),s.jsx("div",{className:"bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition-shadow cursor-pointer flex items-center justify-center min-h-[320px] group",children:s.jsxs("div",{className:"text-center text-white p-6",children:[s.jsxs("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-white/30 transition-colors",children:[n==="buy"&&s.jsx(ar,{className:"w-8 h-8"}),n==="sell"&&s.jsx(Wa,{className:"w-8 h-8"}),n==="rent"&&s.jsx(Gs,{className:"w-8 h-8"})]}),s.jsx("h3",{className:"text-xl mb-2",children:"Browse All"}),s.jsxs("p",{className:"text-white/90 mb-4",children:["Explore ",n==="buy"?"thousands of":"all"," books"]}),s.jsx("div",{className:"text-white/90 group-hover:text-white transition-colors",children:"View More "})]})})]})}function tO(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let Ev=1;class nO{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,c=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ev++,u=this.toasts.find(m=>m.id===c),f=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),u?this.toasts=this.toasts.map(m=>m.id===c?(this.publish({...m,...e,id:c,title:r}),{...m,...e,id:c,dismissible:f,title:r}):m):this.addToast({title:r,...i,dismissible:f,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let c=r!==void 0,u;const f=i.then(async x=>{if(u=["resolve",x],ds.isValidElement(x))c=!1,this.create({id:r,type:"default",message:x});else if(rO(x)&&!x.ok){c=!1;const y=typeof t.error=="function"?await t.error(`HTTP error! status: ${x.status}`):t.error,j=typeof t.description=="function"?await t.description(`HTTP error! status: ${x.status}`):t.description,C=typeof y=="object"&&!ds.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:j,...C})}else if(x instanceof Error){c=!1;const y=typeof t.error=="function"?await t.error(x):t.error,j=typeof t.description=="function"?await t.description(x):t.description,C=typeof y=="object"&&!ds.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:j,...C})}else if(t.success!==void 0){c=!1;const y=typeof t.success=="function"?await t.success(x):t.success,j=typeof t.description=="function"?await t.description(x):t.description,C=typeof y=="object"&&!ds.isValidElement(y)?y:{message:y};this.create({id:r,type:"success",description:j,...C})}}).catch(async x=>{if(u=["reject",x],t.error!==void 0){c=!1;const w=typeof t.error=="function"?await t.error(x):t.error,y=typeof t.description=="function"?await t.description(x):t.description,S=typeof w=="object"&&!ds.isValidElement(w)?w:{message:w};this.create({id:r,type:"error",description:y,...S})}}).finally(()=>{c&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),m=()=>new Promise((x,w)=>f.then(()=>u[0]==="reject"?w(u[1]):x(u[1])).catch(w));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(e,t)=>{const r=t?.id||Ev++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Br=new nO,sO=(n,e)=>{const t=e?.id||Ev++;return Br.addToast({title:n,...e,id:t}),t},rO=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",iO=sO,aO=()=>Br.toasts,oO=()=>Br.getActiveToasts(),xe=Object.assign(iO,{success:Br.success,info:Br.info,warning:Br.warning,error:Br.error,custom:Br.custom,message:Br.message,promise:Br.promise,dismiss:Br.dismiss,loading:Br.loading},{getHistory:aO,getToasts:oO});tO("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function lO({onNavigateToCommunities:n,isLoggedIn:e}){const[t,r]=_.useState([]),i=Jt.currentUser;_.useEffect(()=>{(async()=>{const m=Gt(_t(Oe,"communities"),id(4)),x=await Cn(m),w=await Promise.all(x.docs.map(async y=>{const j={id:y.id,...y.data()};if(i){const S=jt(Oe,`communities/${y.id}/members/${i.uid}`),C=await Rp(S);j.isMember=C.exists()}else j.isMember=!1;return j}));r(w)})()},[i]);const c=async(f,m)=>{if(!e||!i){xe.error("Please login to join communities");return}const x=jt(Oe,"communities",f),w=jt(x,"members",i.uid);if(m==="private")await s0(w,{requested:!0,date:new Date}),xe.success("Join request sent! Waiting for admin approval.");else try{await vN(Oe,async y=>{const j=await y.get(x);if(!j.exists())throw new Error("Community not found");y.update(x,{memberCount:j.data().memberCount+1}),y.set(w,{joined:new Date})}),r(y=>y.map(j=>j.id===f?{...j,isMember:!0,memberCount:j.memberCount+1}:j)),xe.success("Successfully joined the community!")}catch{xe.error("Failed to join")}},u=async f=>{if(!i)return;const m=jt(Oe,"communities",f),x=jt(m,"members",i.uid);try{await vN(Oe,async w=>{const y=await w.get(m);if(!y.exists())throw new Error("Community not found");w.update(m,{memberCount:y.data().memberCount-1}),w.delete(x)}),r(w=>w.map(y=>y.id===f?{...y,isMember:!1,memberCount:y.memberCount-1}:y)),xe.info("You left the community")}catch{xe.error("Failed to leave")}};return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(f=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow group",children:[s.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-[#C4A672] to-[#8B7355] overflow-hidden",children:[s.jsx("img",{src:f.image,alt:f.name,className:"w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-300"}),s.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:s.jsx(Xe,{variant:"secondary",className:"bg-white/90 text-gray-700 border-0",children:f.privacy==="public"?s.jsxs(s.Fragment,{children:[s.jsx(ym,{className:"w-3 h-3 mr-1"})," Public"]}):s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-3 h-3 mr-1"})," Private"]})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsx("h3",{className:"text-[#2C3E50] group-hover:text-[#C4A672] transition-colors line-clamp-1",children:f.name})}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2 min-h-[40px]",children:f.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{children:f.memberCount.toLocaleString()})]}),s.jsx(Xe,{variant:"outline",className:"text-xs",children:f.topic})]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Admin: ",f.admin]}),f.isMember?s.jsxs("div",{className:"space-y-2",children:[s.jsxs(J,{onClick:()=>n(),className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",size:"sm",children:[s.jsx(Xo,{className:"w-4 h-4 mr-1"}),"View Community"]}),s.jsx(J,{onClick:()=>u(f.id),variant:"outline",className:"w-full text-red-600 hover:bg-red-50 hover:text-red-700 border-red-200",size:"sm",children:"Leave"})]}):s.jsx(J,{onClick:()=>c(f.id,f.privacy),className:"w-full bg-[#2C3E50] hover:bg-[#1a252f] text-white",size:"sm",children:f.privacy==="private"?"Request to Join":"Join Community"})]})]},f.id))})}function cO({notifications:n,onDismiss:e,onMarkAsRead:t}){const[r,i]=_.useState(0);if(n.length===0)return null;const c=()=>{i(x=>x>0?x-1:n.length-1)},u=()=>{i(x=>x<n.length-1?x+1:0)},f=x=>{switch(x){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}};if(n.length<=3)return s.jsx("div",{className:"space-y-3 mb-6",children:n.map(x=>s.jsx("div",{className:`${f(x.type)} border rounded-lg p-4 shadow-subtle transition-smooth hover:shadow-card animate-fadeInUp`,children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx(Ha,{className:"w-5 h-5 mt-0.5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:x.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.message}),s.jsx("span",{className:"text-xs text-gray-500 mt-2 inline-block",children:x.timestamp})]})]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>e(x.id),className:"h-6 w-6 p-0 hover:bg-gray-200",children:s.jsx(Ot,{className:"w-4 h-4"})})]})},x.id))});const m=n[r];return s.jsx("div",{className:"mb-6 animate-fadeInUp",children:s.jsxs("div",{className:`${f(m.type)} border rounded-lg p-4 shadow-card transition-smooth`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx(Ha,{className:"w-5 h-5 mt-0.5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:m.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.message}),s.jsx("span",{className:"text-xs text-gray-500 mt-2 inline-block",children:m.timestamp})]})]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>e(m.id),className:"h-6 w-6 p-0 hover:bg-gray-200",children:s.jsx(Ot,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200",children:[s.jsxs(J,{variant:"ghost",size:"sm",onClick:c,className:"h-8 px-2 hover:bg-white",children:[s.jsx(rp,{className:"w-4 h-4 mr-1"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1.5",children:n.map((x,w)=>s.jsx("button",{onClick:()=>i(w),className:`h-2 rounded-full transition-all ${w===r?"w-6 bg-blue-600":"w-2 bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to notification ${w+1}`},w))}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:u,className:"h-8 px-2 hover:bg-white",children:["Next",s.jsx(Xo,{className:"w-4 h-4 ml-1"})]})]}),s.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[r+1," of ",n.length]})]})})}function uO({context:n="home",onBookClick:e}){const[t,r]=_.useState([]),[i,c]=_.useState(0),u=4,[f,m]=_.useState(!0);_.useEffect(()=>{(async()=>{m(!0);try{const A=Gt(_t(Oe,"books"),id(5)),R=(await Cn(A)).docs.map(z=>({id:z.id,...z.data()}));r(R)}catch(A){xe.error("Failed to fetch recommendations"),console.error(A)}finally{m(!1)}})()},[]);const x=()=>{c(C=>Math.max(0,C-1))},w=()=>{c(C=>Math.min(t.length-u,C+1))},y=t.slice(i,i+u),j=i>0,S=i<t.length-u;return f?s.jsx("div",{children:"Loading recommendations..."}):s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 shadow-card mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-subtle",children:s.jsx(P_,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-gray-900",children:"AI Recommendations"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Based on your reading history"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:x,disabled:!j,className:"h-8 w-8 p-0 bg-white hover:bg-gray-50 disabled:opacity-30 transition-smooth",children:s.jsx(rp,{className:"w-4 h-4"})}),s.jsx(J,{variant:"outline",size:"sm",onClick:w,disabled:!S,className:"h-8 w-8 p-0 bg-white hover:bg-gray-50 disabled:opacity-30 transition-smooth",children:s.jsx(Xo,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map(C=>s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-subtle hover:shadow-card transition-smooth cursor-pointer",onClick:()=>e?.(C.id),children:[s.jsxs("div",{className:"relative mb-3",children:[s.jsx("img",{src:C.image,alt:C.title,className:"w-full h-48 object-cover rounded-lg"}),s.jsxs("div",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-subtle",children:[s.jsx(P_,{className:"w-3 h-3 inline mr-1"}),"AI Pick"]})]}),s.jsx("h3",{className:"text-sm text-gray-900 mb-1 line-clamp-1",children:C.title}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-1",children:C.author}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-blue-600",children:["",C.price]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-yellow-500",children:""}),s.jsx("span",{className:"text-xs text-gray-600",children:C.rating})]})]})]},C.id))}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("p",{className:"text-xs text-gray-500",children:"Powered by AI  Updated based on your preferences and browsing patterns"})})]})}function dO({onNavigateToCommunities:n,onNavigateToBook:e,onNavigateToAnnouncements:t,onNavigateToSearch:r,isLoggedIn:i}){const[c,u]=_.useState("buy"),[f,m]=_.useState(""),[x,w]=_.useState([]),y=Jt.currentUser;_.useEffect(()=>{if(!i||!y)return;(async()=>{const A=Gt(_t(Oe,"notifications"),hs("userId","==",y.uid),fr("timestamp","desc")),R=(await Cn(A)).docs.map(z=>({id:z.id,...z.data()}));w(R)})()},[i,y]);const j=async C=>{if(y)try{await deleteDoc(doc(Oe,"notifications",C)),w(x.filter(A=>A.id!==C))}catch{console.error("Failed to dismiss notification")}},S=async C=>{try{await setDoc(doc(Oe,"notifications",C),{read:!0},{merge:!0}),w(x.map(A=>A.id===C?{...A,read:!0}:A))}catch{console.error("Failed to mark as read")}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-0",children:[s.jsx(JD,{onViewAll:t}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-4",children:s.jsx(cO,{notifications:x,onDismiss:j,onMarkAsRead:S})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"relative cursor-pointer shadow-subtle rounded-lg transition-smooth hover:shadow-card",onClick:r,children:[s.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search books by title, author, ISBN, or topic...",value:f,onChange:C=>m(C.target.value),onFocus:r,className:"pl-12 pr-4 h-14 text-lg bg-white border-2 border-blue-600/30 focus:border-blue-600 focus-glow cursor-pointer",readOnly:!0})]}),s.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[s.jsx(J,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Fiction"}),s.jsx(J,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Science"}),s.jsx(J,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Business"}),s.jsx(J,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Art"}),s.jsx(J,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Textbooks"})]})]}),s.jsx("div",{className:"max-w-7xl mx-auto px-4",children:s.jsx(uO,{context:"home",onBookClick:e})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 text-3xl mb-1",children:"Book Marketplace"}),s.jsx("p",{className:"text-gray-600",children:"Buy, sell, or rent your favorite books"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:c==="buy"?"default":"outline",onClick:()=>u("buy"),className:c==="buy"?"bg-blue-600 hover:bg-blue-700 transition-smooth btn-scale":"hover:bg-gray-50",children:"Buy"}),s.jsx(J,{variant:c==="sell"?"default":"outline",onClick:()=>u("sell"),className:c==="sell"?"bg-blue-600 hover:bg-blue-700 transition-smooth btn-scale":"hover:bg-gray-50",children:"Sell"}),s.jsx(J,{variant:c==="rent"?"default":"outline",onClick:()=>u("rent"),className:c==="rent"?"bg-blue-600 hover:bg-blue-700 transition-smooth btn-scale":"hover:bg-gray-50",children:"Rent"})]})]}),s.jsx(eO,{activeTab:c,onNavigateToBook:e})]}),s.jsx("div",{className:"bg-gradient-to-b from-blue-50 to-transparent py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 text-3xl mb-2",children:"Book Communities"}),s.jsx("p",{className:"text-gray-600",children:"Connect with readers who share your interests"})]}),s.jsx(J,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white transition-smooth btn-scale shadow-subtle",children:"Browse All "})]}),s.jsx(lO,{onNavigateToCommunities:n,isLoggedIn:i})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"15K+"}),s.jsx("div",{className:"text-gray-600",children:"Books Listed"})]}),s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"8K+"}),s.jsx("div",{className:"text-gray-600",children:"Active Users"})]}),s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"120+"}),s.jsx("div",{className:"text-gray-600",children:"Communities"})]}),s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"5K+"}),s.jsx("div",{className:"text-gray-600",children:"Happy Readers"})]})]})})]})}const hO="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ol(n){const[e,t]=_.useState(!1),r=()=>{t(!0)},{src:i,alt:c,style:u,className:f,...m}=n;return e?s.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${f??""}`,style:u,children:s.jsx("div",{className:"flex items-center justify-center w-full h-full",children:s.jsx("img",{src:hO,alt:"Error loading image",...m,"data-original-url":i})})}):s.jsx("img",{src:i,alt:c,className:f,style:u,...m,onError:r})}function fO({book:n,onClick:e}){const t=r=>{switch(r){case"New":case"Like New":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{onClick:e,className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all cursor-pointer overflow-hidden group",children:[s.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-gray-100",children:s.jsx(ol,{src:n.images[0],alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] line-clamp-1",children:n.title}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:n.author})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:t(n.condition),children:n.condition}),s.jsx("span",{className:"text-xs text-gray-500",children:n.category})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",n.price.toFixed(2)]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-[#C4A672] flex items-center justify-center text-white text-xs",children:n.seller.avatar}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-xs text-gray-600 truncate",children:n.seller.name})}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lc,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"text-xs text-gray-600",children:n.seller.rating})]})]})]})]})]})}var mO=qv[" useId ".trim().toString()]||(()=>{}),pO=0;function Yi(n){const[e,t]=_.useState(mO());return jn(()=>{t(r=>r??String(pO++))},[n]),n||(e?`radix-${e}`:"")}function gO(n,e=globalThis?.document){const t=Un(n);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var xO="DismissableLayer",Tv="dismissableLayer.update",vO="dismissableLayer.pointerDownOutside",yO="dismissableLayer.focusOutside",yN,CC=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dp=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:u,onDismiss:f,...m}=n,x=_.useContext(CC),[w,y]=_.useState(null),j=w?.ownerDocument??globalThis?.document,[,S]=_.useState({}),C=ct(e,D=>y(D)),A=Array.from(x.layers),[M]=[...x.layersWithOutsidePointerEventsDisabled].slice(-1),R=A.indexOf(M),z=w?A.indexOf(w):-1,W=x.layersWithOutsidePointerEventsDisabled.size>0,G=z>=R,K=bO(D=>{const P=D.target,V=[...x.branches].some(B=>B.contains(P));!G||V||(i?.(D),u?.(D),D.defaultPrevented||f?.())},j),ee=NO(D=>{const P=D.target;[...x.branches].some(B=>B.contains(P))||(c?.(D),u?.(D),D.defaultPrevented||f?.())},j);return gO(D=>{z===x.layers.size-1&&(r?.(D),!D.defaultPrevented&&f&&(D.preventDefault(),f()))},j),_.useEffect(()=>{if(w)return t&&(x.layersWithOutsidePointerEventsDisabled.size===0&&(yN=j.body.style.pointerEvents,j.body.style.pointerEvents="none"),x.layersWithOutsidePointerEventsDisabled.add(w)),x.layers.add(w),wN(),()=>{t&&x.layersWithOutsidePointerEventsDisabled.size===1&&(j.body.style.pointerEvents=yN)}},[w,j,t,x]),_.useEffect(()=>()=>{w&&(x.layers.delete(w),x.layersWithOutsidePointerEventsDisabled.delete(w),wN())},[w,x]),_.useEffect(()=>{const D=()=>S({});return document.addEventListener(Tv,D),()=>document.removeEventListener(Tv,D)},[]),s.jsx(Ye.div,{...m,ref:C,style:{pointerEvents:W?G?"auto":"none":void 0,...n.style},onFocusCapture:Le(n.onFocusCapture,ee.onFocusCapture),onBlurCapture:Le(n.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:Le(n.onPointerDownCapture,K.onPointerDownCapture)})});Dp.displayName=xO;var wO="DismissableLayerBranch",_O=_.forwardRef((n,e)=>{const t=_.useContext(CC),r=_.useRef(null),i=ct(e,r);return _.useEffect(()=>{const c=r.current;if(c)return t.branches.add(c),()=>{t.branches.delete(c)}},[t.branches]),s.jsx(Ye.div,{...n,ref:i})});_O.displayName=wO;function bO(n,e=globalThis?.document){const t=Un(n),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const c=f=>{if(f.target&&!r.current){let m=function(){SC(vO,t,x,{discrete:!0})};const x={originalEvent:f};f.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=m,e.addEventListener("click",i.current,{once:!0})):m()}else e.removeEventListener("click",i.current);r.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",c),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function NO(n,e=globalThis?.document){const t=Un(n),r=_.useRef(!1);return _.useEffect(()=>{const i=c=>{c.target&&!r.current&&SC(yO,t,{originalEvent:c},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wN(){const n=new CustomEvent(Tv);document.dispatchEvent(n)}function SC(n,e,t,{discrete:r}){const i=t.originalEvent.target,c=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?S1(i,c):i.dispatchEvent(c)}var Dx="focusScope.autoFocusOnMount",Ox="focusScope.autoFocusOnUnmount",_N={bubbles:!1,cancelable:!0},jO="FocusScope",Op=_.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:c,...u}=n,[f,m]=_.useState(null),x=Un(i),w=Un(c),y=_.useRef(null),j=ct(e,A=>m(A)),S=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let A=function(W){if(S.paused||!f)return;const G=W.target;f.contains(G)?y.current=G:Go(y.current,{select:!0})},M=function(W){if(S.paused||!f)return;const G=W.relatedTarget;G!==null&&(f.contains(G)||Go(y.current,{select:!0}))},R=function(W){if(document.activeElement===document.body)for(const K of W)K.removedNodes.length>0&&Go(f)};document.addEventListener("focusin",A),document.addEventListener("focusout",M);const z=new MutationObserver(R);return f&&z.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",M),z.disconnect()}}},[r,f,S.paused]),_.useEffect(()=>{if(f){NN.add(S);const A=document.activeElement;if(!f.contains(A)){const R=new CustomEvent(Dx,_N);f.addEventListener(Dx,x),f.dispatchEvent(R),R.defaultPrevented||(CO(kO(EC(f)),{select:!0}),document.activeElement===A&&Go(f))}return()=>{f.removeEventListener(Dx,x),setTimeout(()=>{const R=new CustomEvent(Ox,_N);f.addEventListener(Ox,w),f.dispatchEvent(R),R.defaultPrevented||Go(A??document.body,{select:!0}),f.removeEventListener(Ox,w),NN.remove(S)},0)}}},[f,x,w,S]);const C=_.useCallback(A=>{if(!t&&!r||S.paused)return;const M=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,R=document.activeElement;if(M&&R){const z=A.currentTarget,[W,G]=SO(z);W&&G?!A.shiftKey&&R===G?(A.preventDefault(),t&&Go(W,{select:!0})):A.shiftKey&&R===W&&(A.preventDefault(),t&&Go(G,{select:!0})):R===z&&A.preventDefault()}},[t,r,S.paused]);return s.jsx(Ye.div,{tabIndex:-1,...u,ref:j,onKeyDown:C})});Op.displayName=jO;function CO(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Go(r,{select:e}),document.activeElement!==t)return}function SO(n){const e=EC(n),t=bN(e,n),r=bN(e.reverse(),n);return[t,r]}function EC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function bN(n,e){for(const t of n)if(!EO(t,{upTo:e}))return t}function EO(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function TO(n){return n instanceof HTMLInputElement&&"select"in n}function Go(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&TO(n)&&e&&n.select()}}var NN=AO();function AO(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=jN(n,e),n.unshift(e)},remove(e){n=jN(n,e),n[0]?.resume()}}}function jN(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function kO(n){return n.filter(e=>e.tagName!=="A")}var PO="Portal",Fp=_.forwardRef((n,e)=>{const{container:t,...r}=n,[i,c]=_.useState(!1);jn(()=>c(!0),[]);const u=t||i&&globalThis?.document?.body;return u?t4.createPortal(s.jsx(Ye.div,{...r,ref:e}),u):null});Fp.displayName=PO;var Fx=0;function r0(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??CN()),document.body.insertAdjacentElement("beforeend",n[1]??CN()),Fx++,()=>{Fx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Fx--}},[])}function CN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Ui=function(){return Ui=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Ui.apply(this,arguments)};function TC(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IO(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,c;r<i;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return n.concat(c||Array.prototype.slice.call(e))}var gm="right-scroll-bar-position",xm="width-before-scroll-bar",RO="with-scroll-bars-hidden",LO="--removed-body-scroll-bar-size";function Vx(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function MO(n,e){var t=_.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var DO=typeof window<"u"?_.useLayoutEffect:_.useEffect,SN=new WeakMap;function OO(n,e){var t=MO(null,function(r){return n.forEach(function(i){return Vx(i,r)})});return DO(function(){var r=SN.get(t);if(r){var i=new Set(r),c=new Set(n),u=t.current;i.forEach(function(f){c.has(f)||Vx(f,null)}),c.forEach(function(f){i.has(f)||Vx(f,u)})}SN.set(t,n)},[n]),t}function FO(n){return n}function VO(n,e){e===void 0&&(e=FO);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(c){var u=e(c,r);return t.push(u),function(){t=t.filter(function(f){return f!==u})}},assignSyncMedium:function(c){for(r=!0;t.length;){var u=t;t=[],u.forEach(c)}t={push:function(f){return c(f)},filter:function(){return t}}},assignMedium:function(c){r=!0;var u=[];if(t.length){var f=t;t=[],f.forEach(c),u=t}var m=function(){var w=u;u=[],w.forEach(c)},x=function(){return Promise.resolve().then(m)};x(),t={push:function(w){u.push(w),x()},filter:function(w){return u=u.filter(w),t}}}};return i}function BO(n){n===void 0&&(n={});var e=VO(null);return e.options=Ui({async:!0,ssr:!1},n),e}var AC=function(n){var e=n.sideCar,t=TC(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Ui({},t))};AC.isSideCarExport=!0;function zO(n,e){return n.useMedium(e),AC}var kC=BO(),Bx=function(){},Vp=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Bx,onWheelCapture:Bx,onTouchMoveCapture:Bx}),i=r[0],c=r[1],u=n.forwardProps,f=n.children,m=n.className,x=n.removeScrollBar,w=n.enabled,y=n.shards,j=n.sideCar,S=n.noRelative,C=n.noIsolation,A=n.inert,M=n.allowPinchZoom,R=n.as,z=R===void 0?"div":R,W=n.gapMode,G=TC(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),K=j,ee=OO([t,e]),D=Ui(Ui({},G),i);return _.createElement(_.Fragment,null,w&&_.createElement(K,{sideCar:kC,removeScrollBar:x,shards:y,noRelative:S,noIsolation:C,inert:A,setCallbacks:c,allowPinchZoom:!!M,lockRef:t,gapMode:W}),u?_.cloneElement(_.Children.only(f),Ui(Ui({},D),{ref:ee})):_.createElement(z,Ui({},D,{className:m,ref:ee}),f))});Vp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vp.classNames={fullWidth:xm,zeroRight:gm};var UO=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $O(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=UO();return e&&n.setAttribute("nonce",e),n}function HO(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function WO(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var qO=function(){var n=0,e=null;return{add:function(t){n==0&&(e=$O())&&(HO(e,t),WO(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},GO=function(){var n=qO();return function(e,t){_.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},PC=function(){var n=GO(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},KO={left:0,top:0,right:0,gap:0},zx=function(n){return parseInt(n||"",10)||0},ZO=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[zx(t),zx(r),zx(i)]},YO=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return KO;var e=ZO(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},QO=PC(),Tu="data-scroll-locked",XO=function(n,e,t,r){var i=n.left,c=n.top,u=n.right,f=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(RO,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(f,"px ").concat(r,`;
  }
  body[`).concat(Tu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(f,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gm,` {
    right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(xm,` {
    margin-right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(gm," .").concat(gm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xm," .").concat(xm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Tu,`] {
    `).concat(LO,": ").concat(f,`px;
  }
`)},EN=function(){var n=parseInt(document.body.getAttribute(Tu)||"0",10);return isFinite(n)?n:0},JO=function(){_.useEffect(function(){return document.body.setAttribute(Tu,(EN()+1).toString()),function(){var n=EN()-1;n<=0?document.body.removeAttribute(Tu):document.body.setAttribute(Tu,n.toString())}},[])},eF=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;JO();var c=_.useMemo(function(){return YO(i)},[i]);return _.createElement(QO,{styles:XO(c,!e,i,t?"":"!important")})},Av=!1;if(typeof window<"u")try{var em=Object.defineProperty({},"passive",{get:function(){return Av=!0,!0}});window.addEventListener("test",em,em),window.removeEventListener("test",em,em)}catch{Av=!1}var fu=Av?{passive:!1}:!1,tF=function(n){return n.tagName==="TEXTAREA"},IC=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!tF(n)&&t[e]==="visible")},nF=function(n){return IC(n,"overflowY")},sF=function(n){return IC(n,"overflowX")},TN=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=RC(n,r);if(i){var c=LC(n,r),u=c[1],f=c[2];if(u>f)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},rF=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},iF=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},RC=function(n,e){return n==="v"?nF(e):sF(e)},LC=function(n,e){return n==="v"?rF(e):iF(e)},aF=function(n,e){return n==="h"&&e==="rtl"?-1:1},oF=function(n,e,t,r,i){var c=aF(n,window.getComputedStyle(e).direction),u=c*r,f=t.target,m=e.contains(f),x=!1,w=u>0,y=0,j=0;do{if(!f)break;var S=LC(n,f),C=S[0],A=S[1],M=S[2],R=A-M-c*C;(C||R)&&RC(n,f)&&(y+=R,j+=C);var z=f.parentNode;f=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!m&&f!==document.body||m&&(e.contains(f)||e===f));return(w&&Math.abs(y)<1||!w&&Math.abs(j)<1)&&(x=!0),x},tm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},AN=function(n){return[n.deltaX,n.deltaY]},kN=function(n){return n&&"current"in n?n.current:n},lF=function(n,e){return n[0]===e[0]&&n[1]===e[1]},cF=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},uF=0,mu=[];function dF(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),i=_.useState(uF++)[0],c=_.useState(PC)[0],u=_.useRef(n);_.useEffect(function(){u.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var A=IO([n.lockRef.current],(n.shards||[]).map(kN),!0).filter(Boolean);return A.forEach(function(M){return M.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),A.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var f=_.useCallback(function(A,M){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!u.current.allowPinchZoom;var R=tm(A),z=t.current,W="deltaX"in A?A.deltaX:z[0]-R[0],G="deltaY"in A?A.deltaY:z[1]-R[1],K,ee=A.target,D=Math.abs(W)>Math.abs(G)?"h":"v";if("touches"in A&&D==="h"&&ee.type==="range")return!1;var P=window.getSelection(),V=P&&P.anchorNode,B=V?V===ee||V.contains(ee):!1;if(B)return!1;var U=TN(D,ee);if(!U)return!0;if(U?K=D:(K=D==="v"?"h":"v",U=TN(D,ee)),!U)return!1;if(!r.current&&"changedTouches"in A&&(W||G)&&(r.current=K),!K)return!0;var q=r.current||K;return oF(q,M,A,q==="h"?W:G)},[]),m=_.useCallback(function(A){var M=A;if(!(!mu.length||mu[mu.length-1]!==c)){var R="deltaY"in M?AN(M):tm(M),z=e.current.filter(function(K){return K.name===M.type&&(K.target===M.target||M.target===K.shadowParent)&&lF(K.delta,R)})[0];if(z&&z.should){M.cancelable&&M.preventDefault();return}if(!z){var W=(u.current.shards||[]).map(kN).filter(Boolean).filter(function(K){return K.contains(M.target)}),G=W.length>0?f(M,W[0]):!u.current.noIsolation;G&&M.cancelable&&M.preventDefault()}}},[]),x=_.useCallback(function(A,M,R,z){var W={name:A,delta:M,target:R,should:z,shadowParent:hF(R)};e.current.push(W),setTimeout(function(){e.current=e.current.filter(function(G){return G!==W})},1)},[]),w=_.useCallback(function(A){t.current=tm(A),r.current=void 0},[]),y=_.useCallback(function(A){x(A.type,AN(A),A.target,f(A,n.lockRef.current))},[]),j=_.useCallback(function(A){x(A.type,tm(A),A.target,f(A,n.lockRef.current))},[]);_.useEffect(function(){return mu.push(c),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:j}),document.addEventListener("wheel",m,fu),document.addEventListener("touchmove",m,fu),document.addEventListener("touchstart",w,fu),function(){mu=mu.filter(function(A){return A!==c}),document.removeEventListener("wheel",m,fu),document.removeEventListener("touchmove",m,fu),document.removeEventListener("touchstart",w,fu)}},[]);var S=n.removeScrollBar,C=n.inert;return _.createElement(_.Fragment,null,C?_.createElement(c,{styles:cF(i)}):null,S?_.createElement(eF,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function hF(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const fF=zO(kC,dF);var Bp=_.forwardRef(function(n,e){return _.createElement(Vp,Ui({},n,{ref:e,sideCar:fF}))});Bp.classNames=Vp.classNames;var mF=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},pu=new WeakMap,nm=new WeakMap,sm={},Ux=0,MC=function(n){return n&&(n.host||MC(n.parentNode))},pF=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=MC(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},gF=function(n,e,t,r){var i=pF(e,Array.isArray(n)?n:[n]);sm[t]||(sm[t]=new WeakMap);var c=sm[t],u=[],f=new Set,m=new Set(i),x=function(y){!y||f.has(y)||(f.add(y),x(y.parentNode))};i.forEach(x);var w=function(y){!y||m.has(y)||Array.prototype.forEach.call(y.children,function(j){if(f.has(j))w(j);else try{var S=j.getAttribute(r),C=S!==null&&S!=="false",A=(pu.get(j)||0)+1,M=(c.get(j)||0)+1;pu.set(j,A),c.set(j,M),u.push(j),A===1&&C&&nm.set(j,!0),M===1&&j.setAttribute(t,"true"),C||j.setAttribute(r,"true")}catch(R){console.error("aria-hidden: cannot operate on ",j,R)}})};return w(e),f.clear(),Ux++,function(){u.forEach(function(y){var j=pu.get(y)-1,S=c.get(y)-1;pu.set(y,j),c.set(y,S),j||(nm.has(y)||y.removeAttribute(r),nm.delete(y)),S||y.removeAttribute(t)}),Ux--,Ux||(pu=new WeakMap,pu=new WeakMap,nm=new WeakMap,sm={})}},i0=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=mF(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),gF(r,i,t,"aria-hidden")):function(){return null}};function xF(n){const e=vF(n),t=_.forwardRef((r,i)=>{const{children:c,...u}=r,f=_.Children.toArray(c),m=f.find(wF);if(m){const x=m.props.children,w=f.map(y=>y===m?_.Children.count(x)>1?_.Children.only(null):_.isValidElement(x)?x.props.children:null:y);return s.jsx(e,{...u,ref:i,children:_.isValidElement(x)?_.cloneElement(x,void 0,w):null})}return s.jsx(e,{...u,ref:i,children:c})});return t.displayName=`${n}.Slot`,t}function vF(n){const e=_.forwardRef((t,r)=>{const{children:i,...c}=t;if(_.isValidElement(i)){const u=bF(i),f=_F(c,i.props);return i.type!==_.Fragment&&(f.ref=r?eo(r,u):u),_.cloneElement(i,f)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var yF=Symbol("radix.slottable");function wF(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===yF}function _F(n,e){const t={...e};for(const r in e){const i=n[r],c=e[r];/^on[A-Z]/.test(r)?i&&c?t[r]=(...f)=>{const m=c(...f);return i(...f),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...c}:r==="className"&&(t[r]=[i,c].filter(Boolean).join(" "))}return{...n,...t}}function bF(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var zp="Dialog",[DC,OC]=Ps(zp),[NF,pi]=DC(zp),FC=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:c,modal:u=!0}=n,f=_.useRef(null),m=_.useRef(null),[x,w]=Ji({prop:r,defaultProp:i??!1,onChange:c,caller:zp});return s.jsx(NF,{scope:e,triggerRef:f,contentRef:m,contentId:Yi(),titleId:Yi(),descriptionId:Yi(),open:x,onOpenChange:w,onOpenToggle:_.useCallback(()=>w(y=>!y),[w]),modal:u,children:t})};FC.displayName=zp;var VC="DialogTrigger",BC=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=pi(VC,t),c=ct(e,i.triggerRef);return s.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":l0(i.open),...r,ref:c,onClick:Le(n.onClick,i.onOpenToggle)})});BC.displayName=VC;var a0="DialogPortal",[jF,zC]=DC(a0,{forceMount:void 0}),UC=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,c=pi(a0,e);return s.jsx(jF,{scope:e,forceMount:t,children:_.Children.map(r,u=>s.jsx(ks,{present:t||c.open,children:s.jsx(Fp,{asChild:!0,container:i,children:u})}))})};UC.displayName=a0;var qm="DialogOverlay",$C=_.forwardRef((n,e)=>{const t=zC(qm,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,c=pi(qm,n.__scopeDialog);return c.modal?s.jsx(ks,{present:r||c.open,children:s.jsx(SF,{...i,ref:e})}):null});$C.displayName=qm;var CF=xF("DialogOverlay.RemoveScroll"),SF=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=pi(qm,t);return s.jsx(Bp,{as:CF,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Ye.div,{"data-state":l0(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),gc="DialogContent",HC=_.forwardRef((n,e)=>{const t=zC(gc,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,c=pi(gc,n.__scopeDialog);return s.jsx(ks,{present:r||c.open,children:c.modal?s.jsx(EF,{...i,ref:e}):s.jsx(TF,{...i,ref:e})})});HC.displayName=gc;var EF=_.forwardRef((n,e)=>{const t=pi(gc,n.__scopeDialog),r=_.useRef(null),i=ct(e,t.contentRef,r);return _.useEffect(()=>{const c=r.current;if(c)return i0(c)},[]),s.jsx(WC,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(n.onCloseAutoFocus,c=>{c.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Le(n.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&c.preventDefault()}),onFocusOutside:Le(n.onFocusOutside,c=>c.preventDefault())})}),TF=_.forwardRef((n,e)=>{const t=pi(gc,n.__scopeDialog),r=_.useRef(!1),i=_.useRef(!1);return s.jsx(WC,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{n.onCloseAutoFocus?.(c),c.defaultPrevented||(r.current||t.triggerRef.current?.focus(),c.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:c=>{n.onInteractOutside?.(c),c.defaultPrevented||(r.current=!0,c.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const u=c.target;t.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&i.current&&c.preventDefault()}})}),WC=_.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:c,...u}=n,f=pi(gc,t),m=_.useRef(null),x=ct(e,m);return r0(),s.jsxs(s.Fragment,{children:[s.jsx(Op,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:c,children:s.jsx(Dp,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":l0(f.open),...u,ref:x,onDismiss:()=>f.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(kF,{titleId:f.titleId}),s.jsx(IF,{contentRef:m,descriptionId:f.descriptionId})]})]})}),o0="DialogTitle",qC=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=pi(o0,t);return s.jsx(Ye.h2,{id:i.titleId,...r,ref:e})});qC.displayName=o0;var GC="DialogDescription",KC=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=pi(GC,t);return s.jsx(Ye.p,{id:i.descriptionId,...r,ref:e})});KC.displayName=GC;var ZC="DialogClose",YC=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=pi(ZC,t);return s.jsx(Ye.button,{type:"button",...r,ref:e,onClick:Le(n.onClick,()=>i.onOpenChange(!1))})});YC.displayName=ZC;function l0(n){return n?"open":"closed"}var QC="DialogTitleWarning",[AF,XC]=h4(QC,{contentName:gc,titleName:o0,docsSlug:"dialog"}),kF=({titleId:n})=>{const e=XC(QC),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},PF="DialogDescriptionWarning",IF=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XC(PF).contentName}}.`;return _.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},JC=FC,RF=BC,eS=UC,c0=$C,u0=HC,tS=qC,nS=KC,d0=YC;function $a({...n}){return s.jsx(JC,{"data-slot":"dialog",...n})}function LF({...n}){return s.jsx(eS,{"data-slot":"dialog-portal",...n})}const sS=_.forwardRef(({className:n,...e},t)=>s.jsx(c0,{ref:t,"data-slot":"dialog-overlay",className:ft("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e}));sS.displayName=c0.displayName;const Qi=_.forwardRef(({className:n,children:e,...t},r)=>s.jsxs(LF,{"data-slot":"dialog-portal",children:[s.jsx(sS,{}),s.jsxs(u0,{ref:r,"data-slot":"dialog-content",className:ft("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,s.jsxs(d0,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(Ot,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qi.displayName=u0.displayName;function xl({className:n,...e}){return s.jsx("div",{"data-slot":"dialog-header",className:ft("flex flex-col gap-2 text-center sm:text-left",n),...e})}function vl({className:n,...e}){return s.jsx(tS,{"data-slot":"dialog-title",className:ft("text-lg leading-none font-semibold",n),...e})}function ui({className:n,...e}){return s.jsx(nS,{"data-slot":"dialog-description",className:ft("text-muted-foreground text-sm",n),...e})}function MF(n,e=[]){let t=[];function r(c,u){const f=_.createContext(u);f.displayName=c+"Context";const m=t.length;t=[...t,u];const x=y=>{const{scope:j,children:S,...C}=y,A=j?.[n]?.[m]||f,M=_.useMemo(()=>C,Object.values(C));return s.jsx(A.Provider,{value:M,children:S})};x.displayName=c+"Provider";function w(y,j){const S=j?.[n]?.[m]||f,C=_.useContext(S);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${c}\``)}return[x,w]}const i=()=>{const c=t.map(u=>_.createContext(u));return function(f){const m=f?.[n]||c;return _.useMemo(()=>({[`__scope${n}`]:{...f,[n]:m}}),[f,m])}};return i.scopeName=n,[r,DF(i,...e)]}function DF(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const u=r.reduce((f,{useScope:m,scopeName:x})=>{const y=m(c)[`__scope${x}`];return{...f,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return t.scopeName=e.scopeName,t}var OF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],h0=OF.reduce((n,e)=>{const t=ap(`Primitive.${e}`),r=_.forwardRef((i,c)=>{const{asChild:u,...f}=i,m=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(m,{...f,ref:c})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),$x={exports:{}},Hx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PN;function FF(){if(PN)return Hx;PN=1;var n=np();function e(y,j){return y===j&&(y!==0||1/y===1/j)||y!==y&&j!==j}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,c=n.useLayoutEffect,u=n.useDebugValue;function f(y,j){var S=j(),C=r({inst:{value:S,getSnapshot:j}}),A=C[0].inst,M=C[1];return c(function(){A.value=S,A.getSnapshot=j,m(A)&&M({inst:A})},[y,S,j]),i(function(){return m(A)&&M({inst:A}),y(function(){m(A)&&M({inst:A})})},[y]),u(S),S}function m(y){var j=y.getSnapshot;y=y.value;try{var S=j();return!t(y,S)}catch{return!0}}function x(y,j){return j()}var w=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:f;return Hx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:w,Hx}var IN;function VF(){return IN||(IN=1,$x.exports=FF()),$x.exports}var BF=VF();function zF(){return BF.useSyncExternalStore(UF,()=>!0,()=>!1)}function UF(){return()=>{}}var f0="Avatar",[$F]=MF(f0),[HF,rS]=$F(f0),iS=_.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,c]=_.useState("idle");return s.jsx(HF,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:c,children:s.jsx(h0.span,{...r,ref:e})})});iS.displayName=f0;var aS="AvatarImage",WF=_.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...c}=n,u=rS(aS,t),f=qF(r,c),m=Un(x=>{i(x),u.onImageLoadingStatusChange(x)});return jn(()=>{f!=="idle"&&m(f)},[f,m]),f==="loaded"?s.jsx(h0.img,{...c,ref:e,src:r}):null});WF.displayName=aS;var oS="AvatarFallback",lS=_.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,c=rS(oS,t),[u,f]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const m=window.setTimeout(()=>f(!0),r);return()=>window.clearTimeout(m)}},[r]),u&&c.imageLoadingStatus!=="loaded"?s.jsx(h0.span,{...i,ref:e}):null});lS.displayName=oS;function RN(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function qF(n,{referrerPolicy:e,crossOrigin:t}){const r=zF(),i=_.useRef(null),c=r?(i.current||(i.current=new window.Image),i.current):null,[u,f]=_.useState(()=>RN(c,n));return jn(()=>{f(RN(c,n))},[c,n]),jn(()=>{const m=y=>()=>{f(y)};if(!c)return;const x=m("loaded"),w=m("error");return c.addEventListener("load",x),c.addEventListener("error",w),e&&(c.referrerPolicy=e),typeof t=="string"&&(c.crossOrigin=t),()=>{c.removeEventListener("load",x),c.removeEventListener("error",w)}},[c,t,e]),u}var GF=iS,KF=lS;function ZF({className:n,...e}){return s.jsx(GF,{"data-slot":"avatar",className:ft("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function YF({className:n,...e}){return s.jsx(KF,{"data-slot":"avatar-fallback",className:ft("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}var QF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],XF=QF.reduce((n,e)=>{const t=ap(`Primitive.${e}`),r=_.forwardRef((i,c)=>{const{asChild:u,...f}=i,m=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(m,{...f,ref:c})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),JF="Separator",LN="horizontal",e7=["horizontal","vertical"],cS=_.forwardRef((n,e)=>{const{decorative:t,orientation:r=LN,...i}=n,c=t7(r)?r:LN,f=t?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return s.jsx(XF.div,{"data-orientation":c,...f,...i,ref:e})});cS.displayName=JF;function t7(n){return e7.includes(n)}var n7=cS;function zr({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return s.jsx(n7,{"data-slot":"separator-root",decorative:t,orientation:e,className:ft("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}var s7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],r7=s7.reduce((n,e)=>{const t=ap(`Primitive.${e}`),r=_.forwardRef((i,c)=>{const{asChild:u,...f}=i,m=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(m,{...f,ref:c})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),i7="Label",uS=_.forwardRef((n,e)=>s.jsx(r7.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));uS.displayName=i7;var a7=uS;function ke({className:n,...e}){return s.jsx(a7,{"data-slot":"label",className:ft("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function MN(n){const e=o7(n),t=_.forwardRef((r,i)=>{const{children:c,...u}=r,f=_.Children.toArray(c),m=f.find(c7);if(m){const x=m.props.children,w=f.map(y=>y===m?_.Children.count(x)>1?_.Children.only(null):_.isValidElement(x)?x.props.children:null:y);return s.jsx(e,{...u,ref:i,children:_.isValidElement(x)?_.cloneElement(x,void 0,w):null})}return s.jsx(e,{...u,ref:i,children:c})});return t.displayName=`${n}.Slot`,t}function o7(n){const e=_.forwardRef((t,r)=>{const{children:i,...c}=t;if(_.isValidElement(i)){const u=d7(i),f=u7(c,i.props);return i.type!==_.Fragment&&(f.ref=r?eo(r,u):u),_.cloneElement(i,f)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var l7=Symbol("radix.slottable");function c7(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===l7}function u7(n,e){const t={...e};for(const r in e){const i=n[r],c=e[r];/^on[A-Z]/.test(r)?i&&c?t[r]=(...f)=>{const m=c(...f);return i(...f),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...c}:r==="className"&&(t[r]=[i,c].filter(Boolean).join(" "))}return{...n,...t}}function d7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Up(n){const e=n+"CollectionProvider",[t,r]=Ps(e),[i,c]=t(e,{collectionRef:{current:null},itemMap:new Map}),u=A=>{const{scope:M,children:R}=A,z=ds.useRef(null),W=ds.useRef(new Map).current;return s.jsx(i,{scope:M,itemMap:W,collectionRef:z,children:R})};u.displayName=e;const f=n+"CollectionSlot",m=MN(f),x=ds.forwardRef((A,M)=>{const{scope:R,children:z}=A,W=c(f,R),G=ct(M,W.collectionRef);return s.jsx(m,{ref:G,children:z})});x.displayName=f;const w=n+"CollectionItemSlot",y="data-radix-collection-item",j=MN(w),S=ds.forwardRef((A,M)=>{const{scope:R,children:z,...W}=A,G=ds.useRef(null),K=ct(M,G),ee=c(w,R);return ds.useEffect(()=>(ee.itemMap.set(G,{ref:G,...W}),()=>void ee.itemMap.delete(G))),s.jsx(j,{[y]:"",ref:K,children:z})});S.displayName=w;function C(A){const M=c(n+"CollectionConsumer",A);return ds.useCallback(()=>{const z=M.collectionRef.current;if(!z)return[];const W=Array.from(z.querySelectorAll(`[${y}]`));return Array.from(M.itemMap.values()).sort((ee,D)=>W.indexOf(ee.ref.current)-W.indexOf(D.ref.current))},[M.collectionRef,M.itemMap])}return[{Provider:u,Slot:x,ItemSlot:S},C,r]}var Wx="rovingFocusGroup.onEntryFocus",h7={bubbles:!1,cancelable:!0},zh="RovingFocusGroup",[kv,dS,f7]=Up(zh),[m7,ad]=Ps(zh,[f7]),[p7,g7]=m7(zh),hS=_.forwardRef((n,e)=>s.jsx(kv.Provider,{scope:n.__scopeRovingFocusGroup,children:s.jsx(kv.Slot,{scope:n.__scopeRovingFocusGroup,children:s.jsx(x7,{...n,ref:e})})}));hS.displayName=zh;var x7=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:m,onEntryFocus:x,preventScrollOnEntryFocus:w=!1,...y}=n,j=_.useRef(null),S=ct(e,j),C=bc(c),[A,M]=Ji({prop:u,defaultProp:f??null,onChange:m,caller:zh}),[R,z]=_.useState(!1),W=Un(x),G=dS(t),K=_.useRef(!1),[ee,D]=_.useState(0);return _.useEffect(()=>{const P=j.current;if(P)return P.addEventListener(Wx,W),()=>P.removeEventListener(Wx,W)},[W]),s.jsx(p7,{scope:t,orientation:r,dir:C,loop:i,currentTabStopId:A,onItemFocus:_.useCallback(P=>M(P),[M]),onItemShiftTab:_.useCallback(()=>z(!0),[]),onFocusableItemAdd:_.useCallback(()=>D(P=>P+1),[]),onFocusableItemRemove:_.useCallback(()=>D(P=>P-1),[]),children:s.jsx(Ye.div,{tabIndex:R||ee===0?-1:0,"data-orientation":r,...y,ref:S,style:{outline:"none",...n.style},onMouseDown:Le(n.onMouseDown,()=>{K.current=!0}),onFocus:Le(n.onFocus,P=>{const V=!K.current;if(P.target===P.currentTarget&&V&&!R){const B=new CustomEvent(Wx,h7);if(P.currentTarget.dispatchEvent(B),!B.defaultPrevented){const U=G().filter(ie=>ie.focusable),q=U.find(ie=>ie.active),H=U.find(ie=>ie.id===A),be=[q,H,...U].filter(Boolean).map(ie=>ie.ref.current);pS(be,w)}}K.current=!1}),onBlur:Le(n.onBlur,()=>z(!1))})})}),fS="RovingFocusGroupItem",mS=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:c,children:u,...f}=n,m=Yi(),x=c||m,w=g7(fS,t),y=w.currentTabStopId===x,j=dS(t),{onFocusableItemAdd:S,onFocusableItemRemove:C,currentTabStopId:A}=w;return _.useEffect(()=>{if(r)return S(),()=>C()},[r,S,C]),s.jsx(kv.ItemSlot,{scope:t,id:x,focusable:r,active:i,children:s.jsx(Ye.span,{tabIndex:y?0:-1,"data-orientation":w.orientation,...f,ref:e,onMouseDown:Le(n.onMouseDown,M=>{r?w.onItemFocus(x):M.preventDefault()}),onFocus:Le(n.onFocus,()=>w.onItemFocus(x)),onKeyDown:Le(n.onKeyDown,M=>{if(M.key==="Tab"&&M.shiftKey){w.onItemShiftTab();return}if(M.target!==M.currentTarget)return;const R=w7(M,w.orientation,w.dir);if(R!==void 0){if(M.metaKey||M.ctrlKey||M.altKey||M.shiftKey)return;M.preventDefault();let W=j().filter(G=>G.focusable).map(G=>G.ref.current);if(R==="last")W.reverse();else if(R==="prev"||R==="next"){R==="prev"&&W.reverse();const G=W.indexOf(M.currentTarget);W=w.loop?_7(W,G+1):W.slice(G+1)}setTimeout(()=>pS(W))}}),children:typeof u=="function"?u({isCurrentTabStop:y,hasTabStop:A!=null}):u})})});mS.displayName=fS;var v7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function y7(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function w7(n,e,t){const r=y7(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return v7[r]}function pS(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function _7(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var m0=hS,p0=mS,g0="Radio",[b7,gS]=Ps(g0),[N7,j7]=b7(g0),xS=_.forwardRef((n,e)=>{const{__scopeRadio:t,name:r,checked:i=!1,required:c,disabled:u,value:f="on",onCheck:m,form:x,...w}=n,[y,j]=_.useState(null),S=ct(e,M=>j(M)),C=_.useRef(!1),A=y?x||!!y.closest("form"):!0;return s.jsxs(N7,{scope:t,checked:i,disabled:u,children:[s.jsx(Ye.button,{type:"button",role:"radio","aria-checked":i,"data-state":_S(i),"data-disabled":u?"":void 0,disabled:u,value:f,...w,ref:S,onClick:Le(n.onClick,M=>{i||m?.(),A&&(C.current=M.isPropagationStopped(),C.current||M.stopPropagation())})}),A&&s.jsx(wS,{control:y,bubbles:!C.current,name:r,value:f,checked:i,required:c,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});xS.displayName=g0;var vS="RadioIndicator",yS=_.forwardRef((n,e)=>{const{__scopeRadio:t,forceMount:r,...i}=n,c=j7(vS,t);return s.jsx(ks,{present:r||c.checked,children:s.jsx(Ye.span,{"data-state":_S(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:e})})});yS.displayName=vS;var C7="RadioBubbleInput",wS=_.forwardRef(({__scopeRadio:n,control:e,checked:t,bubbles:r=!0,...i},c)=>{const u=_.useRef(null),f=ct(u,c),m=jh(t),x=Ch(e);return _.useEffect(()=>{const w=u.current;if(!w)return;const y=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==t&&S){const C=new Event("click",{bubbles:r});S.call(w,t),w.dispatchEvent(C)}},[m,t,r]),s.jsx(Ye.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:f,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});wS.displayName=C7;function _S(n){return n?"checked":"unchecked"}var S7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$p="RadioGroup",[E7]=Ps($p,[ad,gS]),bS=ad(),NS=gS(),[T7,A7]=E7($p),jS=_.forwardRef((n,e)=>{const{__scopeRadioGroup:t,name:r,defaultValue:i,value:c,required:u=!1,disabled:f=!1,orientation:m,dir:x,loop:w=!0,onValueChange:y,...j}=n,S=bS(t),C=bc(x),[A,M]=Ji({prop:c,defaultProp:i??null,onChange:y,caller:$p});return s.jsx(T7,{scope:t,name:r,required:u,disabled:f,value:A,onValueChange:M,children:s.jsx(m0,{asChild:!0,...S,orientation:m,dir:C,loop:w,children:s.jsx(Ye.div,{role:"radiogroup","aria-required":u,"aria-orientation":m,"data-disabled":f?"":void 0,dir:C,...j,ref:e})})})});jS.displayName=$p;var CS="RadioGroupItem",SS=_.forwardRef((n,e)=>{const{__scopeRadioGroup:t,disabled:r,...i}=n,c=A7(CS,t),u=c.disabled||r,f=bS(t),m=NS(t),x=_.useRef(null),w=ct(e,x),y=c.value===i.value,j=_.useRef(!1);return _.useEffect(()=>{const S=A=>{S7.includes(A.key)&&(j.current=!0)},C=()=>j.current=!1;return document.addEventListener("keydown",S),document.addEventListener("keyup",C),()=>{document.removeEventListener("keydown",S),document.removeEventListener("keyup",C)}},[]),s.jsx(p0,{asChild:!0,...f,focusable:!u,active:y,children:s.jsx(xS,{disabled:u,required:c.required,checked:y,...m,...i,name:c.name,ref:w,onCheck:()=>c.onValueChange(i.value),onKeyDown:Le(S=>{S.key==="Enter"&&S.preventDefault()}),onFocus:Le(i.onFocus,()=>{j.current&&x.current?.click()})})})});SS.displayName=CS;var k7="RadioGroupIndicator",ES=_.forwardRef((n,e)=>{const{__scopeRadioGroup:t,...r}=n,i=NS(t);return s.jsx(yS,{...i,...r,ref:e})});ES.displayName=k7;var P7=jS,I7=SS,R7=ES;function Pv({className:n,...e}){return s.jsx(P7,{"data-slot":"radio-group",className:ft("grid gap-3",n),...e})}function rc({className:n,...e}){return s.jsx(I7,{"data-slot":"radio-group-item",className:ft("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:s.jsx(R7,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(yk,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function L7({book:n,onClose:e,onBack:t}){const[r,i]=_.useState("details"),[c,u]=_.useState("shipping"),[f,m]=_.useState("card"),[x,w]=_.useState(!1),[y,j]=_.useState(!1),S=c==="shipping"?4.99:0,C=(n.price+S)*.08,A=n.price+S+C,M=()=>{if(!x){alert("Please agree to the terms and conditions");return}j(!0),setTimeout(()=>{j(!1),i("success")},2e3)};return r==="success"?s.jsx($a,{open:!0,onOpenChange:e,children:s.jsxs(Qi,{className:"max-w-md",children:[s.jsxs(ui,{className:"sr-only",children:["Purchase confirmation for ",n.title]}),s.jsxs(ui,{className:"sr-only",children:["Purchase confirmation for ",n.title]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 mx-auto flex items-center justify-center mb-6",children:s.jsx(im,{className:"w-12 h-12 text-green-600"})}),s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-3",children:"Purchase Successful!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your order has been confirmed and the seller has been notified."}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["#BO-",Date.now().toString().slice(-6)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.title})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",A.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(J,{onClick:e,className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Back to Marketplace"}),s.jsx(J,{variant:"outline",onClick:()=>alert("Order tracking feature coming soon!"),className:"w-full",children:"Track Order"})]})]})]})}):r==="payment"?s.jsx($a,{open:!0,onOpenChange:e,children:s.jsxs(Qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(xl,{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>i("details"),className:"hover:bg-gray-100 rounded-full p-1",children:s.jsx(Wr,{className:"w-5 h-5"})}),s.jsx(vl,{className:"text-2xl text-[#2C3E50]",children:"Payment Method"})]}),s.jsxs(ui,{className:"sr-only",children:["Select payment method for purchasing ",n.title]}),s.jsxs(ui,{className:"sr-only",children:["Select payment method for purchasing ",n.title]})]}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 flex items-center gap-3",children:[s.jsx(Qx,{className:"w-5 h-5 text-green-600"}),s.jsx("p",{className:"text-sm text-green-900",children:"Your payment information is secure and encrypted"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ke,{children:"Select Payment Method"}),s.jsxs(Pv,{value:f,onValueChange:R=>m(R),children:[s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${f==="card"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rc,{value:"card",id:"card"}),s.jsxs(ke,{htmlFor:"card",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(Pu,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("span",{children:"Credit / Debit Card"})]})]}),f==="card"&&s.jsxs("div",{className:"mt-4 space-y-3 pl-7",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"cardNumber",children:"Card Number"}),s.jsx(Ie,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"expiry",children:"Expiry Date"}),s.jsx(Ie,{id:"expiry",type:"text",placeholder:"MM/YY",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"cvv",children:"CVV"}),s.jsx(Ie,{id:"cvv",type:"text",placeholder:"123",className:"mt-1"})]})]}),s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"cardName",children:"Cardholder Name"}),s.jsx(Ie,{id:"cardName",type:"text",placeholder:"John Doe",className:"mt-1"})]})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${f==="paypal"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rc,{value:"paypal",id:"paypal"}),s.jsxs(ke,{htmlFor:"paypal",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(JP,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("span",{children:"PayPal"})]})]}),f==="paypal"&&s.jsx("p",{className:"text-sm text-gray-600 mt-2 pl-7",children:"You will be redirected to PayPal to complete your purchase"})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${f==="bank"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rc,{value:"bank",id:"bank"}),s.jsxs(ke,{htmlFor:"bank",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(rk,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("span",{children:"Bank Transfer"})]})]}),f==="bank"&&s.jsx("p",{className:"text-sm text-gray-600 mt-2 pl-7",children:"Bank transfer instructions will be sent to your email"})]})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Qu,{id:"terms",checked:x,onCheckedChange:R=>w(R===!0)}),s.jsxs(ke,{htmlFor:"terms",className:"text-sm text-gray-600 cursor-pointer",children:["I agree to the"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Terms and Conditions"})," ","and"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Refund Policy"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book Price:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",n.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping:"}),s.jsx("span",{className:"text-[#2C3E50]",children:c==="pickup"?"FREE":`$${S.toFixed(2)}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax (8%):"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",C.toFixed(2)]})]}),s.jsx(zr,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total:"}),s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",A.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>i("details"),className:"flex-1",children:"Back"}),s.jsxs(J,{onClick:M,disabled:y,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(fs,{className:"w-4 h-4 mr-2"}),y?"Processing...":`Pay $${A.toFixed(2)}`]})]})]})]})}):s.jsx($a,{open:!0,onOpenChange:e,children:s.jsxs(Qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(xl,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"hover:bg-gray-100 rounded-full p-1",children:s.jsx(Wr,{className:"w-5 h-5"})}),s.jsx(vl,{className:"text-2xl text-[#2C3E50]",children:"Purchase Confirmation"})]})}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Book Details"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-20 h-28 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50]",children:n.title}),s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["by ",n.author]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Xe,{className:"bg-blue-100 text-blue-800",children:n.condition}),s.jsxs("span",{className:"text-sm text-gray-600",children:["ISBN: ",n.isbn]})]}),s.jsxs("p",{className:"text-[#C4A672] text-xl mt-2",children:["$",n.price.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Seller Information"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#C4A672] text-white flex items-center justify-center",children:n.seller.avatar}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:n.seller.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[n.seller.rating,"   ",n.seller.totalSales," sales"]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ke,{children:"Delivery Method"}),s.jsxs(Pv,{value:c,onValueChange:R=>u(R),children:[s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${c==="shipping"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rc,{value:"shipping",id:"shipping"}),s.jsxs(ke,{htmlFor:"shipping",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(Lu,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{children:[s.jsx("div",{children:"Shipping"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Delivery in 3-5 business days"})]})]}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",S.toFixed(2)]})]}),c==="shipping"&&s.jsxs("div",{className:"mt-3 pl-7 space-y-2",children:[s.jsx(Ie,{placeholder:"Street Address"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Ie,{placeholder:"City"}),s.jsx(Ie,{placeholder:"State"})]}),s.jsx(Ie,{placeholder:"ZIP Code"})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${c==="pickup"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rc,{value:"pickup",id:"pickup"}),s.jsxs(ke,{htmlFor:"pickup",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx($r,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{children:[s.jsx("div",{children:"Local Pickup"}),s.jsx("div",{className:"text-xs text-gray-600",children:"San Francisco, CA"})]})]}),s.jsx("span",{className:"text-green-600",children:"FREE"})]}),c==="pickup"&&s.jsx("div",{className:"mt-3 pl-7",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-900",children:[s.jsx(In,{className:"w-4 h-4 inline mr-1"}),"Pickup location and details will be shared after purchase"]})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672]/10 to-[#8B7355]/10 rounded-lg p-4 border-2 border-[#C4A672]/20",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book Price:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",n.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping:"}),s.jsx("span",{className:"text-[#2C3E50]",children:c==="pickup"?"FREE":`$${S.toFixed(2)}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax (8%):"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",C.toFixed(2)]})]}),s.jsx(zr,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total:"}),s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",A.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:t,className:"flex-1",children:"Back to Book"}),s.jsx(J,{onClick:()=>i("payment"),className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Continue to Payment"})]})]})]})})}function M7({book:n,onClose:e}){const[t,r]=_.useState(!1),[i,c]=_.useState(!1),u=w=>{switch(w){case"New":case"Like New":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=()=>{console.log("Buying book:",n.id),r(!0)},m=()=>{console.log("Contacting seller:",n.seller.name),alert(`This would open a chat with ${n.seller.name}`)},x=()=>{c(!0)};return t?s.jsx(L7,{book:n,onClose:e,onBack:()=>r(!1)}):s.jsx($a,{open:!0,onOpenChange:e,children:s.jsxs(Qi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(xl,{children:[s.jsx(vl,{className:"text-2xl text-[#2C3E50]",children:n.title}),s.jsx(ui,{className:"text-sm text-gray-500",children:"Explore the details of the book and make your purchase decision."}),s.jsx(ui,{className:"text-sm text-gray-500",children:"Explore the details of the book and make your purchase decision."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-4",children:[s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"aspect-[3/4] overflow-hidden rounded-lg bg-gray-100",children:s.jsx(ol,{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-gray-600",children:["by ",n.author]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-4xl text-[#C4A672]",children:["$",n.price.toFixed(2)]}),s.jsx(Xe,{className:`${u(n.condition)} text-sm px-3 py-1`,children:n.condition})]}),s.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(tk,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Category:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.category})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Gs,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Published:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.publishedYear})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Kx,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Pages:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.pages})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Uk,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Language:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.language})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx($r,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"ISBN:"}),s.jsx("span",{className:"text-[#2C3E50] text-xs",children:n.isbn})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n.description})]}),s.jsx(zr,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Seller Information"}),s.jsxs("div",{className:"flex items-start gap-4 bg-gray-50 rounded-lg p-4",children:[s.jsx(ZF,{className:"w-12 h-12 bg-[#C4A672] text-white",children:s.jsx(YF,{children:n.seller.avatar})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:n.seller.name}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lc,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[n.seller.rating," rating"]})]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[n.seller.totalSales," sales"]})]}),s.jsxs("div",{className:"flex items-start gap-2 mt-2 text-sm text-gray-600",children:[s.jsx(In,{className:"w-4 h-4 text-gray-400 mt-0.5"}),s.jsx("span",{children:"San Francisco, CA (15 miles away)"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Location & Delivery"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx($r,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-gray-700",children:"Available for local pickup and shipping"})]}),s.jsx("div",{className:"bg-gray-200 rounded-lg h-48 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(In,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm",children:"Map View"}),s.jsx("p",{className:"text-xs mt-1",children:"San Francisco, CA"})]})}),s.jsxs(J,{variant:"outline",size:"sm",className:"w-full",onClick:()=>alert("This would open directions to the pickup location"),children:[s.jsx(aP,{className:"w-4 h-4 mr-2"}),"Get Directions"]})]})]}),s.jsxs("div",{className:"space-y-3 pt-4",children:[s.jsxs(J,{onClick:f,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Kv,{className:"w-5 h-5 mr-2"}),"Buy Now"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(J,{onClick:x,variant:"outline",className:"h-11 border-[#C4A672] text-[#C4A672] hover:bg-[#C4A672] hover:text-white",children:"Negotiate Price"}),s.jsxs(J,{onClick:m,variant:"outline",className:"h-11 border-gray-300 hover:bg-gray-50",children:[s.jsx(qs,{className:"w-4 h-4 mr-2"}),"Contact"]})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),s.jsx("span",{children:"Secure Shipping"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lc,{className:"w-4 h-4"}),s.jsx("span",{children:"Verified Sellers"})]})]})]})]}),i&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center p-4 z-10",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Negotiate Price"}),s.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Current asking price: $",n.price.toFixed(2)]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 block mb-2",children:"Your Offer"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),s.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",className:"w-full pl-7 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C4A672] focus:border-[#C4A672]"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 block mb-2",children:"Message (Optional)"}),s.jsx("textarea",{rows:3,placeholder:"Add a message to the seller...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C4A672] focus:border-[#C4A672]"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>c(!1),className:"flex-1",children:"Cancel"}),s.jsx(J,{onClick:()=>{alert("Offer sent to seller!"),c(!1)},className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Send Offer"})]})]})]})})]})})}function xc({className:n,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:ft("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}const D7=["top","right","bottom","left"],yl=Math.min,ir=Math.max,Gm=Math.round,rm=Math.floor,Xi=n=>({x:n,y:n}),O7={left:"right",right:"left",bottom:"top",top:"bottom"},F7={start:"end",end:"start"};function Iv(n,e,t){return ir(n,yl(e,t))}function Xa(n,e){return typeof n=="function"?n(e):n}function Ja(n){return n.split("-")[0]}function od(n){return n.split("-")[1]}function x0(n){return n==="x"?"y":"x"}function v0(n){return n==="y"?"height":"width"}const V7=new Set(["top","bottom"]);function Hi(n){return V7.has(Ja(n))?"y":"x"}function y0(n){return x0(Hi(n))}function B7(n,e,t){t===void 0&&(t=!1);const r=od(n),i=y0(n),c=v0(i);let u=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[c]>e.floating[c]&&(u=Km(u)),[u,Km(u)]}function z7(n){const e=Km(n);return[Rv(n),e,Rv(e)]}function Rv(n){return n.replace(/start|end/g,e=>F7[e])}const DN=["left","right"],ON=["right","left"],U7=["top","bottom"],$7=["bottom","top"];function H7(n,e,t){switch(n){case"top":case"bottom":return t?e?ON:DN:e?DN:ON;case"left":case"right":return e?U7:$7;default:return[]}}function W7(n,e,t,r){const i=od(n);let c=H7(Ja(n),t==="start",r);return i&&(c=c.map(u=>u+"-"+i),e&&(c=c.concat(c.map(Rv)))),c}function Km(n){return n.replace(/left|right|bottom|top/g,e=>O7[e])}function q7(n){return{top:0,right:0,bottom:0,left:0,...n}}function TS(n){return typeof n!="number"?q7(n):{top:n,right:n,bottom:n,left:n}}function Zm(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function FN(n,e,t){let{reference:r,floating:i}=n;const c=Hi(e),u=y0(e),f=v0(u),m=Ja(e),x=c==="y",w=r.x+r.width/2-i.width/2,y=r.y+r.height/2-i.height/2,j=r[f]/2-i[f]/2;let S;switch(m){case"top":S={x:w,y:r.y-i.height};break;case"bottom":S={x:w,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y};break;case"left":S={x:r.x-i.width,y};break;default:S={x:r.x,y:r.y}}switch(od(e)){case"start":S[u]-=j*(t&&x?-1:1);break;case"end":S[u]+=j*(t&&x?-1:1);break}return S}const G7=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:c=[],platform:u}=t,f=c.filter(Boolean),m=await(u.isRTL==null?void 0:u.isRTL(e));let x=await u.getElementRects({reference:n,floating:e,strategy:i}),{x:w,y}=FN(x,r,m),j=r,S={},C=0;for(let A=0;A<f.length;A++){const{name:M,fn:R}=f[A],{x:z,y:W,data:G,reset:K}=await R({x:w,y,initialPlacement:r,placement:j,strategy:i,middlewareData:S,rects:x,platform:u,elements:{reference:n,floating:e}});w=z??w,y=W??y,S={...S,[M]:{...S[M],...G}},K&&C<=50&&(C++,typeof K=="object"&&(K.placement&&(j=K.placement),K.rects&&(x=K.rects===!0?await u.getElementRects({reference:n,floating:e,strategy:i}):K.rects),{x:w,y}=FN(x,j,m)),A=-1)}return{x:w,y,placement:j,strategy:i,middlewareData:S}};async function xh(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:c,rects:u,elements:f,strategy:m}=n,{boundary:x="clippingAncestors",rootBoundary:w="viewport",elementContext:y="floating",altBoundary:j=!1,padding:S=0}=Xa(e,n),C=TS(S),M=f[j?y==="floating"?"reference":"floating":y],R=Zm(await c.getClippingRect({element:(t=await(c.isElement==null?void 0:c.isElement(M)))==null||t?M:M.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:x,rootBoundary:w,strategy:m})),z=y==="floating"?{x:r,y:i,width:u.floating.width,height:u.floating.height}:u.reference,W=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),G=await(c.isElement==null?void 0:c.isElement(W))?await(c.getScale==null?void 0:c.getScale(W))||{x:1,y:1}:{x:1,y:1},K=Zm(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:z,offsetParent:W,strategy:m}):z);return{top:(R.top-K.top+C.top)/G.y,bottom:(K.bottom-R.bottom+C.bottom)/G.y,left:(R.left-K.left+C.left)/G.x,right:(K.right-R.right+C.right)/G.x}}const K7=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:c,platform:u,elements:f,middlewareData:m}=e,{element:x,padding:w=0}=Xa(n,e)||{};if(x==null)return{};const y=TS(w),j={x:t,y:r},S=y0(i),C=v0(S),A=await u.getDimensions(x),M=S==="y",R=M?"top":"left",z=M?"bottom":"right",W=M?"clientHeight":"clientWidth",G=c.reference[C]+c.reference[S]-j[S]-c.floating[C],K=j[S]-c.reference[S],ee=await(u.getOffsetParent==null?void 0:u.getOffsetParent(x));let D=ee?ee[W]:0;(!D||!await(u.isElement==null?void 0:u.isElement(ee)))&&(D=f.floating[W]||c.floating[C]);const P=G/2-K/2,V=D/2-A[C]/2-1,B=yl(y[R],V),U=yl(y[z],V),q=B,H=D-A[C]-U,se=D/2-A[C]/2+P,be=Iv(q,se,H),ie=!m.arrow&&od(i)!=null&&se!==be&&c.reference[C]/2-(se<q?B:U)-A[C]/2<0,we=ie?se<q?se-q:se-H:0;return{[S]:j[S]+we,data:{[S]:be,centerOffset:se-be-we,...ie&&{alignmentOffset:we}},reset:ie}}}),Z7=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:c,rects:u,initialPlacement:f,platform:m,elements:x}=e,{mainAxis:w=!0,crossAxis:y=!0,fallbackPlacements:j,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:A=!0,...M}=Xa(n,e);if((t=c.arrow)!=null&&t.alignmentOffset)return{};const R=Ja(i),z=Hi(f),W=Ja(f)===f,G=await(m.isRTL==null?void 0:m.isRTL(x.floating)),K=j||(W||!A?[Km(f)]:z7(f)),ee=C!=="none";!j&&ee&&K.push(...W7(f,A,C,G));const D=[f,...K],P=await xh(e,M),V=[];let B=((r=c.flip)==null?void 0:r.overflows)||[];if(w&&V.push(P[R]),y){const se=B7(i,u,G);V.push(P[se[0]],P[se[1]])}if(B=[...B,{placement:i,overflows:V}],!V.every(se=>se<=0)){var U,q;const se=(((U=c.flip)==null?void 0:U.index)||0)+1,be=D[se];if(be&&(!(y==="alignment"?z!==Hi(be):!1)||B.every(Z=>Hi(Z.placement)===z?Z.overflows[0]>0:!0)))return{data:{index:se,overflows:B},reset:{placement:be}};let ie=(q=B.filter(we=>we.overflows[0]<=0).sort((we,Z)=>we.overflows[1]-Z.overflows[1])[0])==null?void 0:q.placement;if(!ie)switch(S){case"bestFit":{var H;const we=(H=B.filter(Z=>{if(ee){const ce=Hi(Z.placement);return ce===z||ce==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(ce=>ce>0).reduce((ce,ue)=>ce+ue,0)]).sort((Z,ce)=>Z[1]-ce[1])[0])==null?void 0:H[0];we&&(ie=we);break}case"initialPlacement":ie=f;break}if(i!==ie)return{reset:{placement:ie}}}return{}}}};function VN(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function BN(n){return D7.some(e=>n[e]>=0)}const Y7=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Xa(n,e);switch(r){case"referenceHidden":{const c=await xh(e,{...i,elementContext:"reference"}),u=VN(c,t.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:BN(u)}}}case"escaped":{const c=await xh(e,{...i,altBoundary:!0}),u=VN(c,t.floating);return{data:{escapedOffsets:u,escaped:BN(u)}}}default:return{}}}}},AS=new Set(["left","top"]);async function Q7(n,e){const{placement:t,platform:r,elements:i}=n,c=await(r.isRTL==null?void 0:r.isRTL(i.floating)),u=Ja(t),f=od(t),m=Hi(t)==="y",x=AS.has(u)?-1:1,w=c&&m?-1:1,y=Xa(e,n);let{mainAxis:j,crossAxis:S,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return f&&typeof C=="number"&&(S=f==="end"?C*-1:C),m?{x:S*w,y:j*x}:{x:j*x,y:S*w}}const X7=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:c,placement:u,middlewareData:f}=e,m=await Q7(e,n);return u===((t=f.offset)==null?void 0:t.placement)&&(r=f.arrow)!=null&&r.alignmentOffset?{}:{x:i+m.x,y:c+m.y,data:{...m,placement:u}}}}},J7=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:c=!0,crossAxis:u=!1,limiter:f={fn:M=>{let{x:R,y:z}=M;return{x:R,y:z}}},...m}=Xa(n,e),x={x:t,y:r},w=await xh(e,m),y=Hi(Ja(i)),j=x0(y);let S=x[j],C=x[y];if(c){const M=j==="y"?"top":"left",R=j==="y"?"bottom":"right",z=S+w[M],W=S-w[R];S=Iv(z,S,W)}if(u){const M=y==="y"?"top":"left",R=y==="y"?"bottom":"right",z=C+w[M],W=C-w[R];C=Iv(z,C,W)}const A=f.fn({...e,[j]:S,[y]:C});return{...A,data:{x:A.x-t,y:A.y-r,enabled:{[j]:c,[y]:u}}}}}},eV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:c,middlewareData:u}=e,{offset:f=0,mainAxis:m=!0,crossAxis:x=!0}=Xa(n,e),w={x:t,y:r},y=Hi(i),j=x0(y);let S=w[j],C=w[y];const A=Xa(f,e),M=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(m){const W=j==="y"?"height":"width",G=c.reference[j]-c.floating[W]+M.mainAxis,K=c.reference[j]+c.reference[W]-M.mainAxis;S<G?S=G:S>K&&(S=K)}if(x){var R,z;const W=j==="y"?"width":"height",G=AS.has(Ja(i)),K=c.reference[y]-c.floating[W]+(G&&((R=u.offset)==null?void 0:R[y])||0)+(G?0:M.crossAxis),ee=c.reference[y]+c.reference[W]+(G?0:((z=u.offset)==null?void 0:z[y])||0)-(G?M.crossAxis:0);C<K?C=K:C>ee&&(C=ee)}return{[j]:S,[y]:C}}}},tV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:c,platform:u,elements:f}=e,{apply:m=()=>{},...x}=Xa(n,e),w=await xh(e,x),y=Ja(i),j=od(i),S=Hi(i)==="y",{width:C,height:A}=c.floating;let M,R;y==="top"||y==="bottom"?(M=y,R=j===(await(u.isRTL==null?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(R=y,M=j==="end"?"top":"bottom");const z=A-w.top-w.bottom,W=C-w.left-w.right,G=yl(A-w[M],z),K=yl(C-w[R],W),ee=!e.middlewareData.shift;let D=G,P=K;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=W),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=z),ee&&!j){const B=ir(w.left,0),U=ir(w.right,0),q=ir(w.top,0),H=ir(w.bottom,0);S?P=C-2*(B!==0||U!==0?B+U:ir(w.left,w.right)):D=A-2*(q!==0||H!==0?q+H:ir(w.top,w.bottom))}await m({...e,availableWidth:P,availableHeight:D});const V=await u.getDimensions(f.floating);return C!==V.width||A!==V.height?{reset:{rects:!0}}:{}}}};function Hp(){return typeof window<"u"}function ld(n){return kS(n)?(n.nodeName||"").toLowerCase():"#document"}function hr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ra(n){var e;return(e=(kS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function kS(n){return Hp()?n instanceof Node||n instanceof hr(n).Node:!1}function fi(n){return Hp()?n instanceof Element||n instanceof hr(n).Element:!1}function na(n){return Hp()?n instanceof HTMLElement||n instanceof hr(n).HTMLElement:!1}function zN(n){return!Hp()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof hr(n).ShadowRoot}const nV=new Set(["inline","contents"]);function Uh(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=mi(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!nV.has(i)}const sV=new Set(["table","td","th"]);function rV(n){return sV.has(ld(n))}const iV=[":popover-open",":modal"];function Wp(n){return iV.some(e=>{try{return n.matches(e)}catch{return!1}})}const aV=["transform","translate","scale","rotate","perspective"],oV=["transform","translate","scale","rotate","perspective","filter"],lV=["paint","layout","strict","content"];function w0(n){const e=_0(),t=fi(n)?mi(n):n;return aV.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||oV.some(r=>(t.willChange||"").includes(r))||lV.some(r=>(t.contain||"").includes(r))}function cV(n){let e=wl(n);for(;na(e)&&!Gu(e);){if(w0(e))return e;if(Wp(e))return null;e=wl(e)}return null}function _0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uV=new Set(["html","body","#document"]);function Gu(n){return uV.has(ld(n))}function mi(n){return hr(n).getComputedStyle(n)}function qp(n){return fi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function wl(n){if(ld(n)==="html")return n;const e=n.assignedSlot||n.parentNode||zN(n)&&n.host||ra(n);return zN(e)?e.host:e}function PS(n){const e=wl(n);return Gu(e)?n.ownerDocument?n.ownerDocument.body:n.body:na(e)&&Uh(e)?e:PS(e)}function vh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=PS(n),c=i===((r=n.ownerDocument)==null?void 0:r.body),u=hr(i);if(c){const f=Lv(u);return e.concat(u,u.visualViewport||[],Uh(i)?i:[],f&&t?vh(f):[])}return e.concat(i,vh(i,[],t))}function Lv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function IS(n){const e=mi(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=na(n),c=i?n.offsetWidth:t,u=i?n.offsetHeight:r,f=Gm(t)!==c||Gm(r)!==u;return f&&(t=c,r=u),{width:t,height:r,$:f}}function b0(n){return fi(n)?n:n.contextElement}function Au(n){const e=b0(n);if(!na(e))return Xi(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:c}=IS(e);let u=(c?Gm(t.width):t.width)/r,f=(c?Gm(t.height):t.height)/i;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}const dV=Xi(0);function RS(n){const e=hr(n);return!_0()||!e.visualViewport?dV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hV(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==hr(n)?!1:e}function vc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),c=b0(n);let u=Xi(1);e&&(r?fi(r)&&(u=Au(r)):u=Au(n));const f=hV(c,t,r)?RS(c):Xi(0);let m=(i.left+f.x)/u.x,x=(i.top+f.y)/u.y,w=i.width/u.x,y=i.height/u.y;if(c){const j=hr(c),S=r&&fi(r)?hr(r):r;let C=j,A=Lv(C);for(;A&&r&&S!==C;){const M=Au(A),R=A.getBoundingClientRect(),z=mi(A),W=R.left+(A.clientLeft+parseFloat(z.paddingLeft))*M.x,G=R.top+(A.clientTop+parseFloat(z.paddingTop))*M.y;m*=M.x,x*=M.y,w*=M.x,y*=M.y,m+=W,x+=G,C=hr(A),A=Lv(C)}}return Zm({width:w,height:y,x:m,y:x})}function Gp(n,e){const t=qp(n).scrollLeft;return e?e.left+t:vc(ra(n)).left+t}function LS(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-Gp(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function fV(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const c=i==="fixed",u=ra(r),f=e?Wp(e.floating):!1;if(r===u||f&&c)return t;let m={scrollLeft:0,scrollTop:0},x=Xi(1);const w=Xi(0),y=na(r);if((y||!y&&!c)&&((ld(r)!=="body"||Uh(u))&&(m=qp(r)),na(r))){const S=vc(r);x=Au(r),w.x=S.x+r.clientLeft,w.y=S.y+r.clientTop}const j=u&&!y&&!c?LS(u,m):Xi(0);return{width:t.width*x.x,height:t.height*x.y,x:t.x*x.x-m.scrollLeft*x.x+w.x+j.x,y:t.y*x.y-m.scrollTop*x.y+w.y+j.y}}function mV(n){return Array.from(n.getClientRects())}function pV(n){const e=ra(n),t=qp(n),r=n.ownerDocument.body,i=ir(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),c=ir(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let u=-t.scrollLeft+Gp(n);const f=-t.scrollTop;return mi(r).direction==="rtl"&&(u+=ir(e.clientWidth,r.clientWidth)-i),{width:i,height:c,x:u,y:f}}const UN=25;function gV(n,e){const t=hr(n),r=ra(n),i=t.visualViewport;let c=r.clientWidth,u=r.clientHeight,f=0,m=0;if(i){c=i.width,u=i.height;const w=_0();(!w||w&&e==="fixed")&&(f=i.offsetLeft,m=i.offsetTop)}const x=Gp(r);if(x<=0){const w=r.ownerDocument,y=w.body,j=getComputedStyle(y),S=w.compatMode==="CSS1Compat"&&parseFloat(j.marginLeft)+parseFloat(j.marginRight)||0,C=Math.abs(r.clientWidth-y.clientWidth-S);C<=UN&&(c-=C)}else x<=UN&&(c+=x);return{width:c,height:u,x:f,y:m}}const xV=new Set(["absolute","fixed"]);function vV(n,e){const t=vc(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,c=na(n)?Au(n):Xi(1),u=n.clientWidth*c.x,f=n.clientHeight*c.y,m=i*c.x,x=r*c.y;return{width:u,height:f,x:m,y:x}}function $N(n,e,t){let r;if(e==="viewport")r=gV(n,t);else if(e==="document")r=pV(ra(n));else if(fi(e))r=vV(e,t);else{const i=RS(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Zm(r)}function MS(n,e){const t=wl(n);return t===e||!fi(t)||Gu(t)?!1:mi(t).position==="fixed"||MS(t,e)}function yV(n,e){const t=e.get(n);if(t)return t;let r=vh(n,[],!1).filter(f=>fi(f)&&ld(f)!=="body"),i=null;const c=mi(n).position==="fixed";let u=c?wl(n):n;for(;fi(u)&&!Gu(u);){const f=mi(u),m=w0(u);!m&&f.position==="fixed"&&(i=null),(c?!m&&!i:!m&&f.position==="static"&&!!i&&xV.has(i.position)||Uh(u)&&!m&&MS(n,u))?r=r.filter(w=>w!==u):i=f,u=wl(u)}return e.set(n,r),r}function wV(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const u=[...t==="clippingAncestors"?Wp(e)?[]:yV(e,this._c):[].concat(t),r],f=u[0],m=u.reduce((x,w)=>{const y=$N(e,w,i);return x.top=ir(y.top,x.top),x.right=yl(y.right,x.right),x.bottom=yl(y.bottom,x.bottom),x.left=ir(y.left,x.left),x},$N(e,f,i));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function _V(n){const{width:e,height:t}=IS(n);return{width:e,height:t}}function bV(n,e,t){const r=na(e),i=ra(e),c=t==="fixed",u=vc(n,!0,c,e);let f={scrollLeft:0,scrollTop:0};const m=Xi(0);function x(){m.x=Gp(i)}if(r||!r&&!c)if((ld(e)!=="body"||Uh(i))&&(f=qp(e)),r){const S=vc(e,!0,c,e);m.x=S.x+e.clientLeft,m.y=S.y+e.clientTop}else i&&x();c&&!r&&i&&x();const w=i&&!r&&!c?LS(i,f):Xi(0),y=u.left+f.scrollLeft-m.x-w.x,j=u.top+f.scrollTop-m.y-w.y;return{x:y,y:j,width:u.width,height:u.height}}function qx(n){return mi(n).position==="static"}function HN(n,e){if(!na(n)||mi(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ra(n)===t&&(t=t.ownerDocument.body),t}function DS(n,e){const t=hr(n);if(Wp(n))return t;if(!na(n)){let i=wl(n);for(;i&&!Gu(i);){if(fi(i)&&!qx(i))return i;i=wl(i)}return t}let r=HN(n,e);for(;r&&rV(r)&&qx(r);)r=HN(r,e);return r&&Gu(r)&&qx(r)&&!w0(r)?t:r||cV(n)||t}const NV=async function(n){const e=this.getOffsetParent||DS,t=this.getDimensions,r=await t(n.floating);return{reference:bV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jV(n){return mi(n).direction==="rtl"}const CV={convertOffsetParentRelativeRectToViewportRelativeRect:fV,getDocumentElement:ra,getClippingRect:wV,getOffsetParent:DS,getElementRects:NV,getClientRects:mV,getDimensions:_V,getScale:Au,isElement:fi,isRTL:jV};function OS(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function SV(n,e){let t=null,r;const i=ra(n);function c(){var f;clearTimeout(r),(f=t)==null||f.disconnect(),t=null}function u(f,m){f===void 0&&(f=!1),m===void 0&&(m=1),c();const x=n.getBoundingClientRect(),{left:w,top:y,width:j,height:S}=x;if(f||e(),!j||!S)return;const C=rm(y),A=rm(i.clientWidth-(w+j)),M=rm(i.clientHeight-(y+S)),R=rm(w),W={rootMargin:-C+"px "+-A+"px "+-M+"px "+-R+"px",threshold:ir(0,yl(1,m))||1};let G=!0;function K(ee){const D=ee[0].intersectionRatio;if(D!==m){if(!G)return u();D?u(!1,D):r=setTimeout(()=>{u(!1,1e-7)},1e3)}D===1&&!OS(x,n.getBoundingClientRect())&&u(),G=!1}try{t=new IntersectionObserver(K,{...W,root:i.ownerDocument})}catch{t=new IntersectionObserver(K,W)}t.observe(n)}return u(!0),c}function EV(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:m=!1}=r,x=b0(n),w=i||c?[...x?vh(x):[],...vh(e)]:[];w.forEach(R=>{i&&R.addEventListener("scroll",t,{passive:!0}),c&&R.addEventListener("resize",t)});const y=x&&f?SV(x,t):null;let j=-1,S=null;u&&(S=new ResizeObserver(R=>{let[z]=R;z&&z.target===x&&S&&(S.unobserve(e),cancelAnimationFrame(j),j=requestAnimationFrame(()=>{var W;(W=S)==null||W.observe(e)})),t()}),x&&!m&&S.observe(x),S.observe(e));let C,A=m?vc(n):null;m&&M();function M(){const R=vc(n);A&&!OS(A,R)&&t(),A=R,C=requestAnimationFrame(M)}return t(),()=>{var R;w.forEach(z=>{i&&z.removeEventListener("scroll",t),c&&z.removeEventListener("resize",t)}),y?.(),(R=S)==null||R.disconnect(),S=null,m&&cancelAnimationFrame(C)}}const TV=X7,AV=J7,kV=Z7,PV=tV,IV=Y7,WN=K7,RV=eV,LV=(n,e,t)=>{const r=new Map,i={platform:CV,...t},c={...i.platform,_c:r};return G7(n,e,{...i,platform:c})};var MV=typeof document<"u",DV=function(){},vm=MV?_.useLayoutEffect:DV;function Ym(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Ym(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const c=i[r];if(!(c==="_owner"&&n.$$typeof)&&!Ym(n[c],e[c]))return!1}return!0}return n!==n&&e!==e}function FS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function qN(n,e){const t=FS(n);return Math.round(e*t)/t}function Gx(n){const e=_.useRef(n);return vm(()=>{e.current=n}),e}function OV(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:c,floating:u}={},transform:f=!0,whileElementsMounted:m,open:x}=n,[w,y]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[j,S]=_.useState(r);Ym(j,r)||S(r);const[C,A]=_.useState(null),[M,R]=_.useState(null),z=_.useCallback(Z=>{Z!==ee.current&&(ee.current=Z,A(Z))},[]),W=_.useCallback(Z=>{Z!==D.current&&(D.current=Z,R(Z))},[]),G=c||C,K=u||M,ee=_.useRef(null),D=_.useRef(null),P=_.useRef(w),V=m!=null,B=Gx(m),U=Gx(i),q=Gx(x),H=_.useCallback(()=>{if(!ee.current||!D.current)return;const Z={placement:e,strategy:t,middleware:j};U.current&&(Z.platform=U.current),LV(ee.current,D.current,Z).then(ce=>{const ue={...ce,isPositioned:q.current!==!1};se.current&&!Ym(P.current,ue)&&(P.current=ue,Yu.flushSync(()=>{y(ue)}))})},[j,e,t,U,q]);vm(()=>{x===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,y(Z=>({...Z,isPositioned:!1})))},[x]);const se=_.useRef(!1);vm(()=>(se.current=!0,()=>{se.current=!1}),[]),vm(()=>{if(G&&(ee.current=G),K&&(D.current=K),G&&K){if(B.current)return B.current(G,K,H);H()}},[G,K,H,B,V]);const be=_.useMemo(()=>({reference:ee,floating:D,setReference:z,setFloating:W}),[z,W]),ie=_.useMemo(()=>({reference:G,floating:K}),[G,K]),we=_.useMemo(()=>{const Z={position:t,left:0,top:0};if(!ie.floating)return Z;const ce=qN(ie.floating,w.x),ue=qN(ie.floating,w.y);return f?{...Z,transform:"translate("+ce+"px, "+ue+"px)",...FS(ie.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ce,top:ue}},[t,f,ie.floating,w.x,w.y]);return _.useMemo(()=>({...w,update:H,refs:be,elements:ie,floatingStyles:we}),[w,H,be,ie,we])}const FV=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?WN({element:r.current,padding:i}).fn(t):{}:r?WN({element:r,padding:i}).fn(t):{}}}},VV=(n,e)=>({...TV(n),options:[n,e]}),BV=(n,e)=>({...AV(n),options:[n,e]}),zV=(n,e)=>({...RV(n),options:[n,e]}),UV=(n,e)=>({...kV(n),options:[n,e]}),$V=(n,e)=>({...PV(n),options:[n,e]}),HV=(n,e)=>({...IV(n),options:[n,e]}),WV=(n,e)=>({...FV(n),options:[n,e]});var qV="Arrow",VS=_.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...c}=n;return s.jsx(Ye.svg,{...c,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});VS.displayName=qV;var GV=VS,N0="Popper",[BS,Kp]=Ps(N0),[KV,zS]=BS(N0),US=n=>{const{__scopePopper:e,children:t}=n,[r,i]=_.useState(null);return s.jsx(KV,{scope:e,anchor:r,onAnchorChange:i,children:t})};US.displayName=N0;var $S="PopperAnchor",HS=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,c=zS($S,t),u=_.useRef(null),f=ct(e,u),m=_.useRef(null);return _.useEffect(()=>{const x=m.current;m.current=r?.current||u.current,x!==m.current&&c.onAnchorChange(m.current)}),r?null:s.jsx(Ye.div,{...i,ref:f})});HS.displayName=$S;var j0="PopperContent",[ZV,YV]=BS(j0),WS=_.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:c="center",alignOffset:u=0,arrowPadding:f=0,avoidCollisions:m=!0,collisionBoundary:x=[],collisionPadding:w=0,sticky:y="partial",hideWhenDetached:j=!1,updatePositionStrategy:S="optimized",onPlaced:C,...A}=n,M=zS(j0,t),[R,z]=_.useState(null),W=ct(e,ge=>z(ge)),[G,K]=_.useState(null),ee=Ch(G),D=ee?.width??0,P=ee?.height??0,V=r+(c!=="center"?"-"+c:""),B=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},U=Array.isArray(x)?x:[x],q=U.length>0,H={padding:B,boundary:U.filter(XV),altBoundary:q},{refs:se,floatingStyles:be,placement:ie,isPositioned:we,middlewareData:Z}=OV({strategy:"fixed",placement:V,whileElementsMounted:(...ge)=>EV(...ge,{animationFrame:S==="always"}),elements:{reference:M.anchor},middleware:[VV({mainAxis:i+P,alignmentAxis:u}),m&&BV({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?zV():void 0,...H}),m&&UV({...H}),$V({...H,apply:({elements:ge,rects:Be,availableWidth:rt,availableHeight:it})=>{const{width:xt,height:wt}=Be.reference,Ht=ge.floating.style;Ht.setProperty("--radix-popper-available-width",`${rt}px`),Ht.setProperty("--radix-popper-available-height",`${it}px`),Ht.setProperty("--radix-popper-anchor-width",`${xt}px`),Ht.setProperty("--radix-popper-anchor-height",`${wt}px`)}}),G&&WV({element:G,padding:f}),JV({arrowWidth:D,arrowHeight:P}),j&&HV({strategy:"referenceHidden",...H})]}),[ce,ue]=KS(ie),X=Un(C);jn(()=>{we&&X?.()},[we,X]);const me=Z.arrow?.x,je=Z.arrow?.y,Ee=Z.arrow?.centerOffset!==0,[Re,Ae]=_.useState();return jn(()=>{R&&Ae(window.getComputedStyle(R).zIndex)},[R]),s.jsx("div",{ref:se.setFloating,"data-radix-popper-content-wrapper":"",style:{...be,transform:we?be.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:s.jsx(ZV,{scope:t,placedSide:ce,onArrowChange:K,arrowX:me,arrowY:je,shouldHideArrow:Ee,children:s.jsx(Ye.div,{"data-side":ce,"data-align":ue,...A,ref:W,style:{...A.style,animation:we?void 0:"none"}})})})});WS.displayName=j0;var qS="PopperArrow",QV={top:"bottom",right:"left",bottom:"top",left:"right"},GS=_.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,c=YV(qS,r),u=QV[c.placedSide];return s.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:s.jsx(GV,{...i,ref:t,style:{...i.style,display:"block"}})})});GS.displayName=qS;function XV(n){return n!==null}var JV=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:i}=e,u=i.arrow?.centerOffset!==0,f=u?0:n.arrowWidth,m=u?0:n.arrowHeight,[x,w]=KS(t),y={start:"0%",center:"50%",end:"100%"}[w],j=(i.arrow?.x??0)+f/2,S=(i.arrow?.y??0)+m/2;let C="",A="";return x==="bottom"?(C=u?y:`${j}px`,A=`${-m}px`):x==="top"?(C=u?y:`${j}px`,A=`${r.floating.height+m}px`):x==="right"?(C=`${-m}px`,A=u?y:`${S}px`):x==="left"&&(C=`${r.floating.width+m}px`,A=u?y:`${S}px`),{data:{x:C,y:A}}}});function KS(n){const[e,t="center"]=n.split("-");return[e,t]}var ZS=US,YS=HS,QS=WS,XS=GS;function e8(n){const e=t8(n),t=_.forwardRef((r,i)=>{const{children:c,...u}=r,f=_.Children.toArray(c),m=f.find(s8);if(m){const x=m.props.children,w=f.map(y=>y===m?_.Children.count(x)>1?_.Children.only(null):_.isValidElement(x)?x.props.children:null:y);return s.jsx(e,{...u,ref:i,children:_.isValidElement(x)?_.cloneElement(x,void 0,w):null})}return s.jsx(e,{...u,ref:i,children:c})});return t.displayName=`${n}.Slot`,t}function t8(n){const e=_.forwardRef((t,r)=>{const{children:i,...c}=t;if(_.isValidElement(i)){const u=i8(i),f=r8(c,i.props);return i.type!==_.Fragment&&(f.ref=r?eo(r,u):u),_.cloneElement(i,f)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var n8=Symbol("radix.slottable");function s8(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===n8}function r8(n,e){const t={...e};for(const r in e){const i=n[r],c=e[r];/^on[A-Z]/.test(r)?i&&c?t[r]=(...f)=>{const m=c(...f);return i(...f),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...c}:r==="className"&&(t[r]=[i,c].filter(Boolean).join(" "))}return{...n,...t}}function i8(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var JS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),a8="VisuallyHidden",o8=_.forwardRef((n,e)=>s.jsx(Ye.span,{...n,ref:e,style:{...JS,...n.style}}));o8.displayName=a8;var l8=[" ","Enter","ArrowUp","ArrowDown"],c8=[" ","Enter"],yc="Select",[Zp,Yp,u8]=Up(yc),[cd]=Ps(yc,[u8,Kp]),Qp=Kp(),[d8,Cl]=cd(yc),[h8,f8]=cd(yc),eE=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:c,value:u,defaultValue:f,onValueChange:m,dir:x,name:w,autoComplete:y,disabled:j,required:S,form:C}=n,A=Qp(e),[M,R]=_.useState(null),[z,W]=_.useState(null),[G,K]=_.useState(!1),ee=bc(x),[D,P]=Ji({prop:r,defaultProp:i??!1,onChange:c,caller:yc}),[V,B]=Ji({prop:u,defaultProp:f,onChange:m,caller:yc}),U=_.useRef(null),q=M?C||!!M.closest("form"):!0,[H,se]=_.useState(new Set),be=Array.from(H).map(ie=>ie.props.value).join(";");return s.jsx(ZS,{...A,children:s.jsxs(d8,{required:S,scope:e,trigger:M,onTriggerChange:R,valueNode:z,onValueNodeChange:W,valueNodeHasChildren:G,onValueNodeHasChildrenChange:K,contentId:Yi(),value:V,onValueChange:B,open:D,onOpenChange:P,dir:ee,triggerPointerDownPosRef:U,disabled:j,children:[s.jsx(Zp.Provider,{scope:e,children:s.jsx(h8,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(ie=>{se(we=>new Set(we).add(ie))},[]),onNativeOptionRemove:_.useCallback(ie=>{se(we=>{const Z=new Set(we);return Z.delete(ie),Z})},[]),children:t})}),q?s.jsxs(bE,{"aria-hidden":!0,required:S,tabIndex:-1,name:w,autoComplete:y,value:V,onChange:ie=>B(ie.target.value),disabled:j,form:C,children:[V===void 0?s.jsx("option",{value:""}):null,Array.from(H)]},be):null]})})};eE.displayName=yc;var tE="SelectTrigger",nE=_.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,c=Qp(t),u=Cl(tE,t),f=u.disabled||r,m=ct(e,u.onTriggerChange),x=Yp(t),w=_.useRef("touch"),[y,j,S]=jE(A=>{const M=x().filter(W=>!W.disabled),R=M.find(W=>W.value===u.value),z=CE(M,A,R);z!==void 0&&u.onValueChange(z.value)}),C=A=>{f||(u.onOpenChange(!0),S()),A&&(u.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return s.jsx(YS,{asChild:!0,...c,children:s.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":NE(u.value)?"":void 0,...i,ref:m,onClick:Le(i.onClick,A=>{A.currentTarget.focus(),w.current!=="mouse"&&C(A)}),onPointerDown:Le(i.onPointerDown,A=>{w.current=A.pointerType;const M=A.target;M.hasPointerCapture(A.pointerId)&&M.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(C(A),A.preventDefault())}),onKeyDown:Le(i.onKeyDown,A=>{const M=y.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&j(A.key),!(M&&A.key===" ")&&l8.includes(A.key)&&(C(),A.preventDefault())})})})});nE.displayName=tE;var sE="SelectValue",rE=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:c,placeholder:u="",...f}=n,m=Cl(sE,t),{onValueNodeHasChildrenChange:x}=m,w=c!==void 0,y=ct(e,m.onValueNodeChange);return jn(()=>{x(w)},[x,w]),s.jsx(Ye.span,{...f,ref:y,style:{pointerEvents:"none"},children:NE(m.value)?s.jsx(s.Fragment,{children:u}):c})});rE.displayName=sE;var m8="SelectIcon",iE=_.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return s.jsx(Ye.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});iE.displayName=m8;var p8="SelectPortal",aE=n=>s.jsx(Fp,{asChild:!0,...n});aE.displayName=p8;var wc="SelectContent",oE=_.forwardRef((n,e)=>{const t=Cl(wc,n.__scopeSelect),[r,i]=_.useState();if(jn(()=>{i(new DocumentFragment)},[]),!t.open){const c=r;return c?Yu.createPortal(s.jsx(lE,{scope:n.__scopeSelect,children:s.jsx(Zp.Slot,{scope:n.__scopeSelect,children:s.jsx("div",{children:n.children})})}),c):null}return s.jsx(cE,{...n,ref:e})});oE.displayName=wc;var li=10,[lE,Sl]=cd(wc),g8="SelectContentImpl",x8=e8("SelectContent.RemoveScroll"),cE=_.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:c,onPointerDownOutside:u,side:f,sideOffset:m,align:x,alignOffset:w,arrowPadding:y,collisionBoundary:j,collisionPadding:S,sticky:C,hideWhenDetached:A,avoidCollisions:M,...R}=n,z=Cl(wc,t),[W,G]=_.useState(null),[K,ee]=_.useState(null),D=ct(e,ge=>G(ge)),[P,V]=_.useState(null),[B,U]=_.useState(null),q=Yp(t),[H,se]=_.useState(!1),be=_.useRef(!1);_.useEffect(()=>{if(W)return i0(W)},[W]),r0();const ie=_.useCallback(ge=>{const[Be,...rt]=q().map(wt=>wt.ref.current),[it]=rt.slice(-1),xt=document.activeElement;for(const wt of ge)if(wt===xt||(wt?.scrollIntoView({block:"nearest"}),wt===Be&&K&&(K.scrollTop=0),wt===it&&K&&(K.scrollTop=K.scrollHeight),wt?.focus(),document.activeElement!==xt))return},[q,K]),we=_.useCallback(()=>ie([P,W]),[ie,P,W]);_.useEffect(()=>{H&&we()},[H,we]);const{onOpenChange:Z,triggerPointerDownPosRef:ce}=z;_.useEffect(()=>{if(W){let ge={x:0,y:0};const Be=it=>{ge={x:Math.abs(Math.round(it.pageX)-(ce.current?.x??0)),y:Math.abs(Math.round(it.pageY)-(ce.current?.y??0))}},rt=it=>{ge.x<=10&&ge.y<=10?it.preventDefault():W.contains(it.target)||Z(!1),document.removeEventListener("pointermove",Be),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Be),document.addEventListener("pointerup",rt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Be),document.removeEventListener("pointerup",rt,{capture:!0})}}},[W,Z,ce]),_.useEffect(()=>{const ge=()=>Z(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[Z]);const[ue,X]=jE(ge=>{const Be=q().filter(xt=>!xt.disabled),rt=Be.find(xt=>xt.ref.current===document.activeElement),it=CE(Be,ge,rt);it&&setTimeout(()=>it.ref.current.focus())}),me=_.useCallback((ge,Be,rt)=>{const it=!be.current&&!rt;(z.value!==void 0&&z.value===Be||it)&&(V(ge),it&&(be.current=!0))},[z.value]),je=_.useCallback(()=>W?.focus(),[W]),Ee=_.useCallback((ge,Be,rt)=>{const it=!be.current&&!rt;(z.value!==void 0&&z.value===Be||it)&&U(ge)},[z.value]),Re=r==="popper"?Mv:uE,Ae=Re===Mv?{side:f,sideOffset:m,align:x,alignOffset:w,arrowPadding:y,collisionBoundary:j,collisionPadding:S,sticky:C,hideWhenDetached:A,avoidCollisions:M}:{};return s.jsx(lE,{scope:t,content:W,viewport:K,onViewportChange:ee,itemRefCallback:me,selectedItem:P,onItemLeave:je,itemTextRefCallback:Ee,focusSelectedItem:we,selectedItemText:B,position:r,isPositioned:H,searchRef:ue,children:s.jsx(Bp,{as:x8,allowPinchZoom:!0,children:s.jsx(Op,{asChild:!0,trapped:z.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:Le(i,ge=>{z.trigger?.focus({preventScroll:!0}),ge.preventDefault()}),children:s.jsx(Dp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:s.jsx(Re,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:ge=>ge.preventDefault(),...R,...Ae,onPlaced:()=>se(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:Le(R.onKeyDown,ge=>{const Be=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!Be&&ge.key.length===1&&X(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let it=q().filter(xt=>!xt.disabled).map(xt=>xt.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(it=it.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const xt=ge.target,wt=it.indexOf(xt);it=it.slice(wt+1)}setTimeout(()=>ie(it)),ge.preventDefault()}})})})})})})});cE.displayName=g8;var v8="SelectItemAlignedPosition",uE=_.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,c=Cl(wc,t),u=Sl(wc,t),[f,m]=_.useState(null),[x,w]=_.useState(null),y=ct(e,D=>w(D)),j=Yp(t),S=_.useRef(!1),C=_.useRef(!0),{viewport:A,selectedItem:M,selectedItemText:R,focusSelectedItem:z}=u,W=_.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&x&&A&&M&&R){const D=c.trigger.getBoundingClientRect(),P=x.getBoundingClientRect(),V=c.valueNode.getBoundingClientRect(),B=R.getBoundingClientRect();if(c.dir!=="rtl"){const xt=B.left-P.left,wt=V.left-xt,Ht=D.left-wt,Xn=D.width+Ht,Kr=Math.max(Xn,P.width),Ks=window.innerWidth-li,ps=oh(wt,[li,Math.max(li,Ks-Kr)]);f.style.minWidth=Xn+"px",f.style.left=ps+"px"}else{const xt=P.right-B.right,wt=window.innerWidth-V.right-xt,Ht=window.innerWidth-D.right-wt,Xn=D.width+Ht,Kr=Math.max(Xn,P.width),Ks=window.innerWidth-li,ps=oh(wt,[li,Math.max(li,Ks-Kr)]);f.style.minWidth=Xn+"px",f.style.right=ps+"px"}const U=j(),q=window.innerHeight-li*2,H=A.scrollHeight,se=window.getComputedStyle(x),be=parseInt(se.borderTopWidth,10),ie=parseInt(se.paddingTop,10),we=parseInt(se.borderBottomWidth,10),Z=parseInt(se.paddingBottom,10),ce=be+ie+H+Z+we,ue=Math.min(M.offsetHeight*5,ce),X=window.getComputedStyle(A),me=parseInt(X.paddingTop,10),je=parseInt(X.paddingBottom,10),Ee=D.top+D.height/2-li,Re=q-Ee,Ae=M.offsetHeight/2,ge=M.offsetTop+Ae,Be=be+ie+ge,rt=ce-Be;if(Be<=Ee){const xt=U.length>0&&M===U[U.length-1].ref.current;f.style.bottom="0px";const wt=x.clientHeight-A.offsetTop-A.offsetHeight,Ht=Math.max(Re,Ae+(xt?je:0)+wt+we),Xn=Be+Ht;f.style.height=Xn+"px"}else{const xt=U.length>0&&M===U[0].ref.current;f.style.top="0px";const Ht=Math.max(Ee,be+A.offsetTop+(xt?me:0)+Ae)+rt;f.style.height=Ht+"px",A.scrollTop=Be-Ee+A.offsetTop}f.style.margin=`${li}px 0`,f.style.minHeight=ue+"px",f.style.maxHeight=q+"px",r?.(),requestAnimationFrame(()=>S.current=!0)}},[j,c.trigger,c.valueNode,f,x,A,M,R,c.dir,r]);jn(()=>W(),[W]);const[G,K]=_.useState();jn(()=>{x&&K(window.getComputedStyle(x).zIndex)},[x]);const ee=_.useCallback(D=>{D&&C.current===!0&&(W(),z?.(),C.current=!1)},[W,z]);return s.jsx(w8,{scope:t,contentWrapper:f,shouldExpandOnScrollRef:S,onScrollButtonChange:ee,children:s.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:s.jsx(Ye.div,{...i,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});uE.displayName=v8;var y8="SelectPopperPosition",Mv=_.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=li,...c}=n,u=Qp(t);return s.jsx(QS,{...u,...c,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Mv.displayName=y8;var[w8,C0]=cd(wc,{}),Dv="SelectViewport",dE=_.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,c=Sl(Dv,t),u=C0(Dv,t),f=ct(e,c.onViewportChange),m=_.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Zp.Slot,{scope:t,children:s.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Le(i.onScroll,x=>{const w=x.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:j}=u;if(j?.current&&y){const S=Math.abs(m.current-w.scrollTop);if(S>0){const C=window.innerHeight-li*2,A=parseFloat(y.style.minHeight),M=parseFloat(y.style.height),R=Math.max(A,M);if(R<C){const z=R+S,W=Math.min(C,z),G=z-W;y.style.height=W+"px",y.style.bottom==="0px"&&(w.scrollTop=G>0?G:0,y.style.justifyContent="flex-end")}}}m.current=w.scrollTop})})})]})});dE.displayName=Dv;var hE="SelectGroup",[_8,b8]=cd(hE),N8=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Yi();return s.jsx(_8,{scope:t,id:i,children:s.jsx(Ye.div,{role:"group","aria-labelledby":i,...r,ref:e})})});N8.displayName=hE;var fE="SelectLabel",j8=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=b8(fE,t);return s.jsx(Ye.div,{id:i.id,...r,ref:e})});j8.displayName=fE;var Qm="SelectItem",[C8,mE]=cd(Qm),pE=_.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:c,...u}=n,f=Cl(Qm,t),m=Sl(Qm,t),x=f.value===r,[w,y]=_.useState(c??""),[j,S]=_.useState(!1),C=ct(e,z=>m.itemRefCallback?.(z,r,i)),A=Yi(),M=_.useRef("touch"),R=()=>{i||(f.onValueChange(r),f.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(C8,{scope:t,value:r,disabled:i,textId:A,isSelected:x,onItemTextChange:_.useCallback(z=>{y(W=>W||(z?.textContent??"").trim())},[]),children:s.jsx(Zp.ItemSlot,{scope:t,value:r,disabled:i,textValue:w,children:s.jsx(Ye.div,{role:"option","aria-labelledby":A,"data-highlighted":j?"":void 0,"aria-selected":x&&j,"data-state":x?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...u,ref:C,onFocus:Le(u.onFocus,()=>S(!0)),onBlur:Le(u.onBlur,()=>S(!1)),onClick:Le(u.onClick,()=>{M.current!=="mouse"&&R()}),onPointerUp:Le(u.onPointerUp,()=>{M.current==="mouse"&&R()}),onPointerDown:Le(u.onPointerDown,z=>{M.current=z.pointerType}),onPointerMove:Le(u.onPointerMove,z=>{M.current=z.pointerType,i?m.onItemLeave?.():M.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(u.onPointerLeave,z=>{z.currentTarget===document.activeElement&&m.onItemLeave?.()}),onKeyDown:Le(u.onKeyDown,z=>{m.searchRef?.current!==""&&z.key===" "||(c8.includes(z.key)&&R(),z.key===" "&&z.preventDefault())})})})})});pE.displayName=Qm;var Gd="SelectItemText",gE=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...c}=n,u=Cl(Gd,t),f=Sl(Gd,t),m=mE(Gd,t),x=f8(Gd,t),[w,y]=_.useState(null),j=ct(e,R=>y(R),m.onItemTextChange,R=>f.itemTextRefCallback?.(R,m.value,m.disabled)),S=w?.textContent,C=_.useMemo(()=>s.jsx("option",{value:m.value,disabled:m.disabled,children:S},m.value),[m.disabled,m.value,S]),{onNativeOptionAdd:A,onNativeOptionRemove:M}=x;return jn(()=>(A(C),()=>M(C)),[A,M,C]),s.jsxs(s.Fragment,{children:[s.jsx(Ye.span,{id:m.textId,...c,ref:j}),m.isSelected&&u.valueNode&&!u.valueNodeHasChildren?Yu.createPortal(c.children,u.valueNode):null]})});gE.displayName=Gd;var xE="SelectItemIndicator",vE=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return mE(xE,t).isSelected?s.jsx(Ye.span,{"aria-hidden":!0,...r,ref:e}):null});vE.displayName=xE;var Ov="SelectScrollUpButton",yE=_.forwardRef((n,e)=>{const t=Sl(Ov,n.__scopeSelect),r=C0(Ov,n.__scopeSelect),[i,c]=_.useState(!1),u=ct(e,r.onScrollButtonChange);return jn(()=>{if(t.viewport&&t.isPositioned){let f=function(){const x=m.scrollTop>0;c(x)};const m=t.viewport;return f(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[t.viewport,t.isPositioned]),i?s.jsx(_E,{...n,ref:u,onAutoScroll:()=>{const{viewport:f,selectedItem:m}=t;f&&m&&(f.scrollTop=f.scrollTop-m.offsetHeight)}}):null});yE.displayName=Ov;var Fv="SelectScrollDownButton",wE=_.forwardRef((n,e)=>{const t=Sl(Fv,n.__scopeSelect),r=C0(Fv,n.__scopeSelect),[i,c]=_.useState(!1),u=ct(e,r.onScrollButtonChange);return jn(()=>{if(t.viewport&&t.isPositioned){let f=function(){const x=m.scrollHeight-m.clientHeight,w=Math.ceil(m.scrollTop)<x;c(w)};const m=t.viewport;return f(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[t.viewport,t.isPositioned]),i?s.jsx(_E,{...n,ref:u,onAutoScroll:()=>{const{viewport:f,selectedItem:m}=t;f&&m&&(f.scrollTop=f.scrollTop+m.offsetHeight)}}):null});wE.displayName=Fv;var _E=_.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,c=Sl("SelectScrollButton",t),u=_.useRef(null),f=Yp(t),m=_.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return _.useEffect(()=>()=>m(),[m]),jn(()=>{f().find(w=>w.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),s.jsx(Ye.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Le(i.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:Le(i.onPointerMove,()=>{c.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:Le(i.onPointerLeave,()=>{m()})})}),S8="SelectSeparator",E8=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return s.jsx(Ye.div,{"aria-hidden":!0,...r,ref:e})});E8.displayName=S8;var Vv="SelectArrow",T8=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Qp(t),c=Cl(Vv,t),u=Sl(Vv,t);return c.open&&u.position==="popper"?s.jsx(XS,{...i,...r,ref:e}):null});T8.displayName=Vv;var A8="SelectBubbleInput",bE=_.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=_.useRef(null),c=ct(r,i),u=jh(e);return _.useEffect(()=>{const f=i.current;if(!f)return;const m=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(u!==e&&w){const y=new Event("change",{bubbles:!0});w.call(f,e),f.dispatchEvent(y)}},[u,e]),s.jsx(Ye.select,{...t,style:{...JS,...t.style},ref:c,defaultValue:e})});bE.displayName=A8;function NE(n){return n===""||n===void 0}function jE(n){const e=Un(n),t=_.useRef(""),r=_.useRef(0),i=_.useCallback(u=>{const f=t.current+u;e(f),(function m(x){t.current=x,window.clearTimeout(r.current),x!==""&&(r.current=window.setTimeout(()=>m(""),1e3))})(f)},[e]),c=_.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,c]}function CE(n,e,t){const i=e.length>1&&Array.from(e).every(x=>x===e[0])?e[0]:e,c=t?n.indexOf(t):-1;let u=k8(n,Math.max(c,0));i.length===1&&(u=u.filter(x=>x!==t));const m=u.find(x=>x.textValue.toLowerCase().startsWith(i.toLowerCase()));return m!==t?m:void 0}function k8(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var P8=eE,I8=nE,R8=rE,L8=iE,M8=aE,D8=oE,O8=dE,F8=pE,V8=gE,B8=vE,z8=yE,U8=wE;function rn({...n}){return s.jsx(P8,{"data-slot":"select",...n})}function an({...n}){return s.jsx(R8,{"data-slot":"select-value",...n})}function on({className:n,size:e="default",children:t,...r}){return s.jsxs(I8,{"data-slot":"select-trigger","data-size":e,className:ft("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,s.jsx(L8,{asChild:!0,children:s.jsx(sp,{className:"size-4 opacity-50"})})]})}function ln({className:n,children:e,position:t="popper",...r}){return s.jsx(M8,{children:s.jsxs(D8,{"data-slot":"select-content",className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[s.jsx($8,{}),s.jsx(O8,{className:ft("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),s.jsx(H8,{})]})})}function De({className:n,children:e,...t}){return s.jsxs(F8,{"data-slot":"select-item",className:ft("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(B8,{children:s.jsx(ll,{className:"size-4"})})}),s.jsx(V8,{children:e})]})}function $8({className:n,...e}){return s.jsx(z8,{"data-slot":"select-scroll-up-button",className:ft("flex cursor-default items-center justify-center py-1",n),...e,children:s.jsx(hk,{className:"size-4"})})}function H8({className:n,...e}){return s.jsx(U8,{"data-slot":"select-scroll-down-button",className:ft("flex cursor-default items-center justify-center py-1",n),...e,children:s.jsx(sp,{className:"size-4"})})}function W8({initialData:n,onNext:e,onCancel:t}){const[r,i]=_.useState(n),[c,u]=_.useState({}),[f,m]=_.useState(!1),x=["Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Biography","History","Self-Help","Business","Science","Philosophy","Classic Literature","Other"],w=["New","Like New","Good","Fair","Poor"],y=A=>{const M=A.replace(/[-\s]/g,"");return M.length===10||M.length===13?/^[0-9X]+$/.test(M):!1},j=async()=>{if(!r.isbn){u({...c,isbn:"Please enter an ISBN number first"});return}if(!y(r.isbn)){u({...c,isbn:"Invalid ISBN format"});return}m(!0);const A=r.isbn.replace(/[-\s]/g,"");try{const R=await(await fetch(`https://www.googleapis.com/books/v1/volumes?q=isbn:${A}`)).json();if(R.totalItems>0){const z=R.items[0].volumeInfo;i({...r,bookName:z.title||"",author:z.authors?.[0]||"",publishedYear:z.publishedDate?.split("-")[0]||"",pages:z.pageCount?.toString()||"",language:z.language?.toUpperCase()||"English",description:z.description||r.description})}else u({...c,isbn:"No book found with this ISBN"})}catch{u({...c,isbn:"Failed to lookup ISBN. Please enter details manually."})}finally{m(!1)}},S=()=>{const A={};return r.isbn.trim()?y(r.isbn)||(A.isbn="Please enter a valid ISBN-10 or ISBN-13 number"):A.isbn="ISBN is required",r.bookName.trim()||(A.bookName="Book name is required"),r.author.trim()||(A.author="Author name is required"),r.price?parseFloat(r.price)<=0?A.price="Price must be greater than 0":parseFloat(r.price)>1e4&&(A.price="Price seems unreasonably high"):A.price="Price is required",r.publishedYear&&(parseInt(r.publishedYear)<1e3||parseInt(r.publishedYear)>new Date().getFullYear())&&(A.publishedYear="Please enter a valid year"),r.pages&&parseInt(r.pages)<=0&&(A.pages="Pages must be greater than 0"),u(A),Object.keys(A).length===0},C=A=>{A.preventDefault(),S()&&e(r)};return s.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(ar,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Book Information"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter the details of the book you want to sell"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(ke,{htmlFor:"isbn",children:"ISBN Number *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{id:"isbn",type:"text",placeholder:"978-3-16-148410-0 or 0-306-40615-2",value:r.isbn,onChange:A=>{i({...r,isbn:A.target.value}),u({...c,isbn:""})},className:c.isbn?"border-red-500":""}),c.isbn&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.isbn})]}),s.jsxs(J,{type:"button",onClick:j,disabled:f,variant:"outline",className:"px-4",children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),f?"Looking up...":"Auto-fill"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"The ISBN can be found on the back cover or copyright page of the book"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(ke,{htmlFor:"bookName",children:"Book Title *"}),s.jsx(Ie,{id:"bookName",type:"text",placeholder:"Enter the book title",value:r.bookName,onChange:A=>{i({...r,bookName:A.target.value}),u({...c,bookName:""})},className:c.bookName?"border-red-500":""}),c.bookName&&s.jsx("p",{className:"text-sm text-red-500",children:c.bookName})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(ke,{htmlFor:"author",children:"Author Name *"}),s.jsx(Ie,{id:"author",type:"text",placeholder:"Enter the author's name",value:r.author,onChange:A=>{i({...r,author:A.target.value}),u({...c,author:""})},className:c.author?"border-red-500":""}),c.author&&s.jsx("p",{className:"text-sm text-red-500",children:c.author})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"price",children:"Resale Price (USD) *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),s.jsx(Ie,{id:"price",type:"number",step:"0.01",placeholder:"0.00",value:r.price,onChange:A=>{i({...r,price:A.target.value}),u({...c,price:""})},className:`pl-7 ${c.price?"border-red-500":""}`})]}),c.price&&s.jsx("p",{className:"text-sm text-red-500",children:c.price})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"condition",children:"Condition *"}),s.jsxs(rn,{value:r.condition,onValueChange:A=>i({...r,condition:A}),children:[s.jsx(on,{id:"condition",children:s.jsx(an,{})}),s.jsx(ln,{children:w.map(A=>s.jsx(De,{value:A,children:A},A))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"category",children:"Category *"}),s.jsxs(rn,{value:r.category,onValueChange:A=>i({...r,category:A}),children:[s.jsx(on,{id:"category",children:s.jsx(an,{})}),s.jsx(ln,{children:x.map(A=>s.jsx(De,{value:A,children:A},A))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"publishedYear",children:"Published Year"}),s.jsx(Ie,{id:"publishedYear",type:"number",placeholder:"2020",value:r.publishedYear,onChange:A=>{i({...r,publishedYear:A.target.value}),u({...c,publishedYear:""})},className:c.publishedYear?"border-red-500":""}),c.publishedYear&&s.jsx("p",{className:"text-sm text-red-500",children:c.publishedYear})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"language",children:"Language"}),s.jsx(Ie,{id:"language",type:"text",placeholder:"English",value:r.language,onChange:A=>i({...r,language:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"pages",children:"Number of Pages"}),s.jsx(Ie,{id:"pages",type:"number",placeholder:"350",value:r.pages,onChange:A=>{i({...r,pages:A.target.value}),u({...c,pages:""})},className:c.pages?"border-red-500":""}),c.pages&&s.jsx("p",{className:"text-sm text-red-500",children:c.pages})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(ke,{htmlFor:"description",children:"Description"}),s.jsx(xc,{id:"description",placeholder:"Describe the book's condition, any highlighting, notes, or other details buyers should know...",value:r.description,onChange:A=>i({...r,description:A.target.value}),rows:4}),s.jsxs("p",{className:"text-xs text-gray-500",children:[r.description.length,"/500 characters"]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(J,{type:"button",variant:"outline",onClick:t,className:"px-6",children:"Cancel"}),s.jsx(J,{type:"submit",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:"Next: Location & Delivery"})]})]})}function SE(n,e){const t=_.useRef(e);_.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const q8=1;function G8(n){return Object.freeze({__version:q8,map:n})}function K8(n,e){return Object.freeze({...n,...e})}const EE=_.createContext(null),TE=EE.Provider;function S0(){const n=_.useContext(EE);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function Z8(n){function e(t,r){const{instance:i,context:c}=n(t).current;return _.useImperativeHandle(r,()=>i),t.children==null?null:ds.createElement(TE,{value:c},t.children)}return _.forwardRef(e)}function Y8(n){function e(t,r){const[i,c]=_.useState(!1),{instance:u}=n(t,c).current;_.useImperativeHandle(r,()=>u),_.useEffect(function(){i&&u.update()},[u,i,t.children]);const f=u._contentNode;return f?Yu.createPortal(t.children,f):null}return _.forwardRef(e)}function Q8(n){function e(t,r){const{instance:i}=n(t).current;return _.useImperativeHandle(r,()=>i),null}return _.forwardRef(e)}function AE(n,e){const t=_.useRef();_.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function E0(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function X8(n,e){return function(r,i){const c=S0(),u=n(E0(r,c),c);return SE(c.map,r.attribution),AE(u.current,r.eventHandlers),e(u.current,c,r,i),u}}var Kd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var J8=Kd.exports,GN;function e9(){return GN||(GN=1,(function(n,e){(function(t,r){r(e)})(J8,(function(t){var r="1.9.4";function i(o){var d,g,b,k;for(g=1,b=arguments.length;g<b;g++){k=arguments[g];for(d in k)o[d]=k[d]}return o}var c=Object.create||(function(){function o(){}return function(d){return o.prototype=d,new o}})();function u(o,d){var g=Array.prototype.slice;if(o.bind)return o.bind.apply(o,g.call(arguments,1));var b=g.call(arguments,2);return function(){return o.apply(d,b.length?b.concat(g.call(arguments)):arguments)}}var f=0;function m(o){return"_leaflet_id"in o||(o._leaflet_id=++f),o._leaflet_id}function x(o,d,g){var b,k,F,Q;return Q=function(){b=!1,k&&(F.apply(g,k),k=!1)},F=function(){b?k=arguments:(o.apply(g,arguments),setTimeout(Q,d),b=!0)},F}function w(o,d,g){var b=d[1],k=d[0],F=b-k;return o===b&&g?o:((o-k)%F+F)%F+k}function y(){return!1}function j(o,d){if(d===!1)return o;var g=Math.pow(10,d===void 0?6:d);return Math.round(o*g)/g}function S(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function C(o){return S(o).split(/\s+/)}function A(o,d){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?c(o.options):{});for(var g in d)o.options[g]=d[g];return o.options}function M(o,d,g){var b=[];for(var k in o)b.push(encodeURIComponent(g?k.toUpperCase():k)+"="+encodeURIComponent(o[k]));return(!d||d.indexOf("?")===-1?"?":"&")+b.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function z(o,d){return o.replace(R,function(g,b){var k=d[b];if(k===void 0)throw new Error("No value provided for variable "+g);return typeof k=="function"&&(k=k(d)),k})}var W=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function G(o,d){for(var g=0;g<o.length;g++)if(o[g]===d)return g;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var D=0;function P(o){var d=+new Date,g=Math.max(0,16-(d-D));return D=d+g,window.setTimeout(o,g)}var V=window.requestAnimationFrame||ee("RequestAnimationFrame")||P,B=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function U(o,d,g){if(g&&V===P)o.call(d);else return V.call(window,u(o,d))}function q(o){o&&B.call(window,o)}var H={__proto__:null,extend:i,create:c,bind:u,get lastId(){return f},stamp:m,throttle:x,wrapNum:w,falseFn:y,formatNum:j,trim:S,splitWords:C,setOptions:A,getParamString:M,template:z,isArray:W,indexOf:G,emptyImageUrl:K,requestFn:V,cancelFn:B,requestAnimFrame:U,cancelAnimFrame:q};function se(){}se.extend=function(o){var d=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=d.__super__=this.prototype,b=c(g);b.constructor=d,d.prototype=b;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(d[k]=this[k]);return o.statics&&i(d,o.statics),o.includes&&(be(o.includes),i.apply(null,[b].concat(o.includes))),i(b,o),delete b.statics,delete b.includes,b.options&&(b.options=g.options?c(g.options):{},i(b.options,o.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,Q=b._initHooks.length;F<Q;F++)b._initHooks[F].call(this)}},d},se.include=function(o){var d=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=d,this.mergeOptions(o.options)),this},se.mergeOptions=function(o){return i(this.prototype.options,o),this},se.addInitHook=function(o){var d=Array.prototype.slice.call(arguments,1),g=typeof o=="function"?o:function(){this[o].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function be(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=W(o)?o:[o];for(var d=0;d<o.length;d++)o[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ie={on:function(o,d,g){if(typeof o=="object")for(var b in o)this._on(b,o[b],d);else{o=C(o);for(var k=0,F=o.length;k<F;k++)this._on(o[k],d,g)}return this},off:function(o,d,g){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var b in o)this._off(b,o[b],d);else{o=C(o);for(var k=arguments.length===1,F=0,Q=o.length;F<Q;F++)k?this._off(o[F]):this._off(o[F],d,g)}return this},_on:function(o,d,g,b){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(o,d,g)===!1){g===this&&(g=void 0);var k={fn:d,ctx:g};b&&(k.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(k)}},_off:function(o,d,g){var b,k,F;if(this._events&&(b=this._events[o],!!b)){if(arguments.length===1){if(this._firingCount)for(k=0,F=b.length;k<F;k++)b[k].fn=y;delete this._events[o];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var Q=this._listens(o,d,g);if(Q!==!1){var ae=b[Q];this._firingCount&&(ae.fn=y,this._events[o]=b=b.slice()),b.splice(Q,1)}}},fire:function(o,d,g){if(!this.listens(o,g))return this;var b=i({},d,{type:o,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var k=this._events[o];if(k){this._firingCount=this._firingCount+1||1;for(var F=0,Q=k.length;F<Q;F++){var ae=k[F],he=ae.fn;ae.once&&this.off(o,he,ae.ctx),he.call(ae.ctx||this,b)}this._firingCount--}}return g&&this._propagateEvent(b),this},listens:function(o,d,g,b){typeof o!="string"&&console.warn('"string" type argument expected');var k=d;typeof d!="function"&&(b=!!d,k=void 0,g=void 0);var F=this._events&&this._events[o];if(F&&F.length&&this._listens(o,k,g)!==!1)return!0;if(b){for(var Q in this._eventParents)if(this._eventParents[Q].listens(o,d,g,b))return!0}return!1},_listens:function(o,d,g){if(!this._events)return!1;var b=this._events[o]||[];if(!d)return!!b.length;g===this&&(g=void 0);for(var k=0,F=b.length;k<F;k++)if(b[k].fn===d&&b[k].ctx===g)return k;return!1},once:function(o,d,g){if(typeof o=="object")for(var b in o)this._on(b,o[b],d,!0);else{o=C(o);for(var k=0,F=o.length;k<F;k++)this._on(o[k],d,g,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[m(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[m(o)],this},_propagateEvent:function(o){for(var d in this._eventParents)this._eventParents[d].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};ie.addEventListener=ie.on,ie.removeEventListener=ie.clearAllEventListeners=ie.off,ie.addOneTimeEventListener=ie.once,ie.fireEvent=ie.fire,ie.hasEventListeners=ie.listens;var we=se.extend(ie);function Z(o,d,g){this.x=g?Math.round(o):o,this.y=g?Math.round(d):d}var ce=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(o){return this.clone()._add(ue(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ue(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new Z(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new Z(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(o){o=ue(o);var d=o.x-this.x,g=o.y-this.y;return Math.sqrt(d*d+g*g)},equals:function(o){return o=ue(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ue(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+j(this.x)+", "+j(this.y)+")"}};function ue(o,d,g){return o instanceof Z?o:W(o)?new Z(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new Z(o.x,o.y):new Z(o,d,g)}function X(o,d){if(o)for(var g=d?[o,d]:o,b=0,k=g.length;b<k;b++)this.extend(g[b])}X.prototype={extend:function(o){var d,g;if(!o)return this;if(o instanceof Z||typeof o[0]=="number"||"x"in o)d=g=ue(o);else if(o=me(o),d=o.min,g=o.max,!d||!g)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=g.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(o){return ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ue(this.min.x,this.max.y)},getTopRight:function(){return ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var d,g;return typeof o[0]=="number"||o instanceof Z?o=ue(o):o=me(o),o instanceof X?(d=o.min,g=o.max):d=g=o,d.x>=this.min.x&&g.x<=this.max.x&&d.y>=this.min.y&&g.y<=this.max.y},intersects:function(o){o=me(o);var d=this.min,g=this.max,b=o.min,k=o.max,F=k.x>=d.x&&b.x<=g.x,Q=k.y>=d.y&&b.y<=g.y;return F&&Q},overlaps:function(o){o=me(o);var d=this.min,g=this.max,b=o.min,k=o.max,F=k.x>d.x&&b.x<g.x,Q=k.y>d.y&&b.y<g.y;return F&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var d=this.min,g=this.max,b=Math.abs(d.x-g.x)*o,k=Math.abs(d.y-g.y)*o;return me(ue(d.x-b,d.y-k),ue(g.x+b,g.y+k))},equals:function(o){return o?(o=me(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function me(o,d){return!o||o instanceof X?o:new X(o,d)}function je(o,d){if(o)for(var g=d?[o,d]:o,b=0,k=g.length;b<k;b++)this.extend(g[b])}je.prototype={extend:function(o){var d=this._southWest,g=this._northEast,b,k;if(o instanceof Re)b=o,k=o;else if(o instanceof je){if(b=o._southWest,k=o._northEast,!b||!k)return this}else return o?this.extend(Ae(o)||Ee(o)):this;return!d&&!g?(this._southWest=new Re(b.lat,b.lng),this._northEast=new Re(k.lat,k.lng)):(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),g.lat=Math.max(k.lat,g.lat),g.lng=Math.max(k.lng,g.lng)),this},pad:function(o){var d=this._southWest,g=this._northEast,b=Math.abs(d.lat-g.lat)*o,k=Math.abs(d.lng-g.lng)*o;return new je(new Re(d.lat-b,d.lng-k),new Re(g.lat+b,g.lng+k))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Re||"lat"in o?o=Ae(o):o=Ee(o);var d=this._southWest,g=this._northEast,b,k;return o instanceof je?(b=o.getSouthWest(),k=o.getNorthEast()):b=k=o,b.lat>=d.lat&&k.lat<=g.lat&&b.lng>=d.lng&&k.lng<=g.lng},intersects:function(o){o=Ee(o);var d=this._southWest,g=this._northEast,b=o.getSouthWest(),k=o.getNorthEast(),F=k.lat>=d.lat&&b.lat<=g.lat,Q=k.lng>=d.lng&&b.lng<=g.lng;return F&&Q},overlaps:function(o){o=Ee(o);var d=this._southWest,g=this._northEast,b=o.getSouthWest(),k=o.getNorthEast(),F=k.lat>d.lat&&b.lat<g.lat,Q=k.lng>d.lng&&b.lng<g.lng;return F&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,d){return o?(o=Ee(o),this._southWest.equals(o.getSouthWest(),d)&&this._northEast.equals(o.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ee(o,d){return o instanceof je?o:new je(o,d)}function Re(o,d,g){if(isNaN(o)||isNaN(d))throw new Error("Invalid LatLng object: ("+o+", "+d+")");this.lat=+o,this.lng=+d,g!==void 0&&(this.alt=+g)}Re.prototype={equals:function(o,d){if(!o)return!1;o=Ae(o);var g=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return g<=(d===void 0?1e-9:d)},toString:function(o){return"LatLng("+j(this.lat,o)+", "+j(this.lng,o)+")"},distanceTo:function(o){return Be.distance(this,Ae(o))},wrap:function(){return Be.wrapLatLng(this)},toBounds:function(o){var d=180*o/40075017,g=d/Math.cos(Math.PI/180*this.lat);return Ee([this.lat-d,this.lng-g],[this.lat+d,this.lng+g])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function Ae(o,d,g){return o instanceof Re?o:W(o)&&typeof o[0]!="object"?o.length===3?new Re(o[0],o[1],o[2]):o.length===2?new Re(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Re(o.lat,"lng"in o?o.lng:o.lon,o.alt):d===void 0?null:new Re(o,d,g)}var ge={latLngToPoint:function(o,d){var g=this.projection.project(o),b=this.scale(d);return this.transformation._transform(g,b)},pointToLatLng:function(o,d){var g=this.scale(d),b=this.transformation.untransform(o,g);return this.projection.unproject(b)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var d=this.projection.bounds,g=this.scale(o),b=this.transformation.transform(d.min,g),k=this.transformation.transform(d.max,g);return new X(b,k)},infinite:!1,wrapLatLng:function(o){var d=this.wrapLng?w(o.lng,this.wrapLng,!0):o.lng,g=this.wrapLat?w(o.lat,this.wrapLat,!0):o.lat,b=o.alt;return new Re(g,d,b)},wrapLatLngBounds:function(o){var d=o.getCenter(),g=this.wrapLatLng(d),b=d.lat-g.lat,k=d.lng-g.lng;if(b===0&&k===0)return o;var F=o.getSouthWest(),Q=o.getNorthEast(),ae=new Re(F.lat-b,F.lng-k),he=new Re(Q.lat-b,Q.lng-k);return new je(ae,he)}},Be=i({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(o,d){var g=Math.PI/180,b=o.lat*g,k=d.lat*g,F=Math.sin((d.lat-o.lat)*g/2),Q=Math.sin((d.lng-o.lng)*g/2),ae=F*F+Math.cos(b)*Math.cos(k)*Q*Q,he=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return this.R*he}}),rt=6378137,it={R:rt,MAX_LATITUDE:85.0511287798,project:function(o){var d=Math.PI/180,g=this.MAX_LATITUDE,b=Math.max(Math.min(g,o.lat),-g),k=Math.sin(b*d);return new Z(this.R*o.lng*d,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(o){var d=180/Math.PI;return new Re((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*d,o.x*d/this.R)},bounds:(function(){var o=rt*Math.PI;return new X([-o,-o],[o,o])})()};function xt(o,d,g,b){if(W(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=d,this._c=g,this._d=b}xt.prototype={transform:function(o,d){return this._transform(o.clone(),d)},_transform:function(o,d){return d=d||1,o.x=d*(this._a*o.x+this._b),o.y=d*(this._c*o.y+this._d),o},untransform:function(o,d){return d=d||1,new Z((o.x/d-this._b)/this._a,(o.y/d-this._d)/this._c)}};function wt(o,d,g,b){return new xt(o,d,g,b)}var Ht=i({},Be,{code:"EPSG:3857",projection:it,transformation:(function(){var o=.5/(Math.PI*it.R);return wt(o,.5,-o,.5)})()}),Xn=i({},Ht,{code:"EPSG:900913"});function Kr(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Ks(o,d){var g="",b,k,F,Q,ae,he;for(b=0,F=o.length;b<F;b++){for(ae=o[b],k=0,Q=ae.length;k<Q;k++)he=ae[k],g+=(k?"L":"M")+he.x+" "+he.y;g+=d?$e.svg?"z":"x":""}return g||"M0 0"}var ps=document.documentElement.style,gi="ActiveXObject"in window,dn=gi&&!document.addEventListener,Zt="msLaunchUri"in navigator&&!("documentMode"in document),gs=xn("webkit"),io=xn("android"),ao=xn("android 2")||xn("android 3"),kc=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xi=io&&xn("Google")&&kc<537&&!("AudioNode"in window),ia=!!window.opera,aa=!Zt&&xn("chrome"),Zr=xn("gecko")&&!gs&&!ia&&!gi,Pc=!aa&&xn("safari"),vi=xn("phantom"),Yr="OTransition"in ps,Ic=navigator.platform.indexOf("Win")===0,Qr=gi&&"transition"in ps,yi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ao,oo="MozPerspective"in ps,Zs=!window.L_DISABLE_3D&&(Qr||yi||oo)&&!Yr&&!vi,mr=typeof orientation<"u"||xn("mobile"),wi=mr&&gs,lo=mr&&yi,pr=!window.PointerEvent&&window.MSPointerEvent,gr=!!(window.PointerEvent||pr),Wt="ontouchstart"in window||!!window.TouchEvent,El=!window.L_NO_TOUCH&&(Wt||gr),_i=mr&&ia,bi=mr&&Zr,Rc=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lc=(function(){var o=!1;try{var d=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",y,d),window.removeEventListener("testPassiveEventSupport",y,d)}catch{}return o})(),xr=(function(){return!!document.createElement("canvas").getContext})(),co=!!(document.createElementNS&&Kr("svg").createSVGRect),oa=!!co&&(function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ni=!co&&(function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var d=o.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),ji=navigator.platform.indexOf("Mac")===0,Mc=navigator.platform.indexOf("Linux")===0;function xn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var $e={ie:gi,ielt9:dn,edge:Zt,webkit:gs,android:io,android23:ao,androidStock:xi,opera:ia,chrome:aa,gecko:Zr,safari:Pc,phantom:vi,opera12:Yr,win:Ic,ie3d:Qr,webkit3d:yi,gecko3d:oo,any3d:Zs,mobile:mr,mobileWebkit:wi,mobileWebkit3d:lo,msPointer:pr,pointer:gr,touch:El,touchNative:Wt,mobileOpera:_i,mobileGecko:bi,retina:Rc,passiveEvents:Lc,canvas:xr,svg:co,vml:Ni,inlineSvg:oa,mac:ji,linux:Mc},la=$e.msPointer?"MSPointerDown":"pointerdown",xs=$e.msPointer?"MSPointerMove":"pointermove",Tl=$e.msPointer?"MSPointerUp":"pointerup",Al=$e.msPointer?"MSPointerCancel":"pointercancel",ca={touchstart:la,touchmove:xs,touchend:Tl,touchcancel:Al},Rs={touchstart:zt,touchmove:Ls,touchend:Ls,touchcancel:Ls},vr={},kl=!1;function Dc(o,d,g){return d==="touchstart"&&ha(),Rs[d]?(g=Rs[d].bind(this,g),o.addEventListener(ca[d],g,!1),g):(console.warn("wrong event specified:",d),y)}function Oc(o,d,g){if(!ca[d]){console.warn("wrong event specified:",d);return}o.removeEventListener(ca[d],g,!1)}function ua(o){vr[o.pointerId]=o}function Pl(o){vr[o.pointerId]&&(vr[o.pointerId]=o)}function da(o){delete vr[o.pointerId]}function ha(){kl||(document.addEventListener(la,ua,!0),document.addEventListener(xs,Pl,!0),document.addEventListener(Tl,da,!0),document.addEventListener(Al,da,!0),kl=!0)}function Ls(o,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var g in vr)d.touches.push(vr[g]);d.changedTouches=[d],o(d)}}function zt(o,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Ut(d),Ls(o,d)}function dd(o){var d={},g,b;for(b in o)g=o[b],d[b]=g&&g.bind?g.bind(o):g;return o=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var uo=200;function Il(o,d){o.addEventListener("dblclick",d);var g=0,b;function k(F){if(F.detail!==1){b=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var Q=Nr(F);if(!(Q.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!Q.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var ae=Date.now();ae-g<=uo?(b++,b===2&&d(dd(F))):b=1,g=ae}}}return o.addEventListener("click",k),{dblclick:d,simDblclick:k}}function fa(o,d){o.removeEventListener("dblclick",d.dblclick),o.removeEventListener("click",d.simDblclick)}var ma=Ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),yr=Ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ci=yr==="webkitTransition"||yr==="OTransition"?yr+"End":"transitionend";function Jn(o){return typeof o=="string"?document.getElementById(o):o}function Si(o,d){var g=o.style[d]||o.currentStyle&&o.currentStyle[d];if((!g||g==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(o,null);g=b?b[d]:null}return g==="auto"?null:g}function dt(o,d,g){var b=document.createElement(o);return b.className=d||"",g&&g.appendChild(b),b}function Tt(o){var d=o.parentNode;d&&d.removeChild(o)}function $n(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ms(o){var d=o.parentNode;d&&d.lastChild!==o&&d.appendChild(o)}function Hn(o){var d=o.parentNode;d&&d.firstChild!==o&&d.insertBefore(o,d.firstChild)}function wr(o,d){if(o.classList!==void 0)return o.classList.contains(d);var g=_r(o);return g.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(g)}function Ve(o,d){if(o.classList!==void 0)for(var g=C(d),b=0,k=g.length;b<k;b++)o.classList.add(g[b]);else if(!wr(o,d)){var F=_r(o);Xr(o,(F?F+" ":"")+d)}}function Mt(o,d){o.classList!==void 0?o.classList.remove(d):Xr(o,S((" "+_r(o)+" ").replace(" "+d+" "," ")))}function Xr(o,d){o.className.baseVal===void 0?o.className=d:o.className.baseVal=d}function _r(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Mn(o,d){"opacity"in o.style?o.style.opacity=d:"filter"in o.style&&Rl(o,d)}function Rl(o,d){var g=!1,b="DXImageTransform.Microsoft.Alpha";try{g=o.filters.item(b)}catch{if(d===1)return}d=Math.round(d*100),g?(g.Enabled=d!==100,g.Opacity=d):o.style.filter+=" progid:"+b+"(opacity="+d+")"}function Ei(o){for(var d=document.documentElement.style,g=0;g<o.length;g++)if(o[g]in d)return o[g];return!1}function vs(o,d,g){var b=d||new Z(0,0);o.style[ma]=($e.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(g?" scale("+g+")":"")}function Yt(o,d){o._leaflet_pos=d,$e.any3d?vs(o,d):(o.style.left=d.x+"px",o.style.top=d.y+"px")}function Ys(o){return o._leaflet_pos||new Z(0,0)}var pt,es,pa;if("onselectstart"in document)pt=function(){tt(window,"selectstart",Ut)},es=function(){Dt(window,"selectstart",Ut)};else{var br=Ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pt=function(){if(br){var o=document.documentElement.style;pa=o[br],o[br]="none"}},es=function(){br&&(document.documentElement.style[br]=pa,pa=void 0)}}function ga(){tt(window,"dragstart",Ut)}function xa(){Dt(window,"dragstart",Ut)}var Ti,Ds;function Ai(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(ys(),Ti=o,Ds=o.style.outlineStyle,o.style.outlineStyle="none",tt(window,"keydown",ys))}function ys(){Ti&&(Ti.style.outlineStyle=Ds,Ti=void 0,Ds=void 0,Dt(window,"keydown",ys))}function Qs(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function fn(o){var d=o.getBoundingClientRect();return{x:d.width/o.offsetWidth||1,y:d.height/o.offsetHeight||1,boundingClientRect:d}}var va={__proto__:null,TRANSFORM:ma,TRANSITION:yr,TRANSITION_END:Ci,get:Jn,getStyle:Si,create:dt,remove:Tt,empty:$n,toFront:Ms,toBack:Hn,hasClass:wr,addClass:Ve,removeClass:Mt,setClass:Xr,getClass:_r,setOpacity:Mn,testProp:Ei,setTransform:vs,setPosition:Yt,getPosition:Ys,get disableTextSelection(){return pt},get enableTextSelection(){return es},disableImageDrag:ga,enableImageDrag:xa,preventOutline:Ai,restoreOutline:ys,getSizedParentNode:Qs,getScale:fn};function tt(o,d,g,b){if(d&&typeof d=="object")for(var k in d)ho(o,k,d[k],g);else{d=C(d);for(var F=0,Q=d.length;F<Q;F++)ho(o,d[F],g,b)}return this}var Qt="_leaflet_events";function Dt(o,d,g,b){if(arguments.length===1)Jr(o),delete o[Qt];else if(d&&typeof d=="object")for(var k in d)ki(o,k,d[k],g);else if(d=C(d),arguments.length===2)Jr(o,function(ae){return G(d,ae)!==-1});else for(var F=0,Q=d.length;F<Q;F++)ki(o,d[F],g,b);return this}function Jr(o,d){for(var g in o[Qt]){var b=g.split(/\d/)[0];(!d||d(b))&&ki(o,b,null,null,g)}}var ws={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ho(o,d,g,b){var k=d+m(g)+(b?"_"+m(b):"");if(o[Qt]&&o[Qt][k])return this;var F=function(ae){return g.call(b||o,ae||window.event)},Q=F;!$e.touchNative&&$e.pointer&&d.indexOf("touch")===0?F=Dc(o,d,F):$e.touch&&d==="dblclick"?F=Il(o,F):"addEventListener"in o?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?o.addEventListener(ws[d]||d,F,$e.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(F=function(ae){ae=ae||window.event,wa(o,ae)&&Q(ae)},o.addEventListener(ws[d],F,!1)):o.addEventListener(d,Q,!1):o.attachEvent("on"+d,F),o[Qt]=o[Qt]||{},o[Qt][k]=F}function ki(o,d,g,b,k){k=k||d+m(g)+(b?"_"+m(b):"");var F=o[Qt]&&o[Qt][k];if(!F)return this;!$e.touchNative&&$e.pointer&&d.indexOf("touch")===0?Oc(o,d,F):$e.touch&&d==="dblclick"?fa(o,F):"removeEventListener"in o?o.removeEventListener(ws[d]||d,F,!1):o.detachEvent("on"+d,F),o[Qt][k]=null}function St(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function fo(o){return ho(o,"wheel",St),this}function ya(o){return tt(o,"mousedown touchstart dblclick contextmenu",St),o._leaflet_disable_click=!0,this}function Ut(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function ts(o){return Ut(o),St(o),this}function Nr(o){if(o.composedPath)return o.composedPath();for(var d=[],g=o.target;g;)d.push(g),g=g.parentNode;return d}function jr(o,d){if(!d)return new Z(o.clientX,o.clientY);var g=fn(d),b=g.boundingClientRect;return new Z((o.clientX-b.left)/g.x-d.clientLeft,(o.clientY-b.top)/g.y-d.clientTop)}var Cr=$e.linux&&$e.chrome?window.devicePixelRatio:$e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ll(o){return $e.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Cr:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function wa(o,d){var g=d.relatedTarget;if(!g)return!0;try{for(;g&&g!==o;)g=g.parentNode}catch{return!1}return g!==o}var Sr={__proto__:null,on:tt,off:Dt,stopPropagation:St,disableScrollPropagation:fo,disableClickPropagation:ya,preventDefault:Ut,stop:ts,getPropagationPath:Nr,getMousePosition:jr,getWheelDelta:Ll,isExternalTarget:wa,addListener:tt,removeListener:Dt},_a=we.extend({run:function(o,d,g,b){this.stop(),this._el=o,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Ys(o),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(o){var d=+new Date-this._startTime,g=this._duration*1e3;d<g?this._runFrame(this._easeOut(d/g),o):(this._runFrame(1),this._complete())},_runFrame:function(o,d){var g=this._startPos.add(this._offset.multiplyBy(o));d&&g._round(),Yt(this._el,g),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),gt=we.extend({options:{crs:Ht,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,d){d=A(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Ae(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yr&&$e.any3d&&!$e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),tt(this._proxy,Ci,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,d,g){if(d=d===void 0?this._zoom:this._limitZoom(d),o=this._limitCenter(Ae(o),d,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var b=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,d,g.zoom):this._tryAnimatedPan(o,g.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(o,d,g.pan&&g.pan.noMoveStart),this},setZoom:function(o,d){return this._loaded?this.setView(this.getCenter(),o,{zoom:d}):(this._zoom=o,this)},zoomIn:function(o,d){return o=o||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,d)},zoomOut:function(o,d){return o=o||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,d)},setZoomAround:function(o,d,g){var b=this.getZoomScale(d),k=this.getSize().divideBy(2),F=o instanceof Z?o:this.latLngToContainerPoint(o),Q=F.subtract(k).multiplyBy(1-1/b),ae=this.containerPointToLatLng(k.add(Q));return this.setView(ae,d,{zoom:g})},_getBoundsCenterZoom:function(o,d){d=d||{},o=o.getBounds?o.getBounds():Ee(o);var g=ue(d.paddingTopLeft||d.padding||[0,0]),b=ue(d.paddingBottomRight||d.padding||[0,0]),k=this.getBoundsZoom(o,!1,g.add(b));if(k=typeof d.maxZoom=="number"?Math.min(d.maxZoom,k):k,k===1/0)return{center:o.getCenter(),zoom:k};var F=b.subtract(g).divideBy(2),Q=this.project(o.getSouthWest(),k),ae=this.project(o.getNorthEast(),k),he=this.unproject(Q.add(ae).divideBy(2).add(F),k);return{center:he,zoom:k}},fitBounds:function(o,d){if(o=Ee(o),!o.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(o,d);return this.setView(g.center,g.zoom,d)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,d){return this.setView(o,this._zoom,{pan:d})},panBy:function(o,d){if(o=ue(o).round(),d=d||{},!o.x&&!o.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _a,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Ve(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,g,d.duration||.25,d.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,d,g){if(g=g||{},g.animate===!1||!$e.any3d)return this.setView(o,d,g);this._stop();var b=this.project(this.getCenter()),k=this.project(o),F=this.getSize(),Q=this._zoom;o=Ae(o),d=d===void 0?Q:d;var ae=Math.max(F.x,F.y),he=ae*this.getZoomScale(Q,d),ye=k.distanceTo(b)||1,Fe=1.42,Je=Fe*Fe;function mt(Ft){var Io=Ft?-1:1,cg=Ft?he:ae,ug=he*he-ae*ae+Io*Je*Je*ye*ye,Ea=2*cg*Je*ye,Ta=ug/Ea,Aa=Math.sqrt(Ta*Ta+1)-Ta,Zc=Aa<1e-9?-18:Math.log(Aa);return Zc}function En(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function yn(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function Cs(Ft){return En(Ft)/yn(Ft)}var rs=mt(0);function ko(Ft){return ae*(yn(rs)/yn(rs+Fe*Ft))}function Nd(Ft){return ae*(yn(rs)*Cs(rs+Fe*Ft)-En(rs))/Je}function Oi(Ft){return 1-Math.pow(1-Ft,1.5)}var rf=Date.now(),Sa=(mt(1)-rs)/Fe,Rr=g.duration?1e3*g.duration:1e3*Sa*.8;function Po(){var Ft=(Date.now()-rf)/Rr,Io=Oi(Ft)*Sa;Ft<=1?(this._flyToFrame=U(Po,this),this._move(this.unproject(b.add(k.subtract(b).multiplyBy(Nd(Io)/ye)),Q),this.getScaleZoom(ae/ko(Io),Q),{flyTo:!0})):this._move(o,d)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Po.call(this),this},flyToBounds:function(o,d){var g=this._getBoundsCenterZoom(o,d);return this.flyTo(g.center,g.zoom,d)},setMaxBounds:function(o){return o=Ee(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var d=this.options.minZoom;return this.options.minZoom=o,this._loaded&&d!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var d=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&d!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,d){this._enforcingBounds=!0;var g=this.getCenter(),b=this._limitCenter(g,this._zoom,Ee(o));return g.equals(b)||this.panTo(b,d),this._enforcingBounds=!1,this},panInside:function(o,d){d=d||{};var g=ue(d.paddingTopLeft||d.padding||[0,0]),b=ue(d.paddingBottomRight||d.padding||[0,0]),k=this.project(this.getCenter()),F=this.project(o),Q=this.getPixelBounds(),ae=me([Q.min.add(g),Q.max.subtract(b)]),he=ae.getSize();if(!ae.contains(F)){this._enforcingBounds=!0;var ye=F.subtract(ae.getCenter()),Fe=ae.extend(F).getSize().subtract(he);k.x+=ye.x<0?-Fe.x:Fe.x,k.y+=ye.y<0?-Fe.y:Fe.y,this.panTo(this.unproject(k),d),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),b=d.divideBy(2).round(),k=g.divideBy(2).round(),F=b.subtract(k);return!F.x&&!F.y?this:(o.animate&&o.pan?this.panBy(F):(o.pan&&this._rawPanBy(F),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,g,o):navigator.geolocation.getCurrentPosition(d,g,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var d=o.code,g=o.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var d=o.coords.latitude,g=o.coords.longitude,b=new Re(d,g),k=b.toBounds(o.coords.accuracy*2),F=this._locateOptions;if(F.setView){var Q=this.getBoundsZoom(k);this.setView(b,F.maxZoom?Math.min(Q,F.maxZoom):Q)}var ae={latlng:b,bounds:k,timestamp:o.timestamp};for(var he in o.coords)typeof o.coords[he]=="number"&&(ae[he]=o.coords[he]);this.fire("locationfound",ae)}},addHandler:function(o,d){if(!d)return this;var g=this[o]=new d(this);return this._handlers.push(g),this.options[o]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Tt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,d){var g="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),b=dt("div",g,d||this._mapPane);return o&&(this._panes[o]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),d=this.unproject(o.getBottomLeft()),g=this.unproject(o.getTopRight());return new je(d,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,d,g){o=Ee(o),g=ue(g||[0,0]);var b=this.getZoom()||0,k=this.getMinZoom(),F=this.getMaxZoom(),Q=o.getNorthWest(),ae=o.getSouthEast(),he=this.getSize().subtract(g),ye=me(this.project(ae,b),this.project(Q,b)).getSize(),Fe=$e.any3d?this.options.zoomSnap:1,Je=he.x/ye.x,mt=he.y/ye.y,En=d?Math.max(Je,mt):Math.min(Je,mt);return b=this.getScaleZoom(En,b),Fe&&(b=Math.round(b/(Fe/100))*(Fe/100),b=d?Math.ceil(b/Fe)*Fe:Math.floor(b/Fe)*Fe),Math.max(k,Math.min(F,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,d){var g=this._getTopLeftPoint(o,d);return new X(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,d){var g=this.options.crs;return d=d===void 0?this._zoom:d,g.scale(o)/g.scale(d)},getScaleZoom:function(o,d){var g=this.options.crs;d=d===void 0?this._zoom:d;var b=g.zoom(o*g.scale(d));return isNaN(b)?1/0:b},project:function(o,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Ae(o),d)},unproject:function(o,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(ue(o),d)},layerPointToLatLng:function(o){var d=ue(o).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(o){var d=this.project(Ae(o))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Ee(o))},distance:function(o,d){return this.options.crs.distance(Ae(o),Ae(d))},containerPointToLayerPoint:function(o){return ue(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ue(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var d=this.containerPointToLayerPoint(ue(o));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(o)))},mouseEventToContainerPoint:function(o){return jr(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var d=this._container=Jn(o);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");tt(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&$e.any3d,Ve(o,"leaflet-container"+($e.touch?" leaflet-touch":"")+($e.retina?" leaflet-retina":"")+($e.ielt9?" leaflet-oldie":"")+($e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Si(o,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ve(o.markerPane,"leaflet-zoom-hide"),Ve(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,d,g){Yt(this._mapPane,new Z(0,0));var b=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var k=this._zoom!==d;this._moveStart(k,g)._move(o,d)._moveEnd(k),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(o,d){return o&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(o,d,g,b){d===void 0&&(d=this._zoom);var k=this._zoom!==d;return this._zoom=d,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),b?g&&g.pinch&&this.fire("zoom",g):((k||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Yt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[m(this._container)]=this;var d=o?Dt:tt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),$e.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,d){for(var g=[],b,k=d==="mouseout"||d==="mouseover",F=o.target||o.srcElement,Q=!1;F;){if(b=this._targets[m(F)],b&&(d==="click"||d==="preclick")&&this._draggableMoved(b)){Q=!0;break}if(b&&b.listens(d,!0)&&(k&&!wa(F,o)||(g.push(b),k))||F===this._container)break;F=F.parentNode}return!g.length&&!Q&&!k&&this.listens(d,!0)&&(g=[this]),g},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var d=o.target||o.srcElement;if(!(!this._loaded||d._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(d))){var g=o.type;g==="mousedown"&&Ai(d),this._fireDOMEvent(o,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,d,g){if(o.type==="click"){var b=i({},o);b.type="preclick",this._fireDOMEvent(b,b.type,g)}var k=this._findEventTargets(o,d);if(g){for(var F=[],Q=0;Q<g.length;Q++)g[Q].listens(d,!0)&&F.push(g[Q]);k=F.concat(k)}if(k.length){d==="contextmenu"&&Ut(o);var ae=k[0],he={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ye=ae.getLatLng&&(!ae._radius||ae._radius<=10);he.containerPoint=ye?this.latLngToContainerPoint(ae.getLatLng()):this.mouseEventToContainerPoint(o),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=ye?ae.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(Q=0;Q<k.length;Q++)if(k[Q].fire(d,he,!0),he.originalEvent._stopped||k[Q].options.bubblingMouseEvents===!1&&G(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,d=this._handlers.length;o<d;o++)this._handlers[o].disable()},whenReady:function(o,d){return this._loaded?o.call(d||this,{target:this}):this.on("load",o,d),this},_getMapPanePos:function(){return Ys(this._mapPane)||new Z(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,d){var g=o&&d!==void 0?this._getNewPixelOrigin(o,d):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,d){var g=this.getSize()._divideBy(2);return this.project(o,d)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,d,g){var b=this._getNewPixelOrigin(g,d);return this.project(o,d)._subtract(b)},_latLngBoundsToNewLayerBounds:function(o,d,g){var b=this._getNewPixelOrigin(g,d);return me([this.project(o.getSouthWest(),d)._subtract(b),this.project(o.getNorthWest(),d)._subtract(b),this.project(o.getSouthEast(),d)._subtract(b),this.project(o.getNorthEast(),d)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,d,g){if(!g)return o;var b=this.project(o,d),k=this.getSize().divideBy(2),F=new X(b.subtract(k),b.add(k)),Q=this._getBoundsOffset(F,g,d);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?o:this.unproject(b.add(Q),d)},_limitOffset:function(o,d){if(!d)return o;var g=this.getPixelBounds(),b=new X(g.min.add(o),g.max.add(o));return o.add(this._getBoundsOffset(b,d))},_getBoundsOffset:function(o,d,g){var b=me(this.project(d.getNorthEast(),g),this.project(d.getSouthWest(),g)),k=b.min.subtract(o.min),F=b.max.subtract(o.max),Q=this._rebound(k.x,-F.x),ae=this._rebound(k.y,-F.y);return new Z(Q,ae)},_rebound:function(o,d){return o+d>0?Math.round(o-d)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(d))},_limitZoom:function(o){var d=this.getMinZoom(),g=this.getMaxZoom(),b=$e.any3d?this.options.zoomSnap:1;return b&&(o=Math.round(o/b)*b),Math.max(d,Math.min(g,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,d){var g=this._getCenterOffset(o)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,d),!0)},_createAnimProxy:function(){var o=this._proxy=dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(d){var g=ma,b=this._proxy.style[g];vs(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),b===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),d=this.getZoom();vs(this._proxy,this.project(o,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,d,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(d),k=this._getCenterOffset(o)._divideBy(1-1/b);return g.animate!==!0&&!this.getSize().contains(k)?!1:(U(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(o,d,!0)},this),!0)},_animateZoom:function(o,d,g,b){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=d,Ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:d,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _s(o,d){return new gt(o,d)}var Dn=se.extend({options:{position:"topright"},initialize:function(o){A(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var d=this._map;return d&&d.removeControl(this),this.options.position=o,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var d=this._container=this.onAdd(o),g=this.getPosition(),b=o._controlCorners[g];return Ve(d,"leaflet-control"),g.indexOf("bottom")!==-1?b.insertBefore(d,b.firstChild):b.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),bs=function(o){return new Dn(o)};gt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},d="leaflet-",g=this._controlContainer=dt("div",d+"control-container",this._container);function b(k,F){var Q=d+k+" "+d+F;o[k+F]=dt("div",Q,g)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Tt(this._controlCorners[o]);Tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ml=Dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,d,g,b){return g<b?-1:b<g?1:0}},initialize:function(o,d,g){A(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in o)this._addLayer(o[b],b);for(b in d)this._addLayer(d[b],b,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Dn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,d){return this._addLayer(o,d),this._map?this._update():this},addOverlay:function(o,d){return this._addLayer(o,d,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(o));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",d=this._container=dt("div",o),g=this.options.collapsed;d.setAttribute("aria-haspopup",!0),ya(d),fo(d);var b=this._section=dt("section",o+"-list");g&&(this._map.on("click",this.collapse,this),tt(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=dt("a",o+"-toggle",d);k.href="#",k.title="Layers",k.setAttribute("role","button"),tt(k,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Ut(F),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=dt("div",o+"-base",b),this._separator=dt("div",o+"-separator",b),this._overlaysList=dt("div",o+"-overlays",b),d.appendChild(b)},_getLayer:function(o){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===o)return this._layers[d]},_addLayer:function(o,d,g){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:d,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(b,k){return this.options.sortFunction(b.layer,k.layer,b.name,k.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$n(this._baseLayersList),$n(this._overlaysList),this._layerControlInputs=[];var o,d,g,b,k=0;for(g=0;g<this._layers.length;g++)b=this._layers[g],this._addItem(b),d=d||b.overlay,o=o||!b.overlay,k+=b.overlay?0:1;return this.options.hideSingleBase&&(o=o&&k>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=d&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var d=this._getLayer(m(o.target)),g=d.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;g&&this._map.fire(g,d)},_createRadioElement:function(o,d){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(d?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=g,b.firstChild},_addItem:function(o){var d=document.createElement("label"),g=this._map.hasLayer(o.layer),b;o.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=g):b=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(b),b.layerId=m(o.layer),tt(b,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+o.name;var F=document.createElement("span");d.appendChild(F),F.appendChild(b),F.appendChild(k);var Q=o.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,d,g,b=[],k=[];this._handlingClick=!0;for(var F=o.length-1;F>=0;F--)d=o[F],g=this._getLayer(d.layerId).layer,d.checked?b.push(g):d.checked||k.push(g);for(F=0;F<k.length;F++)this._map.hasLayer(k[F])&&this._map.removeLayer(k[F]);for(F=0;F<b.length;F++)this._map.hasLayer(b[F])||this._map.addLayer(b[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,d,g,b=this._map.getZoom(),k=o.length-1;k>=0;k--)d=o[k],g=this._getLayer(d.layerId).layer,d.disabled=g.options.minZoom!==void 0&&b<g.options.minZoom||g.options.maxZoom!==void 0&&b>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,tt(o,"click",Ut),this.expand();var d=this;setTimeout(function(){Dt(o,"click",Ut),d._preventClick=!1})}}),ba=function(o,d,g){return new Ml(o,d,g)},Os=Dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var d="leaflet-control-zoom",g=dt("div",d+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,d+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,d+"-out",g,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,d,g,b,k){var F=dt("a",g,b);return F.innerHTML=o,F.href="#",F.title=d,F.setAttribute("role","button"),F.setAttribute("aria-label",d),ya(F),tt(F,"click",ts),tt(F,"click",k,this),tt(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var o=this._map,d="leaflet-disabled";Mt(this._zoomInButton,d),Mt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Ve(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Ve(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});gt.mergeOptions({zoomControl:!0}),gt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Os,this.addControl(this.zoomControl))});var Dl=function(o){return new Os(o)},Sn=Dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var d="leaflet-control-scale",g=dt("div",d),b=this.options;return this._addScales(b,d+"-line",g),o.on(b.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),g},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,d,g){o.metric&&(this._mScale=dt("div",d,g)),o.imperial&&(this._iScale=dt("div",d,g))},_update:function(){var o=this._map,d=o.getSize().y/2,g=o.distance(o.containerPointToLatLng([0,d]),o.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(g)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var d=this._getRoundNum(o),g=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,g,d/o)},_updateImperial:function(o){var d=o*3.2808399,g,b,k;d>5280?(g=d/5280,b=this._getRoundNum(g),this._updateScale(this._iScale,b+" mi",b/g)):(k=this._getRoundNum(d),this._updateScale(this._iScale,k+" ft",k/d))},_updateScale:function(o,d,g){o.style.width=Math.round(this.options.maxWidth*g)+"px",o.innerHTML=d},_getRoundNum:function(o){var d=Math.pow(10,(Math.floor(o)+"").length-1),g=o/d;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,d*g}}),Er=function(o){return new Sn(o)},Na='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Tr=Dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($e.inlineSvg?Na+" ":"")+"Leaflet</a>"},initialize:function(o){A(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=dt("div","leaflet-control-attribution"),ya(this._container);for(var d in o._layers)o._layers[d].getAttribution&&this.addAttribution(o._layers[d].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var d in this._attributions)this._attributions[d]&&o.push(d);var g=[];this.options.prefix&&g.push(this.options.prefix),o.length&&g.push(o.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});gt.mergeOptions({attributionControl:!0}),gt.addInitHook(function(){this.options.attributionControl&&new Tr().addTo(this)});var mo=function(o){return new Tr(o)};Dn.Layers=Ml,Dn.Zoom=Os,Dn.Scale=Sn,Dn.Attribution=Tr,bs.layers=ba,bs.zoom=Dl,bs.scale=Er,bs.attribution=mo;var Wn=se.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wn.addTo=function(o,d){return o.addHandler(d,this),this};var po={Events:ie},ns=$e.touch?"touchstart mousedown":"mousedown",ss=we.extend({options:{clickTolerance:3},initialize:function(o,d,g,b){A(this,b),this._element=o,this._dragStartTarget=d||o,this._preventOutline=g},enable:function(){this._enabled||(tt(this._dragStartTarget,ns,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ss._dragging===this&&this.finishDrag(!0),Dt(this._dragStartTarget,ns,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!wr(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ss._dragging===this&&this.finishDrag();return}if(!(ss._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ss._dragging=this,this._preventOutline&&Ai(this._element),ga(),pt(),!this._moving)){this.fire("down");var d=o.touches?o.touches[0]:o,g=Qs(this._element);this._startPoint=new Z(d.clientX,d.clientY),this._startPos=Ys(this._element),this._parentScale=fn(g);var b=o.type==="mousedown";tt(document,b?"mousemove":"touchmove",this._onMove,this),tt(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var d=o.touches&&o.touches.length===1?o.touches[0]:o,g=new Z(d.clientX,d.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,Ut(o),this._moved||(this.fire("dragstart"),this._moved=!0,Ve(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Yt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Mt(document.body,"leaflet-dragging"),this._lastTarget&&(Mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dt(document,"mousemove touchmove",this._onMove,this),Dt(document,"mouseup touchend touchcancel",this._onUp,this),xa(),es();var d=this._moved&&this._moving;this._moving=!1,ss._dragging=!1,d&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function go(o,d,g){var b,k=[1,4,2,8],F,Q,ae,he,ye,Fe,Je,mt;for(F=0,Fe=o.length;F<Fe;F++)o[F]._code=de(o[F],d);for(ae=0;ae<4;ae++){for(Je=k[ae],b=[],F=0,Fe=o.length,Q=Fe-1;F<Fe;Q=F++)he=o[F],ye=o[Q],he._code&Je?ye._code&Je||(mt=re(ye,he,Je,d,g),mt._code=de(mt,d),b.push(mt)):(ye._code&Je&&(mt=re(ye,he,Je,d,g),mt._code=de(mt,d),b.push(mt)),b.push(he));o=b}return o}function Ol(o,d){var g,b,k,F,Q,ae,he,ye,Fe;if(!o||o.length===0)throw new Error("latlngs not passed");At(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Je=Ae([0,0]),mt=Ee(o),En=mt.getNorthWest().distanceTo(mt.getSouthWest())*mt.getNorthEast().distanceTo(mt.getNorthWest());En<1700&&(Je=xo(o));var yn=o.length,Cs=[];for(g=0;g<yn;g++){var rs=Ae(o[g]);Cs.push(d.project(Ae([rs.lat-Je.lat,rs.lng-Je.lng])))}for(ae=he=ye=0,g=0,b=yn-1;g<yn;b=g++)k=Cs[g],F=Cs[b],Q=k.y*F.x-F.y*k.x,he+=(k.x+F.x)*Q,ye+=(k.y+F.y)*Q,ae+=Q*3;ae===0?Fe=Cs[0]:Fe=[he/ae,ye/ae];var ko=d.unproject(ue(Fe));return Ae([ko.lat+Je.lat,ko.lng+Je.lng])}function xo(o){for(var d=0,g=0,b=0,k=0;k<o.length;k++){var F=Ae(o[k]);d+=F.lat,g+=F.lng,b++}return Ae([d/b,g/b])}var vo={__proto__:null,clipPolygon:go,polygonCenter:Ol,centroid:xo};function vn(o,d){if(!d||!o.length)return o.slice();var g=d*d;return o=T(o,g),o=Pi(o,g),o}function Fl(o,d,g){return Math.sqrt(at(o,d,g,!0))}function Fc(o,d,g){return at(o,d,g)}function Pi(o,d){var g=o.length,b=typeof Uint8Array<"u"?Uint8Array:Array,k=new b(g);k[0]=k[g-1]=1,p(o,k,d,0,g-1);var F,Q=[];for(F=0;F<g;F++)k[F]&&Q.push(o[F]);return Q}function p(o,d,g,b,k){var F=0,Q,ae,he;for(ae=b+1;ae<=k-1;ae++)he=at(o[ae],o[b],o[k],!0),he>F&&(Q=ae,F=he);F>g&&(d[Q]=1,p(o,d,g,b,Q),p(o,d,g,Q,k))}function T(o,d){for(var g=[o[0]],b=1,k=0,F=o.length;b<F;b++)Pe(o[b],o[k])>d&&(g.push(o[b]),k=b);return k<F-1&&g.push(o[F-1]),g}var I;function $(o,d,g,b,k){var F=b?I:de(o,g),Q=de(d,g),ae,he,ye;for(I=Q;;){if(!(F|Q))return[o,d];if(F&Q)return!1;ae=F||Q,he=re(o,d,ae,g,k),ye=de(he,g),ae===F?(o=he,F=ye):(d=he,Q=ye)}}function re(o,d,g,b,k){var F=d.x-o.x,Q=d.y-o.y,ae=b.min,he=b.max,ye,Fe;return g&8?(ye=o.x+F*(he.y-o.y)/Q,Fe=he.y):g&4?(ye=o.x+F*(ae.y-o.y)/Q,Fe=ae.y):g&2?(ye=he.x,Fe=o.y+Q*(he.x-o.x)/F):g&1&&(ye=ae.x,Fe=o.y+Q*(ae.x-o.x)/F),new Z(ye,Fe,k)}function de(o,d){var g=0;return o.x<d.min.x?g|=1:o.x>d.max.x&&(g|=2),o.y<d.min.y?g|=4:o.y>d.max.y&&(g|=8),g}function Pe(o,d){var g=d.x-o.x,b=d.y-o.y;return g*g+b*b}function at(o,d,g,b){var k=d.x,F=d.y,Q=g.x-k,ae=g.y-F,he=Q*Q+ae*ae,ye;return he>0&&(ye=((o.x-k)*Q+(o.y-F)*ae)/he,ye>1?(k=g.x,F=g.y):ye>0&&(k+=Q*ye,F+=ae*ye)),Q=o.x-k,ae=o.y-F,b?Q*Q+ae*ae:new Z(k,F)}function At(o){return!W(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Rt(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),At(o)}function en(o,d){var g,b,k,F,Q,ae,he,ye;if(!o||o.length===0)throw new Error("latlngs not passed");At(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Fe=Ae([0,0]),Je=Ee(o),mt=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());mt<1700&&(Fe=xo(o));var En=o.length,yn=[];for(g=0;g<En;g++){var Cs=Ae(o[g]);yn.push(d.project(Ae([Cs.lat-Fe.lat,Cs.lng-Fe.lng])))}for(g=0,b=0;g<En-1;g++)b+=yn[g].distanceTo(yn[g+1])/2;if(b===0)ye=yn[0];else for(g=0,F=0;g<En-1;g++)if(Q=yn[g],ae=yn[g+1],k=Q.distanceTo(ae),F+=k,F>b){he=(F-b)/k,ye=[ae.x-he*(ae.x-Q.x),ae.y-he*(ae.y-Q.y)];break}var rs=d.unproject(ue(ye));return Ae([rs.lat+Fe.lat,rs.lng+Fe.lng])}var Ns={__proto__:null,simplify:vn,pointToSegmentDistance:Fl,closestPointOnSegment:Fc,clipSegment:$,_getEdgeIntersection:re,_getBitCode:de,_sqClosestPointOnSegment:at,isFlat:At,_flat:Rt,polylineCenter:en},Xs={project:function(o){return new Z(o.lng,o.lat)},unproject:function(o){return new Re(o.y,o.x)},bounds:new X([-180,-90],[180,90])},Fs={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var d=Math.PI/180,g=this.R,b=o.lat*d,k=this.R_MINOR/g,F=Math.sqrt(1-k*k),Q=F*Math.sin(b),ae=Math.tan(Math.PI/4-b/2)/Math.pow((1-Q)/(1+Q),F/2);return b=-g*Math.log(Math.max(ae,1e-10)),new Z(o.lng*d*g,b)},unproject:function(o){for(var d=180/Math.PI,g=this.R,b=this.R_MINOR/g,k=Math.sqrt(1-b*b),F=Math.exp(-o.y/g),Q=Math.PI/2-2*Math.atan(F),ae=0,he=.1,ye;ae<15&&Math.abs(he)>1e-7;ae++)ye=k*Math.sin(Q),ye=Math.pow((1-ye)/(1+ye),k/2),he=Math.PI/2-2*Math.atan(F*ye)-Q,Q+=he;return new Re(Q*d,o.x*d/g)}},Ar={__proto__:null,LonLat:Xs,Mercator:Fs,SphericalMercator:it},yo=i({},Be,{code:"EPSG:3395",projection:Fs,transformation:(function(){var o=.5/(Math.PI*Fs.R);return wt(o,.5,-o,.5)})()}),wo=i({},Be,{code:"EPSG:4326",projection:Xs,transformation:wt(1/180,1,-1/180,.5)}),rg=i({},ge,{projection:Xs,transformation:wt(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,d){var g=d.lng-o.lng,b=d.lat-o.lat;return Math.sqrt(g*g+b*b)},infinite:!0});ge.Earth=Be,ge.EPSG3395=yo,ge.EPSG3857=Ht,ge.EPSG900913=Xn,ge.EPSG4326=wo,ge.Simple=rg;var Js=we.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[m(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[m(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var d=o.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var g=this.getEvents();d.on(g,this),this.once("remove",function(){d.off(g,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});gt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(o);return this._layers[d]?this:(this._layers[d]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var d=m(o);return this._layers[d]?(this._loaded&&o.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return m(o)in this._layers},eachLayer:function(o,d){for(var g in this._layers)o.call(d,this._layers[g]);return this},_addLayers:function(o){o=o?W(o)?o:[o]:[];for(var d=0,g=o.length;d<g;d++)this.addLayer(o[d])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[m(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var d=m(o);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,d=-1/0,g=this._getZoomSpan();for(var b in this._zoomBoundLayers){var k=this._zoomBoundLayers[b].options;o=k.minZoom===void 0?o:Math.min(o,k.minZoom),d=k.maxZoom===void 0?d:Math.max(d,k.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=o===1/0?void 0:o,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ii=Js.extend({initialize:function(o,d){A(this,d),this._layers={};var g,b;if(o)for(g=0,b=o.length;g<b;g++)this.addLayer(o[g])},addLayer:function(o){var d=this.getLayerId(o);return this._layers[d]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var d=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(o){var d=typeof o=="number"?o:this.getLayerId(o);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var d=Array.prototype.slice.call(arguments,1),g,b;for(g in this._layers)b=this._layers[g],b[o]&&b[o].apply(b,d);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,d){for(var g in this._layers)o.call(d,this._layers[g]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return m(o)}}),Vl=function(o,d){return new Ii(o,d)},ei=Ii.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ii.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ii.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new je;for(var d in this._layers){var g=this._layers[d];o.extend(g.getBounds?g.getBounds():g.getLatLng())}return o}}),qh=function(o,d){return new ei(o,d)},ja=se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){A(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,d){var g=this._getIconUrl(o);if(!g){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(g,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(b,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(o,d){var g=this.options,b=g[d+"Size"];typeof b=="number"&&(b=[b,b]);var k=ue(b),F=ue(d==="shadow"&&g.shadowAnchor||g.iconAnchor||k&&k.divideBy(2,!0));o.className="leaflet-marker-"+d+" "+(g.className||""),F&&(o.style.marginLeft=-F.x+"px",o.style.marginTop=-F.y+"px"),k&&(o.style.width=k.x+"px",o.style.height=k.y+"px")},_createImg:function(o,d){return d=d||document.createElement("img"),d.src=o,d},_getIconUrl:function(o){return $e.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Gh(o){return new ja(o)}var _o=ja.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof _o.imagePath!="string"&&(_o.imagePath=this._detectIconPath()),(this.options.imagePath||_o.imagePath)+ja.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var d=function(g,b,k){var F=b.exec(g);return F&&F[k]};return o=d(o,/^url\((['"])?(.+)\1\)$/,2),o&&d(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=dt("div","leaflet-default-icon-path",document.body),d=Si(o,"background-image")||Si(o,"backgroundImage");if(document.body.removeChild(o),d=this._stripUrl(d),d)return d;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),hd=Wn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ss(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ve(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var d=this._marker,g=d._map,b=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,F=Ys(d._icon),Q=g.getPixelBounds(),ae=g.getPixelOrigin(),he=me(Q.min._subtract(ae).add(k),Q.max._subtract(ae).subtract(k));if(!he.contains(F)){var ye=ue((Math.max(he.max.x,F.x)-he.max.x)/(Q.max.x-he.max.x)-(Math.min(he.min.x,F.x)-he.min.x)/(Q.min.x-he.min.x),(Math.max(he.max.y,F.y)-he.max.y)/(Q.max.y-he.max.y)-(Math.min(he.min.y,F.y)-he.min.y)/(Q.min.y-he.min.y)).multiplyBy(b);g.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),Yt(d._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=U(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,o)))},_onDrag:function(o){var d=this._marker,g=d._shadow,b=Ys(d._icon),k=d._map.layerPointToLatLng(b);g&&Yt(g,b),d._latlng=k,o.latlng=k,o.oldLatLng=this._oldLatLng,d.fire("move",o).fire("drag",o)},_onDragEnd:function(o){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),ti=Js.extend({options:{icon:new _o,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,d){A(this,d),this._latlng=Ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var d=this._latlng;return this._latlng=Ae(o),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=o.icon.createIcon(this._icon),b=!1;g!==this._icon&&(this._icon&&this._removeIcon(),b=!0,o.title&&(g.title=o.title),g.tagName==="IMG"&&(g.alt=o.alt||"")),Ve(g,d),o.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(g,"focus",this._panOnFocus,this);var k=o.icon.createShadow(this._shadow),F=!1;k!==this._shadow&&(this._removeShadow(),F=!0),k&&(Ve(k,d),k.alt=""),this._shadow=k,o.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&F&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(this._icon,"focus",this._panOnFocus,this),Tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Tt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Yt(this._icon,o),this._shadow&&Yt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hd)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hd(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Mn(this._icon,o),this._shadow&&Mn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var d=this.options.icon.options,g=d.iconSize?ue(d.iconSize):ue(0,0),b=d.iconAnchor?ue(d.iconAnchor):ue(0,0);o.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:g.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ig(o,d){return new ti(o,d)}var Ri=Js.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return A(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vc=Ri.extend({options:{fill:!0,radius:10},initialize:function(o,d){A(this,d),this._latlng=Ae(o),this._radius=this.options.radius},setLatLng:function(o){var d=this._latlng;return this._latlng=Ae(o),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var d=o&&o.radius||this._radius;return Ri.prototype.setStyle.call(this,o),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,d=this._radiusY||o,g=this._clickTolerance(),b=[o+g,d+g];this._pxBounds=new X(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Kh(o,d){return new Vc(o,d)}var Bc=Vc.extend({initialize:function(o,d,g){if(typeof d=="number"&&(d=i({},g,{radius:d})),A(this,d),this._latlng=Ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new je(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ri.prototype.setStyle,_project:function(){var o=this._latlng.lng,d=this._latlng.lat,g=this._map,b=g.options.crs;if(b.distance===Be.distance){var k=Math.PI/180,F=this._mRadius/Be.R/k,Q=g.project([d+F,o]),ae=g.project([d-F,o]),he=Q.add(ae).divideBy(2),ye=g.unproject(he).lat,Fe=Math.acos((Math.cos(F*k)-Math.sin(d*k)*Math.sin(ye*k))/(Math.cos(d*k)*Math.cos(ye*k)))/k;(isNaN(Fe)||Fe===0)&&(Fe=F/Math.cos(Math.PI/180*d)),this._point=he.subtract(g.getPixelOrigin()),this._radius=isNaN(Fe)?0:he.x-g.project([ye,o-Fe]).x,this._radiusY=he.y-Q.y}else{var Je=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Je).x}this._updateBounds()}});function Bl(o,d,g){return new Bc(o,d,g)}var js=Ri.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,d){A(this,d),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var d=1/0,g=null,b=at,k,F,Q=0,ae=this._parts.length;Q<ae;Q++)for(var he=this._parts[Q],ye=1,Fe=he.length;ye<Fe;ye++){k=he[ye-1],F=he[ye];var Je=b(o,k,F,!0);Je<d&&(d=Je,g=b(o,k,F))}return g&&(g.distance=Math.sqrt(d)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return en(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,d){return d=d||this._defaultShape(),o=Ae(o),d.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new je,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return At(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var d=[],g=At(o),b=0,k=o.length;b<k;b++)g?(d[b]=Ae(o[b]),this._bounds.extend(d[b])):d[b]=this._convertLatLngs(o[b]);return d},_project:function(){var o=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),d=new Z(o,o);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(o,d,g){var b=o[0]instanceof Re,k=o.length,F,Q;if(b){for(Q=[],F=0;F<k;F++)Q[F]=this._map.latLngToLayerPoint(o[F]),g.extend(Q[F]);d.push(Q)}else for(F=0;F<k;F++)this._projectLatlngs(o[F],d,g)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,g,b,k,F,Q,ae,he;for(g=0,k=0,F=this._rings.length;g<F;g++)for(he=this._rings[g],b=0,Q=he.length;b<Q-1;b++)ae=$(he[b],he[b+1],o,b,!0),ae&&(d[k]=d[k]||[],d[k].push(ae[0]),(ae[1]!==he[b+1]||b===Q-2)&&(d[k].push(ae[1]),k++))}},_simplifyPoints:function(){for(var o=this._parts,d=this.options.smoothFactor,g=0,b=o.length;g<b;g++)o[g]=vn(o[g],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,d){var g,b,k,F,Q,ae,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(g=0,F=this._parts.length;g<F;g++)for(ae=this._parts[g],b=0,Q=ae.length,k=Q-1;b<Q;k=b++)if(!(!d&&b===0)&&Fl(o,ae[k],ae[b])<=he)return!0;return!1}});function ag(o,d){return new js(o,d)}js._flat=Rt;var ni=js.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var d=js.prototype._convertLatLngs.call(this,o),g=d.length;return g>=2&&d[0]instanceof Re&&d[0].equals(d[g-1])&&d.pop(),d},_setLatLngs:function(o){js.prototype._setLatLngs.call(this,o),At(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return At(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,d=this.options.weight,g=new Z(d,d);if(o=new X(o.min.subtract(g),o.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,k=this._rings.length,F;b<k;b++)F=go(this._rings[b],o,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var d=!1,g,b,k,F,Q,ae,he,ye;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(F=0,he=this._parts.length;F<he;F++)for(g=this._parts[F],Q=0,ye=g.length,ae=ye-1;Q<ye;ae=Q++)b=g[Q],k=g[ae],b.y>o.y!=k.y>o.y&&o.x<(k.x-b.x)*(o.y-b.y)/(k.y-b.y)+b.x&&(d=!d);return d||js.prototype._containsPoint.call(this,o,!0)}});function og(o,d){return new ni(o,d)}var kr=ei.extend({initialize:function(o,d){A(this,d),this._layers={},o&&this.addData(o)},addData:function(o){var d=W(o)?o:o.features,g,b,k;if(d){for(g=0,b=d.length;g<b;g++)k=d[g],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var F=this.options;if(F.filter&&!F.filter(o))return this;var Q=bo(o,F);return Q?(Q.feature=Wc(o),Q.defaultOptions=Q.options,this.resetStyle(Q),F.onEachFeature&&F.onEachFeature(o,Q),this.addLayer(Q)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(d){this._setLayerStyle(d,o)},this)},_setLayerStyle:function(o,d){o.setStyle&&(typeof d=="function"&&(d=d(o.feature)),o.setStyle(d))}});function bo(o,d){var g=o.type==="Feature"?o.geometry:o,b=g?g.coordinates:null,k=[],F=d&&d.pointToLayer,Q=d&&d.coordsToLatLng||Uc,ae,he,ye,Fe;if(!b&&!g)return null;switch(g.type){case"Point":return ae=Q(b),zc(F,o,ae,d);case"MultiPoint":for(ye=0,Fe=b.length;ye<Fe;ye++)ae=Q(b[ye]),k.push(zc(F,o,ae,d));return new ei(k);case"LineString":case"MultiLineString":return he=zl(b,g.type==="LineString"?0:1,Q),new js(he,d);case"Polygon":case"MultiPolygon":return he=zl(b,g.type==="Polygon"?1:2,Q),new ni(he,d);case"GeometryCollection":for(ye=0,Fe=g.geometries.length;ye<Fe;ye++){var Je=bo({geometry:g.geometries[ye],type:"Feature",properties:o.properties},d);Je&&k.push(Je)}return new ei(k);case"FeatureCollection":for(ye=0,Fe=g.features.length;ye<Fe;ye++){var mt=bo(g.features[ye],d);mt&&k.push(mt)}return new ei(k);default:throw new Error("Invalid GeoJSON object.")}}function zc(o,d,g,b){return o?o(d,g):new ti(g,b&&b.markersInheritOptions&&b)}function Uc(o){return new Re(o[1],o[0],o[2])}function zl(o,d,g){for(var b=[],k=0,F=o.length,Q;k<F;k++)Q=d?zl(o[k],d-1,g):(g||Uc)(o[k]),b.push(Q);return b}function $c(o,d){return o=Ae(o),o.alt!==void 0?[j(o.lng,d),j(o.lat,d),j(o.alt,d)]:[j(o.lng,d),j(o.lat,d)]}function Hc(o,d,g,b){for(var k=[],F=0,Q=o.length;F<Q;F++)k.push(d?Hc(o[F],At(o[F])?0:d-1,g,b):$c(o[F],b));return!d&&g&&k.length>0&&k.push(k[0].slice()),k}function No(o,d){return o.feature?i({},o.feature,{geometry:d}):Wc(d)}function Wc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var fd={toGeoJSON:function(o){return No(this,{type:"Point",coordinates:$c(this.getLatLng(),o)})}};ti.include(fd),Bc.include(fd),Vc.include(fd),js.include({toGeoJSON:function(o){var d=!At(this._latlngs),g=Hc(this._latlngs,d?1:0,!1,o);return No(this,{type:(d?"Multi":"")+"LineString",coordinates:g})}}),ni.include({toGeoJSON:function(o){var d=!At(this._latlngs),g=d&&!At(this._latlngs[0]),b=Hc(this._latlngs,g?2:d?1:0,!0,o);return d||(b=[b]),No(this,{type:(g?"Multi":"")+"Polygon",coordinates:b})}}),Ii.include({toMultiPoint:function(o){var d=[];return this.eachLayer(function(g){d.push(g.toGeoJSON(o).geometry.coordinates)}),No(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(o){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(o);var g=d==="GeometryCollection",b=[];return this.eachLayer(function(k){if(k.toGeoJSON){var F=k.toGeoJSON(o);if(g)b.push(F.geometry);else{var Q=Wc(F);Q.type==="FeatureCollection"?b.push.apply(b,Q.features):b.push(Q)}}}),g?No(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function Zh(o,d){return new kr(o,d)}var er=Zh,Li=Js.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,d,g){this._url=o,this._bounds=Ee(d),A(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ms(this._image),this},bringToBack:function(){return this._map&&Hn(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Ee(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",d=this._image=o?this._url:dt("img");if(Ve(d,"leaflet-image-layer"),this._zoomAnimated&&Ve(d,"leaflet-zoom-animated"),this.options.className&&Ve(d,this.options.className),d.onselectstart=y,d.onmousemove=y,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(o){var d=this._map.getZoomScale(o.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;vs(this._image,g,d)},_reset:function(){var o=this._image,d=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=d.getSize();Yt(o,d.min),o.style.width=g.x+"px",o.style.height=g.y+"px"},_updateOpacity:function(){Mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Yh=function(o,d,g){return new Li(o,d,g)},md=Li.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",d=this._image=o?this._url:dt("video");if(Ve(d,"leaflet-image-layer"),this._zoomAnimated&&Ve(d,"leaflet-zoom-animated"),this.options.className&&Ve(d,this.options.className),d.onselectstart=y,d.onmousemove=y,d.onloadeddata=u(this.fire,this,"load"),o){for(var g=d.getElementsByTagName("source"),b=[],k=0;k<g.length;k++)b.push(g[k].src);this._url=g.length>0?b:[d.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var Q=dt("source");Q.src=this._url[F],d.appendChild(Q)}}});function Qh(o,d,g){return new md(o,d,g)}var pd=Li.extend({_initImage:function(){var o=this._image=this._url;Ve(o,"leaflet-image-layer"),this._zoomAnimated&&Ve(o,"leaflet-zoom-animated"),this.options.className&&Ve(o,this.options.className),o.onselectstart=y,o.onmousemove=y}});function gd(o,d,g){return new pd(o,d,g)}var Pr=Js.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,d){o&&(o instanceof Re||W(o))?(this._latlng=Ae(o),A(this,d)):(A(this,o),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Mn(this._container,1),this.bringToFront(),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Mn(this._container,0),this._removeTimeout=setTimeout(u(Tt,void 0,this._container),200)):Tt(this._container),this.options.interactive&&(Mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ms(this._container),this},bringToBack:function(){return this._map&&Hn(this._container),this},_prepareOpen:function(o){var d=this._source;if(!d._map)return!1;if(d instanceof ei){d=null;var g=this._source._layers;for(var b in g)if(g[b]._map){d=g[b];break}if(!d)return!1;this._source=d}if(!o)if(d.getCenter)o=d.getCenter();else if(d.getLatLng)o=d.getLatLng();else if(d.getBounds)o=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")o.innerHTML=d;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),d=ue(this.options.offset),g=this._getAnchor();this._zoomAnimated?Yt(this._container,o.add(g)):d=d.add(o).add(g);var b=this._containerBottom=-d.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=b+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});gt.include({_initOverlay:function(o,d,g,b){var k=d;return k instanceof o||(k=new o(b).setContent(d)),g&&k.setLatLng(g),k}}),Js.include({_initOverlay:function(o,d,g,b){var k=g;return k instanceof o?(A(k,b),k._source=this):(k=d&&!b?d:new o(b,this),k.setContent(g)),k}});var qc=Pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Pr.prototype.openOn.call(this,o)},onAdd:function(o){Pr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ri||this._source.on("preclick",St))},onRemove:function(o){Pr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ri||this._source.off("preclick",St))},getEvents:function(){var o=Pr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",d=this._container=dt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=dt("div",o+"-content-wrapper",d);if(this._contentNode=dt("div",o+"-content",g),ya(d),fo(this._contentNode),tt(d,"contextmenu",St),this._tipContainer=dt("div",o+"-tip-container",d),this._tip=dt("div",o+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=dt("a",o+"-close-button",d);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',tt(b,"click",function(k){Ut(k),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,d=o.style;d.width="",d.whiteSpace="nowrap";var g=o.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),d.width=g+1+"px",d.whiteSpace="",d.height="";var b=o.offsetHeight,k=this.options.maxHeight,F="leaflet-popup-scrolled";k&&b>k?(d.height=k+"px",Ve(o,F)):Mt(o,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),g=this._getAnchor();Yt(this._container,d.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,d=parseInt(Si(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+d,b=this._containerWidth,k=new Z(this._containerLeft,-g-this._containerBottom);k._add(Ys(this._container));var F=o.layerPointToContainerPoint(k),Q=ue(this.options.autoPanPadding),ae=ue(this.options.autoPanPaddingTopLeft||Q),he=ue(this.options.autoPanPaddingBottomRight||Q),ye=o.getSize(),Fe=0,Je=0;F.x+b+he.x>ye.x&&(Fe=F.x+b-ye.x+he.x),F.x-Fe-ae.x<0&&(Fe=F.x-ae.x),F.y+g+he.y>ye.y&&(Je=F.y+g-ye.y+he.y),F.y-Je-ae.y<0&&(Je=F.y-ae.y),(Fe||Je)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Fe,Je]))}},_getAnchor:function(){return ue(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),jo=function(o,d){return new qc(o,d)};gt.mergeOptions({closePopupOnClick:!0}),gt.include({openPopup:function(o,d,g){return this._initOverlay(qc,o,d,g).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Js.include({bindPopup:function(o,d){return this._popup=this._initOverlay(qc,this._popup,o,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof ei||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){ts(o);var d=o.layer||o.target;if(this._popup._source===d&&!(d instanceof Ri)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=d,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Co=Pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Pr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Pr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Pr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",d=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var d,g,b=this._map,k=this._container,F=b.latLngToContainerPoint(b.getCenter()),Q=b.layerPointToContainerPoint(o),ae=this.options.direction,he=k.offsetWidth,ye=k.offsetHeight,Fe=ue(this.options.offset),Je=this._getAnchor();ae==="top"?(d=he/2,g=ye):ae==="bottom"?(d=he/2,g=0):ae==="center"?(d=he/2,g=ye/2):ae==="right"?(d=0,g=ye/2):ae==="left"?(d=he,g=ye/2):Q.x<F.x?(ae="right",d=0,g=ye/2):(ae="left",d=he+(Fe.x+Je.x)*2,g=ye/2),o=o.subtract(ue(d,g,!0)).add(Fe).add(Je),Mt(k,"leaflet-tooltip-right"),Mt(k,"leaflet-tooltip-left"),Mt(k,"leaflet-tooltip-top"),Mt(k,"leaflet-tooltip-bottom"),Ve(k,"leaflet-tooltip-"+ae),Yt(k,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Mn(this._container,o)},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(d)},_getAnchor:function(){return ue(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ul=function(o,d){return new Co(o,d)};gt.include({openTooltip:function(o,d,g){return this._initOverlay(Co,o,d,g).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Js.include({bindTooltip:function(o,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Co,this._tooltip,o,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var d=o?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[d](g),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof ei||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var d=typeof o.getElement=="function"&&o.getElement();d&&(tt(d,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),tt(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var d=typeof o.getElement=="function"&&o.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var d=o.latlng,g,b;this._tooltip.options.sticky&&o.originalEvent&&(g=this._map.mouseEventToContainerPoint(o.originalEvent),b=this._map.containerPointToLayerPoint(g),d=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(d)}});var Gc=ja.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var d=o&&o.tagName==="DIV"?o:document.createElement("div"),g=this.options;if(g.html instanceof Element?($n(d),d.appendChild(g.html)):d.innerHTML=g.html!==!1?g.html:"",g.bgPos){var b=ue(g.bgPos);d.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function Xh(o){return new Gc(o)}ja.Default=_o;var Mi=Js.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){A(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Tt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ms(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Hn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof Z?o:new Z(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var d=this.getPane().children,g=-o(-1/0,1/0),b=0,k=d.length,F;b<k;b++)F=d[b].style.zIndex,d[b]!==this._container&&F&&(g=o(g,+F));isFinite(g)&&(this.options.zIndex=g+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$e.ielt9){Mn(this._container,this.options.opacity);var o=+new Date,d=!1,g=!1;for(var b in this._tiles){var k=this._tiles[b];if(!(!k.current||!k.loaded)){var F=Math.min(1,(o-k.loaded)/200);Mn(k.el,F),F<1?d=!0:(k.active?g=!0:this._onOpaqueTile(k),k.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),d&&(q(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,d=this.options.maxZoom;if(o!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===o?(this._levels[g].el.style.zIndex=d-Math.abs(o-g),this._onUpdateLevel(g)):(Tt(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var b=this._levels[o],k=this._map;return b||(b=this._levels[o]={},b.el=dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=d,b.origin=k.project(k.unproject(k.getPixelOrigin()),o).round(),b.zoom=o,this._setZoomTransform(b,k.getCenter(),k.getZoom()),y(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var o,d,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)d=this._tiles[o],d.retain=d.current;for(o in this._tiles)if(d=this._tiles[o],d.current&&!d.active){var b=d.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var d in this._tiles)this._tiles[d].coords.z===o&&this._removeTile(d)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Tt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,d,g,b){var k=Math.floor(o/2),F=Math.floor(d/2),Q=g-1,ae=new Z(+k,+F);ae.z=+Q;var he=this._tileCoordsToKey(ae),ye=this._tiles[he];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),Q>b?this._retainParent(k,F,Q,b):!1)},_retainChildren:function(o,d,g,b){for(var k=2*o;k<2*o+2;k++)for(var F=2*d;F<2*d+2;F++){var Q=new Z(k,F);Q.z=g+1;var ae=this._tileCoordsToKey(Q),he=this._tiles[ae];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);g+1<b&&this._retainChildren(k,F,g+1,b)}},_resetView:function(o){var d=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var d=this.options;return d.minNativeZoom!==void 0&&o<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<o?d.maxNativeZoom:o},_setView:function(o,d,g,b){var k=Math.round(d);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var F=this.options.updateWhenZooming&&k!==this._tileZoom;(!b||F)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(o),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(o,d)},_setZoomTransforms:function(o,d){for(var g in this._levels)this._setZoomTransform(this._levels[g],o,d)},_setZoomTransform:function(o,d,g){var b=this._map.getZoomScale(g,o.zoom),k=o.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(d,g)).round();$e.any3d?vs(o.el,k,b):Yt(o.el,k)},_resetGrid:function(){var o=this._map,d=o.options.crs,g=this._tileSize=this.getTileSize(),b=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,d.wrapLng[0]],b).x/g.x),Math.ceil(o.project([0,d.wrapLng[1]],b).x/g.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([d.wrapLat[0],0],b).y/g.x),Math.ceil(o.project([d.wrapLat[1],0],b).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var d=this._map,g=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),b=d.getZoomScale(g,this._tileZoom),k=d.project(o,this._tileZoom).floor(),F=d.getSize().divideBy(b*2);return new X(k.subtract(F),k.add(F))},_update:function(o){var d=this._map;if(d){var g=this._clampZoom(d.getZoom());if(o===void 0&&(o=d.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(o),k=this._pxBoundsToTileRange(b),F=k.getCenter(),Q=[],ae=this.options.keepBuffer,he=new X(k.getBottomLeft().subtract([ae,-ae]),k.getTopRight().add([ae,-ae]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Fe=this._tiles[ye].coords;(Fe.z!==this._tileZoom||!he.contains(new Z(Fe.x,Fe.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(o,g);return}for(var Je=k.min.y;Je<=k.max.y;Je++)for(var mt=k.min.x;mt<=k.max.x;mt++){var En=new Z(mt,Je);if(En.z=this._tileZoom,!!this._isValidTile(En)){var yn=this._tiles[this._tileCoordsToKey(En)];yn?yn.current=!0:Q.push(En)}}if(Q.sort(function(rs,ko){return rs.distanceTo(F)-ko.distanceTo(F)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cs=document.createDocumentFragment();for(mt=0;mt<Q.length;mt++)this._addTile(Q[mt],Cs);this._level.el.appendChild(Cs)}}}},_isValidTile:function(o){var d=this._map.options.crs;if(!d.infinite){var g=this._globalTileRange;if(!d.wrapLng&&(o.x<g.min.x||o.x>g.max.x)||!d.wrapLat&&(o.y<g.min.y||o.y>g.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(o);return Ee(this.options.bounds).overlaps(b)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var d=this._map,g=this.getTileSize(),b=o.scaleBy(g),k=b.add(g),F=d.unproject(b,o.z),Q=d.unproject(k,o.z);return[F,Q]},_tileCoordsToBounds:function(o){var d=this._tileCoordsToNwSe(o),g=new je(d[0],d[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var d=o.split(":"),g=new Z(+d[0],+d[1]);return g.z=+d[2],g},_removeTile:function(o){var d=this._tiles[o];d&&(Tt(d.el),delete this._tiles[o],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Ve(o,"leaflet-tile");var d=this.getTileSize();o.style.width=d.x+"px",o.style.height=d.y+"px",o.onselectstart=y,o.onmousemove=y,$e.ielt9&&this.options.opacity<1&&Mn(o,this.options.opacity)},_addTile:function(o,d){var g=this._getTilePos(o),b=this._tileCoordsToKey(o),k=this.createTile(this._wrapCoords(o),u(this._tileReady,this,o));this._initTile(k),this.createTile.length<2&&U(u(this._tileReady,this,o,null,k)),Yt(k,g),this._tiles[b]={el:k,coords:o,current:!0},d.appendChild(k),this.fire("tileloadstart",{tile:k,coords:o})},_tileReady:function(o,d,g){d&&this.fire("tileerror",{error:d,tile:g,coords:o});var b=this._tileCoordsToKey(o);g=this._tiles[b],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Mn(g.el,0),q(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),d||(Ve(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$e.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var d=new Z(this._wrapX?w(o.x,this._wrapX):o.x,this._wrapY?w(o.y,this._wrapY):o.y);return d.z=o.z,d},_pxBoundsToTileRange:function(o){var d=this.getTileSize();return new X(o.min.unscaleBy(d).floor(),o.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function So(o){return new Mi(o)}var Di=Mi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,d){this._url=o,d=A(this,d),d.detectRetina&&$e.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,d){return this._url===o&&d===void 0&&(d=!0),this._url=o,d||this.redraw(),this},createTile:function(o,d){var g=document.createElement("img");return tt(g,"load",u(this._tileOnLoad,this,d,g)),tt(g,"error",u(this._tileOnError,this,d,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(o),g},getTileUrl:function(o){var d={r:$e.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-o.y;this.options.tms&&(d.y=g),d["-y"]=g}return z(this._url,i(d,this.options))},_tileOnLoad:function(o,d){$e.ielt9?setTimeout(u(o,this,null,d),0):o(null,d)},_tileOnError:function(o,d,g){var b=this.options.errorTileUrl;b&&d.getAttribute("src")!==b&&(d.src=b),o(g,d)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,d=this.options.maxZoom,g=this.options.zoomReverse,b=this.options.zoomOffset;return g&&(o=d-o),o+b},_getSubdomain:function(o){var d=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var o,d;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(d=this._tiles[o].el,d.onload=y,d.onerror=y,!d.complete)){d.src=K;var g=this._tiles[o].coords;Tt(d),delete this._tiles[o],this.fire("tileabort",{tile:d,coords:g})}},_removeTile:function(o){var d=this._tiles[o];if(d)return d.el.setAttribute("src",K),Mi.prototype._removeTile.call(this,o)},_tileReady:function(o,d,g){if(!(!this._map||g&&g.getAttribute("src")===K))return Mi.prototype._tileReady.call(this,o,d,g)}});function xd(o,d){return new Di(o,d)}var $l=Di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,d){this._url=o;var g=i({},this.defaultWmsParams);for(var b in d)b in this.options||(g[b]=d[b]);d=A(this,d);var k=d.detectRetina&&$e.retina?2:1,F=this.getTileSize();g.width=F.x*k,g.height=F.y*k,this.wmsParams=g},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,Di.prototype.onAdd.call(this,o)},getTileUrl:function(o){var d=this._tileCoordsToNwSe(o),g=this._crs,b=me(g.project(d[0]),g.project(d[1])),k=b.min,F=b.max,Q=(this._wmsVersion>=1.3&&this._crs===wo?[k.y,k.x,F.y,F.x]:[k.x,k.y,F.x,F.y]).join(","),ae=Di.prototype.getTileUrl.call(this,o);return ae+M(this.wmsParams,ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(o,d){return i(this.wmsParams,o),d||this.redraw(),this}});function Jh(o,d){return new $l(o,d)}Di.WMS=$l,xd.wms=Jh;var Ir=Js.extend({options:{padding:.1},initialize:function(o){A(this,o),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,d){var g=this._map.getZoomScale(d,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,d),F=b.multiplyBy(-g).add(k).subtract(this._map._getNewPixelOrigin(o,d));$e.any3d?vs(this._container,F,g):Yt(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,d=this._map.getSize(),g=this._map.containerPointToLayerPoint(d.multiplyBy(-o)).round();this._bounds=new X(g,g.add(d.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vd=Ir.extend({options:{tolerance:0},getEvents:function(){var o=Ir.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ir.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");tt(o,"mousemove",this._onMouseMove,this),tt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),tt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,Tt(this._container),Dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var d in this._layers)o=this._layers[d],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ir.prototype._update.call(this);var o=this._bounds,d=this._container,g=o.getSize(),b=$e.retina?2:1;Yt(d,o.min),d.width=b*g.x,d.height=b*g.y,d.style.width=g.x+"px",d.style.height=g.y+"px",$e.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Ir.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[m(o)]=o;var d=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var d=o._order,g=d.next,b=d.prev;g?g.prev=b:this._drawLast=b,b?b.next=g:this._drawFirst=g,delete o._order,delete this._layers[m(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var d=o.options.dashArray.split(/[, ]+/),g=[],b,k;for(k=0;k<d.length;k++){if(b=Number(d[k]),isNaN(b))return;g.push(b)}o.options._dashArray=g}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var d=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(o._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(o._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var d=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,d=this._redrawBounds;if(this._ctx.save(),d){var g=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)o=b.layer,(!d||o._pxBounds&&o._pxBounds.intersects(d))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,d){if(this._drawing){var g,b,k,F,Q=o._parts,ae=Q.length,he=this._ctx;if(ae){for(he.beginPath(),g=0;g<ae;g++){for(b=0,k=Q[g].length;b<k;b++)F=Q[g][b],he[b?"lineTo":"moveTo"](F.x,F.y);d&&he.closePath()}this._fillStroke(he,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var d=o._point,g=this._ctx,b=Math.max(Math.round(o._radius),1),k=(Math.max(Math.round(o._radiusY),1)||b)/b;k!==1&&(g.save(),g.scale(1,k)),g.beginPath(),g.arc(d.x,d.y/k,b,0,Math.PI*2,!1),k!==1&&g.restore(),this._fillStroke(g,o)}},_fillStroke:function(o,d){var g=d.options;g.fill&&(o.globalAlpha=g.fillOpacity,o.fillStyle=g.fillColor||g.color,o.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(o.setLineDash&&o.setLineDash(d.options&&d.options._dashArray||[]),o.globalAlpha=g.opacity,o.lineWidth=g.weight,o.strokeStyle=g.color,o.lineCap=g.lineCap,o.lineJoin=g.lineJoin,o.stroke())},_onClick:function(o){for(var d=this._map.mouseEventToLayerPoint(o),g,b,k=this._drawFirst;k;k=k.next)g=k.layer,g.options.interactive&&g._containsPoint(d)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(g))&&(b=g);this._fireEvent(b?[b]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,d)}},_handleMouseOut:function(o){var d=this._hoveredLayer;d&&(Mt(this._container,"leaflet-interactive"),this._fireEvent([d],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,d){if(!this._mouseHoverThrottled){for(var g,b,k=this._drawFirst;k;k=k.next)g=k.layer,g.options.interactive&&g._containsPoint(d)&&(b=g);b!==this._hoveredLayer&&(this._handleMouseOut(o),b&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([b],o,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,d,g){this._map._fireDOMEvent(d,g||d.type,o)},_bringToFront:function(o){var d=o._order;if(d){var g=d.next,b=d.prev;if(g)g.prev=b;else return;b?b.next=g:g&&(this._drawFirst=g),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(o)}},_bringToBack:function(o){var d=o._order;if(d){var g=d.next,b=d.prev;if(b)b.next=g;else return;g?g.prev=b:b&&(this._drawLast=b),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(o)}}});function yd(o){return $e.canvas?new vd(o):null}var Eo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ef={_initContainer:function(){this._container=dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ir.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var d=o._container=Eo("shape");Ve(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",o._path=Eo("path"),d.appendChild(o._path),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){var d=o._container;this._container.appendChild(d),o.options.interactive&&o.addInteractiveTarget(d)},_removePath:function(o){var d=o._container;Tt(d),o.removeInteractiveTarget(d),delete this._layers[m(o)]},_updateStyle:function(o){var d=o._stroke,g=o._fill,b=o.options,k=o._container;k.stroked=!!b.stroke,k.filled=!!b.fill,b.stroke?(d||(d=o._stroke=Eo("stroke")),k.appendChild(d),d.weight=b.weight+"px",d.color=b.color,d.opacity=b.opacity,b.dashArray?d.dashStyle=W(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=b.lineCap.replace("butt","flat"),d.joinstyle=b.lineJoin):d&&(k.removeChild(d),o._stroke=null),b.fill?(g||(g=o._fill=Eo("fill")),k.appendChild(g),g.color=b.fillColor||b.color,g.opacity=b.fillOpacity):g&&(k.removeChild(g),o._fill=null)},_updateCircle:function(o){var d=o._point.round(),g=Math.round(o._radius),b=Math.round(o._radiusY||g);this._setPath(o,o._empty()?"M0 0":"AL "+d.x+","+d.y+" "+g+","+b+" 0,"+65535*360)},_setPath:function(o,d){o._path.v=d},_bringToFront:function(o){Ms(o._container)},_bringToBack:function(o){Hn(o._container)}},tr=$e.vml?Eo:Kr,Ca=Ir.extend({_initContainer:function(){this._container=tr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Tt(this._container),Dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ir.prototype._update.call(this);var o=this._bounds,d=o.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,g.setAttribute("width",d.x),g.setAttribute("height",d.y)),Yt(g,o.min),g.setAttribute("viewBox",[o.min.x,o.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(o){var d=o._path=tr("path");o.options.className&&Ve(d,o.options.className),o.options.interactive&&Ve(d,"leaflet-interactive"),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Tt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[m(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var d=o._path,g=o.options;d&&(g.stroke?(d.setAttribute("stroke",g.color),d.setAttribute("stroke-opacity",g.opacity),d.setAttribute("stroke-width",g.weight),d.setAttribute("stroke-linecap",g.lineCap),d.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?d.setAttribute("stroke-dasharray",g.dashArray):d.removeAttribute("stroke-dasharray"),g.dashOffset?d.setAttribute("stroke-dashoffset",g.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),g.fill?(d.setAttribute("fill",g.fillColor||g.color),d.setAttribute("fill-opacity",g.fillOpacity),d.setAttribute("fill-rule",g.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(o,d){this._setPath(o,Ks(o._parts,d))},_updateCircle:function(o){var d=o._point,g=Math.max(Math.round(o._radius),1),b=Math.max(Math.round(o._radiusY),1)||g,k="a"+g+","+b+" 0 1,0 ",F=o._empty()?"M0 0":"M"+(d.x-g)+","+d.y+k+g*2+",0 "+k+-g*2+",0 ";this._setPath(o,F)},_setPath:function(o,d){o._path.setAttribute("d",d)},_bringToFront:function(o){Ms(o._path)},_bringToBack:function(o){Hn(o._path)}});$e.vml&&Ca.include(ef);function Kc(o){return $e.svg||$e.vml?new Ca(o):null}gt.include({getRenderer:function(o){var d=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var d=this._paneRenderers[o];return d===void 0&&(d=this._createRenderer({pane:o}),this._paneRenderers[o]=d),d},_createRenderer:function(o){return this.options.preferCanvas&&yd(o)||Kc(o)}});var tf=ni.extend({initialize:function(o,d){ni.prototype.initialize.call(this,this._boundsToLatLngs(o),d)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Ee(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function lg(o,d){return new tf(o,d)}Ca.create=tr,Ca.pointsToPath=Ks,kr.geometryToLayer=bo,kr.coordsToLatLng=Uc,kr.coordsToLatLngs=zl,kr.latLngToCoords=$c,kr.latLngsToCoords=Hc,kr.getFeature=No,kr.asFeature=Wc,gt.mergeOptions({boxZoom:!0});var To=Wn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pt(),ga(),this._startPoint=this._map.mouseEventToContainerPoint(o),tt(document,{contextmenu:ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=dt("div","leaflet-zoom-box",this._container),Ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var d=new X(this._point,this._startPoint),g=d.getSize();Yt(this._box,d.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(Tt(this._box),Mt(this._container,"leaflet-crosshair")),es(),xa(),Dt(document,{contextmenu:ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});gt.addInitHook("addHandler","boxZoom",To),gt.mergeOptions({doubleClickZoom:!0});var nf=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var d=this._map,g=d.getZoom(),b=d.options.zoomDelta,k=o.originalEvent.shiftKey?g-b:g+b;d.options.doubleClickZoom==="center"?d.setZoom(k):d.setZoomAround(o.containerPoint,k)}});gt.addInitHook("addHandler","doubleClickZoom",nf),gt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wd=Wn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ss(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Mt(this._map._container,"leaflet-grab"),Mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Ee(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var d=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(d),this._prunePositions(d)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,d){return o-(o-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;o.x<d.min.x&&(o.x=this._viscousLimit(o.x,d.min.x)),o.y<d.min.y&&(o.y=this._viscousLimit(o.y,d.min.y)),o.x>d.max.x&&(o.x=this._viscousLimit(o.x,d.max.x)),o.y>d.max.y&&(o.y=this._viscousLimit(o.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,d=Math.round(o/2),g=this._initialWorldOffset,b=this._draggable._newPos.x,k=(b-d+g)%o+d-g,F=(b+d+g)%o-d-g,Q=Math.abs(k+g)<Math.abs(F+g)?k:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(o){var d=this._map,g=d.options,b=!g.inertia||o.noInertia||this._times.length<2;if(d.fire("dragend",o),b)d.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,Q=g.easeLinearity,ae=k.multiplyBy(Q/F),he=ae.distanceTo([0,0]),ye=Math.min(g.inertiaMaxSpeed,he),Fe=ae.multiplyBy(ye/he),Je=ye/(g.inertiaDeceleration*Q),mt=Fe.multiplyBy(-Je/2).round();!mt.x&&!mt.y?d.fire("moveend"):(mt=d._limitOffset(mt,d.options.maxBounds),U(function(){d.panBy(mt,{duration:Je,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});gt.addInitHook("addHandler","dragging",wd),gt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _d=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),tt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,d=document.documentElement,g=o.scrollTop||d.scrollTop,b=o.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(b,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var d=this._panKeys={},g=this.keyCodes,b,k;for(b=0,k=g.left.length;b<k;b++)d[g.left[b]]=[-1*o,0];for(b=0,k=g.right.length;b<k;b++)d[g.right[b]]=[o,0];for(b=0,k=g.down.length;b<k;b++)d[g.down[b]]=[0,o];for(b=0,k=g.up.length;b<k;b++)d[g.up[b]]=[0,-1*o]},_setZoomDelta:function(o){var d=this._zoomKeys={},g=this.keyCodes,b,k;for(b=0,k=g.zoomIn.length;b<k;b++)d[g.zoomIn[b]]=o;for(b=0,k=g.zoomOut.length;b<k;b++)d[g.zoomOut[b]]=-o},_addHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var d=o.keyCode,g=this._map,b;if(d in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(b=this._panKeys[d],o.shiftKey&&(b=ue(b).multiplyBy(3)),g.options.maxBounds&&(b=g._limitOffset(ue(b),g.options.maxBounds)),g.options.worldCopyJump){var k=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(b)));g.panTo(k)}else g.panBy(b)}else if(d in this._zoomKeys)g.setZoom(g.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;ts(o)}}});gt.addInitHook("addHandler","keyboard",_d),gt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vt=Wn.extend({addHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var d=Ll(o),g=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var b=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),b),ts(o)},_performZoom:function(){var o=this._map,d=o.getZoom(),g=this._map.options.zoomSnap||0;o._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,F=g?Math.ceil(k/g)*g:k,Q=o._limitZoom(d+(this._delta>0?F:-F))-d;this._delta=0,this._startTime=null,Q&&(o.options.scrollWheelZoom==="center"?o.setZoom(d+Q):o.setZoomAround(this._lastMousePos,d+Q))}});gt.addInitHook("addHandler","scrollWheelZoom",Vt);var bd=600;gt.mergeOptions({tapHold:$e.touchNative&&$e.safari&&$e.mobile,tapTolerance:15});var Hl=Wn.extend({addHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var d=o.touches[0];this._startPos=this._newPos=new Z(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(tt(document,"touchend",Ut),tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),bd),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Dt(document,"touchend",Ut),Dt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)},_onMove:function(o){var d=o.touches[0];this._newPos=new Z(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,d){var g=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});g._simulated=!0,d.target.dispatchEvent(g)}});gt.addInitHook("addHandler","tapHold",Hl),gt.mergeOptions({touchZoom:$e.touch,bounceAtZoomLimits:!0});var Ao=Wn.extend({addHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Mt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var d=this._map;if(!(!o.touches||o.touches.length!==2||d._animatingZoom||this._zooming)){var g=d.mouseEventToContainerPoint(o.touches[0]),b=d.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(g.add(b)._divideBy(2))),this._startDist=g.distanceTo(b),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),Ut(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var d=this._map,g=d.mouseEventToContainerPoint(o.touches[0]),b=d.mouseEventToContainerPoint(o.touches[1]),k=g.distanceTo(b)/this._startDist;if(this._zoom=d.getScaleZoom(k,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&k<1||this._zoom>d.getMaxZoom()&&k>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var F=g._add(b)._divideBy(2)._subtract(this._centerPoint);if(k===1&&F.x===0&&F.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var Q=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(Q,this,!0),Ut(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});gt.addInitHook("addHandler","touchZoom",Ao),gt.BoxZoom=To,gt.DoubleClickZoom=nf,gt.Drag=wd,gt.Keyboard=_d,gt.ScrollWheelZoom=Vt,gt.TapHold=Hl,gt.TouchZoom=Ao,t.Bounds=X,t.Browser=$e,t.CRS=ge,t.Canvas=vd,t.Circle=Bc,t.CircleMarker=Vc,t.Class=se,t.Control=Dn,t.DivIcon=Gc,t.DivOverlay=Pr,t.DomEvent=Sr,t.DomUtil=va,t.Draggable=ss,t.Evented=we,t.FeatureGroup=ei,t.GeoJSON=kr,t.GridLayer=Mi,t.Handler=Wn,t.Icon=ja,t.ImageOverlay=Li,t.LatLng=Re,t.LatLngBounds=je,t.Layer=Js,t.LayerGroup=Ii,t.LineUtil=Ns,t.Map=gt,t.Marker=ti,t.Mixin=po,t.Path=Ri,t.Point=Z,t.PolyUtil=vo,t.Polygon=ni,t.Polyline=js,t.Popup=qc,t.PosAnimation=_a,t.Projection=Ar,t.Rectangle=tf,t.Renderer=Ir,t.SVG=Ca,t.SVGOverlay=pd,t.TileLayer=Di,t.Tooltip=Co,t.Transformation=xt,t.Util=H,t.VideoOverlay=md,t.bind=u,t.bounds=me,t.canvas=yd,t.circle=Bl,t.circleMarker=Kh,t.control=bs,t.divIcon=Xh,t.extend=i,t.featureGroup=qh,t.geoJSON=Zh,t.geoJson=er,t.gridLayer=So,t.icon=Gh,t.imageOverlay=Yh,t.latLng=Ae,t.latLngBounds=Ee,t.layerGroup=Vl,t.map=_s,t.marker=ig,t.point=ue,t.polygon=og,t.polyline=ag,t.popup=jo,t.rectangle=lg,t.setOptions=A,t.stamp=m,t.svg=Kc,t.svgOverlay=gd,t.tileLayer=xd,t.tooltip=Ul,t.transformation=wt,t.version=r,t.videoOverlay=Qh;var sf=window.L;t.noConflict=function(){return window.L=sf,this},window.L=t}))})(Kd,Kd.exports)),Kd.exports}var $h=e9();const t9=Wv($h);function T0(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function A0(n,e){return e==null?function(r,i){const c=_.useRef();return c.current||(c.current=n(r,i)),c}:function(r,i){const c=_.useRef();c.current||(c.current=n(r,i));const u=_.useRef(r),{instance:f}=c.current;return _.useEffect(function(){u.current!==r&&(e(f,r,u.current),u.current=r)},[f,r,i]),c}}function n9(n,e){_.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function kE(n){return function(t){const r=S0(),i=n(E0(t,r),r);return SE(r.map,t.attribution),AE(i.current,t.eventHandlers),n9(i.current,r),i}}function s9(n,e){const t=A0(n,e),r=kE(t);return Z8(r)}function r9(n,e){const t=A0(n),r=X8(t,e);return Y8(r)}function i9(n,e){const t=A0(n,e),r=kE(t);return Q8(r)}function a9(n,e,t){const{opacity:r,zIndex:i}=e;r!=null&&r!==t.opacity&&n.setOpacity(r),i!=null&&i!==t.zIndex&&n.setZIndex(i)}function o9(){return S0().map}function Bv(){return Bv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bv.apply(this,arguments)}function l9({bounds:n,boundsOptions:e,center:t,children:r,className:i,id:c,placeholder:u,style:f,whenReady:m,zoom:x,...w},y){const[j]=_.useState({className:i,id:c,style:f}),[S,C]=_.useState(null);_.useImperativeHandle(y,()=>S?.map??null,[S]);const A=_.useCallback(R=>{if(R!==null&&S===null){const z=new $h.Map(R,w);t!=null&&x!=null?z.setView(t,x):n!=null&&z.fitBounds(n,e),m!=null&&z.whenReady(m),C(G8(z))}},[]);_.useEffect(()=>()=>{S?.map.remove()},[S]);const M=S?ds.createElement(TE,{value:S},r):u??null;return ds.createElement("div",Bv({},j,{ref:A}),M)}const c9=_.forwardRef(l9),u9=s9(function({position:e,...t},r){const i=new $h.Marker(e,t);return T0(i,K8(r,{overlayContainer:i}))},function(e,t,r){t.position!==r.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==r.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==r.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),d9=r9(function(e,t){const r=new $h.Popup(e,t.overlayContainer);return T0(r,t)},function(e,t,{position:r},i){_.useEffect(function(){const{instance:u}=e;function f(x){x.popup===u&&(u.update(),i(!0))}function m(x){x.popup===u&&i(!1)}return t.map.on({popupopen:f,popupclose:m}),t.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(t.map)):t.overlayContainer.bindPopup(u),function(){t.map.off({popupopen:f,popupclose:m}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(u)}},[e,t,i,r])}),h9=i9(function({url:e,...t},r){const i=new $h.TileLayer(e,E0(t,r));return T0(i,r)},function(e,t,r){a9(e,t,r);const{url:i}=t;i!=null&&i!==r.url&&e.setUrl(i)}),f9=new t9.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function m9({center:n}){const e=o9();return _.useEffect(()=>{e.setView(n,13)},[n,e]),null}function p9({initialData:n,onNext:e,onBack:t}){const[r,i]=_.useState(n),[c,u]=_.useState({}),[f,m]=_.useState(!1),x=[37.7749,-122.4194],w=r.coordinates?[r.coordinates.lat,r.coordinates.lng]:x,y=()=>{const C={};return r.address.trim()||(C.address="Address is required"),r.city.trim()||(C.city="City is required"),r.state.trim()||(C.state="State is required"),r.zipCode.trim()||(C.zipCode="ZIP code is required"),u(C),Object.keys(C).length===0},j=()=>{if(m(!0),!("geolocation"in navigator)){alert("Geolocation is not supported by your browser."),m(!1);return}navigator.geolocation.getCurrentPosition(async C=>{const{latitude:A,longitude:M}=C.coords;try{const R=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${A}&lon=${M}`);if(!R.ok)throw new Error("Location fetch failed");const W=(await R.json()).address||{};i(G=>({...G,address:`${W.house_number||""} ${W.road||""}`.trim()||G.address,city:W.city||W.town||W.village||W.county||"",state:W.state||"",zipCode:W.postcode||"",coordinates:{lat:A,lng:M}}))}catch(R){console.error("Geocoding error:",R),i(z=>({...z,coordinates:{lat:A,lng:M}})),alert("Location found, but address details could not be fetched automatically.")}finally{m(!1)}},C=>{console.error("Geolocation error:",C.message),alert("Unable to retrieve your location. Please allow location access."),m(!1)},{enableHighAccuracy:!0})},S=C=>{C.preventDefault(),y()&&e(r)};return s.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(In,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Location & Delivery Options"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Help buyers find your book"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ke,{children:"Delivery Method *"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>i({...r,method:"pickup"}),className:`p-4 border-2 rounded-lg transition-all ${r.method==="pickup"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx($r,{className:`w-6 h-6 mx-auto mb-2 ${r.method==="pickup"?"text-[#C4A672]":"text-gray-400"}`}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm",children:"Local Pickup"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Meet in person"})]})]}),s.jsxs("button",{type:"button",onClick:()=>i({...r,method:"shipping"}),className:`p-4 border-2 rounded-lg transition-all ${r.method==="shipping"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(Lu,{className:`w-6 h-6 mx-auto mb-2 ${r.method==="shipping"?"text-[#C4A672]":"text-gray-400"}`}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm",children:"Shipping Only"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ship to buyer"})]})]}),s.jsxs("button",{type:"button",onClick:()=>i({...r,method:"both"}),className:`p-4 border-2 rounded-lg transition-all ${r.method==="both"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex justify-center gap-1 mb-2",children:[s.jsx($r,{className:`w-5 h-5 ${r.method==="both"?"text-[#C4A672]":"text-gray-400"}`}),s.jsx(Lu,{className:`w-5 h-5 ${r.method==="both"?"text-[#C4A672]":"text-gray-400"}`})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm",children:"Both Options"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Most flexible"})]})]})]})]}),s.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ke,{children:"Your Location *"}),s.jsxs(J,{type:"button",variant:"outline",size:"sm",onClick:j,disabled:f,children:[s.jsx(Jk,{className:"w-4 h-4 mr-2"}),f?"Detecting...":"Use Current Location"]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"address",children:"Street Address *"}),s.jsx(Ie,{id:"address",value:r.address,onChange:C=>i({...r,address:C.target.value}),className:"bg-white",placeholder:"123 Main St"}),c.address&&s.jsx("p",{className:"text-sm text-red-500",children:c.address})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"city",children:"City *"}),s.jsx(Ie,{id:"city",value:r.city,onChange:C=>i({...r,city:C.target.value}),className:"bg-white"}),c.city&&s.jsx("p",{className:"text-sm text-red-500",children:c.city})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"state",children:"State *"}),s.jsx(Ie,{id:"state",value:r.state,onChange:C=>i({...r,state:C.target.value}),className:"bg-white"}),c.state&&s.jsx("p",{className:"text-sm text-red-500",children:c.state})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"zipCode",children:"ZIP Code *"}),s.jsx(Ie,{id:"zipCode",value:r.zipCode,onChange:C=>i({...r,zipCode:C.target.value}),className:"bg-white"}),c.zipCode&&s.jsx("p",{className:"text-sm text-red-500",children:c.zipCode})]})]})]}),s.jsx("div",{className:"h-64 rounded-lg overflow-hidden border border-gray-300 z-0 relative",children:s.jsxs(c9,{center:w,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(h9,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(m9,{center:w}),r.coordinates&&s.jsx(u9,{position:[r.coordinates.lat,r.coordinates.lng],icon:f9,children:s.jsx(d9,{children:r.address||"Selected Location"})})]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[s.jsx(J,{type:"button",variant:"outline",onClick:t,className:"px-6",children:"Back"}),s.jsx(J,{type:"submit",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:"Next: Review"})]})]})}function g9({bookData:n,locationData:e,onSubmit:t,onBack:r,onEdit:i}){const c=f=>{switch(f){case"New":case"Like New":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=f=>{switch(f){case"pickup":return"Local Pickup Only";case"shipping":return"Shipping Only";case"both":return"Both Pickup & Shipping";default:return f}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(cr,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Review Your Listing"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Please review all details before submitting"})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ar,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("h4",{className:"text-[#2C3E50]",children:"Book Details"})]}),s.jsxs(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(1),className:"text-[#C4A672] hover:text-[#8B7355]",children:[s.jsx(Yx,{className:"w-4 h-4 mr-1"}),"Edit"]})]}),s.jsx(zr,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"ISBN"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.isbn})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Condition"}),s.jsx(Xe,{className:c(n.condition),children:n.condition})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Book Title"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.bookName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Author"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.author})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Category"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.category})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),s.jsxs("p",{className:"text-2xl text-[#C4A672]",children:["$",parseFloat(n.price).toFixed(2)]})]})]}),n.publishedYear&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Published Year"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.publishedYear})]}),n.pages&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Pages"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.pages})]})]}),n.language&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Language"}),s.jsx("p",{className:"text-[#2C3E50]",children:n.language})]}),n.description&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),s.jsx("p",{className:"text-[#2C3E50] text-sm",children:n.description})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("h4",{className:"text-[#2C3E50]",children:"Location & Delivery"})]}),s.jsxs(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(2),className:"text-[#C4A672] hover:text-[#8B7355]",children:[s.jsx(Yx,{className:"w-4 h-4 mr-1"}),"Edit"]})]}),s.jsx(zr,{}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery Method"}),s.jsx("p",{className:"text-[#2C3E50]",children:u(e.method)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),s.jsxs("p",{className:"text-[#2C3E50]",children:[e.address,s.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672]/10 to-[#8B7355]/10 rounded-lg p-6 border-2 border-[#C4A672]/20",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Listing Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.bookName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Price:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",parseFloat(n.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Condition:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n.condition})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery:"}),s.jsx("span",{className:"text-[#2C3E50]",children:u(e.method)})]})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-yellow-900",children:[s.jsx("strong",{children:"Important:"})," By submitting this listing, you agree to our Terms of Service and confirm that all information provided is accurate. You will be responsible for fulfilling any orders placed for this book."]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[s.jsx(J,{type:"button",variant:"outline",onClick:r,className:"px-6",children:"Back"}),s.jsx(J,{type:"button",onClick:t,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:"Submit Listing"})]})]})}function x9({onClose:n,onAddAnother:e}){return s.jsxs("div",{className:"p-12 text-center space-y-6",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 mx-auto flex items-center justify-center",children:s.jsx(cr,{className:"w-12 h-12 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-3xl mb-3",children:"Listing Created Successfully!"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Your book is now available in the marketplace"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672]/10 to-[#8B7355]/10 rounded-lg p-6 max-w-md mx-auto",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"What happens next?"}),s.jsxs("ul",{className:"text-left space-y-2 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(cr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"Your listing is now visible to buyers"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(cr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"You'll receive notifications when someone is interested"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(cr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"You can manage your listings from your dashboard"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-6",children:[s.jsxs(J,{onClick:e,variant:"outline",className:"px-6 border-[#C4A672] text-[#C4A672] hover:bg-[#C4A672] hover:text-white",children:[s.jsx(cl,{className:"w-5 h-5 mr-2"}),"List Another Book"]}),s.jsxs(J,{onClick:n,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:[s.jsx(Ru,{className:"w-5 h-5 mr-2"}),"Back to Marketplace"]})]})]})}function PE({onClose:n}){const[e,t]=_.useState(1),[r,i]=_.useState({isbn:"",bookName:"",author:"",price:"",condition:"Good",category:"Fiction",description:"",publishedYear:"",language:"English",pages:"",images:[]}),[c,u]=_.useState({method:"both",address:"",city:"",state:"",zipCode:""}),f=j=>{i(j),t(2)},m=j=>{u(j),t(3)},x=()=>{t(e-1)},w=async()=>{const j=Jt.currentUser;if(!j){xe.error("Please login to submit listing");return}try{const S={...r,price:parseFloat(r.price),pages:parseInt(r.pages)||0,publishedYear:parseInt(r.publishedYear)||0,location:c,userId:j.uid,type:"sell",status:"active",createdAt:pc(),updatedAt:pc()};await Qa(_t(Oe,"books"),S),xe.success("Listing created successfully!"),t(4)}catch(S){console.error("Failed to submit listing:",S),xe.error("Failed to create listing. Please try again.")}},y=j=>{t(j)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl",children:"Sell Your Book"}),s.jsxs("p",{className:"text-white/90 text-sm mt-1",children:[e===1&&"Step 1 of 3: Book Details",e===2&&"Step 2 of 3: Location & Delivery",e===3&&"Step 3 of 3: Review & Confirm",e===4&&"Listing Created!"]})]}),s.jsx("button",{onClick:n,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:s.jsx(Ot,{className:"w-6 h-6"})})]}),e<4&&s.jsx("div",{className:"px-6 py-4 bg-gray-50",children:s.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(j=>s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:`h-2 rounded-full transition-colors ${j<=e?"bg-[#C4A672]":"bg-gray-200"}`})},j))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e===1&&s.jsx(W8,{initialData:r,onNext:f,onCancel:n}),e===2&&s.jsx(p9,{initialData:c,onNext:m,onBack:x}),e===3&&s.jsx(g9,{bookData:r,locationData:c,onSubmit:w,onBack:x,onEdit:y}),e===4&&s.jsx(x9,{onClose:n,onAddAnother:()=>{t(1),i({isbn:"",bookName:"",author:"",price:"",condition:"Good",category:"Fiction",description:"",publishedYear:"",language:"English",pages:"",images:[]}),u({method:"both",address:"",city:"",state:"",zipCode:""})}})]})]})})}var IE=["PageUp","PageDown"],RE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],LE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ud="Slider",[zv,v9,y9]=Up(ud),[ME]=Ps(ud,[y9]),[w9,Xp]=ME(ud),DE=_.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:c=1,orientation:u="horizontal",disabled:f=!1,minStepsBetweenThumbs:m=0,defaultValue:x=[r],value:w,onValueChange:y=()=>{},onValueCommit:j=()=>{},inverted:S=!1,form:C,...A}=n,M=_.useRef(new Set),R=_.useRef(0),W=u==="horizontal"?_9:b9,[G=[],K]=Ji({prop:w,defaultProp:x,onChange:U=>{[...M.current][R.current]?.focus(),y(U)}}),ee=_.useRef(G);function D(U){const q=E9(G,U);B(U,q)}function P(U){B(U,R.current)}function V(){const U=ee.current[R.current];G[R.current]!==U&&j(G)}function B(U,q,{commit:H}={commit:!1}){const se=P9(c),be=I9(Math.round((U-r)/c)*c+r,se),ie=oh(be,[r,i]);K((we=[])=>{const Z=C9(we,ie,q);if(k9(Z,m*c)){R.current=Z.indexOf(ie);const ce=String(Z)!==String(we);return ce&&H&&j(Z),ce?Z:we}else return we})}return s.jsx(w9,{scope:n.__scopeSlider,name:t,disabled:f,min:r,max:i,valueIndexToChangeRef:R,thumbs:M.current,values:G,orientation:u,form:C,children:s.jsx(zv.Provider,{scope:n.__scopeSlider,children:s.jsx(zv.Slot,{scope:n.__scopeSlider,children:s.jsx(W,{"aria-disabled":f,"data-disabled":f?"":void 0,...A,ref:e,onPointerDown:Le(A.onPointerDown,()=>{f||(ee.current=G)}),min:r,max:i,inverted:S,onSlideStart:f?void 0:D,onSlideMove:f?void 0:P,onSlideEnd:f?void 0:V,onHomeKeyDown:()=>!f&&B(r,0,{commit:!0}),onEndKeyDown:()=>!f&&B(i,G.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:q})=>{if(!f){const be=IE.includes(U.key)||U.shiftKey&&RE.includes(U.key)?10:1,ie=R.current,we=G[ie],Z=c*be*q;B(we+Z,ie,{commit:!0})}}})})})})});DE.displayName=ud;var[OE,FE]=ME(ud,{startEdge:"left",endEdge:"right",size:"width",direction:1}),_9=_.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:c,onSlideStart:u,onSlideMove:f,onSlideEnd:m,onStepKeyDown:x,...w}=n,[y,j]=_.useState(null),S=ct(e,W=>j(W)),C=_.useRef(void 0),A=bc(i),M=A==="ltr",R=M&&!c||!M&&c;function z(W){const G=C.current||y.getBoundingClientRect(),K=[0,G.width],D=k0(K,R?[t,r]:[r,t]);return C.current=G,D(W-G.left)}return s.jsx(OE,{scope:n.__scopeSlider,startEdge:R?"left":"right",endEdge:R?"right":"left",direction:R?1:-1,size:"width",children:s.jsx(VE,{dir:A,"data-orientation":"horizontal",...w,ref:S,style:{...w.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:W=>{const G=z(W.clientX);u?.(G)},onSlideMove:W=>{const G=z(W.clientX);f?.(G)},onSlideEnd:()=>{C.current=void 0,m?.()},onStepKeyDown:W=>{const K=LE[R?"from-left":"from-right"].includes(W.key);x?.({event:W,direction:K?-1:1})}})})}),b9=_.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:c,onSlideMove:u,onSlideEnd:f,onStepKeyDown:m,...x}=n,w=_.useRef(null),y=ct(e,w),j=_.useRef(void 0),S=!i;function C(A){const M=j.current||w.current.getBoundingClientRect(),R=[0,M.height],W=k0(R,S?[r,t]:[t,r]);return j.current=M,W(A-M.top)}return s.jsx(OE,{scope:n.__scopeSlider,startEdge:S?"bottom":"top",endEdge:S?"top":"bottom",size:"height",direction:S?1:-1,children:s.jsx(VE,{"data-orientation":"vertical",...x,ref:y,style:{...x.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:A=>{const M=C(A.clientY);c?.(M)},onSlideMove:A=>{const M=C(A.clientY);u?.(M)},onSlideEnd:()=>{j.current=void 0,f?.()},onStepKeyDown:A=>{const R=LE[S?"from-bottom":"from-top"].includes(A.key);m?.({event:A,direction:R?-1:1})}})})}),VE=_.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:c,onHomeKeyDown:u,onEndKeyDown:f,onStepKeyDown:m,...x}=n,w=Xp(ud,t);return s.jsx(Ye.span,{...x,ref:e,onKeyDown:Le(n.onKeyDown,y=>{y.key==="Home"?(u(y),y.preventDefault()):y.key==="End"?(f(y),y.preventDefault()):IE.concat(RE).includes(y.key)&&(m(y),y.preventDefault())}),onPointerDown:Le(n.onPointerDown,y=>{const j=y.target;j.setPointerCapture(y.pointerId),y.preventDefault(),w.thumbs.has(j)?j.focus():r(y)}),onPointerMove:Le(n.onPointerMove,y=>{y.target.hasPointerCapture(y.pointerId)&&i(y)}),onPointerUp:Le(n.onPointerUp,y=>{const j=y.target;j.hasPointerCapture(y.pointerId)&&(j.releasePointerCapture(y.pointerId),c(y))})})}),BE="SliderTrack",zE=_.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=Xp(BE,t);return s.jsx(Ye.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});zE.displayName=BE;var Uv="SliderRange",UE=_.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=Xp(Uv,t),c=FE(Uv,t),u=_.useRef(null),f=ct(e,u),m=i.values.length,x=i.values.map(j=>WE(j,i.min,i.max)),w=m>1?Math.min(...x):0,y=100-Math.max(...x);return s.jsx(Ye.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:f,style:{...n.style,[c.startEdge]:w+"%",[c.endEdge]:y+"%"}})});UE.displayName=Uv;var $v="SliderThumb",$E=_.forwardRef((n,e)=>{const t=v9(n.__scopeSlider),[r,i]=_.useState(null),c=ct(e,f=>i(f)),u=_.useMemo(()=>r?t().findIndex(f=>f.ref.current===r):-1,[t,r]);return s.jsx(N9,{...n,ref:c,index:u})}),N9=_.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...c}=n,u=Xp($v,t),f=FE($v,t),[m,x]=_.useState(null),w=ct(e,z=>x(z)),y=m?u.form||!!m.closest("form"):!0,j=Ch(m),S=u.values[r],C=S===void 0?0:WE(S,u.min,u.max),A=S9(r,u.values.length),M=j?.[f.size],R=M?T9(M,C,f.direction):0;return _.useEffect(()=>{if(m)return u.thumbs.add(m),()=>{u.thumbs.delete(m)}},[m,u.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[f.startEdge]:`calc(${C}% + ${R}px)`},children:[s.jsx(zv.ItemSlot,{scope:n.__scopeSlider,children:s.jsx(Ye.span,{role:"slider","aria-label":n["aria-label"]||A,"aria-valuemin":u.min,"aria-valuenow":S,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...c,ref:w,style:S===void 0?{display:"none"}:n.style,onFocus:Le(n.onFocus,()=>{u.valueIndexToChangeRef.current=r})})}),y&&s.jsx(HE,{name:i??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:S},r)]})});$E.displayName=$v;var j9="RadioBubbleInput",HE=_.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=_.useRef(null),c=ct(i,r),u=jh(e);return _.useEffect(()=>{const f=i.current;if(!f)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(u!==e&&w){const y=new Event("input",{bubbles:!0});w.call(f,e),f.dispatchEvent(y)}},[u,e]),s.jsx(Ye.input,{style:{display:"none"},...t,ref:c,defaultValue:e})});HE.displayName=j9;function C9(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,c)=>i-c)}function WE(n,e,t){const c=100/(t-e)*(n-e);return oh(c,[0,100])}function S9(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function E9(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function T9(n,e,t){const r=n/2,c=k0([0,50],[0,r]);return(r-c(e)*t)*t}function A9(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function k9(n,e){if(e>0){const t=A9(n);return Math.min(...t)>=e}return!0}function k0(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function P9(n){return(String(n).split(".")[1]||"").length}function I9(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var R9=DE,L9=zE,M9=UE,D9=$E;function yh({className:n,defaultValue:e,value:t,min:r=0,max:i=100,...c}){const u=_.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[r,i],[t,e,r,i]);return s.jsxs(R9,{"data-slot":"slider",defaultValue:e,value:t,min:r,max:i,className:ft("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),...c,children:[s.jsx(L9,{"data-slot":"slider-track",className:ft("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:s.jsx(M9,{"data-slot":"slider-range",className:ft("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:u.length},(f,m)=>s.jsx(D9,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},m))]})}const KN=[{id:"1",title:"The Great Gatsby",author:"F. Scott Fitzgerald",price:12.99,condition:"Good",category:"Classic Literature",description:"A classic novel set in the Jazz Age that explores themes of wealth, love, and the American Dream. This edition is in good condition with minimal wear on the cover.",seller:{name:"Sarah Johnson",rating:4.8,totalSales:156,avatar:"SJ"},images:["https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400"],publishedYear:1925,isbn:"978-0-7432-7356-5",language:"English",pages:180},{id:"2",title:"To Kill a Mockingbird",author:"Harper Lee",price:15.5,condition:"Like New",category:"Classic Literature",description:"An American classic that deals with serious issues of rape and racial inequality. The book is in excellent condition, barely read.",seller:{name:"Michael Chen",rating:4.9,totalSales:203,avatar:"MC"},images:["https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400"],publishedYear:1960,isbn:"978-0-06-112008-4",language:"English",pages:324},{id:"3",title:"1984",author:"George Orwell",price:10.99,condition:"Good",category:"Science Fiction",description:"A dystopian social science fiction novel and cautionary tale. Some highlighting on a few pages but overall in good reading condition.",seller:{name:"Emma Davis",rating:4.7,totalSales:89,avatar:"ED"},images:["https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400"],publishedYear:1949,isbn:"978-0-452-28423-4",language:"English",pages:328},{id:"4",title:"The Catcher in the Rye",author:"J.D. Salinger",price:13.99,condition:"Good",category:"Classic Literature",description:"A story about teenage rebellion and alienation. Clean pages with minor shelf wear on the cover.",seller:{name:"David Wilson",rating:4.6,totalSales:124,avatar:"DW"},images:["https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400"],publishedYear:1951,isbn:"978-0-316-76948-0",language:"English",pages:277},{id:"5",title:"Pride and Prejudice",author:"Jane Austen",price:11.99,condition:"Like New",category:"Romance",description:"A romantic novel of manners that critiques the British landed gentry. Pristine condition, read once.",seller:{name:"Lisa Anderson",rating:5,totalSales:178,avatar:"LA"},images:["https://images.unsplash.com/photo-1524578271613-d550eacf6090?w=400"],publishedYear:1813,isbn:"978-0-14-143951-8",language:"English",pages:432},{id:"6",title:"The Hobbit",author:"J.R.R. Tolkien",price:16.99,condition:"Good",category:"Fantasy",description:"A fantasy novel about the adventures of Bilbo Baggins. Well-loved copy with some creasing on the spine.",seller:{name:"Robert Taylor",rating:4.8,totalSales:145,avatar:"RT"},images:["https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?w=400"],publishedYear:1937,isbn:"978-0-547-92822-7",language:"English",pages:310},{id:"7",title:"Harry Potter and the Sorcerer's Stone",author:"J.K. Rowling",price:14.99,condition:"Good",category:"Fantasy",description:"First book in the beloved Harry Potter series. Pages are clean with minor cover wear.",seller:{name:"Jennifer Martinez",rating:4.9,totalSales:267,avatar:"JM"},images:["https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=400"],publishedYear:1997,isbn:"978-0-590-35340-3",language:"English",pages:309},{id:"8",title:"The Alchemist",author:"Paulo Coelho",price:12.5,condition:"Like New",category:"Philosophy",description:"A philosophical book about following your dreams. Excellent condition, minimal signs of use.",seller:{name:"Carlos Rodriguez",rating:4.7,totalSales:112,avatar:"CR"},images:["https://images.unsplash.com/photo-1589998059171-988d887df646?w=400"],publishedYear:1988,isbn:"978-0-06-112241-5",language:"English",pages:197}];function O9(){const[n,e]=_.useState(null),[t,r]=_.useState(!1),[i,c]=_.useState(""),[u,f]=_.useState("all"),[m,x]=_.useState("all"),[w,y]=_.useState("recent"),[j,S]=_.useState([0,50]),[C,A]=_.useState(""),[M,R]=_.useState(!1),[z,W]=_.useState(""),G=["all",...Array.from(new Set(KN.map(B=>B.category)))],K=["all","New","Like New","Good","Fair","Poor"],D=[...KN.filter(B=>{const U=B.title.toLowerCase().includes(i.toLowerCase())||B.author.toLowerCase().includes(i.toLowerCase()),q=u==="all"||B.category===u,H=m==="all"||B.condition===m,se=B.price>=j[0]&&B.price<=j[1],be=!z||B.isbn.toLowerCase().includes(z.toLowerCase()),ie=!C||B.seller.name.toLowerCase().includes(C.toLowerCase());return U&&q&&H&&se&&be&&ie})].sort((B,U)=>{switch(w){case"price-low":return B.price-U.price;case"price-high":return U.price-B.price;case"rating":return U.seller.rating-B.seller.rating;default:return 0}}),P=()=>{c(""),f("all"),x("all"),S([0,50]),A(""),W("")},V=[i,u!=="all",m!=="all",j[0]!==0||j[1]!==50,C,z].filter(Boolean).length;return s.jsx("div",{className:"bg-[#F5F5F5] min-h-screen py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[#2C3E50] mb-2",children:"Book Marketplace"}),s.jsx("p",{className:"text-gray-600",children:"Buy and sell books from fellow readers"})]}),s.jsxs(J,{onClick:()=>r(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(cl,{className:"w-5 h-5 mr-2"}),"Sell a Book"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by title or author...",value:i,onChange:B=>c(B.target.value),className:"pl-10 h-11 bg-gray-50 border-gray-200"})]})}),s.jsxs(rn,{value:u,onValueChange:f,children:[s.jsx(on,{className:"h-11 bg-gray-50 border-gray-200",children:s.jsx(an,{placeholder:"Category"})}),s.jsx(ln,{children:G.map(B=>s.jsx(De,{value:B,children:B==="all"?"All Categories":B},B))})]}),s.jsxs(rn,{value:m,onValueChange:x,children:[s.jsx(on,{className:"h-11 bg-gray-50 border-gray-200",children:s.jsx(an,{placeholder:"Condition"})}),s.jsx(ln,{children:K.map(B=>s.jsx(De,{value:B,children:B==="all"?"All Conditions":B},B))})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>R(!M),className:"text-[#C4A672]",children:[s.jsx(s1,{className:"w-4 h-4 mr-2"}),"Advanced Filters",V>0&&s.jsx("span",{className:"ml-2 bg-[#C4A672] text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:V})]}),V>0&&s.jsx(J,{variant:"ghost",size:"sm",onClick:P,className:"text-gray-600",children:"Clear All"})]}),M&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"ISBN Number"}),s.jsx(Ie,{type:"text",placeholder:"Enter ISBN...",value:z,onChange:B=>W(B.target.value),className:"bg-gray-50 border-gray-200"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"Location / Seller"}),s.jsxs("div",{className:"relative",children:[s.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by location or seller...",value:C,onChange:B=>A(B.target.value),className:"pl-9 bg-gray-50 border-gray-200"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm text-gray-700",children:["Price Range: $",j[0]," - $",j[1]]}),s.jsx(yh,{value:j,onValueChange:B=>S(B),min:0,max:50,step:1,className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"$0"}),s.jsx("span",{children:"$50+"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("p",{className:"text-gray-600",children:[D.length," ",D.length===1?"book":"books"," found"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),s.jsxs(rn,{value:w,onValueChange:y,children:[s.jsx(on,{className:"w-40 h-9 bg-gray-50 border-gray-200",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"recent",children:"Most Recent"}),s.jsx(De,{value:"price-low",children:"Price: Low to High"}),s.jsx(De,{value:"price-high",children:"Price: High to Low"}),s.jsx(De,{value:"rating",children:"Seller Rating"})]})]})]})]})]}),D.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:D.map(B=>s.jsx(fO,{book:B,onClick:()=>e(B)},B.id))}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[s.jsx("p",{className:"text-gray-500",children:"No books found matching your criteria"}),s.jsx(J,{onClick:()=>{c(""),f("all"),x("all")},variant:"outline",className:"mt-4",children:"Clear Filters"})]}),n&&s.jsx(M7,{book:n,onClose:()=>e(null)}),t&&s.jsx(PE,{onClose:()=>r(!1)})]})})}function F9(){return s.jsx("button",{className:"fixed bottom-8 right-8 w-14 h-14 rounded-full bg-[#D4A574] hover:bg-[#C49563] shadow-lg flex items-center justify-center transition-colors","aria-label":"Open chat",children:s.jsx(qs,{className:"w-6 h-6 text-white"})})}function V9({onLogin:n,onBack:e}){const[t,r]=_.useState(""),[i,c]=_.useState(""),[u,f]=_.useState(""),[m,x]=_.useState(!1),[w,y]=_.useState(!1),[j,S]=_.useState({}),[C,A]=_.useState(!1),M=async z=>{z.preventDefault();const W={};if(t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(W.email="Invalid email format"):W.email="Email is required",i?i.length<8&&(W.password="Password must be at least 8 characters"):W.password="Password is required",S(W),Object.keys(W).length===0){A(!0);try{await Ij(Jt,t,i),x(!0)}catch(G){G.code==="auth/wrong-password"?S({password:"Incorrect password"}):G.code==="auth/user-not-found"?S({email:"User not found"}):xe.error("Login failed")}finally{A(!1)}}},R=z=>{z.preventDefault();const W={};u?u.length!==6&&(W.twoFactorCode="Code must be 6 digits"):W.twoFactorCode="2FA code is required",S(W),Object.keys(W).length===0&&(A(!0),setTimeout(()=>{A(!1),n()},1e3))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2C3E50] to-[#34495E] flex items-center justify-center p-4",children:[e&&s.jsxs("button",{onClick:e,className:"fixed top-6 left-6 flex items-center gap-2 text-white/80 hover:text-white transition-colors group",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 group-hover:bg-white/20 flex items-center justify-center transition-colors",children:s.jsx(Wr,{className:"w-5 h-5"})}),s.jsx("span",{className:"hidden sm:inline",children:"Back to Home"})]}),s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#C4A672] rounded-full mb-4",children:s.jsx(ul,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-white text-3xl mb-2",children:"Admin Portal"}),s.jsx("p",{className:"text-white/80",children:"Secure access for BookOra administrators"})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:m?s.jsxs("form",{onSubmit:R,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter the 6-digit code from your authenticator app"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"twoFactorCode",children:"Authentication Code"}),s.jsx(Ie,{id:"twoFactorCode",type:"text",placeholder:"000000",maxLength:6,value:u,onChange:z=>{f(z.target.value.replace(/\D/g,"")),S({...j,twoFactorCode:""})},className:`text-center text-2xl tracking-widest ${j.twoFactorCode?"border-red-500":""}`}),j.twoFactorCode&&s.jsx("p",{className:"text-sm text-red-500",children:j.twoFactorCode})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(J,{type:"submit",disabled:C,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:C?"Verifying...":"Verify & Sign In"}),s.jsx(J,{type:"button",variant:"outline",onClick:()=>x(!1),className:"w-full",children:"Back"})]}),s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Don't have access to your authenticator?"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Use backup codes"})]})]}):s.jsxs("form",{onSubmit:M,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:"Sign In"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your administrator credentials"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"admin-email",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"admin-email",type:"email",placeholder:"admin@bookora.com",value:t,onChange:z=>{r(z.target.value),S({...j,email:""})},className:`pl-10 ${j.email?"border-red-500":""}`})]}),j.email&&s.jsx("p",{className:"text-sm text-red-500",children:j.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"admin-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"admin-password",type:"password",placeholder:"",value:i,onChange:z=>{c(z.target.value),S({...j,password:""})},className:`pl-10 ${j.password?"border-red-500":""}`})]}),j.password&&s.jsx("p",{className:"text-sm text-red-500",children:j.password})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qu,{id:"remember",checked:w,onCheckedChange:z=>y(z===!0)}),s.jsx(ke,{htmlFor:"remember",className:"text-sm cursor-pointer",children:"Remember me for 30 days"})]}),s.jsx(J,{type:"submit",disabled:C,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:C?"Verifying...":"Continue to 2FA"}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(bh,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-blue-900",children:"This is a secure admin area. All login attempts are monitored and logged."})]})]})})]})]})}function B9({user:n,onClose:e,onSave:t}){const[r,i]=_.useState(n),[c,u]=_.useState(!1),f=async()=>{u(!0);try{await Pn(jt(Oe,"users",n.id),r),t(r),xe.success("User updated")}catch(m){xe.error("Failed to update user"),console.error(m)}finally{u(!1)}};return s.jsx($a,{open:!0,onOpenChange:e,children:s.jsxs(Qi,{className:"max-w-2xl",children:[s.jsxs(xl,{children:[s.jsx(vl,{className:"text-2xl text-[#2C3E50]",children:"Edit User"}),s.jsx(ui,{children:"Update user information and account status"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"name",children:"Full Name"}),s.jsx(Ie,{id:"name",value:r.name,onChange:m=>i({...r,name:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"email",children:"Email Address"}),s.jsx(Ie,{id:"email",type:"email",value:r.email,onChange:m=>i({...r,email:m.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"status",children:"Account Status"}),s.jsxs(rn,{value:r.status,onValueChange:m=>i({...r,status:m}),children:[s.jsx(on,{id:"status",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"active",children:"Active"}),s.jsx(De,{value:"suspended",children:"Suspended"}),s.jsx(De,{value:"banned",children:"Banned"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"location",children:"Location"}),s.jsx(Ie,{id:"location",value:r.location,onChange:m=>i({...r,location:m.target.value})})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Account Activity"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total Purchases"}),s.jsx("p",{className:"text-[#2C3E50] text-xl",children:r.totalPurchases})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total Sales"}),s.jsx("p",{className:"text-[#2C3E50] text-xl",children:r.totalSales})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Member Since"}),s.jsx("p",{className:"text-[#2C3E50]",children:new Date(r.joinedDate).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(J,{variant:"outline",onClick:e,className:"flex-1",disabled:c,children:"Cancel"}),s.jsx(J,{onClick:f,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})})}function z9(){const[n,e]=_.useState(""),[t,r]=_.useState("all"),[i,c]=_.useState(null),[u,f]=_.useState([]),[m,x]=_.useState(!0);_.useEffect(()=>{(async()=>{x(!0);try{const A=(await Cn(_t(Oe,"users"))).docs.map(M=>({id:M.id,...M.data()}));f(A)}catch(C){xe.error("Failed to fetch users"),console.error(C)}finally{x(!1)}})()},[]);const w=u.filter(S=>{const C=S.name.toLowerCase().includes(n.toLowerCase())||S.email.toLowerCase().includes(n.toLowerCase()),A=t==="all"||S.status===t;return C&&A}),y=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"banned":return"bg-red-100 text-red-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},j=async S=>{if(confirm("Ban this user?"))try{await Pn(jt(Oe,"users",S),{status:"banned"}),f(C=>C.map(A=>A.id===S?{...A,status:"banned"}:A)),xe.success("User banned")}catch{xe.error("Failed to ban user")}};return m?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by name or email...",value:n,onChange:S=>e(S.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:["all","active","banned","suspended"].map(S=>s.jsx(J,{variant:t===S?"default":"outline",onClick:()=>r(S),className:t===S?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"User"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Email"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Location"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Activity"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Joined"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(S=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:S.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:S.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",S.id]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:S.email}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Xe,{className:y(S.status),children:S.status})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:S.location}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"text-gray-600",children:[S.totalPurchases," purchases"]}),s.jsxs("p",{className:"text-gray-600",children:[S.totalSales," sales"]})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(S.joinedDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{size:"sm",variant:"outline",onClick:()=>c(S),children:s.jsx(i1,{className:"w-4 h-4"})}),s.jsx(J,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>j(S.id),children:s.jsx(QA,{className:"w-4 h-4"})})]})})]},S.id))})]})}),i&&s.jsx(B9,{user:i,onClose:()=>c(null),onSave:S=>{f(C=>C.map(A=>A.id===S.id?S:A)),c(null)}})]})}function U9({onClose:n}){const[e,t]=_.useState({isbn:"",title:"",author:"",condition:"Good",category:"Fiction",price:"",rentalPrice:"",description:""}),[r,i]=_.useState(!1),c=async u=>{u.preventDefault(),i(!0);try{await Qa(_t(Oe,"books"),{...e,price:parseFloat(e.price)||0,rentalPrice:parseFloat(e.rentalPrice)||0,createdAt:new Date}),xe.success("Book added successfully"),n()}catch(f){xe.error("Failed to add book"),console.error(f)}finally{i(!1)}};return s.jsx($a,{open:!0,onOpenChange:n,children:s.jsxs(Qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(xl,{children:[s.jsx(vl,{className:"text-2xl text-[#2C3E50]",children:"Add New Book"}),s.jsx(ui,{children:"Add a book to the inventory"})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"isbn",children:"ISBN Number *"}),s.jsx(Ie,{id:"isbn",value:e.isbn,onChange:u=>t({...e,isbn:u.target.value}),placeholder:"978-3-16-148410-0",required:!0})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"title",children:"Book Title *"}),s.jsx(Ie,{id:"title",value:e.title,onChange:u=>t({...e,title:u.target.value}),placeholder:"Enter book title",required:!0})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"author",children:"Author *"}),s.jsx(Ie,{id:"author",value:e.author,onChange:u=>t({...e,author:u.target.value}),placeholder:"Author name",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"category",children:"Category"}),s.jsxs(rn,{value:e.category,onValueChange:u=>t({...e,category:u}),children:[s.jsx(on,{id:"category",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"Fiction",children:"Fiction"}),s.jsx(De,{value:"Non-Fiction",children:"Non-Fiction"}),s.jsx(De,{value:"Science Fiction",children:"Science Fiction"}),s.jsx(De,{value:"Classic Literature",children:"Classic Literature"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"condition",children:"Condition"}),s.jsxs(rn,{value:e.condition,onValueChange:u=>t({...e,condition:u}),children:[s.jsx(on,{id:"condition",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"New",children:"New"}),s.jsx(De,{value:"Like New",children:"Like New"}),s.jsx(De,{value:"Good",children:"Good"}),s.jsx(De,{value:"Fair",children:"Fair"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"price",children:"Sale Price ($)"}),s.jsx(Ie,{id:"price",type:"number",step:"0.01",value:e.price,onChange:u=>t({...e,price:u.target.value}),placeholder:"15.99"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"rentalPrice",children:"Rental Price ($/month)"}),s.jsx(Ie,{id:"rentalPrice",type:"number",step:"0.01",value:e.rentalPrice,onChange:u=>t({...e,rentalPrice:u.target.value}),placeholder:"5.99"})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"description",children:"Description"}),s.jsx(xc,{id:"description",value:e.description,onChange:u=>t({...e,description:u.target.value}),placeholder:"Book description...",rows:3})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(J,{type:"button",variant:"outline",onClick:n,className:"flex-1",disabled:r,children:"Cancel"}),s.jsx(J,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:r,children:r?"Adding...":"Add Book"})]})]})]})})}function $9(){const[n,e]=_.useState(""),[t,r]=_.useState(!1),[i,c]=_.useState([]),[u,f]=_.useState(!0);_.useEffect(()=>{(async()=>{f(!0);try{const S=(await Cn(_t(Oe,"books"))).docs.map(C=>({id:C.id,...C.data()}));c(S)}catch(j){xe.error("Failed to fetch books"),console.error(j)}finally{f(!1)}})()},[]);const m=i.filter(y=>y.title.toLowerCase().includes(n.toLowerCase())||y.author.toLowerCase().includes(n.toLowerCase())||y.isbn.includes(n)),x=y=>{switch(y){case"available":return"bg-green-100 text-green-800";case"rented":return"bg-blue-100 text-blue-800";case"sold":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=async y=>{if(confirm("Are you sure you want to delete this book?"))try{await qu(jt(Oe,"books",y)),c(i.filter(j=>j.id!==y)),xe.success("Book deleted")}catch(j){xe.error("Failed to delete book"),console.error(j)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by title, author, or ISBN...",value:n,onChange:y=>e(y.target.value),className:"pl-10"})]}),s.jsxs(J,{onClick:()=>r(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(cl,{className:"w-5 h-5 mr-2"}),"Add New Book"]})]})}),u?s.jsx("div",{className:"text-center py-12",children:"Loading books..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(y=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:y.title}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["by ",y.author]})]}),s.jsx(Xe,{className:x(y.status),children:y.status})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"ISBN:"}),s.jsx("span",{className:"text-[#2C3E50]",children:y.isbn})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Category:"}),s.jsx("span",{className:"text-[#2C3E50]",children:y.category})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Condition:"}),s.jsx("span",{className:"text-[#2C3E50]",children:y.condition})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Price:"}),s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",y.price.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[s.jsxs(J,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(Ur,{className:"w-4 h-4 mr-1"}),"View"]}),s.jsxs(J,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(i1,{className:"w-4 h-4 mr-1"}),"Edit"]}),s.jsx(J,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>w(y.id),children:s.jsx(cc,{className:"w-4 h-4"})})]})]},y.id))}),t&&s.jsx(U9,{onClose:()=>r(!1)})]})}function H9(){const[n,e]=_.useState(""),[t,r]=_.useState("all"),[i,c]=_.useState([]),[u,f]=_.useState(!0);_.useEffect(()=>{(async()=>{f(!0);try{const M=(await Cn(_t(Oe,"rentals"))).docs.map(R=>({id:R.id,...R.data()}));c(M)}catch(A){xe.error("Failed to fetch rentals"),console.error(A)}finally{f(!1)}})()},[]);const m=i.filter(C=>{const A=C.bookTitle.toLowerCase().includes(n.toLowerCase())||C.renterName.toLowerCase().includes(n.toLowerCase()),M=t==="all"||C.status===t;return A&&M}),x=C=>{switch(C){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"returned":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=C=>{const A=new Date(C),M=new Date,R=A.getTime()-M.getTime();return Math.ceil(R/(1e3*60*60*24))},y=async C=>{try{await Pn(jt(Oe,"rentals",C),{status:"active"}),c(A=>A.map(M=>M.id===C?{...M,status:"active"}:M)),xe.success("Rental approved")}catch{xe.error("Failed to approve")}},j=async C=>{if(confirm("Are you sure?"))try{await Pn(jt(Oe,"rentals",C),{status:"returned"}),c(A=>A.map(M=>M.id===C?{...M,status:"returned"}:M)),xe.success("Rental denied")}catch{xe.error("Failed to deny")}},S=async C=>{xe.success("Reminder sent")};return u?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Active Rentals"}),s.jsx("p",{className:"text-3xl text-[#2C3E50] mt-2",children:i.filter(C=>C.status==="active").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Pending Approvals"}),s.jsx("p",{className:"text-3xl text-yellow-600 mt-2",children:i.filter(C=>C.status==="pending").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Overdue"}),s.jsx("p",{className:"text-3xl text-red-600 mt-2",children:i.filter(C=>C.status==="overdue").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Monthly Revenue"}),s.jsxs("p",{className:"text-3xl text-[#C4A672] mt-2",children:["$",i.reduce((C,A)=>C+A.rentalPrice,0).toFixed(2)]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by book title or renter name...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:["all","active","pending","overdue","returned"].map(C=>s.jsx(J,{variant:t===C?"default":"outline",onClick:()=>r(C),className:t===C?"bg-[#C4A672] hover:bg-[#8B7355]":"",size:"sm",children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Book"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Renter"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Start Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Due Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Price"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(C=>{const A=w(C.dueDate);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-[#2C3E50]",children:C.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",C.id]})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-[#2C3E50]",children:C.renterName}),s.jsx("p",{className:"text-sm text-gray-500",children:C.renterEmail})]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(C.startDate).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-gray-600",children:new Date(C.dueDate).toLocaleDateString()}),C.status==="active"&&s.jsx("p",{className:`text-sm ${A<7?"text-red-600":"text-gray-500"}`,children:A>0?`${A} days left`:"Overdue"})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Xe,{className:x(C.status),children:C.status})}),s.jsxs("td",{className:"px-6 py-4 text-[#C4A672]",children:["$",C.rentalPrice.toFixed(2),"/mo"]}),s.jsx("td",{className:"px-6 py-4",children:C.status==="pending"?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>y(C.id),children:[s.jsx(ll,{className:"w-4 h-4 mr-1"}),"Approve"]}),s.jsxs(J,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>j(C.id),children:[s.jsx(Ot,{className:"w-4 h-4 mr-1"}),"Deny"]})]}):C.status==="overdue"?s.jsxs(J,{size:"sm",variant:"outline",className:"text-orange-600",onClick:()=>S(C.id),children:[s.jsx(bh,{className:"w-4 h-4 mr-1"}),"Send Reminder"]}):s.jsx(J,{size:"sm",variant:"outline",children:"View Details"})})]},C.id)})})]})})]})}function W9(){const[n,e]=_.useState(""),[t,r]=_.useState("all"),[i,c]=_.useState([]),[u,f]=_.useState(!0);_.useEffect(()=>{(async()=>{f(!0);try{const A=(await Cn(_t(Oe,"transactions"))).docs.map(M=>({id:M.id,...M.data()}));c(A)}catch(C){xe.error("Failed to fetch transactions"),console.error(C)}finally{f(!1)}})()},[]);const m=i.filter(S=>{const C=S.bookTitle.toLowerCase().includes(n.toLowerCase())||S.user.toLowerCase().includes(n.toLowerCase()),A=t==="all"||S.type===t;return C&&A}),x=i.filter(S=>S.status==="completed").reduce((S,C)=>S+C.amount,0),w=S=>{switch(S){case"buy":return"bg-blue-100 text-blue-800";case"sell":return"bg-green-100 text-green-800";case"rent":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},y=S=>{switch(S){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=()=>{const S=m.map(C=>({ID:C.id,Type:C.type,Book:C.bookTitle,User:C.user,Amount:C.amount,Date:C.date,Status:C.status}));console.log("Exporting:",S),xe.success("Transactions downloaded")};return u?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-3xl text-[#C4A672] mt-2",children:["$",x.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Purchases"}),s.jsx("p",{className:"text-3xl text-blue-600 mt-2",children:i.filter(S=>S.type==="buy").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Sales"}),s.jsx("p",{className:"text-3xl text-green-600 mt-2",children:i.filter(S=>S.type==="sell").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Rentals"}),s.jsx("p",{className:"text-3xl text-purple-600 mt-2",children:i.filter(S=>S.type==="rent").length})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search transactions...",value:n,onChange:S=>e(S.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:["all","buy","sell","rent"].map(S=>s.jsx(J,{variant:t===S?"default":"outline",onClick:()=>r(S),className:t===S?"bg-[#C4A672] hover:bg-[#8B7355]":"",size:"sm",children:S.charAt(0).toUpperCase()+S.slice(1)},S))}),s.jsxs(J,{onClick:j,variant:"outline",children:[s.jsx(Iu,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Transaction ID"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Book"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"User"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Amount"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(S=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("p",{className:"text-[#2C3E50]",children:S.id})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Xe,{className:w(S.type),children:S.type})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:S.bookTitle}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:S.user}),s.jsxs("td",{className:"px-6 py-4 text-[#C4A672]",children:["$",S.amount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(S.date).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Xe,{className:y(S.status),children:S.status})})]},S.id))})]})})]})}var Jp="Switch",[q9]=Ps(Jp),[G9,K9]=q9(Jp),qE=_.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:c,required:u,disabled:f,value:m="on",onCheckedChange:x,form:w,...y}=n,[j,S]=_.useState(null),C=ct(e,W=>S(W)),A=_.useRef(!1),M=j?w||!!j.closest("form"):!0,[R,z]=Ji({prop:i,defaultProp:c??!1,onChange:x,caller:Jp});return s.jsxs(G9,{scope:t,checked:R,disabled:f,children:[s.jsx(Ye.button,{type:"button",role:"switch","aria-checked":R,"aria-required":u,"data-state":YE(R),"data-disabled":f?"":void 0,disabled:f,value:m,...y,ref:C,onClick:Le(n.onClick,W=>{z(G=>!G),M&&(A.current=W.isPropagationStopped(),A.current||W.stopPropagation())})}),M&&s.jsx(ZE,{control:j,bubbles:!A.current,name:r,value:m,checked:R,required:u,disabled:f,form:w,style:{transform:"translateX(-100%)"}})]})});qE.displayName=Jp;var GE="SwitchThumb",KE=_.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=K9(GE,t);return s.jsx(Ye.span,{"data-state":YE(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});KE.displayName=GE;var Z9="SwitchBubbleInput",ZE=_.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},c)=>{const u=_.useRef(null),f=ct(u,c),m=jh(t),x=Ch(e);return _.useEffect(()=>{const w=u.current;if(!w)return;const y=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==t&&S){const C=new Event("click",{bubbles:r});S.call(w,t),w.dispatchEvent(C)}},[m,t,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:f,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ZE.displayName=Z9;function YE(n){return n?"checked":"unchecked"}var Y9=qE,Q9=KE;function gu({className:n,...e}){return s.jsx(Y9,{"data-slot":"switch",className:ft("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:s.jsx(Q9,{"data-slot":"switch-thumb",className:ft("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function X9(){const[n,e]=_.useState({platformFeePercentage:10,minBookPrice:1,maxBookPrice:500,defaultRentalDuration:30,emailNotifications:!0,smsNotifications:!1,overdueReminders:!0,newListingAlerts:!0,requireEmailVerification:!0,twoFactorForAdmins:!0,sessionTimeout:60,maxLoginAttempts:5}),[t,r]=_.useState(!0);_.useEffect(()=>{(async()=>{r(!0);try{const u=jt(Oe,"settings","system"),f=await Rp(u);f.exists()&&e(f.data())}catch(u){xe.error("Failed to fetch settings"),console.error(u)}finally{r(!1)}})()},[]);const i=async()=>{try{await s0(jt(Oe,"settings","system"),n),xe.success("Settings saved successfully!")}catch(c){xe.error("Failed to save settings"),console.error(c)}};return t?s.jsx("div",{children:"Loading settings..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(Wa,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Pricing Rules"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure platform fees and pricing limits"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"platformFee",children:"Platform Fee (%)"}),s.jsx(Ie,{id:"platformFee",type:"number",value:n.platformFeePercentage,onChange:c=>e({...n,platformFeePercentage:parseFloat(c.target.value)})}),s.jsx("p",{className:"text-xs text-gray-500",children:"Fee charged on each transaction"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"rentalDuration",children:"Default Rental Duration (days)"}),s.jsx(Ie,{id:"rentalDuration",type:"number",value:n.defaultRentalDuration,onChange:c=>e({...n,defaultRentalDuration:parseInt(c.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"minPrice",children:"Minimum Book Price ($)"}),s.jsx(Ie,{id:"minPrice",type:"number",step:"0.01",value:n.minBookPrice,onChange:c=>e({...n,minBookPrice:parseFloat(c.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"maxPrice",children:"Maximum Book Price ($)"}),s.jsx(Ie,{id:"maxPrice",type:"number",step:"0.01",value:n.maxBookPrice,onChange:c=>e({...n,maxBookPrice:parseFloat(c.target.value)})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(Ha,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Notification Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage system notifications"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"emailNotif",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send notifications via email"})]}),s.jsx(gu,{id:"emailNotif",checked:n.emailNotifications,onCheckedChange:c=>e({...n,emailNotifications:c})})]}),s.jsx(zr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"smsNotif",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send notifications via SMS"})]}),s.jsx(gu,{id:"smsNotif",checked:n.smsNotifications,onCheckedChange:c=>e({...n,smsNotifications:c})})]}),s.jsx(zr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"overdueNotif",children:"Overdue Reminders"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Automatic reminders for overdue rentals"})]}),s.jsx(gu,{id:"overdueNotif",checked:n.overdueReminders,onCheckedChange:c=>e({...n,overdueReminders:c})})]}),s.jsx(zr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"newListingNotif",children:"New Listing Alerts"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify users of new book listings"})]}),s.jsx(gu,{id:"newListingNotif",checked:n.newListingAlerts,onCheckedChange:c=>e({...n,newListingAlerts:c})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(ul,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Security Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure security and authentication"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"emailVerif",children:"Require Email Verification"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Users must verify email to use platform"})]}),s.jsx(gu,{id:"emailVerif",checked:n.requireEmailVerification,onCheckedChange:c=>e({...n,requireEmailVerification:c})})]}),s.jsx(zr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"twoFactor",children:"Two-Factor Auth for Admins"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for admin accounts"})]}),s.jsx(gu,{id:"twoFactor",checked:n.twoFactorForAdmins,onCheckedChange:c=>e({...n,twoFactorForAdmins:c})})]}),s.jsx(zr,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),s.jsx(Ie,{id:"sessionTimeout",type:"number",value:n.sessionTimeout,onChange:c=>e({...n,sessionTimeout:parseInt(c.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"maxAttempts",children:"Max Login Attempts"}),s.jsx(Ie,{id:"maxAttempts",type:"number",value:n.maxLoginAttempts,onChange:c=>e({...n,maxLoginAttempts:parseInt(c.target.value)})})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(J,{onClick:i,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:[s.jsx(n1,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})})]})}function J9(){const[n,e]=_.useState([]),[t,r]=_.useState(""),[i,c]=_.useState("all"),[u,f]=_.useState("all"),[m,x]=_.useState("newest"),[w,y]=_.useState(!0);_.useEffect(()=>{(async()=>{y(!0);try{const D=(await Cn(_t(Oe,"communities"))).docs.map(P=>({id:P.id,...P.data()}));e(D)}catch(ee){xe.error("Failed to fetch communities"),console.error(ee)}finally{y(!1)}})()},[]);const j=n.filter(K=>{const ee=K.name.toLowerCase().includes(t.toLowerCase())||K.admin.toLowerCase().includes(t.toLowerCase()),D=i==="all"||K.status===i,P=u==="all"||K.privacy===u;return ee&&D&&P}).sort((K,ee)=>{switch(m){case"newest":return ee.createdAt.getTime()-K.createdAt.getTime();case"oldest":return K.createdAt.getTime()-ee.createdAt.getTime();case"members":return ee.memberCount-K.memberCount;case"posts":return ee.postsCount-K.postsCount;case"name":return K.name.localeCompare(ee.name);default:return 0}}),S=async K=>{try{await Pn(jt(Oe,"communities",K),{status:"active"}),e(ee=>ee.map(D=>D.id===K?{...D,status:"active"}:D)),xe.success("Community approved")}catch(ee){xe.error("Failed to approve"),console.error(ee)}},C=async K=>{if(confirm("Are you sure you want to reject this community? It will be deleted."))try{await qu(jt(Oe,"communities",K)),e(ee=>ee.filter(D=>D.id!==K)),xe.info("Community rejected and deleted")}catch(ee){xe.error("Failed to reject"),console.error(ee)}},A=async K=>{const ee=n.find(P=>P.id===K);if(!ee)return;const D=ee.status==="flagged"?"active":"flagged";try{await Pn(jt(Oe,"communities",K),{status:D}),e(P=>P.map(V=>V.id===K?{...V,status:D}:V)),xe.success(D==="flagged"?"Community flagged":"Community unflagged")}catch(P){xe.error("Failed to update flag"),console.error(P)}},M=async K=>{if(confirm("Are you sure you want to permanently delete this community? This action cannot be undone."))try{await qu(jt(Oe,"communities",K)),e(ee=>ee.filter(D=>D.id!==K)),xe.success("Community deleted")}catch(ee){xe.error("Failed to delete"),console.error(ee)}},R=K=>{xe.info(`Opening community details for ID: ${K}`)},z=K=>{xe.info(`Viewing admin action history for: ${K}`)},W=K=>{const ee={active:"bg-green-100 text-green-700 border-green-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200",flagged:"bg-red-100 text-red-700 border-red-200"},D={active:s.jsx(cr,{className:"w-3 h-3 mr-1"}),pending:s.jsx(ul,{className:"w-3 h-3 mr-1"}),flagged:s.jsx(wx,{className:"w-3 h-3 mr-1"})};return s.jsxs(Xe,{variant:"outline",className:ee[K],children:[D[K],K.charAt(0).toUpperCase()+K.slice(1)]})},G={total:n.length,active:n.filter(K=>K.status==="active").length,pending:n.filter(K=>K.status==="pending").length,flagged:n.filter(K=>K.status==="flagged").length};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-3xl text-gray-900 mb-2",children:"Community Management"}),s.jsx("p",{className:"text-gray-600",children:"Monitor and manage all communities on the platform"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Communities"}),s.jsx("p",{className:"text-2xl text-gray-900 mt-1",children:G.total})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(gn,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("p",{className:"text-2xl text-green-600 mt-1",children:G.active})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(cr,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"}),s.jsx("p",{className:"text-2xl text-yellow-600 mt-1",children:G.pending})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(ul,{className:"w-6 h-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Flagged"}),s.jsx("p",{className:"text-2xl text-red-600 mt-1",children:G.flagged})]}),s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx(wx,{className:"w-6 h-6 text-red-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search communities or admins...",value:t,onChange:K=>r(K.target.value),className:"pl-10"})]}),s.jsxs(rn,{value:i,onValueChange:c,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Filter by status"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All Status"}),s.jsx(De,{value:"active",children:"Active"}),s.jsx(De,{value:"pending",children:"Pending"}),s.jsx(De,{value:"flagged",children:"Flagged"})]})]}),s.jsxs(rn,{value:u,onValueChange:f,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Filter by privacy"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All Privacy"}),s.jsx(De,{value:"public",children:"Public"}),s.jsx(De,{value:"private",children:"Private"})]})]}),s.jsxs(rn,{value:m,onValueChange:x,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Sort by"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"newest",children:"Newest First"}),s.jsx(De,{value:"oldest",children:"Oldest First"}),s.jsx(De,{value:"members",children:"Most Members"}),s.jsx(De,{value:"posts",children:"Most Posts"}),s.jsx(De,{value:"name",children:"Name A-Z"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Community"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Admin"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Stats"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Privacy"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Created"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:j.map(K=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:K.name}),s.jsx("div",{className:"text-sm text-gray-500",children:K.topic}),K.reportCount>0&&s.jsxs(Xe,{variant:"outline",className:"mt-1 bg-red-50 text-red-600 border-red-200",children:[K.reportCount," reports"]})]})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"text-gray-900",children:K.admin}),s.jsx("button",{onClick:()=>z(K.adminId),className:"text-sm text-[#C4A672] hover:underline",children:"View actions"})]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),K.memberCount.toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"w-4 h-4"}),K.postsCount]})]})}),s.jsx("td",{className:"p-4",children:s.jsx(Xe,{variant:"outline",children:K.privacy==="public"?" Public":" Private"})}),s.jsx("td",{className:"p-4",children:W(K.status)}),s.jsx("td",{className:"p-4 text-sm text-gray-600",children:K.createdAt.toLocaleDateString()}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex items-center gap-2",children:K.status==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(J,{size:"sm",onClick:()=>S(K.id),className:"bg-green-600 hover:bg-green-700 text-white",children:"Approve"}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>C(K.id),className:"text-red-600 border-red-200",children:"Reject"})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{size:"sm",variant:"outline",onClick:()=>R(K.id),children:s.jsx(Ur,{className:"w-4 h-4"})}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>A(K.id),className:K.status==="flagged"?"text-green-600 border-green-200":"text-yellow-600 border-yellow-200",children:s.jsx(wx,{className:"w-4 h-4"})}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>M(K.id),className:"text-red-600 border-red-200",children:s.jsx(cc,{className:"w-4 h-4"})})]})})})]},K.id))})]})}),j.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No communities found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Try adjusting your filters"})]})]}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",j.length," of ",n.length," communities"]})]})}function eB({onLogout:n}){const[e,t]=_.useState("users"),r=[{id:"users",label:"User Management",icon:gn},{id:"books",label:"Book Inventory",icon:ar},{id:"rentals",label:"Rental Management",icon:Gs},{id:"transactions",label:"Transaction History",icon:Wa},{id:"communities",label:"Communities",icon:qs},{id:"announcements",label:"Announcements",icon:Ha},{id:"settings",label:"System Settings",icon:Nh}];return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsxs("aside",{className:"w-64 bg-[#2C3E50] text-white flex flex-col",children:[s.jsx("div",{className:"p-6 border-b border-white/10",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-lg flex items-center justify-center",children:s.jsx(ul,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl",children:"BookOra"}),s.jsx("p",{className:"text-xs text-white/70",children:"Admin Portal"})]})]})}),s.jsx("nav",{className:"flex-1 p-4 space-y-2",children:r.map(i=>{const c=i.icon;return s.jsxs("button",{onClick:()=>t(i.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e===i.id?"bg-[#C4A672] text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:[s.jsx(c,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:i.label})]},i.id)})}),s.jsxs("div",{className:"p-4 border-t border-white/10 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 px-2",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center",children:s.jsx("span",{children:"AD"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Admin User"}),s.jsx("p",{className:"text-xs text-white/70",children:"admin@bookora.com"})]})]}),s.jsxs(J,{onClick:n,variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[s.jsx(rh,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]}),s.jsxs("main",{className:"flex-1 overflow-auto",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-1",children:r.find(i=>i.id===e)?.label}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Manage and monitor your BookOra platform"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-xl text-[#C4A672]",children:"$12,450"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"}),s.jsx("p",{className:"text-xl text-[#2C3E50]",children:"1,234"})]})]})]})}),s.jsxs("div",{className:"p-8",children:[e==="users"&&s.jsx(z9,{}),e==="books"&&s.jsx($9,{}),e==="rentals"&&s.jsx(H9,{}),e==="transactions"&&s.jsx(W9,{}),e==="communities"&&s.jsx(J9,{}),e==="announcements"&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[s.jsx(Ha,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-700 mb-2",children:"Announcements Management"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Manage announcements from the main Announcements page"}),s.jsx(J,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Go to Announcements"})]}),e==="settings"&&s.jsx(X9,{})]})]})]})}function tB({onClose:n,onSuccess:e}){const[t,r]=_.useState({current:"",new:"",confirm:""}),[i,c]=_.useState({}),[u,f]=_.useState({current:!1,new:!1,confirm:!1}),[m,x]=_.useState(!1),w=S=>{f(C=>({...C,[S]:!C[S]}))},y=()=>{const S={};return t.current||(S.current="Current password is required"),t.new||(S.new="New password is required"),t.new&&t.new.length<8&&(S.new="Password must be at least 8 characters"),t.new!==t.confirm&&(S.confirm="Passwords do not match"),c(S),Object.keys(S).length===0},j=async S=>{if(S.preventDefault(),!!y()){x(!0);try{const C=Jt.currentUser;if(!C||!C.email)throw new Error("No user logged in");const A=Nc.credential(C.email,t.current);await _6(C,A),await N6(C,t.new),xe.success("Password updated successfully"),n(),e&&e()}catch(C){let A="Failed to update password";C.code==="auth/wrong-password"?A="Incorrect current password":C.code==="auth/weak-password"&&(A="New password is too weak"),c({current:A}),console.error(C)}finally{x(!1)}}};return s.jsx($a,{open:!0,onOpenChange:n,children:s.jsxs(Qi,{className:"max-w-md",children:[s.jsxs(xl,{children:[s.jsxs(vl,{className:"text-2xl text-[#2C3E50] flex items-center gap-2",children:[s.jsx(fs,{className:"w-6 h-6"}),"Change Password"]}),s.jsx(ui,{children:"Enter your current password and choose a new one"})]}),s.jsxs("form",{onSubmit:j,className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"current",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"current",type:u.current?"text":"password",value:t.current,onChange:S=>r({...t,current:S.target.value}),className:i.current?"border-red-500 pr-10":"pr-10"}),s.jsx("button",{type:"button",onClick:()=>w("current"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u.current?s.jsx(bu,{className:"w-4 h-4"}):s.jsx(Ur,{className:"w-4 h-4"})})]}),i.current&&s.jsx("p",{className:"text-sm text-red-500",children:i.current})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"new",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"new",type:u.new?"text":"password",value:t.new,onChange:S=>r({...t,new:S.target.value}),className:i.new?"border-red-500 pr-10":"pr-10"}),s.jsx("button",{type:"button",onClick:()=>w("new"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u.new?s.jsx(bu,{className:"w-4 h-4"}):s.jsx(Ur,{className:"w-4 h-4"})})]}),i.new&&s.jsx("p",{className:"text-sm text-red-500",children:i.new}),s.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"confirm",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"confirm",type:u.confirm?"text":"password",value:t.confirm,onChange:S=>r({...t,confirm:S.target.value}),className:i.confirm?"border-red-500 pr-10":"pr-10"}),s.jsx("button",{type:"button",onClick:()=>w("confirm"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u.confirm?s.jsx(bu,{className:"w-4 h-4"}):s.jsx(Ur,{className:"w-4 h-4"})})]}),i.confirm&&s.jsx("p",{className:"text-sm text-red-500",children:i.confirm})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(J,{type:"button",variant:"outline",onClick:n,className:"flex-1",disabled:m,children:"Cancel"}),s.jsx(J,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:m,children:m?"Updating...":"Update Password"})]})]})]})})}function nB({onClose:n}){const[e,t]=_.useState(""),[r,i]=_.useState(!1),[c,u]=_.useState(!1),f=async()=>{if(e==="DELETE"&&r){u(!0);try{const m=Jt.currentUser;if(!m)throw new Error("No user logged in");await T6(m),xe.success("Account deleted successfully"),n()}catch(m){m.code==="auth/requires-recent-login"?xe.error("Please log out and log in again to delete account"):xe.error("Failed to delete account"),console.error(m)}finally{u(!1)}}};return s.jsx($a,{open:!0,onOpenChange:n,children:s.jsxs(Qi,{className:"max-w-md",children:[s.jsxs(xl,{children:[s.jsxs(vl,{className:"text-2xl text-red-600 flex items-center gap-2",children:[s.jsx(bh,{className:"w-6 h-6"}),"Delete Account"]}),s.jsx(ui,{children:"This action cannot be undone"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-red-900 mb-2",children:"Warning"}),s.jsx("p",{className:"text-sm text-red-800",children:"Deleting your account will permanently remove:"}),s.jsxs("ul",{className:"text-sm text-red-800 list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"All your book listings"}),s.jsx("li",{children:"Purchase and rental history"}),s.jsx("li",{children:"Saved payment methods"}),s.jsx("li",{children:"Wishlist and favorites"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"confirm",children:'Type "DELETE" to confirm'}),s.jsx(Ie,{id:"confirm",value:e,onChange:m=>t(m.target.value),placeholder:"DELETE"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Qu,{id:"understood",checked:r,onCheckedChange:m=>i(m===!0)}),s.jsx(ke,{htmlFor:"understood",className:"text-sm cursor-pointer",children:"I understand that this action is permanent and cannot be reversed"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(J,{type:"button",variant:"outline",onClick:n,className:"flex-1",disabled:c,children:"Cancel"}),s.jsx(J,{onClick:f,disabled:e!=="DELETE"||!r||c,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:c?"Deleting...":"Delete Account"})]})]})]})})}var sB=Symbol("radix.slottable");function rB(n){const e=({children:t})=>s.jsx(s.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=sB,e}var QE="AlertDialog",[iB]=Ps(QE,[OC]),ro=OC(),XE=n=>{const{__scopeAlertDialog:e,...t}=n,r=ro(e);return s.jsx(JC,{...r,...t,modal:!0})};XE.displayName=QE;var aB="AlertDialogTrigger",oB=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=ro(t);return s.jsx(RF,{...i,...r,ref:e})});oB.displayName=aB;var lB="AlertDialogPortal",JE=n=>{const{__scopeAlertDialog:e,...t}=n,r=ro(e);return s.jsx(eS,{...r,...t})};JE.displayName=lB;var cB="AlertDialogOverlay",eT=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=ro(t);return s.jsx(c0,{...i,...r,ref:e})});eT.displayName=cB;var ku="AlertDialogContent",[uB,dB]=iB(ku),hB=rB("AlertDialogContent"),tT=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...i}=n,c=ro(t),u=_.useRef(null),f=ct(e,u),m=_.useRef(null);return s.jsx(AF,{contentName:ku,titleName:nT,docsSlug:"alert-dialog",children:s.jsx(uB,{scope:t,cancelRef:m,children:s.jsxs(u0,{role:"alertdialog",...c,...i,ref:f,onOpenAutoFocus:Le(i.onOpenAutoFocus,x=>{x.preventDefault(),m.current?.focus({preventScroll:!0})}),onPointerDownOutside:x=>x.preventDefault(),onInteractOutside:x=>x.preventDefault(),children:[s.jsx(hB,{children:r}),s.jsx(mB,{contentRef:u})]})})})});tT.displayName=ku;var nT="AlertDialogTitle",sT=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=ro(t);return s.jsx(tS,{...i,...r,ref:e})});sT.displayName=nT;var rT="AlertDialogDescription",iT=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=ro(t);return s.jsx(nS,{...i,...r,ref:e})});iT.displayName=rT;var fB="AlertDialogAction",aT=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=ro(t);return s.jsx(d0,{...i,...r,ref:e})});aT.displayName=fB;var oT="AlertDialogCancel",lT=_.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:i}=dB(oT,t),c=ro(t),u=ct(e,i);return s.jsx(d0,{...c,...r,ref:u})});lT.displayName=oT;var mB=({contentRef:n})=>{const e=`\`${ku}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ku}\` by passing a \`${rT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ku}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{document.getElementById(n.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},pB=XE,gB=JE,xB=eT,vB=tT,yB=aT,wB=lT,_B=sT,bB=iT;function NB({...n}){return s.jsx(pB,{"data-slot":"alert-dialog",...n})}function jB({...n}){return s.jsx(gB,{"data-slot":"alert-dialog-portal",...n})}function CB({className:n,...e}){return s.jsx(xB,{"data-slot":"alert-dialog-overlay",className:ft("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function SB({className:n,...e}){return s.jsxs(jB,{children:[s.jsx(CB,{}),s.jsx(vB,{"data-slot":"alert-dialog-content",className:ft("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...e})]})}function EB({className:n,...e}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:ft("flex flex-col gap-2 text-center sm:text-left",n),...e})}function TB({className:n,...e}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:ft("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...e})}function AB({className:n,...e}){return s.jsx(_B,{"data-slot":"alert-dialog-title",className:ft("text-lg font-semibold",n),...e})}function kB({className:n,...e}){return s.jsx(bB,{"data-slot":"alert-dialog-description",className:ft("text-muted-foreground text-sm",n),...e})}function PB({className:n,...e}){return s.jsx(yB,{className:ft(Yv(),n),...e})}function IB({className:n,...e}){return s.jsx(wB,{className:ft(Yv({variant:"outline"}),n),...e})}function RB({onNavigateToAdminLogin:n,onPasswordChangeSuccess:e}={}){const[t,r]=_.useState(!1),[i,c]=_.useState(!1),[u,f]=_.useState(!1),[m,x]=_.useState(!1),[w,y]=_.useState({name:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",paymentMethod:""}),[j,S]=_.useState(!0),C=Jt.currentUser;_.useEffect(()=>{(async()=>{if(C){S(!0);try{const z=await Rp(jt(Oe,"users",C.uid));z.exists()&&y(z.data())}catch(z){xe.error("Failed to fetch profile"),console.error(z)}finally{S(!1)}}})()},[C]);const A=async()=>{if(C)try{await Pn(jt(Oe,"users",C.uid),w),r(!1),xe.success("Profile updated successfully!",{description:"Your changes have been saved."})}catch(R){xe.error("Failed to update profile"),console.error(R)}},M=()=>{x(!1),n&&n()};return j?s.jsx("div",{children:"Loading profile..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-2xl",children:w.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl",children:w.name}),s.jsx("p",{className:"text-gray-600",children:w.email}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Member since 2024"}),s.jsx("span",{className:"text-sm text-gray-500",children:""}),s.jsx("span",{className:"text-sm text-green-600",children:"Verified Account"})]})]})]}),!t&&s.jsx(J,{onClick:()=>r(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Edit Profile"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(ah,{className:"w-5 h-5"}),"Personal Information"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"name",children:"Full Name"}),s.jsx(Ie,{id:"name",value:w.name,onChange:R=>y({...w,name:R.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Ie,{id:"phone",value:w.phone,onChange:R=>y({...w,phone:R.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"email",children:"Email Address"}),s.jsx(Ie,{id:"email",type:"email",value:w.email,onChange:R=>y({...w,email:R.target.value}),disabled:!t})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(In,{className:"w-5 h-5"}),"Location"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"address",children:"Street Address"}),s.jsx(Ie,{id:"address",value:w.address,onChange:R=>y({...w,address:R.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"city",children:"City"}),s.jsx(Ie,{id:"city",value:w.city,onChange:R=>y({...w,city:R.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"state",children:"State"}),s.jsx(Ie,{id:"state",value:w.state,onChange:R=>y({...w,state:R.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(ke,{htmlFor:"zipCode",children:"ZIP Code"}),s.jsx(Ie,{id:"zipCode",value:w.zipCode,onChange:R=>y({...w,zipCode:R.target.value}),disabled:!t})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(Pu,{className:"w-5 h-5"}),"Payment Methods"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pu,{className:"w-6 h-6 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Visa ending in 1234"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Expires 12/25"})]})]}),s.jsx(J,{variant:"outline",size:"sm",children:"Manage"})]}),s.jsx(J,{variant:"outline",className:"w-full",children:"Add Payment Method"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(fs,{className:"w-5 h-5"}),"Security & Access"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(J,{variant:"outline",onClick:()=>c(!0),className:"w-full justify-start hover:bg-[#FAF8F3] transition-colors",children:[s.jsx(fs,{className:"w-4 h-4 mr-2"}),"Change Password"]}),s.jsx(zr,{}),s.jsxs(J,{variant:"outline",onClick:()=>x(!0),className:"w-full justify-start hover:bg-blue-50 border-blue-200 text-blue-700 transition-colors",children:[s.jsx(ul,{className:"w-4 h-4 mr-2"}),"Login as Admin"]}),s.jsx(zr,{}),s.jsxs(J,{variant:"outline",onClick:()=>f(!0),className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors",children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})]}),t&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"}),s.jsxs(J,{onClick:A,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(n1,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]}),i&&s.jsx(tB,{onClose:()=>c(!1),onSuccess:()=>{c(!1),e&&e()}}),u&&s.jsx(nB,{onClose:()=>f(!1)}),s.jsx(NB,{open:m,onOpenChange:x,children:s.jsxs(SB,{className:"bg-white",children:[s.jsxs(EB,{children:[s.jsxs(AB,{className:"flex items-center gap-2 text-[#2C3E50]",children:[s.jsx(ul,{className:"w-5 h-5 text-blue-600"}),"Switch to Admin Portal"]}),s.jsx(kB,{className:"text-gray-600",children:"You are about to switch to the Admin Portal. You will be redirected to the admin login page. This action is only available to users with administrative privileges."})]}),s.jsxs(TB,{children:[s.jsx(IB,{className:"hover:bg-gray-100",children:"Cancel"}),s.jsx(PB,{onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Continue to Admin Login"})]})]})})]})}function LB(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),i=Jt.currentUser;_.useEffect(()=>{if(!i)return;(async()=>{r(!0);try{const f=Gt(_t(Oe,"purchases"),hs("userId","==",i.uid),fr("date","desc")),x=(await Cn(f)).docs.map(w=>({id:w.id,...w.data()}));e(x)}catch(f){xe.error("Failed to fetch purchases"),console.error(f)}finally{r(!1)}})()},[i]);const c=u=>{switch(u){case"completed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return t?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl",children:"Purchase History"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"View all your book purchases"})]}),s.jsxs(J,{variant:"outline",children:[s.jsx(Iu,{className:"w-4 h-4 mr-2"}),"Export"]})]}),s.jsx("div",{className:"space-y-4",children:n.map(u=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-[#2C3E50]",children:u.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",u.author]})]}),s.jsx(Xe,{className:c(u.status),children:u.status})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["Order #",u.id]}),s.jsx("span",{children:""}),s.jsx("span",{children:new Date(u.date).toLocaleDateString()}),s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",u.price.toFixed(2)]})]})]},u.id))})]})})}function MB(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[i,c]=_.useState(0),u=Jt.currentUser;return _.useEffect(()=>{if(!u)return;(async()=>{r(!0);try{const m=Gt(_t(Oe,"sales"),hs("sellerId","==",u.uid),fr("date","desc")),w=(await Cn(m)).docs.map(j=>({id:j.id,...j.data()}));e(w);const y=w.filter(j=>j.status==="sold").reduce((j,S)=>j+S.price,0);c(y)}catch(m){xe.error("Failed to fetch sales"),console.error(m)}finally{r(!1)}})()},[u]),t?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl",children:"Sales History"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Track your book sales and earnings"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Total Earnings"}),s.jsxs("p",{className:"text-2xl text-[#C4A672]",children:["$",i.toFixed(2)]})]})]}),s.jsxs("div",{className:"space-y-4",children:[n.map(f=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-2",children:f.bookTitle}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["Sold to: ",f.buyerName]}),s.jsx("span",{children:""}),s.jsx("span",{children:new Date(f.date).toLocaleDateString()}),s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",f.price.toFixed(2)]})]})]}),s.jsx(Xe,{className:"bg-green-100 text-green-800",children:f.status})]})},f.id)),n.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Wa,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"No sales history"})]})]})]})})}function DB(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),i=Jt.currentUser;_.useEffect(()=>{if(!i)return;(async()=>{r(!0);try{const m=Gt(_t(Oe,"rentals"),hs("renterId","==",i.uid),fr("startDate","desc")),w=(await Cn(m)).docs.map(y=>({id:y.id,...y.data()}));e(w)}catch(m){xe.error("Failed to fetch rentals"),console.error(m)}finally{r(!1)}})()},[i]);const c=n.filter(f=>f.status==="active"),u=n.filter(f=>f.status!=="active");return t?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl",children:"Rental History"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your active and past rentals"})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Active Rentals"}),s.jsxs("div",{className:"space-y-4",children:[c.map(f=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-[#2C3E50]",children:f.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",f.author]})]}),s.jsx(Xe,{className:"bg-green-100 text-green-800",children:"Active"})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gs,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",new Date(f.dueDate).toLocaleDateString()]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(t1,{className:"w-4 h-4 mr-2"}),"Renew"]}),s.jsx(J,{size:"sm",variant:"outline",children:"Return Book"})]})]},f.id)),c.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-4",children:"No active rentals"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Past Rentals"}),s.jsxs("div",{className:"space-y-3",children:[u.map(f=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-[#2C3E50]",children:f.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",f.author]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-2",children:[s.jsxs("span",{children:["Rented: ",new Date(f.startDate).toLocaleDateString()," - ",new Date(f.dueDate).toLocaleDateString()]}),s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",f.price.toFixed(2)]})]})]}),s.jsx(Xe,{className:"bg-gray-100 text-gray-800",children:f.status})]})},f.id)),u.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-4",children:"No past rentals"})]})]})]})})}function OB({onNavigateToMarketplace:n}){const[e,t]=_.useState([]),[r,i]=_.useState(!0),c=Jt.currentUser;_.useEffect(()=>{if(!c)return;(async()=>{i(!0);try{const m=Gt(_t(Oe,"wishlists"),hs("userId","==",c.uid)),w=(await Cn(m)).docs.map(y=>({id:y.id,...y.data()}));t(w)}catch(m){xe.error("Failed to fetch wishlist"),console.error(m)}finally{i(!1)}})()},[c]);const u=async f=>{try{await qu(jt(Oe,"wishlists",f)),t(m=>m.filter(x=>x.id!==f)),xe.success("Removed from wishlist")}catch(m){xe.error("Failed to remove"),console.error(m)}};return r?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[#2C3E50] text-xl flex items-center gap-2",children:[s.jsx($i,{className:"w-6 h-6 text-red-500 fill-red-500"}),"My Wishlist"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Books you want to read"})]}),s.jsx(J,{onClick:n,variant:"outline",children:"Browse More Books"})]}),e.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(f=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[#2C3E50]",children:f.title}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",f.author]}),s.jsxs("p",{className:"text-[#C4A672] text-lg mt-2",children:["$",f.price.toFixed(2)]})]}),s.jsx("button",{onClick:()=>u(f.id),className:"text-gray-400 hover:text-red-500",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),f.available&&s.jsxs(J,{className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Kv,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]},f.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx($i,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Your wishlist is empty"}),s.jsx(J,{onClick:n,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Start Adding Books"})]})]})})}function FB({onNavigateToCommunity:n,onNavigateToCreate:e}){const[t,r]=_.useState(""),[i,c]=_.useState("all"),[u,f]=_.useState([]),[m,x]=_.useState([]),[w,y]=_.useState(!0),j=Jt.currentUser;_.useEffect(()=>{(async()=>{y(!0);try{if(j){const z=Gt(_t(Oe,"communities"),hs("members","array-contains",j.uid)),G=(await Cn(z)).docs.map(K=>({id:K.id,...K.data()}));f(G)}const A=Gt(_t(Oe,"communities"),limit(5)),R=(await Cn(A)).docs.map(z=>({id:z.id,...z.data()}));x(R)}catch(A){xe.error("Failed to fetch communities"),console.error(A)}finally{y(!1)}})()},[j]);const S=u.filter(C=>{const A=C.name.toLowerCase().includes(t.toLowerCase())||C.description.toLowerCase().includes(t.toLowerCase()),M=i==="all"||i==="created"&&C.role==="admin"||i==="joined"&&C.role==="member";return A&&M});return w?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50] mb-2",children:"My Communities"}),s.jsx("p",{className:"text-gray-600",children:"Connect with fellow book lovers"})]}),s.jsxs(J,{onClick:e,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"Create Community"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{placeholder:"Search communities...",value:t,onChange:C=>r(C.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:i==="all"?"default":"outline",onClick:()=>c("all"),className:i==="all"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:"All"}),s.jsx(J,{variant:i==="joined"?"default":"outline",onClick:()=>c("joined"),className:i==="joined"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:"Joined"}),s.jsx(J,{variant:i==="created"?"default":"outline",onClick:()=>c("created"),className:i==="created"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:"Created"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg text-[#2C3E50]",children:["Joined Communities (",S.length,")"]}),S.length===0?s.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[s.jsx(gn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No communities found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your search or filters"})]}):s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:S.map(C=>s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 hover:border-[#C4A672] transition-all hover:shadow-lg cursor-pointer overflow-hidden",onClick:()=>n?.(C.id),children:s.jsxs("div",{className:"flex gap-4 p-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl overflow-hidden",children:s.jsx("img",{src:C.image,alt:C.name,className:"w-full h-full object-cover"})}),C.unreadMessages>0&&s.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:C.unreadMessages})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"text-[#2C3E50] truncate",children:C.name}),s.jsx(Xe,{variant:C.role==="admin"?"default":"secondary",className:C.role==="admin"?"bg-[#C4A672]":"",children:C.role==="admin"?"Admin":"Member"})]}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:C.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{children:C.members.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"w-4 h-4"}),s.jsx("span",{children:C.posts})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gs,{className:"w-4 h-4"}),s.jsx("span",{children:C.lastActive})]})]})]})]})},C.id))})]}),i==="all"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg text-[#2C3E50]",children:"Suggested for You"}),s.jsx(J,{variant:"ghost",className:"text-[#C4A672] hover:text-[#8B7355]",children:"View All"})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:m.map(C=>s.jsx("div",{className:"bg-gradient-to-br from-[#F5F1E8] to-white rounded-xl p-4 hover:shadow-lg transition-all border border-[#C4A672]/20",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl overflow-hidden flex-shrink-0",children:s.jsx("img",{src:C.image,alt:C.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-1 truncate",children:C.name}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:C.description}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{children:C.members.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(a1,{className:"w-4 h-4"}),s.jsx("span",{children:C.posts})]})]}),s.jsx(J,{size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",onClick:A=>{A.stopPropagation(),n?.(C.id)},children:"Join"})]})]})]})},C.id))})]})]})}function VB({onOpenChat:n}){const[e,t]=_.useState(""),[r,i]=_.useState("all"),[c,u]=_.useState([]),[f,m]=_.useState([]),[x,w]=_.useState([]),[y,j]=_.useState(0),[S,C]=_.useState(!0),A=Jt.currentUser;_.useEffect(()=>{if(!A)return;(async()=>{C(!0);try{const z=Gt(_t(Oe,"privateChats"),hs("participants","array-contains",A.uid),fr("lastMessageTimestamp","desc")),G=(await Cn(z)).docs.map(B=>({id:B.id,...B.data()}));u(G);const K=Gt(_t(Oe,"groups"),hs("members","array-contains",A.uid),fr("lastMessageTimestamp","desc")),D=(await Cn(K)).docs.map(B=>({id:B.id,...B.data()}));m(D);const P=[...G.map(B=>({...B,type:"private"})),...D.map(B=>({...B,type:"group"}))].sort((B,U)=>U.lastMessageTimestamp?.toDate().getTime()-B.lastMessageTimestamp?.toDate().getTime());w(P);const V=P.reduce((B,U)=>B+(U.unreadCount||0),0);j(V)}catch(z){xe.error("Failed to fetch chats"),console.error(z)}finally{C(!1)}})()},[A]);const M=x.filter(R=>{const z=R.name.toLowerCase().includes(e.toLowerCase())||R.lastMessage.toLowerCase().includes(e.toLowerCase()),W=r==="all"||r==="private"&&R.type==="private"||r==="groups"&&R.type==="group";return z&&W});return S?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50] mb-2",children:"Messages"}),s.jsx("p",{className:"text-gray-600",children:y>0?`${y} unread message${y>1?"s":""}`:"All caught up!"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(JN,{className:"w-4 h-4 mr-2"}),"Archived"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{placeholder:"Search messages...",value:e,onChange:R=>t(R.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 border-b-2 transition-colors ${r==="all"?"border-[#C4A672] text-[#C4A672]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["All (",x.length,")"]}),s.jsxs("button",{onClick:()=>i("private"),className:`px-4 py-2 border-b-2 transition-colors ${r==="private"?"border-[#C4A672] text-[#C4A672]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Private (",c.length,")"]}),s.jsxs("button",{onClick:()=>i("groups"),className:`px-4 py-2 border-b-2 transition-colors ${r==="groups"?"border-[#C4A672] text-[#C4A672]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Groups (",f.length,")"]})]}),s.jsx("div",{className:"space-y-2",children:M.length===0?s.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[s.jsx(qs,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No messages found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your search"})]}):M.map(R=>s.jsx("div",{onClick:()=>n?.(R.id,R.type),className:`bg-white rounded-xl border border-gray-200 p-4 hover:border-[#C4A672] hover:shadow-md transition-all cursor-pointer ${R.unread>0?"bg-[#F5F1E8]/30":""}`,children:s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-gradient-to-br from-[#C4A672] to-[#8B7355]",children:s.jsx("img",{src:R.avatar,alt:R.name,className:"w-full h-full object-cover"})}),R.type==="private"&&"online"in R&&R.online&&s.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-white"}),R.type==="group"&&s.jsx("div",{className:"absolute bottom-0 right-0 w-5 h-5 bg-[#2C3E50] rounded-full flex items-center justify-center border-2 border-white",children:s.jsx(gn,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h4",{className:`text-[#2C3E50] truncate ${R.unread>0?"font-semibold":""}`,children:R.name}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(ip,{className:"w-3 h-3"}),R.timestamp]}),R.unread>0&&s.jsx(Xe,{className:"bg-[#C4A672] hover:bg-[#C4A672]",children:R.unread})]})]}),s.jsx("p",{className:`text-sm text-gray-600 line-clamp-1 mb-2 ${R.unread>0?"font-medium":""}`,children:R.lastMessage}),R.type==="private"&&"bookContext"in R&&R.bookContext&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Xe,{variant:"outline",className:"text-xs",children:[s.jsx(qs,{className:"w-3 h-3 mr-1"}),R.bookContext]})}),R.type==="group"&&"members"in R&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx(gn,{className:"w-3 h-3"}),s.jsxs("span",{children:[R.members.toLocaleString()," members"]})]})]})]})},R.id))}),M.length>0&&s.jsx("div",{className:"bg-gradient-to-r from-[#F5F1E8] to-white rounded-xl p-4 border border-[#C4A672]/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[#2C3E50] mb-1",children:"Keep your conversations organized"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Star important chats and archive old ones"})]}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(lc,{className:"w-4 h-4 mr-2"}),"Favorites"]})]})})]})}function BB({onReturnToProfile:n}){return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fadeInUp",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-hover max-w-md w-full p-8 text-center transition-smooth",children:[s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(cr,{className:"w-12 h-12 text-green-600"})})}),s.jsx("h2",{className:"text-2xl mb-3 text-gray-900",children:"Password Updated!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been changed successfully. You can now use your new password to log in."}),s.jsx(J,{onClick:n,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg transition-smooth btn-scale shadow-subtle",children:"Return to Profile"}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Make sure to remember your new password"})]})})}function zB({onLogout:n,onNavigateToMarketplace:e,onNavigateToRent:t,onNavigateToSell:r,onNavigateToCommunities:i,onNavigateToAdminLogin:c}){const[u,f]=_.useState("profile"),[m,x]=_.useState(!1),w=[{id:"profile",label:"Profile",icon:ah},{id:"purchases",label:"Purchases",icon:Xx},{id:"sales",label:"Sales",icon:Wa},{id:"rentals",label:"Rentals",icon:Gs},{id:"wishlist",label:"Wishlist",icon:$i},{id:"communities",label:"Communities",icon:gn},{id:"chats",label:"Chats",icon:qs}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-lg flex items-center justify-center text-white",children:s.jsx("span",{children:"BB"})}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Book Bloom"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(J,{variant:"outline",onClick:e,children:[s.jsx(ar,{className:"w-4 h-4 mr-2"}),"Browse Books"]}),s.jsxs(J,{variant:"outline",onClick:n,children:[s.jsx(rh,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] rounded-2xl p-8 text-white mb-8",children:[s.jsx("h2",{className:"text-3xl mb-2",children:"Welcome back, User!"}),s.jsx("p",{className:"text-white/90 mb-6",children:"Manage your books, view history, and explore new titles"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(J,{onClick:e,className:"bg-white text-[#C4A672] hover:bg-white/90",children:[s.jsx(Xx,{className:"w-4 h-4 mr-2"}),"Buy Books"]}),s.jsxs(J,{onClick:t,className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[s.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Rent Books"]}),s.jsxs(J,{onClick:r,className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[s.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Sell Books"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("div",{className:"flex gap-2 p-2",children:w.map(y=>{const j=y.icon;return s.jsxs("button",{onClick:()=>f(y.id),className:`flex items-center gap-2 px-4 py-3 rounded-lg transition-colors ${u===y.id?"bg-[#C4A672] text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(j,{className:"w-5 h-5"}),s.jsx("span",{children:y.label})]},y.id)})})})}),s.jsxs("div",{children:[u==="profile"&&s.jsx(RB,{onNavigateToAdminLogin:c,onPasswordChangeSuccess:()=>x(!0)}),u==="purchases"&&s.jsx(LB,{}),u==="sales"&&s.jsx(MB,{}),u==="rentals"&&s.jsx(DB,{}),u==="wishlist"&&s.jsx(OB,{onNavigateToMarketplace:e}),u==="communities"&&s.jsx(FB,{onNavigateToCommunity:i,onNavigateToCreate:i}),u==="chats"&&s.jsx(VB,{})]})]}),m&&s.jsx(BB,{onContinue:()=>x(!1)})]})}const UB=[{id:"1",isbn:"978-3-16-148410-0",title:"To Kill a Mockingbird",author:"Harper Lee",condition:"Good",category:"Classic Literature",images:["https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400","https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400"],description:"A classic American novel about justice and racial inequality in the Deep South.",seller:{name:"John Doe",rating:4.8,location:"San Francisco, CA"},rentalOptions:{weekly:2.99,monthly:5.99,yearly:49.99},deliveryMethods:["pickup","shipping"]},{id:"2",isbn:"978-0-06-112008-4",title:"1984",author:"George Orwell",condition:"New",category:"Fiction",images:["https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400","https://images.unsplash.com/photo-1524578271613-d550eacf6090?w=400"],description:"A dystopian social science fiction novel and cautionary tale.",seller:{name:"Jane Smith",rating:4.9,location:"San Francisco, CA"},rentalOptions:{weekly:3.99,monthly:7.99,yearly:59.99},deliveryMethods:["pickup","shipping"]},{id:"3",isbn:"978-0-7432-7356-5",title:"The Great Gatsby",author:"F. Scott Fitzgerald",condition:"Fair",category:"Classic Literature",images:["https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400"],description:"The story of the mysteriously wealthy Jay Gatsby and his love for Daisy Buchanan.",seller:{name:"Mike Johnson",rating:4.5,location:"Oakland, CA"},rentalOptions:{weekly:1.99,monthly:3.99,yearly:29.99},deliveryMethods:["pickup"]},{id:"4",isbn:"978-0-452-28423-4",title:"Pride and Prejudice",author:"Jane Austen",condition:"Good",category:"Romance",images:["https://images.unsplash.com/photo-1589998059171-988d887df646?w=400","https://images.unsplash.com/photo-1491841573634-28140fc7ced7?w=400"],description:"A romantic novel of manners set in Georgian England.",seller:{name:"Sarah Williams",rating:5,location:"San Jose, CA"},rentalOptions:{weekly:2.49,monthly:4.99,yearly:39.99},deliveryMethods:["pickup","shipping"]}];function $B({onSelectBook:n,onClose:e}){const[t,r]=_.useState(""),[i,c]=_.useState(""),[u,f]=_.useState("all"),[m,x]=_.useState("all"),[w,y]=_.useState("monthly"),[j,S]=_.useState([0,20]),[C,A]=_.useState(""),[M,R]=_.useState(!1),[z,W]=_.useState(!0),G=UB.filter(ee=>{const D=t.toLowerCase(),P=t===""||ee.title.toLowerCase().includes(D)||ee.author.toLowerCase().includes(D)||ee.isbn.toLowerCase().includes(D),V=i===""||ee.isbn.includes(i),B=u==="all"||ee.category===u,U=m==="all"||ee.condition===m,q=ee.rentalOptions[w],H=q>=j[0]&&q<=j[1],se=C===""||ee.seller.location.toLowerCase().includes(C.toLowerCase());return P&&V&&B&&U&&H&&se}),K=()=>{r(""),c(""),f("all"),x("all"),y("monthly"),S([0,20]),A("")};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6 sticky top-0 z-10 shadow-sm",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[#2C3E50] text-2xl mb-1",children:"Rent Books"}),s.jsx("p",{className:"text-gray-600",children:"Borrow books for as long as you need"})]}),s.jsxs(J,{variant:"outline",onClick:e,children:[s.jsx(Ot,{className:"w-5 h-5 mr-2"}),"Close"]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Search Books"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by title, author, or ISBN...",value:t,onChange:ee=>r(ee.target.value),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"ISBN"}),s.jsx(Ie,{type:"text",placeholder:"978-3-16-148410-0",value:i,onChange:ee=>c(ee.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Category"}),s.jsxs(rn,{value:u,onValueChange:f,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Category"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All Categories"}),s.jsx(De,{value:"Fiction",children:"Fiction"}),s.jsx(De,{value:"Classic Literature",children:"Classic Literature"}),s.jsx(De,{value:"Romance",children:"Romance"}),s.jsx(De,{value:"Mystery",children:"Mystery"}),s.jsx(De,{value:"Science Fiction",children:"Science Fiction"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Condition"}),s.jsxs(rn,{value:m,onValueChange:x,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Condition"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All Conditions"}),s.jsx(De,{value:"New",children:"New"}),s.jsx(De,{value:"Good",children:"Good"}),s.jsx(De,{value:"Fair",children:"Fair"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Rental Period"}),s.jsxs(rn,{value:w,onValueChange:ee=>y(ee),children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Period"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"weekly",children:"Weekly"}),s.jsx(De,{value:"monthly",children:"Monthly"}),s.jsx(De,{value:"yearly",children:"Yearly"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"City or ZIP code",value:C,onChange:ee=>A(ee.target.value),className:"pl-10"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(J,{variant:"outline",onClick:K,className:"w-full",children:"Clear Filters"})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>R(!M),children:[s.jsx(s1,{className:"w-4 h-4 mr-2"}),M?"Hide":"Show"," Advanced Filters"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:z,onChange:ee=>W(ee.target.checked),className:"w-4 h-4"}),s.jsx(sh,{className:"w-4 h-4"}),"Show Photo Previews"]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[G.length," book",G.length!==1?"s":""," found"]})]})]}),M&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-700 mb-3 block",children:[w.charAt(0).toUpperCase()+w.slice(1)," Price Range:",s.jsxs("span",{className:"text-[#C4A672] ml-2",children:["$",j[0]," - $",j[1]]})]}),s.jsx(yh,{value:j,onValueChange:ee=>S(ee),min:0,max:20,step:.5,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"$0"}),s.jsx("span",{children:"$20"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-3 block",children:"Location Proximity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-sm text-gray-600",children:C||"All locations"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter a city or ZIP code above to filter by location"})]})]})]}),s.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm text-blue-900 mb-2",children:"Active Filters:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[t&&s.jsxs(Xe,{variant:"secondary",children:["Search: ",t]}),i&&s.jsxs(Xe,{variant:"secondary",children:["ISBN: ",i]}),u!=="all"&&s.jsxs(Xe,{variant:"secondary",children:["Category: ",u]}),m!=="all"&&s.jsxs(Xe,{variant:"secondary",children:["Condition: ",m]}),C&&s.jsxs(Xe,{variant:"secondary",children:["Location: ",C]}),s.jsxs(Xe,{variant:"secondary",children:["Period: ",w]}),s.jsxs(Xe,{variant:"secondary",children:["Price: $",j[0],"-$",j[1]]})]})]})]})]}),s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-[#2C3E50] text-xl",children:["Available for Rent (",G.length,")"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",w," rates"]})]}),G.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(ee=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[z&&s.jsxs("div",{className:"h-48 bg-gray-200 overflow-hidden relative",children:[s.jsx("img",{src:ee.images[0],alt:ee.title,className:"w-full h-full object-cover"}),ee.images.length>1&&s.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded flex items-center gap-1",children:[s.jsx(sh,{className:"w-3 h-3"}),ee.images.length," photos"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1 line-clamp-1",children:ee.title}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",ee.author]})]}),s.jsx(Xe,{className:ee.condition==="New"?"bg-green-100 text-green-800":ee.condition==="Good"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800",children:ee.condition})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["ISBN: ",ee.isbn]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[s.jsx(In,{className:"w-4 h-4"}),s.jsx("span",{children:ee.seller.location})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(Gs,{className:"w-3 h-3"}),"Rental Options"]})}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Weekly:"}),s.jsxs("span",{className:w==="weekly"?"text-[#C4A672] font-medium":"text-gray-800",children:["$",ee.rentalOptions.weekly,"/wk"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Monthly:"}),s.jsxs("span",{className:w==="monthly"?"text-[#C4A672] font-medium":"text-gray-800",children:["$",ee.rentalOptions.monthly,"/mo"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Yearly:"}),s.jsxs("span",{className:w==="yearly"?"text-[#C4A672] font-medium":"text-gray-800",children:["$",ee.rentalOptions.yearly,"/yr"]})]})]})]}),s.jsx(J,{onClick:()=>n(ee),className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"View Details & Rent"})]})]},ee.id))}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[s.jsx(Ln,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:"No books found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or search criteria"}),s.jsx(J,{onClick:K,variant:"outline",children:"Clear All Filters"})]})]})]})}function HB({book:n,onBack:e,onRent:t}){const[r,i]=_.useState("monthly"),[c,u]=_.useState("pickup"),f=()=>n.rentalOptions[r],m=()=>{let x=f();return c==="shipping"&&(x+=5.99),x.toFixed(2)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(J,{variant:"ghost",onClick:e,className:"mb-4",children:[s.jsx(Wr,{className:"w-5 h-5 mr-2"}),"Back to Search"]}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Book Details"})]})}),s.jsx("div",{className:"max-w-7xl mx-auto p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden sticky top-8",children:[s.jsx("div",{className:"h-96 bg-gray-200",children:s.jsx("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"})}),n.images.length>1&&s.jsx("div",{className:"p-4 grid grid-cols-3 gap-2",children:n.images.slice(1).map((x,w)=>s.jsx("div",{className:"h-20 bg-gray-200 rounded overflow-hidden",children:s.jsx("img",{src:x,alt:`${n.title} ${w+2}`,className:"w-full h-full object-cover"})},w))})]})}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:n.title}),s.jsxs("p",{className:"text-gray-600 text-lg",children:["by ",n.author]})]}),s.jsx(Xe,{className:"bg-blue-100 text-blue-800",children:n.condition})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(ar,{className:"w-4 h-4"}),s.jsxs("span",{children:["ISBN: ",n.isbn]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx($r,{className:"w-4 h-4"}),s.jsxs("span",{children:["Category: ",n.category]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n.description})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-4 flex items-center gap-2",children:[s.jsx(ah,{className:"w-5 h-5"}),"Seller Information"]}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:n.seller.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:n.seller.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lc,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:n.seller.rating})]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-gray-600",children:"Verified Seller"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(In,{className:"w-4 h-4"}),s.jsx("span",{children:n.seller.location})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Delivery Method"}),s.jsxs("div",{className:"space-y-3",children:[n.deliveryMethods.includes("pickup")&&s.jsxs("button",{onClick:()=>u("pickup"),className:`w-full border-2 rounded-lg p-4 flex items-center gap-3 transition-colors ${c==="pickup"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx($r,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Local Pickup"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Free - Pick up from seller"})]}),c==="pickup"&&s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#C4A672] flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),n.deliveryMethods.includes("shipping")&&s.jsxs("button",{onClick:()=>u("shipping"),className:`w-full border-2 rounded-lg p-4 flex items-center gap-3 transition-colors ${c==="shipping"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(Lu,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Shipping"}),s.jsx("p",{className:"text-sm text-gray-600",children:"$5.99 - Delivered to your door"})]}),c==="shipping"&&s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#C4A672] flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-8",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-6",children:"Rental Options"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"Select Rental Period"}),s.jsxs(rn,{value:r,onValueChange:x=>i(x),children:[s.jsx(on,{children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsxs(De,{value:"weekly",children:["Weekly - $",n.rentalOptions.weekly,"/week"]}),s.jsxs(De,{value:"monthly",children:["Monthly - $",n.rentalOptions.monthly,"/month"]}),s.jsxs(De,{value:"yearly",children:["Yearly - $",n.rentalOptions.yearly,"/year"]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Rental (",r,")"]}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",f().toFixed(2)]})]}),c==="shipping"&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping"}),s.jsx("span",{className:"text-[#2C3E50]",children:"$5.99"})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-200 flex items-center justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total"}),s.jsxs("span",{className:"text-[#C4A672] text-2xl",children:["$",m()]})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Gs,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-900",children:[s.jsx("p",{className:"mb-1",children:"Book must be returned by the end of the rental period"}),s.jsx("p",{className:"text-blue-700",children:"Late fees: $2/day"})]})]})}),s.jsx(J,{onClick:()=>t(r),className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white mb-3",children:"Continue to Checkout"}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By continuing, you agree to our rental terms and conditions"})]})})]})})]})}function WB({book:n,rentalPeriod:e,onBack:t,onConfirm:r}){const[i,c]=_.useState(!1),[u,f]=_.useState("card"),[m,x]=_.useState(!1),w=n.rentalOptions[e],y=5.99,j=w+y,S=()=>{switch(e){case"weekly":return"7 days";case"monthly":return"30 days";case"yearly":return"365 days"}},C=()=>{const M=e==="weekly"?7:e==="monthly"?30:365,R=new Date;return R.setDate(R.getDate()+M),R.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},A=()=>{if(!i){alert("Please agree to the rental terms and conditions");return}x(!0),setTimeout(()=>{x(!1),r()},2e3)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(J,{variant:"ghost",onClick:t,className:"mb-4",children:[s.jsx(Wr,{className:"w-5 h-5 mr-2"}),"Back"]}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Confirm Your Rental"})]})}),s.jsx("div",{className:"max-w-4xl mx-auto p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Rental Summary"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-24 h-32 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:n.title}),s.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["by ",n.author]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ISBN: ",n.isbn]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Condition: ",n.condition]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Rental Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gs,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Rental Period"}),s.jsxs("p",{className:"text-gray-600 text-sm capitalize",children:[e," (",S(),")"]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(cr,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Return By"}),s.jsx("p",{className:"text-gray-600 text-sm",children:C()})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($r,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Delivery Method"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Shipping to your address"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(In,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Seller Location"}),s.jsx("p",{className:"text-gray-600 text-sm",children:n.seller.location})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Payment Method"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>f("card"),className:`w-full border-2 rounded-lg p-4 flex items-center gap-3 transition-colors ${u==="card"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsx(Pu,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Credit/Debit Card"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Visa ending in 1234"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"cvv",children:"CVV"}),s.jsx(Ie,{id:"cvv",placeholder:"123",maxLength:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ke,{htmlFor:"zip",children:"ZIP Code"}),s.jsx(Ie,{id:"zip",placeholder:"94102"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Rental Agreement"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto text-sm text-gray-600",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-2",children:"Terms and Conditions:"}),s.jsxs("ul",{className:"space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"The book must be returned by the due date to avoid late fees"}),s.jsx("li",{children:"Late fees are $2 per day after the due date"}),s.jsx("li",{children:"The book must be returned in the same condition as received"}),s.jsx("li",{children:"Any damage to the book will result in additional charges"}),s.jsx("li",{children:"Lost books must be paid for at full replacement value"}),s.jsx("li",{children:"Rental can be extended before the due date for an additional fee"}),s.jsx("li",{children:"Refunds are not available once the book has been shipped"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qu,{id:"terms",checked:i,onCheckedChange:M=>c(M===!0)}),s.jsx("label",{htmlFor:"terms",className:"text-sm text-gray-600 cursor-pointer",children:"I have read and agree to the rental terms and conditions, including the return policy and late fee structure"})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-8",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-6",children:"Order Summary"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Rental Fee (",e,")"]}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",w.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",y.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tax"}),s.jsx("span",{className:"text-[#2C3E50]",children:"$0.00"})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 flex items-center justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total"}),s.jsxs("span",{className:"text-[#C4A672] text-2xl",children:["$",j.toFixed(2)]})]})]}),s.jsx(J,{onClick:A,disabled:!i||m,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white mb-3",children:m?"Processing...":"Confirm & Pay"}),s.jsx(J,{variant:"outline",onClick:t,className:"w-full",children:"Cancel"}),s.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(cr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-green-900",children:[s.jsx("p",{className:"mb-1",children:"Secure Payment"}),s.jsx("p",{className:"text-green-700 text-xs",children:"Your payment information is encrypted and secure"})]})]})})]})})]})})]})}function qB({book:n,onClose:e}){const t="RNT-"+Math.random().toString(36).substr(2,9).toUpperCase();return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-2xl w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4",children:s.jsx(cr,{className:"w-12 h-12 text-green-600"})}),s.jsx("h1",{className:"text-[#2C3E50] text-3xl mb-2",children:"Rental Confirmed!"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Your book rental has been successfully processed"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-6",children:[s.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Rental ID"}),s.jsx("span",{className:"text-[#2C3E50]",children:t})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Confirmation Email"}),s.jsx("span",{className:"text-[#2C3E50]",children:"Sent to your inbox"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-20 h-28 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:n.title}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["by ",n.author]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["ISBN: ",n.isbn]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-blue-900 mb-3 flex items-center gap-2",children:[s.jsx(_c,{className:"w-5 h-5"}),"What Happens Next?"]}),s.jsxs("ol",{className:"space-y-2 text-sm text-blue-800",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"1"}),s.jsx("span",{children:"You'll receive a confirmation email with all rental details"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"2"}),s.jsx("span",{children:"The book will be shipped to your address within 2-3 business days"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"3"}),s.jsx("span",{children:"You'll receive tracking information once shipped"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"4"}),s.jsx("span",{children:"Enjoy your book and return it before the due date"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx(Gs,{className:"w-6 h-6 text-[#C4A672] mb-2"}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Due Date"}),s.jsx("p",{className:"text-[#2C3E50]",children:new Date(Date.now()+720*60*60*1e3).toLocaleDateString()})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx($r,{className:"w-6 h-6 text-[#C4A672] mb-2"}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Shipping Status"}),s.jsx("p",{className:"text-[#2C3E50]",children:"Processing"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-2",children:"Return Instructions"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"A prepaid return label will be included with your shipment. Simply place the book back in the original packaging and drop it off at any USPS location before the due date."}),s.jsx("p",{className:"text-sm text-yellow-700",children:" Late returns are subject to a $2/day late fee"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(J,{onClick:e,className:"flex-1 h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ru,{className:"w-5 h-5 mr-2"}),"Back to Home"]}),s.jsx(J,{variant:"outline",className:"flex-1 h-12",onClick:()=>alert("Navigating to rental history..."),children:"View My Rentals"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-gray-600 text-sm",children:["Need help?"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Contact Support"})," ","or"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"View FAQs"})]})})]})})}function GB({onClose:n}){const[e,t]=_.useState("browse"),[r,i]=_.useState(null),[c,u]=_.useState("monthly"),f=w=>{i(w),t("details")},m=w=>{u(w),t("confirm")},x=()=>{t("success")};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e==="browse"&&s.jsx($B,{onSelectBook:f,onClose:n}),e==="details"&&r&&s.jsx(HB,{book:r,onBack:()=>t("browse"),onRent:m}),e==="confirm"&&r&&s.jsx(WB,{book:r,rentalPeriod:c,onBack:()=>t("details"),onConfirm:x}),e==="success"&&r&&s.jsx(qB,{book:r,onClose:n})]})}function ZN({onConfirm:n,onCancel:e}){const[t,r]=_.useState(!1),i=()=>{r(!0),setTimeout(()=>{xe.success("Logged out successfully",{icon:s.jsx(cr,{className:"w-4 h-4"}),duration:2e3}),n()},500)};return s.jsx($a,{open:!0,onOpenChange:e,children:s.jsxs(Qi,{className:"max-w-md shadow-hover",children:[s.jsxs(xl,{children:[s.jsxs(vl,{className:"text-2xl text-gray-900 flex items-center gap-2",children:[s.jsx(rh,{className:"w-6 h-6"}),"Confirm Logout"]}),s.jsx(ui,{children:"Are you sure you want to log out?"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsx("p",{className:"text-gray-600",children:"You will need to sign in again to access your account and continue using Book Bloom."}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(J,{variant:"outline",onClick:e,className:"flex-1 hover:bg-gray-50 transition-smooth",disabled:t,children:[s.jsx(Ot,{className:"w-4 h-4 mr-2"}),"No, Stay Logged In"]}),s.jsxs(J,{onClick:i,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white transition-smooth btn-scale",disabled:t,children:[s.jsx(rh,{className:"w-4 h-4 mr-2"}),t?"Logging out...":"Yes, Log Out"]})]})]})]})})}function KB({onNavigateToDetail:n,onNavigateToCreate:e,isLoggedIn:t}){const[r,i]=_.useState([]),[c,u]=_.useState(""),[f,m]=_.useState("grid"),[x,w]=_.useState("all"),[y,j]=_.useState("all"),[S,C]=_.useState("members"),[A,M]=_.useState(!1),[R,z]=_.useState(!0),W=Jt.currentUser;_.useEffect(()=>{const P=al(_t(Oe,"communities"),async V=>{const B=await Promise.all(V.docs.map(async U=>{const q={id:U.id,...U.data()},H=Gt(_t(Oe,"communities",U.id,"posts"),fr("timestamp","desc"),id(2)),se=await Cn(H);return q.recentPosts=se.docs.map(be=>({id:be.id,...be.data()})),q.postsCount=se.size,q}));i(B),z(!1)});return()=>P()},[]);const G=async(P,V,B)=>{if(B.stopPropagation(),!t||!W){xe.error("Please login to join communities");return}const U=jt(Oe,"communities",P);try{V==="private"?(await Pn(U,{pending:Eu({userId:W.uid,name:W.displayName||"User",timestamp:new Date})}),xe.success("Join request sent! Waiting for admin approval.")):(await Pn(U,{members:Eu({userId:W.uid,name:W.displayName||"User",timestamp:new Date}),memberCount:Yo(1)}),xe.success("Successfully joined the community!"))}catch(q){xe.error("Failed to join"),console.error(q)}},K=async(P,V)=>{if(V.stopPropagation(),!W)return;const B=jt(Oe,"communities",P);try{await Pn(B,{members:qd({userId:W.uid}),memberCount:Yo(-1)}),xe.info("You left the community")}catch(U){xe.error("Failed to leave"),console.error(U)}},ee=r.filter(P=>{const V=P.name.toLowerCase().includes(c.toLowerCase())||P.description.toLowerCase().includes(c.toLowerCase()),B=x==="all"||P.topic===x,U=y==="all"||P.privacy===y;return V&&B&&U}).sort((P,V)=>S==="members"?V.memberCount-P.memberCount:S==="posts"?V.postsCount-P.postsCount:S==="name"?P.name.localeCompare(V.name):0),D=["Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Thriller","Horror","Biography","History","Science","Technology","Business","Self-Help","Art","Poetry","Drama","Education","Religion","Philosophy"];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#2C3E50] to-[#34495E] text-white py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl mb-2",children:"Book Communities"}),s.jsx("p",{className:"text-white/90",children:"Connect with readers who share your interests"})]}),t&&s.jsxs(J,{onClick:e,size:"lg",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(cl,{className:"w-5 h-5 mr-2"}),"Create Community"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search communities by name or description...",value:c,onChange:P=>u(P.target.value),className:"pl-12 pr-4 h-14 text-lg bg-white text-gray-900"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>M(!A),children:[s.jsx(Gv,{className:"w-4 h-4 mr-2"}),"Filters"]}),s.jsxs(rn,{value:S,onValueChange:C,children:[s.jsx(on,{className:"w-48",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"members",children:"Most Members"}),s.jsx(De,{value:"posts",children:"Most Active"}),s.jsx(De,{value:"name",children:"Name A-Z"})]})]}),s.jsxs("div",{className:"text-gray-600",children:[ee.length," communities"]})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-1",children:[s.jsx(J,{variant:f==="grid"?"default":"ghost",size:"sm",onClick:()=>m("grid"),className:f==="grid"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:s.jsx(Rk,{className:"w-4 h-4"})}),s.jsx(J,{variant:f==="list"?"default":"ghost",size:"sm",onClick:()=>m("list"),className:f==="list"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:s.jsx(Hk,{className:"w-4 h-4"})})]})]}),A&&s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Topic"}),s.jsxs(rn,{value:x,onValueChange:w,children:[s.jsx(on,{children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All Topics"}),D.map(P=>s.jsx(De,{value:P,children:P},P))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Privacy"}),s.jsxs(rn,{value:y,onValueChange:j,children:[s.jsx(on,{children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All"}),s.jsx(De,{value:"public",children:"Public Only"}),s.jsx(De,{value:"private",children:"Private Only"})]})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(J,{variant:"outline",onClick:()=>{w("all"),j("all"),u("")},className:"w-full",children:"Clear Filters"})})]})}),f==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(P=>s.jsxs("div",{onClick:()=>n(P.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",children:[s.jsxs("div",{className:"relative h-40 bg-gradient-to-br from-[#C4A672] to-[#8B7355] overflow-hidden",children:[s.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-300"}),s.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:s.jsx(Xe,{variant:"secondary",className:"bg-white/90 text-gray-700 border-0",children:P.privacy==="public"?s.jsxs(s.Fragment,{children:[s.jsx(ym,{className:"w-3 h-3 mr-1"})," Public"]}):s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-3 h-3 mr-1"})," Private"]})})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2 group-hover:text-[#C4A672] transition-colors",children:P.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:P.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{children:P.memberCount.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"w-4 h-4"}),s.jsx("span",{children:P.postsCount})]}),s.jsx(Xe,{variant:"outline",className:"text-xs",children:P.topic})]}),P.recentPosts.length>0&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Recent Activity:"}),P.recentPosts.slice(0,2).map(V=>s.jsxs("div",{className:"text-sm text-gray-700 mb-1 truncate",children:[s.jsxs("span",{className:"text-[#C4A672]",children:[V.authorName,":"]})," ",V.content]},V.id))]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Admin: ",P.admin,P.location&&`  ${P.location}`]}),P.isPending?s.jsx(J,{disabled:!0,className:"w-full bg-gray-300 text-gray-600 cursor-not-allowed",size:"sm",children:"Pending Approval"}):P.isMember?s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(J,{onClick:V=>{V.stopPropagation(),n(P.id)},className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",size:"sm",children:"View"}),s.jsx(J,{onClick:V=>K(P.id,V),variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",size:"sm",children:"Leave"})]}):s.jsx(J,{onClick:V=>G(P.id,P.privacy,V),className:"w-full bg-[#2C3E50] hover:bg-[#1a252f] text-white",size:"sm",children:P.privacy==="private"?"Request to Join":"Join Community"})]})]},P.id))}):s.jsx("div",{className:"space-y-4",children:ee.map(P=>s.jsx("div",{onClick:()=>n(P.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow cursor-pointer group",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsx("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-1 group-hover:text-[#C4A672] transition-colors",children:P.name}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mb-2",children:[s.jsx(Xe,{variant:"secondary",className:"bg-gray-100",children:P.privacy==="public"?s.jsxs(s.Fragment,{children:[s.jsx(ym,{className:"w-3 h-3 mr-1"})," Public"]}):s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-3 h-3 mr-1"})," Private"]})}),s.jsx(Xe,{variant:"outline",children:P.topic}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),P.memberCount.toLocaleString()," members"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"w-4 h-4"}),P.postsCount," posts"]})]})]}),s.jsx("div",{className:"ml-4",children:P.isPending?s.jsx(J,{disabled:!0,className:"bg-gray-300 text-gray-600 cursor-not-allowed",size:"sm",children:"Pending"}):P.isMember?s.jsx(J,{onClick:V=>K(P.id,V),variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",size:"sm",children:"Leave"}):s.jsx(J,{onClick:V=>G(P.id,P.privacy,V),className:"bg-[#2C3E50] hover:bg-[#1a252f] text-white",size:"sm",children:"Join"})})]}),s.jsx("p",{className:"text-gray-600 mb-3",children:P.description}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Admin: ",P.admin,P.location&&`  ${P.location}`]})]})]})},P.id))}),ee.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx(gn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No communities found"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your filters or search query"}),s.jsx(J,{onClick:()=>{u(""),w("all"),j("all")},children:"Clear All Filters"})]})]})]})}function ZB({onBack:n,onSuccess:e,userId:t,userName:r}){const[i,c]=_.useState({name:"",description:"",privacy:"public",topic:"",location:"",image:null}),[u,f]=_.useState({}),[m,x]=_.useState(!1),[w,y]=_.useState([]),j=["Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Thriller","Horror","Biography","History","Science","Technology","Business","Self-Help","Art","Poetry","Drama","Education","Religion","Philosophy"],S=()=>{const R={};return i.name?i.name.length<3?R.name="Name must be at least 3 characters":i.name.length>50&&(R.name="Name must be less than 50 characters"):R.name="Community name is required",i.description?i.description.length<10?R.description="Description must be at least 10 characters":i.description.length>500&&(R.description="Description must be less than 500 characters"):R.description="Description is required",w.length===0&&(R.topics="Please select at least one topic"),f(R),Object.keys(R).length===0},C=R=>{const z=R.target.files?.[0];if(z){if(z.size>5*1024*1024){xe.error("Image size must be less than 5MB");return}const W=new FileReader;W.onloadend=()=>{c(G=>({...G,image:W.result}))},W.readAsDataURL(z)}},A=R=>{y(z=>z.includes(R)?z.filter(W=>W!==R):[...z,R]),f(z=>({...z,topics:""}))},M=async R=>{if(R.preventDefault(),!S()){xe.error("Please fix the errors before submitting");return}x(!0);try{const z=await Qa(_t(Oe,"communities"),{name:i.name,description:i.description,privacy:i.privacy,topics:w,location:i.location,image:i.image,adminId:t,adminName:r,memberCount:1,postsCount:0,createdAt:pc()});await Pn(jt(Oe,"communities",z.id),{members:Eu(t)}),xe.success("Community created successfully! You are now the admin."),e(z.id)}catch(z){xe.error("Failed to create community"),console.error(z)}finally{x(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#2C3E50] to-[#34495E] text-white py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[s.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[s.jsx(Wr,{className:"w-5 h-5"}),"Back to Communities"]}),s.jsx("h1",{className:"text-4xl mb-2",children:"Create a Community"}),s.jsx("p",{className:"text-white/90",children:"Build a space for readers to connect and discuss"})]})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:s.jsxs("form",{onSubmit:M,className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(ke,{htmlFor:"name",className:"text-[#2C3E50] mb-2",children:"Community Name *"}),s.jsx(Ie,{id:"name",type:"text",value:i.name,onChange:R=>{c(z=>({...z,name:R.target.value})),f(z=>({...z,name:""}))},placeholder:"e.g., Science Fiction Lovers",className:u.name?"border-red-500":""}),u.name&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.name.length,"/50 characters"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(ke,{htmlFor:"description",className:"text-[#2C3E50] mb-2",children:"Description *"}),s.jsx(xc,{id:"description",value:i.description,onChange:R=>{c(z=>({...z,description:R.target.value})),f(z=>({...z,description:""}))},placeholder:"Describe what your community is about, what members can expect, and any rules...",rows:4,className:u.description?"border-red-500":""}),u.description&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.description}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.description.length,"/500 characters"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(ke,{className:"text-[#2C3E50] mb-3",children:"Privacy Settings *"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("button",{type:"button",onClick:()=>c(R=>({...R,privacy:"public"})),className:`p-4 rounded-lg border-2 transition-all ${i.privacy==="public"?"border-[#C4A672] bg-[#C4A672]/10":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ym,{className:"w-6 h-6 text-[#C4A672] flex-shrink-0 mt-1"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Public"}),i.privacy==="public"&&s.jsx(ll,{className:"w-4 h-4 text-[#C4A672]"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Anyone can join immediately. Community is visible to everyone."})]})]})}),s.jsx("button",{type:"button",onClick:()=>c(R=>({...R,privacy:"private"})),className:`p-4 rounded-lg border-2 transition-all ${i.privacy==="private"?"border-[#C4A672] bg-[#C4A672]/10":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(fs,{className:"w-6 h-6 text-[#C4A672] flex-shrink-0 mt-1"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Private"}),i.privacy==="private"&&s.jsx(ll,{className:"w-4 h-4 text-[#C4A672]"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Admin approval required to join. More control over membership."})]})]})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(ke,{className:"text-[#2C3E50] mb-3",children:"Topic Tags * (Select all that apply)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(R=>s.jsxs("button",{type:"button",onClick:()=>A(R),className:`px-4 py-2 rounded-full text-sm transition-all ${w.includes(R)?"bg-[#C4A672] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[R,w.includes(R)&&s.jsx(Ot,{className:"w-3 h-3 ml-2 inline"})]},R))}),u.topics&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:u.topics}),w.length>0&&s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",w.join(", ")]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(ke,{htmlFor:"location",className:"text-[#2C3E50] mb-2",children:"Location (Optional)"}),s.jsx(Ie,{id:"location",type:"text",value:i.location,onChange:R=>c(z=>({...z,location:R.target.value})),placeholder:"e.g., San Francisco, CA or 'Online'"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Specify a location if your community has local meetups"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(ke,{className:"text-[#2C3E50] mb-2",children:"Community Image (Optional)"}),i.image?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:i.image,alt:"Community preview",className:"w-full h-48 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>c(R=>({...R,image:null})),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:s.jsx(Ot,{className:"w-5 h-5"})})]}):s.jsxs("label",{className:"block w-full h-48 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#C4A672] transition-colors cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden"}),s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[s.jsx(o1,{className:"w-12 h-12 mb-3"}),s.jsx("p",{className:"text-sm",children:"Click to upload an image"}),s.jsx("p",{className:"text-xs mt-1",children:"Max size: 5MB"})]})]})]}),s.jsxs("div",{className:"bg-[#C4A672]/10 border border-[#C4A672]/30 rounded-lg p-4 mb-6",children:[s.jsxs("p",{className:"text-sm text-[#2C3E50]",children:[s.jsx("strong",{children:"You will be assigned as the admin"})," of this community. As admin, you can:"]}),s.jsxs("ul",{className:"text-sm text-gray-700 mt-2 ml-4 list-disc space-y-1",children:[s.jsx("li",{children:"Approve or reject join requests (for private communities)"}),s.jsx("li",{children:"Manage members (remove members if needed)"}),s.jsx("li",{children:"Moderate posts and comments"}),s.jsx("li",{children:"Edit community details"}),s.jsx("li",{children:"Delete the community"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(J,{type:"button",variant:"outline",onClick:n,className:"flex-1",disabled:m,children:"Cancel"}),s.jsx(J,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:m,children:m?"Creating...":"Create Community"})]})]})})]})}var eg="Tabs",[YB]=Ps(eg,[ad]),cT=ad(),[QB,P0]=YB(eg),uT=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:c,orientation:u="horizontal",dir:f,activationMode:m="automatic",...x}=n,w=bc(f),[y,j]=Ji({prop:r,onChange:i,defaultProp:c??"",caller:eg});return s.jsx(QB,{scope:t,baseId:Yi(),value:y,onValueChange:j,orientation:u,dir:w,activationMode:m,children:s.jsx(Ye.div,{dir:w,"data-orientation":u,...x,ref:e})})});uT.displayName=eg;var dT="TabsList",hT=_.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,c=P0(dT,t),u=cT(t);return s.jsx(m0,{asChild:!0,...u,orientation:c.orientation,dir:c.dir,loop:r,children:s.jsx(Ye.div,{role:"tablist","aria-orientation":c.orientation,...i,ref:e})})});hT.displayName=dT;var fT="TabsTrigger",mT=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...c}=n,u=P0(fT,t),f=cT(t),m=xT(u.baseId,r),x=vT(u.baseId,r),w=r===u.value;return s.jsx(p0,{asChild:!0,...f,focusable:!i,active:w,children:s.jsx(Ye.button,{type:"button",role:"tab","aria-selected":w,"aria-controls":x,"data-state":w?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...c,ref:e,onMouseDown:Le(n.onMouseDown,y=>{!i&&y.button===0&&y.ctrlKey===!1?u.onValueChange(r):y.preventDefault()}),onKeyDown:Le(n.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&u.onValueChange(r)}),onFocus:Le(n.onFocus,()=>{const y=u.activationMode!=="manual";!w&&!i&&y&&u.onValueChange(r)})})})});mT.displayName=fT;var pT="TabsContent",gT=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:c,...u}=n,f=P0(pT,t),m=xT(f.baseId,r),x=vT(f.baseId,r),w=r===f.value,y=_.useRef(w);return _.useEffect(()=>{const j=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(j)},[]),s.jsx(ks,{present:i||w,children:({present:j})=>s.jsx(Ye.div,{"data-state":w?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":m,hidden:!j,id:x,tabIndex:0,...u,ref:e,style:{...n.style,animationDuration:y.current?"0s":void 0},children:j&&c})})});gT.displayName=pT;function xT(n,e){return`${n}-trigger-${e}`}function vT(n,e){return`${n}-content-${e}`}var XB=uT,JB=hT,ez=mT,tz=gT;function yT({className:n,...e}){return s.jsx(XB,{"data-slot":"tabs",className:ft("flex flex-col gap-2",n),...e})}function wT({className:n,...e}){return s.jsx(JB,{"data-slot":"tabs-list",className:ft("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",n),...e})}function Xm({className:n,...e}){return s.jsx(ez,{"data-slot":"tabs-trigger",className:ft("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function Jm({className:n,...e}){return s.jsx(tz,{"data-slot":"tabs-content",className:ft("flex-1 outline-none",n),...e})}function nz({onClose:n,onSubmit:e}){const[t,r]=_.useState(""),[i,c]=_.useState([]),[u,f]=_.useState(!1),m=5e3,x=4,w=S=>{const C=Array.from(S.target.files||[]);if(i.length+C.length>x){xe.error(`Maximum ${x} images allowed`);return}C.forEach(A=>{if(A.size>5*1024*1024){xe.error("Image size must be less than 5MB");return}const M=new FileReader;M.onloadend=()=>{c(R=>[...R,M.result])},M.readAsDataURL(A)})},y=S=>{c(C=>C.filter((A,M)=>M!==S))},j=()=>{if(!t.trim()){xe.error("Post content cannot be empty");return}if(t.length>m){xe.error(`Post is too long (max ${m} characters)`);return}f(!0),setTimeout(()=>{e(t,i),f(!1)},500)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50]",children:"Create Post"}),s.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(xc,{value:t,onChange:S=>r(S.target.value),placeholder:"Share your thoughts, questions, or recommendations...",rows:8,className:"resize-none",autoFocus:!0}),s.jsx("div",{className:"flex items-center justify-between mt-2",children:s.jsxs("span",{className:`text-sm ${t.length>m?"text-red-500":"text-gray-500"}`,children:[t.length,"/",m]})})]}),i.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:i.map((S,C)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:S,alt:`Upload ${C+1}`,className:"w-full h-48 object-cover rounded-lg"}),s.jsx("button",{onClick:()=>y(C),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ot,{className:"w-5 h-5"})})]},C))}),i.length<x&&s.jsxs("label",{className:"block w-full border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-[#C4A672] transition-colors cursor-pointer mb-4",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:w,className:"hidden"}),s.jsx(sh,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"Add images to your post"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[i.length,"/",x," images  Max 5MB each"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[s.jsx(J,{variant:"outline",onClick:n,disabled:u,children:"Cancel"}),s.jsx(J,{onClick:j,disabled:!t.trim()||t.length>m||u,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:u?"Posting...":"Post"})]})]})})}function sz({post:n,onClose:e,isAdmin:t,userId:r}){const[i,c]=_.useState([]),[u,f]=_.useState(""),[m,x]=_.useState(null),[w,y]=_.useState("");_.useEffect(()=>{const R=Gt(_t(Oe,"posts",n.id,"comments"),fr("createdAt","asc")),z=al(R,W=>{const G=W.docs.map(K=>({id:K.id,...K.data()}));c(G)});return()=>z()},[n.id]);const j=async()=>{if(u.trim())try{await Qa(_t(Oe,"posts",n.id,"comments"),{authorId:r,authorName:"Current User",authorAvatar:"CU",content:u,createdAt:pc(),likes:0,userLiked:!1,replies:[]}),f(""),xe.success("Comment added")}catch{xe.error("Failed to add comment")}},S=async R=>{if(w.trim())try{await Qa(_t(Oe,"posts",n.id,"comments",R,"replies"),{authorId:r,authorName:"Current User",authorAvatar:"CU",content:w,createdAt:pc(),likes:0,userLiked:!1,replies:[]}),y(""),x(null),xe.success("Reply added")}catch{xe.error("Failed to add reply")}},C=async(R,z=!1,W)=>{try{const G=z&&W?jt(Oe,"posts",n.id,"comments",W,"replies",R):jt(Oe,"posts",n.id,"comments",R);await Pn(G,{likes:Yo(1),userLiked:!0})}catch{xe.error("Failed to like")}},A=async R=>{if(confirm("Are you sure?"))try{await qu(jt(Oe,"posts",n.id,"comments",R)),xe.success("Comment deleted")}catch{xe.error("Failed to delete")}},M=(R,z=!1,W)=>s.jsx("div",{className:`${z?"ml-12":""}`,children:s.jsxs("div",{className:"flex gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white flex-shrink-0",children:R.authorAvatar}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[#2C3E50]",children:R.authorName}),s.jsx("span",{className:"text-xs text-gray-500",children:R.createdAt})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:R.content})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[s.jsxs("button",{onClick:()=>C(R.id,z,W),className:`flex items-center gap-1 ${R.userLiked?"text-[#C4A672]":"text-gray-500 hover:text-[#C4A672]"} transition-colors`,children:[s.jsx(OP,{className:"w-4 h-4"}),R.likes>0&&R.likes]}),!z&&s.jsx("button",{onClick:()=>x(R.id),className:"text-gray-500 hover:text-[#C4A672] transition-colors",children:"Reply"}),(t||R.authorId===r)&&s.jsx("button",{onClick:()=>A(R.id),className:"text-red-500 hover:text-red-700 transition-colors",children:"Delete"})]}),m===R.id&&s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx(xc,{value:w,onChange:G=>y(G.target.value),placeholder:"Write a reply...",rows:2,className:"flex-1"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(J,{size:"sm",onClick:()=>S(R.id),disabled:!w.trim(),className:"bg-[#C4A672] hover:bg-[#8B7355]",children:s.jsx(wm,{className:"w-4 h-4"})}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>{x(null),y("")},children:s.jsx(Ot,{className:"w-4 h-4"})})]})]}),R.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-4",children:R.replies.map(G=>M(G,!0,R.id))})]})]})},R.id);return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50]",children:"Post & Comments"}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:n.authorAvatar}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#2C3E50]",children:n.authorName}),s.jsx("div",{className:"text-sm text-gray-500",children:n.createdAt})]})]}),s.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:n.content}),n.images.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:n.images.map((R,z)=>s.jsx("img",{src:R,alt:"Post",className:"w-full h-48 object-cover rounded-lg"},z))}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[" ",n.reactions.like]}),s.jsxs("span",{className:"flex items-center gap-1",children:[" ",n.reactions.love]}),s.jsxs("span",{className:"flex items-center gap-1",children:[" ",n.reactions.insightful]}),s.jsxs("span",{className:"flex items-center gap-1 ml-auto",children:[s.jsx(Zx,{className:"w-4 h-4"}),i.length+i.reduce((R,z)=>R+z.replies.length,0)," comments"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-[#2C3E50] text-lg",children:"Comments"}),i.map(R=>M(R)),i.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Zx,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No comments yet. Be the first to comment!"})]})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white flex-shrink-0",children:"CU"}),s.jsxs("div",{className:"flex-1 flex gap-2",children:[s.jsx(xc,{value:u,onChange:R=>f(R.target.value),placeholder:"Write a comment...",rows:2,className:"flex-1"}),s.jsx(J,{onClick:j,disabled:!u.trim(),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:s.jsx(wm,{className:"w-4 h-4"})})]})]})})]})})}function rz({communityId:n,onBack:e,onNavigateToChat:t,isAdmin:r,isMember:i,userId:c}){const[u,f]=_.useState("posts"),[m,x]=_.useState(!1),[w,y]=_.useState(null),[j,S]=_.useState(i),[C,A]=_.useState(null),[M,R]=_.useState([]),[z,W]=_.useState([]),[G,K]=_.useState(!0);_.useEffect(()=>{(async()=>{K(!0);try{const be=await Rp(jt(Oe,"communities",n));be.exists()&&A({id:be.id,...be.data()});const ie=al(Gt(_t(Oe,"communities",n,"posts"),fr("createdAt","desc")),ce=>{R(ce.docs.map(ue=>({id:ue.id,...ue.data()})))}),we=al(_t(Oe,"communities",n,"members"),ce=>{const ue=ce.docs.map(X=>({id:X.id,...X.data()}));W(ue)}),Z=al(_t(Oe,"communities",n,"pending"),ce=>{const ue=ce.docs.map(X=>({id:X.id,...X.data(),status:"pending"}));W(X=>[...X.filter(me=>!me.status),...ue])});return()=>{ie(),we(),Z()}}catch(be){xe.error("Failed to load community"),console.error(be)}finally{K(!1)}})()},[n]);const ee=async()=>{try{const se=jt(Oe,"communities",n);C.privacy==="private"?(await Pn(se,{pending:Eu(Jt.currentUser?.uid)}),xe.success("Join request sent! Waiting for admin approval.")):(await Pn(se,{members:Eu(Jt.currentUser?.uid),memberCount:Yo(1)}),S(!0),xe.success("Successfully joined the community!"))}catch{xe.error("Failed to join")}},D=async()=>{try{const se=jt(Oe,"communities",n);await Pn(se,{members:qd(Jt.currentUser?.uid),memberCount:Yo(-1)}),S(!1),xe.info("You left the community")}catch{xe.error("Failed to leave")}},P=async(se,be)=>{try{const ie=jt(Oe,"communities",n,"posts",se);await Pn(ie,{[`reactions.${be}`]:Yo(1),userReaction:be}),R(we=>we.map(Z=>{if(Z.id!==se)return Z;const ce=Z.userReaction,ue={...Z.reactions};return ce&&ue[ce]--,ce===be?{...Z,reactions:ue,userReaction:void 0}:(ue[be]++,{...Z,reactions:ue,userReaction:be})}))}catch{xe.error("Failed to react")}},V=async se=>{if(confirm("Are you sure you want to delete this post?"))try{await qu(jt(Oe,"communities",n,"posts",se)),R(be=>be.filter(ie=>ie.id!==se)),xe.success("Post deleted")}catch{xe.error("Failed to delete")}},B=async se=>{try{const be=jt(Oe,"communities",n);await Pn(be,{pending:qd(se),members:Eu(se),memberCount:Yo(1)}),W(ie=>ie.map(we=>we.id===se?{...we,status:void 0}:we)),xe.success("Member approved")}catch{xe.error("Failed to approve")}},U=async se=>{try{const be=jt(Oe,"communities",n);await Pn(be,{pending:qd(se)}),W(ie=>ie.filter(we=>we.id!==se)),xe.info("Join request rejected")}catch{xe.error("Failed to reject")}},q=async se=>{if(confirm("Are you sure you want to remove this member?"))try{const be=jt(Oe,"communities",n);await Pn(be,{members:qd(se),memberCount:Yo(-1)}),W(ie=>ie.filter(we=>we.id!==se)),xe.success("Member removed")}catch{xe.error("Failed to remove")}},H=async(se,be)=>{try{const ie=await Qa(_t(Oe,"communities",n,"posts"),{authorId:c,authorName:"Current User",authorAvatar:"CU",content:se,images:be,createdAt:new Date,reactions:{like:0,love:0,insightful:0},commentCount:0});R(we=>[{id:ie.id,...newPost},...we]),x(!1),xe.success("Post published!")}catch{xe.error("Failed to post")}};return G?s.jsx("div",{children:"Loading..."}):C?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-0",children:[s.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-[#2C3E50] to-[#34495E]",children:[s.jsx("img",{src:C.coverImage,alt:C.name,className:"w-full h-full object-cover opacity-50"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsx("button",{onClick:e,className:"absolute top-4 left-4 flex items-center gap-2 text-white hover:text-white/80 transition-colors",children:s.jsx("div",{className:"w-10 h-10 bg-black/30 rounded-full flex items-center justify-center backdrop-blur-sm",children:s.jsx(Wr,{className:"w-5 h-5"})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-4xl mb-2",children:C.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gn,{className:"w-4 h-4"}),C.memberCount.toLocaleString()," members"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"w-4 h-4"}),C.postsCount," posts"]}),s.jsxs("span",{children:["Admin: ",C.admin]})]})]})})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 -mt-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4 mb-6 flex items-center justify-between",children:[s.jsx("div",{className:"flex gap-3",children:j?s.jsxs(s.Fragment,{children:[s.jsxs(J,{onClick:()=>t(n),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(qs,{className:"w-4 h-4 mr-2"}),"Group Chat"]}),s.jsxs(J,{onClick:D,variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",children:[s.jsx($P,{className:"w-4 h-4 mr-2"}),"Leave"]})]}):s.jsxs(J,{onClick:ee,className:"bg-[#2C3E50] hover:bg-[#1a252f] text-white",children:[s.jsx(l1,{className:"w-4 h-4 mr-2"}),"Join Community"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[C.topic.map(se=>s.jsx(Xe,{variant:"outline",children:se},se)),isAdmin&&s.jsx(J,{variant:"ghost",size:"sm",children:s.jsx(Nh,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"About"}),s.jsx("p",{className:"text-gray-600",children:C.description})]}),s.jsxs(yT,{value:u,onValueChange:f,className:"space-y-6",children:[s.jsxs(wT,{className:"bg-white border border-gray-200 p-1",children:[s.jsx(Xm,{value:"posts",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:"Posts"}),s.jsxs(Xm,{value:"members",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:["Members (",z.length,")"]})]}),s.jsxs(Jm,{value:"posts",className:"space-y-4",children:[j&&s.jsxs(J,{onClick:()=>x(!0),className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"Create Post"]}),M.map(se=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:se.authorAvatar}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#2C3E50]",children:se.authorName}),s.jsx("div",{className:"text-sm text-gray-500",children:se.createdAt})]})]}),(isAdmin||se.authorId===c)&&s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>V(se.id),children:s.jsx(cc,{className:"w-4 h-4 text-red-600"})})]}),s.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:se.content}),se.images.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:se.images.map((be,ie)=>s.jsx("img",{src:be,alt:"Post",className:"w-full h-48 object-cover rounded-lg"},ie))}),s.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>P(se.id,"like"),className:`flex items-center gap-2 text-sm transition-colors ${se.userReaction==="like"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[" ",se.reactions.like]}),s.jsxs("button",{onClick:()=>P(se.id,"love"),className:`flex items-center gap-2 text-sm transition-colors ${se.userReaction==="love"?"text-red-600":"text-gray-600 hover:text-red-600"}`,children:[" ",se.reactions.love]}),s.jsxs("button",{onClick:()=>P(se.id,"insightful"),className:`flex items-center gap-2 text-sm transition-colors ${se.userReaction==="insightful"?"text-yellow-600":"text-gray-600 hover:text-yellow-600"}`,children:[" ",se.reactions.insightful]}),s.jsxs("button",{onClick:()=>y(se),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#C4A672] transition-colors ml-auto",children:[s.jsx(Zx,{className:"w-4 h-4"}),se.commentCount," comments"]})]})]},se.id)),M.length===0&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[s.jsx(qs,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No posts yet"}),s.jsx("p",{className:"text-gray-500",children:"Be the first to start a discussion!"})]})]}),s.jsxs(Jm,{value:"members",className:"space-y-4",children:[isAdmin&&z.some(se=>se.status==="pending")&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Pending Join Requests"}),z.filter(se=>se.status==="pending").map(se=>s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:se.avatar}),s.jsx("span",{className:"text-[#2C3E50]",children:se.name})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{size:"sm",onClick:()=>B(se.id),className:"bg-green-600 hover:bg-green-700 text-white",children:"Approve"}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>U(se.id),className:"text-red-600 border-red-200",children:"Reject"})]})]},se.id))]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 divide-y",children:z.filter(se=>!se.status).map(se=>s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-lg",children:se.avatar}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-[#2C3E50] flex items-center gap-2",children:[se.name,se.role==="admin"&&s.jsx(Xe,{className:"bg-[#C4A672] text-white",children:"Admin"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Joined ",new Date(se.joinedAt).toLocaleDateString()]})]})]}),isAdmin&&se.role!=="admin"&&s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>q(se.id),className:"text-red-600 hover:bg-red-50",children:"Remove"})]},se.id))})]})]})]}),m&&s.jsx(nz,{onClose:()=>x(!1),onSubmit:H}),w&&s.jsx(sz,{post:w,onClose:()=>y(null),isAdmin,userId:c})]}):s.jsx("div",{children:"Community not found"})}function iz({message:n,showAvatar:e=!0}){const t=i=>{const u=new Date().getTime()-i.getTime(),f=Math.floor(u/36e5);if(f<1){const m=Math.floor(u/6e4);return m<1?"Just now":`${m}m ago`}else{if(f<24)return`${f}h ago`;{const m=Math.floor(f/24);return m===1?"Yesterday":m<7?`${m}d ago`:i.toLocaleDateString()}}},r=i=>{if(!i)return null;switch(i){case"sending":return s.jsx("span",{className:"text-gray-400",children:""});case"sent":return s.jsx("span",{className:"text-gray-400",children:""});case"delivered":return s.jsx("span",{className:"text-gray-400",children:""});case"read":return s.jsx("span",{className:"text-blue-500",children:""});default:return null}};return s.jsx("div",{className:`flex ${n.isOwn?"justify-end":"justify-start"} mb-4`,children:s.jsxs("div",{className:`flex gap-2 max-w-[70%] ${n.isOwn?"flex-row-reverse":"flex-row"}`,children:[e&&!n.isOwn&&s.jsx("div",{className:"w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-sm flex-shrink-0",children:n.senderAvatar}),s.jsxs("div",{className:"flex flex-col",children:[!n.isOwn&&e&&s.jsx("span",{className:"text-xs text-gray-500 mb-1 ml-1",children:n.senderName}),s.jsxs("div",{className:`rounded-2xl p-3 ${n.isOwn?"bg-[#2C3E50] text-white rounded-br-none":"bg-white border border-gray-200 text-gray-900 rounded-bl-none"}`,children:[n.content&&s.jsx("p",{className:"whitespace-pre-wrap break-words text-sm",children:n.content}),n.images&&n.images.length>0&&s.jsx("div",{className:`grid gap-2 ${n.images.length===1?"grid-cols-1":(n.images.length===2,"grid-cols-2")} ${n.content?"mt-2":""}`,children:n.images.map((i,c)=>s.jsx("img",{src:i,alt:`Attachment ${c+1}`,className:"rounded-lg max-w-full h-auto cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(i,"_blank")},c))}),n.files&&n.files.length>0&&s.jsx("div",{className:`space-y-2 ${n.content?"mt-2":""}`,children:n.files.map((i,c)=>s.jsxs("a",{href:i.url,download:i.name,className:`flex items-center gap-2 p-2 rounded-lg transition-colors ${n.isOwn?"bg-white/10 hover:bg-white/20":"bg-gray-100 hover:bg-gray-200"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded flex items-center justify-center ${n.isOwn?"bg-white/20":"bg-gray-300"}`,children:s.jsx("span",{className:"text-xs",children:i.type.split("/")[1]?.toUpperCase().slice(0,3)||"FILE"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-center",children:i.name}),s.jsx("div",{className:"text-xs opacity-70",children:i.type})]})}),s.jsx(Iu,{className:"w-4 h-4 flex-shrink-0"})]},c))})]}),s.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-gray-500 ${n.isOwn?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:t(n.timestamp)}),n.isOwn&&n.status&&s.jsx("span",{className:"flex items-center",children:r(n.status)})]})]})]})})}function az({communityId:n,communityName:e,onBack:t,currentUserId:r}){const[i,c]=_.useState([]),[u,f]=_.useState([]),[m,x]=_.useState(""),[w,y]=_.useState([]),[j,S]=_.useState(!1),[C,A]=_.useState([]),M=_.useRef(null),R=_.useRef(null);_.useEffect(()=>{const P=Gt(_t(Oe,"communities",n,"messages"),fr("timestamp","asc")),V=al(P,U=>{const q=U.docs.map(H=>{const se=H.data();return{id:H.id,...se,timestamp:se.timestamp.toDate(),isOwn:se.senderId===r}});c(q)}),B=al(_t(Oe,"communities",n,"members"),U=>{const q=U.docs.map(H=>({id:H.id,...H.data()}));f(q)});return()=>{V(),B()}},[n,r]),_.useEffect(()=>{z()},[i]);const z=()=>{M.current?.scrollIntoView({behavior:"smooth"})},W=u.filter(P=>P.online).length,G=async()=>{if(!(!m.trim()&&w.length===0))try{await Qa(_t(Oe,"communities",n,"messages"),{senderId:r,senderName:"You",senderAvatar:"ME",content:m,images:w.length>0?w:void 0,timestamp:pc()}),x(""),y([]),xe.success("Message sent")}catch{xe.error("Failed to send message")}},K=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),G())},ee=P=>{Array.from(P.target.files||[]).forEach(B=>{if(B.size>5*1024*1024){xe.error("Image size must be less than 5MB");return}const U=new FileReader;U.onloadend=()=>{y(q=>[...q,U.result])},U.readAsDataURL(B)})},D=P=>{y(V=>V.filter((B,U)=>U!==P))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#2C3E50] to-[#34495E] text-white p-4 flex items-center justify-between shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx(Wr,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-lg truncate",children:e}),s.jsxs("div",{className:"text-sm text-white/80",children:[W," online  ",u.length," members"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",onClick:()=>S(!j),children:s.jsx(gn,{className:"w-5 h-5"})}),s.jsx(J,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:s.jsx(e1,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-[#FAF8F3] to-white",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center my-4",children:s.jsx("div",{className:"bg-gray-200 text-gray-600 text-xs px-3 py-1 rounded-full",children:"Today"})}),i.map(P=>s.jsx(iz,{message:P,showAvatar:!0},P.id)),C.length>0&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-sm",children:"JD"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm",children:s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),s.jsx("div",{ref:M})]})}),w.length>0&&s.jsx("div",{className:"border-t border-gray-200 p-4 bg-white",children:s.jsx("div",{className:"max-w-3xl mx-auto flex gap-2 overflow-x-auto",children:w.map((P,V)=>s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("img",{src:P,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg"}),s.jsx("button",{onClick:()=>D(V),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:s.jsx(Ot,{className:"w-4 h-4"})})]},V))})}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-white",children:s.jsxs("div",{className:"max-w-3xl mx-auto flex items-end gap-3",children:[s.jsx("input",{ref:R,type:"file",accept:"image/*",multiple:!0,onChange:ee,className:"hidden"}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>R.current?.click(),className:"flex-shrink-0",children:s.jsx(sh,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ie,{value:m,onChange:P=>x(P.target.value),onKeyPress:K,placeholder:`Message ${e}...`,className:"pr-12 min-h-[44px]"}),s.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(r1,{className:"w-5 h-5"})})]}),s.jsx(J,{onClick:G,disabled:!m.trim()&&w.length===0,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white flex-shrink-0",size:"lg",children:s.jsx(wm,{className:"w-5 h-5"})})]})})]}),j&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:block w-80 border-l border-gray-200 bg-white overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-[#2C3E50] text-lg",children:"Members"}),s.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[W," online  ",u.length," total"]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:u.map(P=>s.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:P.avatar}),P.online&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[#2C3E50] truncate",children:P.name}),s.jsx("div",{className:"text-xs text-gray-500",children:P.role==="admin"?" Admin":P.online?"Online":"Offline"})]})]})},P.id))})]}),s.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-50 flex items-end",children:s.jsxs("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-[#2C3E50] text-lg",children:"Members"}),s.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[W," online  ",u.length," total"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-100",children:u.map(P=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:P.avatar}),P.online&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[#2C3E50] truncate",children:P.name}),s.jsx("div",{className:"text-xs text-gray-500",children:P.role==="admin"?" Admin":P.online?"Online":"Offline"})]})]})},P.id))})]})})]})]})]})}function oz(n){const e=lz(n),t=_.forwardRef((r,i)=>{const{children:c,...u}=r,f=_.Children.toArray(c),m=f.find(uz);if(m){const x=m.props.children,w=f.map(y=>y===m?_.Children.count(x)>1?_.Children.only(null):_.isValidElement(x)?x.props.children:null:y);return s.jsx(e,{...u,ref:i,children:_.isValidElement(x)?_.cloneElement(x,void 0,w):null})}return s.jsx(e,{...u,ref:i,children:c})});return t.displayName=`${n}.Slot`,t}function lz(n){const e=_.forwardRef((t,r)=>{const{children:i,...c}=t;if(_.isValidElement(i)){const u=hz(i),f=dz(c,i.props);return i.type!==_.Fragment&&(f.ref=r?eo(r,u):u),_.cloneElement(i,f)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var cz=Symbol("radix.slottable");function uz(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===cz}function dz(n,e){const t={...e};for(const r in e){const i=n[r],c=e[r];/^on[A-Z]/.test(r)?i&&c?t[r]=(...f)=>{const m=c(...f);return i(...f),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...c}:r==="className"&&(t[r]=[i,c].filter(Boolean).join(" "))}return{...n,...t}}function hz(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Hv=["Enter"," "],fz=["ArrowDown","PageUp","Home"],_T=["ArrowUp","PageDown","End"],mz=[...fz,..._T],pz={ltr:[...Hv,"ArrowRight"],rtl:[...Hv,"ArrowLeft"]},gz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hh="Menu",[wh,xz,vz]=Up(Hh),[Tc,bT]=Ps(Hh,[vz,Kp,ad]),tg=Kp(),NT=ad(),[yz,Ac]=Tc(Hh),[wz,Wh]=Tc(Hh),jT=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:c,modal:u=!0}=n,f=tg(e),[m,x]=_.useState(null),w=_.useRef(!1),y=Un(c),j=bc(i);return _.useEffect(()=>{const S=()=>{w.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>w.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),s.jsx(ZS,{...f,children:s.jsx(yz,{scope:e,open:t,onOpenChange:y,content:m,onContentChange:x,children:s.jsx(wz,{scope:e,onClose:_.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:w,dir:j,modal:u,children:r})})})};jT.displayName=Hh;var _z="MenuAnchor",I0=_.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=tg(t);return s.jsx(YS,{...i,...r,ref:e})});I0.displayName=_z;var R0="MenuPortal",[bz,CT]=Tc(R0,{forceMount:void 0}),ST=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,c=Ac(R0,e);return s.jsx(bz,{scope:e,forceMount:t,children:s.jsx(ks,{present:t||c.open,children:s.jsx(Fp,{asChild:!0,container:i,children:r})})})};ST.displayName=R0;var Hr="MenuContent",[Nz,L0]=Tc(Hr),ET=_.forwardRef((n,e)=>{const t=CT(Hr,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,c=Ac(Hr,n.__scopeMenu),u=Wh(Hr,n.__scopeMenu);return s.jsx(wh.Provider,{scope:n.__scopeMenu,children:s.jsx(ks,{present:r||c.open,children:s.jsx(wh.Slot,{scope:n.__scopeMenu,children:u.modal?s.jsx(jz,{...i,ref:e}):s.jsx(Cz,{...i,ref:e})})})})}),jz=_.forwardRef((n,e)=>{const t=Ac(Hr,n.__scopeMenu),r=_.useRef(null),i=ct(e,r);return _.useEffect(()=>{const c=r.current;if(c)return i0(c)},[]),s.jsx(M0,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Le(n.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Cz=_.forwardRef((n,e)=>{const t=Ac(Hr,n.__scopeMenu);return s.jsx(M0,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Sz=oz("MenuContent.ScrollLock"),M0=_.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:f,onEntryFocus:m,onEscapeKeyDown:x,onPointerDownOutside:w,onFocusOutside:y,onInteractOutside:j,onDismiss:S,disableOutsideScroll:C,...A}=n,M=Ac(Hr,t),R=Wh(Hr,t),z=tg(t),W=NT(t),G=xz(t),[K,ee]=_.useState(null),D=_.useRef(null),P=ct(e,D,M.onContentChange),V=_.useRef(0),B=_.useRef(""),U=_.useRef(0),q=_.useRef(null),H=_.useRef("right"),se=_.useRef(0),be=C?Bp:_.Fragment,ie=C?{as:Sz,allowPinchZoom:!0}:void 0,we=ce=>{const ue=B.current+ce,X=G().filter(ge=>!ge.disabled),me=document.activeElement,je=X.find(ge=>ge.ref.current===me)?.textValue,Ee=X.map(ge=>ge.textValue),Re=Fz(Ee,ue,je),Ae=X.find(ge=>ge.textValue===Re)?.ref.current;(function ge(Be){B.current=Be,window.clearTimeout(V.current),Be!==""&&(V.current=window.setTimeout(()=>ge(""),1e3))})(ue),Ae&&setTimeout(()=>Ae.focus())};_.useEffect(()=>()=>window.clearTimeout(V.current),[]),r0();const Z=_.useCallback(ce=>H.current===q.current?.side&&Bz(ce,q.current?.area),[]);return s.jsx(Nz,{scope:t,searchRef:B,onItemEnter:_.useCallback(ce=>{Z(ce)&&ce.preventDefault()},[Z]),onItemLeave:_.useCallback(ce=>{Z(ce)||(D.current?.focus(),ee(null))},[Z]),onTriggerLeave:_.useCallback(ce=>{Z(ce)&&ce.preventDefault()},[Z]),pointerGraceTimerRef:U,onPointerGraceIntentChange:_.useCallback(ce=>{q.current=ce},[]),children:s.jsx(be,{...ie,children:s.jsx(Op,{asChild:!0,trapped:i,onMountAutoFocus:Le(c,ce=>{ce.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:s.jsx(Dp,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:x,onPointerDownOutside:w,onFocusOutside:y,onInteractOutside:j,onDismiss:S,children:s.jsx(m0,{asChild:!0,...W,dir:R.dir,orientation:"vertical",loop:r,currentTabStopId:K,onCurrentTabStopIdChange:ee,onEntryFocus:Le(m,ce=>{R.isUsingKeyboardRef.current||ce.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(QS,{role:"menu","aria-orientation":"vertical","data-state":$T(M.open),"data-radix-menu-content":"",dir:R.dir,...z,...A,ref:P,style:{outline:"none",...A.style},onKeyDown:Le(A.onKeyDown,ce=>{const X=ce.target.closest("[data-radix-menu-content]")===ce.currentTarget,me=ce.ctrlKey||ce.altKey||ce.metaKey,je=ce.key.length===1;X&&(ce.key==="Tab"&&ce.preventDefault(),!me&&je&&we(ce.key));const Ee=D.current;if(ce.target!==Ee||!mz.includes(ce.key))return;ce.preventDefault();const Ae=G().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);_T.includes(ce.key)&&Ae.reverse(),Dz(Ae)}),onBlur:Le(n.onBlur,ce=>{ce.currentTarget.contains(ce.target)||(window.clearTimeout(V.current),B.current="")}),onPointerMove:Le(n.onPointerMove,_h(ce=>{const ue=ce.target,X=se.current!==ce.clientX;if(ce.currentTarget.contains(ue)&&X){const me=ce.clientX>se.current?"right":"left";H.current=me,se.current=ce.clientX}}))})})})})})})});ET.displayName=Hr;var Ez="MenuGroup",D0=_.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return s.jsx(Ye.div,{role:"group",...r,ref:e})});D0.displayName=Ez;var Tz="MenuLabel",TT=_.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return s.jsx(Ye.div,{...r,ref:e})});TT.displayName=Tz;var ep="MenuItem",YN="menu.itemSelect",ng=_.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,c=_.useRef(null),u=Wh(ep,n.__scopeMenu),f=L0(ep,n.__scopeMenu),m=ct(e,c),x=_.useRef(!1),w=()=>{const y=c.current;if(!t&&y){const j=new CustomEvent(YN,{bubbles:!0,cancelable:!0});y.addEventListener(YN,S=>r?.(S),{once:!0}),S1(y,j),j.defaultPrevented?x.current=!1:u.onClose()}};return s.jsx(AT,{...i,ref:m,disabled:t,onClick:Le(n.onClick,w),onPointerDown:y=>{n.onPointerDown?.(y),x.current=!0},onPointerUp:Le(n.onPointerUp,y=>{x.current||y.currentTarget?.click()}),onKeyDown:Le(n.onKeyDown,y=>{const j=f.searchRef.current!=="";t||j&&y.key===" "||Hv.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});ng.displayName=ep;var AT=_.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...c}=n,u=L0(ep,t),f=NT(t),m=_.useRef(null),x=ct(e,m),[w,y]=_.useState(!1),[j,S]=_.useState("");return _.useEffect(()=>{const C=m.current;C&&S((C.textContent??"").trim())},[c.children]),s.jsx(wh.ItemSlot,{scope:t,disabled:r,textValue:i??j,children:s.jsx(p0,{asChild:!0,...f,focusable:!r,children:s.jsx(Ye.div,{role:"menuitem","data-highlighted":w?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:x,onPointerMove:Le(n.onPointerMove,_h(C=>{r?u.onItemLeave(C):(u.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(n.onPointerLeave,_h(C=>u.onItemLeave(C))),onFocus:Le(n.onFocus,()=>y(!0)),onBlur:Le(n.onBlur,()=>y(!1))})})})}),Az="MenuCheckboxItem",kT=_.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return s.jsx(MT,{scope:n.__scopeMenu,checked:t,children:s.jsx(ng,{role:"menuitemcheckbox","aria-checked":tp(t)?"mixed":t,...i,ref:e,"data-state":F0(t),onSelect:Le(i.onSelect,()=>r?.(tp(t)?!0:!t),{checkForDefaultPrevented:!1})})})});kT.displayName=Az;var PT="MenuRadioGroup",[kz,Pz]=Tc(PT,{value:void 0,onValueChange:()=>{}}),IT=_.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,c=Un(r);return s.jsx(kz,{scope:n.__scopeMenu,value:t,onValueChange:c,children:s.jsx(D0,{...i,ref:e})})});IT.displayName=PT;var RT="MenuRadioItem",LT=_.forwardRef((n,e)=>{const{value:t,...r}=n,i=Pz(RT,n.__scopeMenu),c=t===i.value;return s.jsx(MT,{scope:n.__scopeMenu,checked:c,children:s.jsx(ng,{role:"menuitemradio","aria-checked":c,...r,ref:e,"data-state":F0(c),onSelect:Le(r.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});LT.displayName=RT;var O0="MenuItemIndicator",[MT,Iz]=Tc(O0,{checked:!1}),DT=_.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,c=Iz(O0,t);return s.jsx(ks,{present:r||tp(c.checked)||c.checked===!0,children:s.jsx(Ye.span,{...i,ref:e,"data-state":F0(c.checked)})})});DT.displayName=O0;var Rz="MenuSeparator",OT=_.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return s.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});OT.displayName=Rz;var Lz="MenuArrow",FT=_.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=tg(t);return s.jsx(XS,{...i,...r,ref:e})});FT.displayName=Lz;var Mz="MenuSub",[s$,VT]=Tc(Mz),Zd="MenuSubTrigger",BT=_.forwardRef((n,e)=>{const t=Ac(Zd,n.__scopeMenu),r=Wh(Zd,n.__scopeMenu),i=VT(Zd,n.__scopeMenu),c=L0(Zd,n.__scopeMenu),u=_.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:m}=c,x={__scopeMenu:n.__scopeMenu},w=_.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return _.useEffect(()=>w,[w]),_.useEffect(()=>{const y=f.current;return()=>{window.clearTimeout(y),m(null)}},[f,m]),s.jsx(I0,{asChild:!0,...x,children:s.jsx(AT,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":$T(t.open),...n,ref:eo(e,i.onTriggerChange),onClick:y=>{n.onClick?.(y),!(n.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Le(n.onPointerMove,_h(y=>{c.onItemEnter(y),!y.defaultPrevented&&!n.disabled&&!t.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{t.onOpenChange(!0),w()},100))})),onPointerLeave:Le(n.onPointerLeave,_h(y=>{w();const j=t.content?.getBoundingClientRect();if(j){const S=t.content?.dataset.side,C=S==="right",A=C?-5:5,M=j[C?"left":"right"],R=j[C?"right":"left"];c.onPointerGraceIntentChange({area:[{x:y.clientX+A,y:y.clientY},{x:M,y:j.top},{x:R,y:j.top},{x:R,y:j.bottom},{x:M,y:j.bottom}],side:S}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(y),y.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:Le(n.onKeyDown,y=>{const j=c.searchRef.current!=="";n.disabled||j&&y.key===" "||pz[r.dir].includes(y.key)&&(t.onOpenChange(!0),t.content?.focus(),y.preventDefault())})})})});BT.displayName=Zd;var zT="MenuSubContent",UT=_.forwardRef((n,e)=>{const t=CT(Hr,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,c=Ac(Hr,n.__scopeMenu),u=Wh(Hr,n.__scopeMenu),f=VT(zT,n.__scopeMenu),m=_.useRef(null),x=ct(e,m);return s.jsx(wh.Provider,{scope:n.__scopeMenu,children:s.jsx(ks,{present:r||c.open,children:s.jsx(wh.Slot,{scope:n.__scopeMenu,children:s.jsx(M0,{id:f.contentId,"aria-labelledby":f.triggerId,...i,ref:x,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:w=>{u.isUsingKeyboardRef.current&&m.current?.focus(),w.preventDefault()},onCloseAutoFocus:w=>w.preventDefault(),onFocusOutside:Le(n.onFocusOutside,w=>{w.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:Le(n.onEscapeKeyDown,w=>{u.onClose(),w.preventDefault()}),onKeyDown:Le(n.onKeyDown,w=>{const y=w.currentTarget.contains(w.target),j=gz[u.dir].includes(w.key);y&&j&&(c.onOpenChange(!1),f.trigger?.focus(),w.preventDefault())})})})})})});UT.displayName=zT;function $T(n){return n?"open":"closed"}function tp(n){return n==="indeterminate"}function F0(n){return tp(n)?"indeterminate":n?"checked":"unchecked"}function Dz(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Oz(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Fz(n,e,t){const i=e.length>1&&Array.from(e).every(x=>x===e[0])?e[0]:e,c=t?n.indexOf(t):-1;let u=Oz(n,Math.max(c,0));i.length===1&&(u=u.filter(x=>x!==t));const m=u.find(x=>x.toLowerCase().startsWith(i.toLowerCase()));return m!==t?m:void 0}function Vz(n,e){const{x:t,y:r}=n;let i=!1;for(let c=0,u=e.length-1;c<e.length;u=c++){const f=e[c],m=e[u],x=f.x,w=f.y,y=m.x,j=m.y;w>r!=j>r&&t<(y-x)*(r-w)/(j-w)+x&&(i=!i)}return i}function Bz(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Vz(t,e)}function _h(n){return e=>e.pointerType==="mouse"?n(e):void 0}var zz=jT,Uz=I0,$z=ST,Hz=ET,Wz=D0,qz=TT,Gz=ng,Kz=kT,Zz=IT,Yz=LT,Qz=DT,Xz=OT,Jz=FT,eU=BT,tU=UT,sg="DropdownMenu",[nU]=Ps(sg,[bT]),Is=bT(),[sU,HT]=nU(sg),WT=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:c,onOpenChange:u,modal:f=!0}=n,m=Is(e),x=_.useRef(null),[w,y]=Ji({prop:i,defaultProp:c??!1,onChange:u,caller:sg});return s.jsx(sU,{scope:e,triggerId:Yi(),triggerRef:x,contentId:Yi(),open:w,onOpenChange:y,onOpenToggle:_.useCallback(()=>y(j=>!j),[y]),modal:f,children:s.jsx(zz,{...m,open:w,onOpenChange:y,dir:r,modal:f,children:t})})};WT.displayName=sg;var qT="DropdownMenuTrigger",GT=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,c=HT(qT,t),u=Is(t);return s.jsx(Uz,{asChild:!0,...u,children:s.jsx(Ye.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:eo(e,c.triggerRef),onPointerDown:Le(n.onPointerDown,f=>{!r&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:Le(n.onKeyDown,f=>{r||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});GT.displayName=qT;var rU="DropdownMenuPortal",KT=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Is(e);return s.jsx($z,{...r,...t})};KT.displayName=rU;var ZT="DropdownMenuContent",YT=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=HT(ZT,t),c=Is(t),u=_.useRef(!1);return s.jsx(Hz,{id:i.contentId,"aria-labelledby":i.triggerId,...c,...r,ref:e,onCloseAutoFocus:Le(n.onCloseAutoFocus,f=>{u.current||i.triggerRef.current?.focus(),u.current=!1,f.preventDefault()}),onInteractOutside:Le(n.onInteractOutside,f=>{const m=f.detail.originalEvent,x=m.button===0&&m.ctrlKey===!0,w=m.button===2||x;(!i.modal||w)&&(u.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});YT.displayName=ZT;var iU="DropdownMenuGroup",aU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Wz,{...i,...r,ref:e})});aU.displayName=iU;var oU="DropdownMenuLabel",lU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(qz,{...i,...r,ref:e})});lU.displayName=oU;var cU="DropdownMenuItem",QT=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Gz,{...i,...r,ref:e})});QT.displayName=cU;var uU="DropdownMenuCheckboxItem",dU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Kz,{...i,...r,ref:e})});dU.displayName=uU;var hU="DropdownMenuRadioGroup",fU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Zz,{...i,...r,ref:e})});fU.displayName=hU;var mU="DropdownMenuRadioItem",pU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Yz,{...i,...r,ref:e})});pU.displayName=mU;var gU="DropdownMenuItemIndicator",xU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Qz,{...i,...r,ref:e})});xU.displayName=gU;var vU="DropdownMenuSeparator",yU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Xz,{...i,...r,ref:e})});yU.displayName=vU;var wU="DropdownMenuArrow",_U=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(Jz,{...i,...r,ref:e})});_U.displayName=wU;var bU="DropdownMenuSubTrigger",NU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(eU,{...i,...r,ref:e})});NU.displayName=bU;var jU="DropdownMenuSubContent",CU=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Is(t);return s.jsx(tU,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CU.displayName=jU;var SU=WT,EU=GT,TU=KT,AU=YT,kU=QT;function PU({...n}){return s.jsx(SU,{"data-slot":"dropdown-menu",...n})}function IU({...n}){return s.jsx(EU,{"data-slot":"dropdown-menu-trigger",...n})}function RU({className:n,sideOffset:e=4,...t}){return s.jsx(TU,{children:s.jsx(AU,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function LU({className:n,inset:e,variant:t="default",...r}){return s.jsx(kU,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:ft("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}const MU=n=>{switch(n){case"sending":return"";case"sent":return"";case"delivered":return"";case"read":return s.jsx("span",{className:"text-blue-500",children:""})}},DU=n=>{const t=new Date().getTime()-n.getTime(),r=Math.floor(t/36e5);if(r<1){const i=Math.floor(t/6e4);return i<1?"Just now":`${i}m ago`}else return r<24?`${r}h ago`:n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};function OU({message:n,showAvatar:e}){return s.jsxs("div",{className:`flex ${n.isOwn?"justify-end":"justify-start"} items-end gap-2`,children:[e&&!n.isOwn&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm",children:n.senderAvatar}),s.jsxs("div",{className:`max-w-[70%] ${n.isOwn?"bg-[#C4A672] text-white":"bg-gray-100 text-gray-900"} rounded-2xl p-3`,children:[n.content&&s.jsx("p",{className:"text-sm",children:n.content}),n.images&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:n.images.map((t,r)=>s.jsx("img",{src:t,alt:"",className:"rounded-lg max-h-40 object-cover"},r))}),s.jsxs("div",{className:"flex justify-between items-center mt-1 text-xs opacity-70",children:[s.jsx("span",{children:DU(n.timestamp)}),n.isOwn&&s.jsx("span",{className:"ml-2",children:MU(n.status)})]})]}),e&&n.isOwn&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm",children:n.senderAvatar})]})}function FU({otherUser:n,bookContext:e,onBack:t,currentUserId:r}){const[i,c]=_.useState([]),[u,f]=_.useState(""),[m,x]=_.useState([]),[w,y]=_.useState(!1),[j,S]=_.useState(!1),C=_.useRef(null),A=_.useRef(null),M=[r,n.id].sort().join("_");_.useEffect(()=>{const D=Gt(_t(Oe,"chats",M,"messages"),fr("timestamp","asc")),P=al(D,V=>{const B=V.docs.map(U=>{const q=U.data();return{id:U.id,...q,timestamp:q.timestamp.toDate(),isOwn:q.senderId===r}});c(B)});return()=>P()},[M,r]);const R=()=>{S(!0),xe.success("Chat archived",{description:"This conversation has been moved to archives",action:{label:"Undo",onClick:()=>{S(!1),xe.info("Chat restored")}}})};_.useEffect(()=>{z()},[i]);const z=()=>{C.current?.scrollIntoView({behavior:"smooth"})},W=D=>{Array.from(D.target.files||[]).forEach(V=>{if(V.size>5*1024*1024){xe.error("Image size must be less than 5MB");return}const B=new FileReader;B.onloadend=()=>{x(U=>[...U,B.result])},B.readAsDataURL(V)})},G=D=>{x(P=>P.filter((V,B)=>B!==D))},K=async()=>{if(!(!u.trim()&&m.length===0))try{await Qa(_t(Oe,"chats",M,"messages"),{senderId:r,senderName:"You",senderAvatar:"ME",content:u,images:m.length>0?m:void 0,timestamp:pc(),status:"sent"}),f(""),x([])}catch(D){xe.error("Failed to send message"),console.error(D)}},ee=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),K())};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-hidden",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] p-4 flex items-center justify-between text-white shadow-md",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[s.jsx(Wr,{className:"w-5 h-5"}),s.jsx("span",{children:"Back"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-xl",children:n.avatar}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg",children:n.name}),s.jsx("p",{className:"text-sm opacity-90",children:n.online?"Online":"Offline"})]})]}),s.jsxs(PU,{children:[s.jsx(IU,{asChild:!0,children:s.jsx(J,{variant:"ghost",className:"p-2 hover:bg-white/10",children:s.jsx(e1,{className:"w-5 h-5"})})}),s.jsx(RU,{align:"end",children:s.jsxs(LU,{onClick:R,children:[s.jsx(JN,{className:"w-4 h-4 mr-2"}),"Archive Chat"]})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-[#FAF8F3] to-white",children:s.jsxs("div",{className:"space-y-4",children:[i.map(D=>s.jsx(OU,{message:D,showAvatar:!0},D.id)),w&&s.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-bounce delay-100"}),s.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-bounce delay-200"})]})]}),s.jsx("div",{ref:C})]})}),s.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{ref:A,type:"file",accept:"image/*",multiple:!0,onChange:W,className:"hidden"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>A.current?.click(),className:"hover:bg-gray-100",children:s.jsx(sh,{className:"w-5 h-5"})}),s.jsx(J,{variant:"ghost",size:"sm",className:"hover:bg-gray-100",children:s.jsx(cP,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ie,{value:u,onChange:D=>f(D.target.value),onKeyPress:ee,placeholder:"Type a message...",className:"pr-10"}),s.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(r1,{className:"w-5 h-5"})})]}),s.jsx(J,{onClick:K,disabled:!u.trim()&&m.length===0,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:s.jsx(wm,{className:"w-5 h-5"})})]}),m.length>0&&s.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto",children:m.map((D,P)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:D,alt:"Preview",className:"w-16 h-16 object-cover rounded"}),s.jsx("button",{onClick:()=>G(P),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:s.jsx(Ot,{className:"w-3 h-3"})})]},P))})]})]})})}function VU({announcement:n,onClose:e,onSave:t}){const[r,i]=_.useState({title:n?.title||"",content:n?.content||"",type:n?.type||"info",image:n?.image||null,date:n?.date||new Date,published:n?.published??!0}),[c,u]=_.useState({}),[f,m]=_.useState(!1),x=()=>{const S={};return r.title.trim()?r.title.length<5?S.title="Title must be at least 5 characters":r.title.length>100&&(S.title="Title must be less than 100 characters"):S.title="Title is required",r.content.trim()?r.content.length<20?S.content="Content must be at least 20 characters":r.content.length>2e3&&(S.content="Content must be less than 2000 characters"):S.content="Content is required",u(S),Object.keys(S).length===0},w=S=>{const C=S.target.files?.[0];if(C){if(C.size>5*1024*1024){xe.error("Image size must be less than 5MB");return}const A=new FileReader;A.onloadend=()=>{i(M=>({...M,image:A.result}))},A.readAsDataURL(C)}},y=async S=>{if(S.preventDefault(),!x()){xe.error("Please fix the errors before submitting");return}m(!0);try{const C={title:r.title,content:r.content,type:r.type,image:r.image,date:r.date,published:r.published,views:n?.views||0};n?(await s0(jt(Oe,"announcements",n.id),C),xe.success("Announcement updated")):(await Qa(_t(Oe,"announcements"),C),xe.success("Announcement created")),e()}catch(C){xe.error("Failed to save announcement"),console.error(C)}finally{m(!1)}},j=async()=>{if(n&&confirm("Are you sure you want to delete this announcement?"))try{await deleteDoc(jt(Oe,"announcements",n.id)),xe.success("Announcement deleted"),e()}catch(S){xe.error("Failed to delete announcement"),console.error(S)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl my-8",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50]",children:n?"Edit Announcement":"Create Announcement"}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"title",className:"text-[#2C3E50] mb-2",children:"Title *"}),s.jsx(Ie,{id:"title",type:"text",value:r.title,onChange:S=>{i(C=>({...C,title:S.target.value})),u(C=>({...C,title:""}))},placeholder:"e.g., New Feature Launch!",className:c.title?"border-red-500":""}),c.title&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.title}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[r.title.length,"/100 characters"]})]}),s.jsxs("div",{children:[s.jsx(ke,{className:"text-[#2C3E50] mb-2",children:"Type *"}),s.jsxs(rn,{value:r.type,onValueChange:S=>i(C=>({...C,type:S})),children:[s.jsx(on,{children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"info",children:" Info - General information"}),s.jsx(De,{value:"promo",children:" Promo - Special offers & deals"}),s.jsx(De,{value:"update",children:" Update - Platform updates & features"})]})]})]}),s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"content",className:"text-[#2C3E50] mb-2",children:"Content *"}),s.jsx(xc,{id:"content",value:r.content,onChange:S=>{i(C=>({...C,content:S.target.value})),u(C=>({...C,content:""}))},placeholder:"Write the announcement content...",rows:6,className:c.content?"border-red-500":""}),c.content&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.content}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[r.content.length,"/2000 characters"]})]}),s.jsxs("div",{children:[s.jsx(ke,{className:"text-[#2C3E50] mb-2",children:"Cover Image (Optional)"}),r.image?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:r.image,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>i(S=>({...S,image:null})),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:s.jsx(Ot,{className:"w-5 h-5"})})]}):s.jsxs("label",{className:"block w-full h-64 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#C4A672] transition-colors cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden"}),s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[s.jsx(o1,{className:"w-12 h-12 mb-3"}),s.jsx("p",{className:"text-center",children:"Click to upload a cover image"}),s.jsx("p",{className:"text-xs mt-1",children:"Recommended: 1200x400px, Max 5MB"})]})]})]}),s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"date",className:"text-[#2C3E50] mb-2",children:"Publication Date"}),s.jsx(Ie,{id:"date",type:"date",value:r.date.toISOString().split("T")[0],onChange:S=>i(C=>({...C,date:new Date(S.target.value)}))})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{id:"published",type:"checkbox",checked:r.published,onChange:S=>i(C=>({...C,published:S.target.checked})),className:"w-5 h-5 text-[#C4A672] border-gray-300 rounded focus:ring-[#C4A672]"}),s.jsx(ke,{htmlFor:"published",className:"text-[#2C3E50] cursor-pointer",children:"Publish immediately (uncheck to save as draft)"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Preview:"}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:"text-2xl",children:[r.type==="info"&&"",r.type==="promo"&&"",r.type==="update"&&""]}),s.jsx("span",{className:"text-sm text-gray-500",children:r.date.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mb-2",children:r.title||"Announcement Title"}),s.jsx("p",{className:"text-gray-700",children:r.content||"Announcement content will appear here..."})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[s.jsx("div",{children:n&&s.jsx(J,{type:"button",variant:"outline",onClick:j,className:"text-red-600 hover:bg-red-50 border-red-200",children:"Delete Announcement"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{type:"button",variant:"outline",onClick:e,disabled:f,children:"Cancel"}),s.jsx(J,{type:"submit",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:f,children:f?"Saving...":n?"Update":"Create"})]})]})]})]})})}const BU=[{id:"1",title:" New Feature: Book Communities!",content:"We're excited to announce our new Communities feature! Join communities, discuss your favorite books, and connect with fellow readers. You can now create or join public and private communities, share posts, and engage in group chats. This is a major step forward in making BookOra the ultimate platform for book lovers.",type:"update",image:"https://images.unsplash.com/photo-1512820790803-83ca734da794?w=1200&h=400&fit=crop",date:new Date("2024-11-14"),published:!0,views:1234},{id:"2",title:" Special Offer: 20% Off Textbooks",content:"Get 20% off all textbook purchases this week! Whether you're a student looking for course materials or just expanding your knowledge, now's the perfect time to save. Use code BOOKS20 at checkout. Offer valid until November 20th. Limited stock available on popular titles.",type:"promo",image:"https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=1200&h=400&fit=crop",date:new Date("2024-11-13"),published:!0,views:856},{id:"3",title:" Rental Period Extended",content:"Great news! All active rentals have been automatically extended by 7 days at no additional charge. We understand that sometimes you need a bit more time to finish a good book. This extension applies to all rentals active as of November 12th. Enjoy your reading!",type:"info",image:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=1200&h=400&fit=crop",date:new Date("2024-11-12"),published:!0,views:567},{id:"4",title:" Featured Genre: Science Fiction",content:`This month we're highlighting Science Fiction! Explore our curated collection of classic and modern sci-fi novels. From Asimov to Liu Cixin, discover worlds beyond imagination. Check out our featured communities like "Science Fiction Lovers" for discussions and recommendations.`,type:"info",image:"https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=1200&h=400&fit=crop",date:new Date("2024-11-10"),published:!0,views:432},{id:"5",title:" Referral Program Launch",content:"Invite your friends to BookOra and earn rewards! For every friend who signs up and makes a purchase, you'll both receive a $10 credit. The more friends you refer, the more you save. Start sharing the love of reading today!",type:"promo",date:new Date("2024-11-08"),published:!0,views:298},{id:"6",title:" Platform Maintenance Scheduled",content:"We'll be performing routine maintenance on November 20th from 2 AM to 4 AM EST. The platform may be temporarily unavailable during this time. We apologize for any inconvenience and appreciate your patience as we work to improve your experience.",type:"info",date:new Date("2024-11-07"),published:!0,views:189}];function zU({isAdmin:n=!1,onBack:e}){const[t,r]=_.useState(BU),[i,c]=_.useState(""),[u,f]=_.useState("all"),[m,x]=_.useState(!1),[w,y]=_.useState(null),j=t.filter(G=>{const K=G.title.toLowerCase().includes(i.toLowerCase())||G.content.toLowerCase().includes(i.toLowerCase()),ee=u==="all"||G.type===u;return K&&ee}).sort((G,K)=>K.date.getTime()-G.date.getTime()),S=()=>{y(null),x(!0)},C=G=>{y(G),x(!0)},A=G=>{confirm("Are you sure you want to delete this announcement?")&&(r(K=>K.filter(ee=>ee.id!==G)),xe.success("Announcement deleted"))},M=G=>{if(w)r(K=>K.map(ee=>ee.id===w.id?{...ee,...G}:ee)),xe.success("Announcement updated");else{const K={...G,id:Date.now().toString(),views:0};r(ee=>[K,...ee]),xe.success("Announcement created")}x(!1),y(null)},R=G=>{r(ee=>ee.map(D=>D.id===G?{...D,published:!D.published}:D));const K=t.find(ee=>ee.id===G);xe.success(K?.published?"Announcement unpublished":"Announcement published")},z=G=>({info:"bg-blue-100 text-blue-700 border-blue-200",promo:"bg-yellow-100 text-yellow-700 border-yellow-200",update:"bg-green-100 text-green-700 border-green-200"})[G],W=G=>{switch(G){case"info":return"";case"promo":return"";case"update":return""}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 md:pb-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white py-12 shadow-card",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e&&s.jsxs(J,{variant:"ghost",onClick:e,className:"text-white hover:bg-white/10 mb-4 -ml-2",children:[s.jsx(Wr,{className:"w-5 h-5 mr-2"}),"Back to Home"]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl mb-2",children:" Announcements"}),s.jsx("p",{className:"text-white/90",children:"Stay updated with the latest news and offers from Book Bloom"})]}),n&&s.jsxs(J,{onClick:S,size:"lg",className:"bg-white text-blue-600 hover:bg-gray-100 transition-smooth btn-scale shadow-subtle",children:[s.jsx(cl,{className:"w-5 h-5 mr-2"}),"Create Announcement"]})]}),s.jsxs("div",{className:"flex gap-4 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 min-w-[300px]",children:[s.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Type to search announcements...",value:i,onChange:G=>c(G.target.value),className:"pl-12 pr-4 h-12 bg-white text-gray-900 border-2 border-white/20 focus:border-white focus-glow shadow-subtle"}),i&&s.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:[j.length," results"]})]}),s.jsxs(rn,{value:u,onValueChange:f,children:[s.jsx(on,{className:"w-48 h-12 bg-white shadow-subtle",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"all",children:"All Types"}),s.jsx(De,{value:"info",children:" Info"}),s.jsx(De,{value:"promo",children:" Promo"}),s.jsx(De,{value:"update",children:" Update"})]})]})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 text-gray-600",children:[j.length," announcement",j.length!==1?"s":""," found"]}),s.jsxs("div",{className:"space-y-6",children:[j.map(G=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[G.image&&s.jsxs("div",{className:"relative h-48 bg-gray-100",children:[s.jsx("img",{src:G.image,alt:G.title,className:"w-full h-full object-cover"}),!G.published&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(Xe,{className:"bg-yellow-500 text-white",children:"Draft"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxs(Xe,{variant:"outline",className:z(G.type),children:[W(G.type)," ",G.type.charAt(0).toUpperCase()+G.type.slice(1)]}),s.jsx("span",{className:"text-sm text-gray-500",children:G.date.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}),n&&s.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[s.jsx(Ur,{className:"w-4 h-4"}),G.views.toLocaleString()," views"]})]}),s.jsx("h2",{className:"text-2xl text-[#2C3E50] mb-3",children:G.title}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:G.content})]}),n&&s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>C(G),children:s.jsx(Yx,{className:"w-4 h-4"})}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>A(G.id),className:"text-red-600 hover:bg-red-50 border-red-200",children:s.jsx(cc,{className:"w-4 h-4"})})]})]}),n&&s.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-200",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>R(G.id),children:G.published?"Unpublish":"Publish"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["Status: ",G.published?s.jsx("span",{className:"text-green-600",children:"Published"}):s.jsx("span",{className:"text-yellow-600",children:"Draft"})]})]})]})]},G.id)),j.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Ha,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No announcements found"}),s.jsx("p",{className:"text-gray-500 mb-6",children:i||u!=="all"?"Try adjusting your search or filters":"No announcements have been posted yet"}),n&&s.jsxs(J,{onClick:S,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"Create First Announcement"]})]})]})]}),m&&s.jsx(VU,{announcement:w,onClose:()=>{x(!1),y(null)},onSave:M})]})}function Et({className:n,...e}){return s.jsx("div",{"data-slot":"card",className:ft("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function UU({onClose:n}){const e=[{id:"phone",title:"Call Us",description:"Speak with our support team",phone:"+1 (800) 555-BOOK",hours:"24/7 Available",icon:ih,color:"bg-green-500"},{id:"voip",title:"In-App Call",description:"Free VoIP call via app",action:"Start VoIP Call",hours:"Mon-Fri: 9AM-6PM EST",icon:Mk,color:"bg-blue-500"},{id:"video",title:"Video Support",description:"Screen share for technical help",action:"Schedule Video Call",hours:"Mon-Fri: 10AM-5PM EST",icon:Jx,color:"bg-purple-500"},{id:"chat",title:"Live Chat",description:"Chat with support agents",action:"Open Live Chat",hours:"24/7 Available",icon:qs,color:"bg-[#C4A672]"}],t=u=>{window.location.href=`tel:${u.replace(/\s/g,"")}`},r=()=>{alert(`Connecting to support via VoIP...

This would initiate an in-app voice call using WebRTC or similar technology.`)},i=()=>{alert(`Video Support

You would be redirected to schedule a video call with our technical support team.`)},c=()=>{n()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Et,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white p-6 sticky top-0 z-10 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl mb-1",children:"Contact Support"}),s.jsx("p",{className:"text-white/90 text-sm",children:"We're here to help you"})]}),s.jsx("button",{onClick:n,className:"text-white/80 hover:text-white",children:s.jsx(Ot,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-green-800",children:"Support team is online"}),s.jsx("p",{className:"text-xs text-green-600",children:"Average response time: 2 minutes"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:e.map(u=>{const f=u.icon;return s.jsx(Et,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-[#C4A672]",onClick:()=>{u.id==="phone"&&u.phone?t(u.phone):u.id==="voip"?r():u.id==="video"?i():u.id==="chat"&&c()},children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`w-12 h-12 ${u.color} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.jsx(f,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:u.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx(ip,{className:"w-3 h-3"}),s.jsx("span",{children:u.hours})]}),u.phone&&s.jsx("p",{className:"text-[#C4A672] mt-2",children:u.phone}),u.action&&s.jsx(Xe,{variant:"outline",className:"mt-2",children:u.action})]})]})},u.id)})}),s.jsx(Et,{className:"p-6 bg-gray-50",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(_c,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:"Email Support"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"For non-urgent inquiries or detailed questions"}),s.jsx("a",{href:"mailto:support@bookora.com",className:"text-[#C4A672] hover:underline text-sm",children:"support@bookora.com"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Response within 24 hours"})]})]})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Looking for quick answers? Check our FAQs first"}),s.jsx(J,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:"View FAQs"})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Emergency Contact"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"For urgent security or account issues:"}),s.jsxs(J,{onClick:()=>t("+1-800-555-9911"),className:"bg-red-600 hover:bg-red-700 text-white",children:[s.jsx(ih,{className:"w-4 h-4 mr-2"}),"Emergency: +1 (800) 555-9911"]})]})]})]})})}function $U({onBack:n,onNavigateToCommunities:e}){const[t,r]=_.useState(!1),[i,c]=_.useState([{label:"Active Users",value:"50,000+",icon:gn},{label:"Books Listed",value:"200,000+",icon:ar},{label:"Communities",value:"500+",icon:$i},{label:"Transactions",value:"1M+",icon:a1}]);useEffect(()=>{(async()=>{})()},[]);const u=[{icon:ar,title:"Accessibility",description:"We believe everyone should have access to books, whether through buying, renting, or community sharing."},{icon:gn,title:"Community",description:"Building connections between book lovers through vibrant communities and meaningful conversations."},{icon:ul,title:"Trust",description:"Safe and secure transactions with verified users and transparent communication channels."},{icon:ZA,title:"Quality",description:"Curated marketplace ensuring high-quality books and authentic community interactions."}],f=[{name:"Sarah Johnson",role:"Founder & CEO",bio:"Book enthusiast with 15 years in tech"},{name:"Michael Chen",role:"Head of Community",bio:"Building connections through literature"},{name:"Emily Rodriguez",role:"Lead Developer",bio:"Creating seamless book experiences"},{name:"David Kim",role:"Operations Manager",bio:"Ensuring smooth transactions daily"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#F5F1E8] to-white",children:[s.jsxs("section",{className:"relative bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="1"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'}})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-20 relative",children:[s.jsx("button",{onClick:n,className:"mb-6 text-white/80 hover:text-white transition-colors flex items-center gap-2",children:" Back"}),s.jsx("h1",{className:"text-5xl md:text-6xl mb-6",children:"About BookOra"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mb-8",children:"Connecting readers, building communities, and making books accessible to everyone through our innovative marketplace platform."}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx(J,{onClick:e,className:"bg-white text-[#C4A672] hover:bg-white/90",children:"Join Communities"}),s.jsx(J,{variant:"outline",className:"border-white text-white hover:bg-white/20",children:"Contact Us"})]})]})]}),s.jsx("section",{className:"py-16 px-6 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:i.map((m,x)=>{const w=m.icon;return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(w,{className:"w-8 h-8 text-white"})}),s.jsx("p",{className:"text-3xl text-[#2C3E50] mb-2",children:m.value}),s.jsx("p",{className:"text-gray-600",children:m.label})]},x)})})})}),s.jsx("section",{className:"py-20 px-6 bg-[#F5F1E8]",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-8 text-center",children:"Our Story"}),s.jsxs("div",{className:"space-y-6 text-gray-700 leading-relaxed",children:[s.jsx("p",{className:"text-lg",children:"BookOra was born from a simple idea: books should be accessible to everyone, and readers should be able to connect with each other. In 2023, our founder Sarah Johnson recognized that many people had books sitting on shelves, while others were searching for affordable ways to access literature."}),s.jsx("p",{className:"text-lg",children:"We created BookOra to solve this problem. Our platform enables users to buy, sell, and rent books while fostering vibrant communities where readers can discuss their favorite titles, share recommendations, and build lasting connections."}),s.jsx("p",{className:"text-lg",children:"Today, BookOra has grown into a thriving marketplace with a large user base, numerous books listed, and active communities dedicated to every genre and interest imaginable. We're proud to have facilitated many transactions, making literature more accessible one book at a time."})]})]})}),s.jsx("section",{className:"py-20 px-6 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-4 text-center",children:"Our Values"}),s.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"The principles that guide everything we do at BookOra"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:u.map((m,x)=>{const w=m.icon;return s.jsxs("div",{className:"bg-gradient-to-br from-[#F5F1E8] to-white rounded-2xl p-6 hover:shadow-xl transition-all duration-300 border border-[#C4A672]/20",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mb-4",children:s.jsx(w,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mb-3",children:m.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:m.description})]},x)})})]})}),s.jsx("section",{className:"py-20 px-6 bg-[#F5F1E8]",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-4 text-center",children:"Meet Our Team"}),s.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Passionate book lovers dedicated to making literature accessible"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:f.map((m,x)=>s.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center hover:shadow-xl transition-all duration-300",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-3xl text-white",children:m.name[0]})}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mb-2",children:m.name}),s.jsx("p",{className:"text-[#C4A672] mb-3",children:m.role}),s.jsx("p",{className:"text-sm text-gray-600",children:m.bio})]},x))})]})}),s.jsx("section",{className:"py-20 px-6 bg-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-4 text-center",children:"Get In Touch"}),s.jsx("p",{className:"text-center text-gray-600 mb-12",children:"Have questions? We'd love to hear from you."}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[s.jsxs("div",{className:"text-center p-6 bg-[#F5F1E8] rounded-2xl",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(_c,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-lg text-[#2C3E50] mb-2",children:"Email"}),s.jsx("p",{className:"text-gray-600",children:"support@bookora.com"})]}),s.jsxs("div",{className:"text-center p-6 bg-[#F5F1E8] rounded-2xl",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(ih,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-lg text-[#2C3E50] mb-2",children:"Phone"}),s.jsx("p",{className:"text-gray-600",children:"+1 (555) 123-4567"})]}),s.jsxs("div",{className:"text-center p-6 bg-[#F5F1E8] rounded-2xl",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(In,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-lg text-[#2C3E50] mb-2",children:"Location"}),s.jsx("p",{className:"text-gray-600",children:"San Francisco, CA"})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs(J,{onClick:()=>r(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8 py-6 text-lg",children:[s.jsx(ih,{className:"w-5 h-5 mr-2"}),"Contact Support"]})})]})}),s.jsx("section",{className:"py-20 px-6 bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("h2",{className:"text-4xl mb-6",children:"Ready to Start Your Journey?"}),s.jsx("p",{className:"text-xl text-white/90 mb-8",children:"Join thousands of readers in our vibrant book-loving community"}),s.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[s.jsx(J,{onClick:e,className:"bg-white text-[#C4A672] hover:bg-white/90 px-8 py-6 text-lg",children:"Explore Communities"}),s.jsx(J,{onClick:n,variant:"outline",className:"border-white text-white hover:bg-white/20 px-8 py-6 text-lg",children:"Browse Books"})]})]})}),t&&s.jsx(UU,{onClose:()=>r(!1)})]})}function HU({onBack:n,onNavigateToBook:e}){const[t,r]=_.useState(""),[i,c]=_.useState(!1),[u,f]=_.useState(!1),[m,x]=_.useState(""),[w,y]=_.useState([]),[j,S]=_.useState(!1),[C,A]=_.useState(!1),[M,R]=_.useState([0,100]),[z,W]=_.useState(""),[G,K]=_.useState(""),[ee,D]=_.useState(""),[P,V]=_.useState([]),[B,U]=_.useState(!1),q=async()=>{U(!0);try{let ie=Gt(_t(Oe,"books"));t&&(ie=Gt(ie,hs("title",">=",t),hs("title","<=",t+""))),ee&&(ie=Gt(ie,hs("category","==",ee))),G&&(ie=Gt(ie,hs("condition","==",G))),ie=Gt(ie,hs("price",">=",M[0]),hs("price","<=",M[1])),z&&(ie=Gt(ie,hs("location","==",z))),ie=Gt(ie,fr("title"),id(20));const Z=(await Cn(ie)).docs.map(ce=>({id:ce.id,...ce.data()}));V(Z)}catch(ie){xe.error("Search failed"),console.error(ie)}finally{U(!1)}};_.useEffect(()=>{q()},[t,M,z,G,ee]);const H=()=>{c(!0)},se=()=>{A(!0),setTimeout(()=>{A(!1),r("Harry Potter"),c(!1)},2e3)},be=()=>{if(!m.trim())return;const ie={role:"user",content:m},we={role:"ai",content:`Based on "${m}", here are some recommendations:`,books:P.slice(0,2)};y([...w,ie,we]),x("")};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white",children:[s.jsx("div",{className:"bg-[#C4A672] shadow-md",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-[#2C3E50] hover:text-[#1a252f]",children:[s.jsx(Ot,{className:"w-6 h-6"}),s.jsx("span",{children:"Close"})]}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Advanced Search"}),s.jsx("div",{className:"w-20"})," "]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs(Et,{className:"p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-4 flex items-center gap-2",children:[s.jsx(Ln,{className:"w-5 h-5"}),"Search Books"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Title, author, ISBN...",value:t,onChange:ie=>r(ie.target.value),className:"pl-10 pr-10"}),s.jsx("button",{onClick:H,className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#C4A672] hover:text-[#8B7355]",children:s.jsx(bx,{className:"w-5 h-5"})})]}),s.jsxs(J,{onClick:()=>f(!u),className:"w-full bg-gradient-to-r from-[#C4A672] to-[#8B7355] hover:from-[#8B7355] hover:to-[#C4A672] text-white",children:[s.jsx(yx,{className:"w-5 h-5 mr-2"}),u?"Hide AI Assistant":"Ask AI Assistant"]}),s.jsxs(J,{onClick:()=>S(!j),variant:"outline",className:"w-full",children:[s.jsx(Gv,{className:"w-5 h-5 mr-2"}),j?"Hide Filters":"Show Filters",s.jsx(sp,{className:`w-4 h-4 ml-auto transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-2 mb-2",children:[s.jsx(Wa,{className:"w-4 h-4"}),"Price Range: $",M[0]," - $",M[1]]}),s.jsx(yh,{value:M,onValueChange:R,max:100,step:5,className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-2 mb-2",children:[s.jsx(I_,{className:"w-4 h-4"}),"Condition"]}),s.jsxs(rn,{value:G,onValueChange:K,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"Any condition"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"new",children:"Brand New"}),s.jsx(De,{value:"like-new",children:"Like New"}),s.jsx(De,{value:"very-good",children:"Very Good"}),s.jsx(De,{value:"good",children:"Good"}),s.jsx(De,{value:"acceptable",children:"Acceptable"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-2 mb-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Location"]}),s.jsx(Ie,{type:"text",placeholder:"City or ZIP code",value:z,onChange:ie=>W(ie.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"Category"}),s.jsxs(rn,{value:ee,onValueChange:D,children:[s.jsx(on,{children:s.jsx(an,{placeholder:"All categories"})}),s.jsxs(ln,{children:[s.jsx(De,{value:"fiction",children:"Fiction"}),s.jsx(De,{value:"non-fiction",children:"Non-Fiction"}),s.jsx(De,{value:"science",children:"Science"}),s.jsx(De,{value:"fantasy",children:"Fantasy"}),s.jsx(De,{value:"classic",children:"Classic"}),s.jsx(De,{value:"textbook",children:"Textbooks"})]})]})]}),s.jsx(J,{onClick:()=>{R([0,100]),K(""),W(""),D("")},variant:"outline",className:"w-full",children:"Reset Filters"})]})]})]}),s.jsxs(Et,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Popular Categories"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Xe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Fiction"}),s.jsx(Xe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Science"}),s.jsx(Xe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Business"}),s.jsx(Xe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Art"}),s.jsx(Xe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Textbooks"}),s.jsx(Xe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Academic"})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u&&s.jsxs(Et,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[#2C3E50] flex items-center gap-2",children:[s.jsx(yx,{className:"w-6 h-6 text-[#C4A672]"}),"AI Book Assistant"]}),s.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ot,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:w.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(yx,{className:"w-12 h-12 mx-auto mb-3 text-[#C4A672]"}),s.jsx("p",{className:"mb-2",children:"Ask me anything about books!"}),s.jsx("p",{className:"text-sm",children:'Try: "Suggest books like Harry Potter" or "Best science fiction books"'})]}):w.map((ie,we)=>s.jsx("div",{children:ie.role==="user"?s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"bg-[#C4A672] text-white rounded-lg px-4 py-2 max-w-[80%]",children:ie.content})}):s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"bg-gray-100 text-gray-800 rounded-lg px-4 py-2 max-w-[80%]",children:[s.jsx("p",{className:"mb-2",children:ie.content}),ie.books&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:ie.books.map(Z=>s.jsxs("div",{className:"bg-white rounded-lg p-3 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e?.(Z.id),children:[s.jsx(ol,{src:Z.image,alt:Z.title,className:"w-full h-32 object-cover rounded mb-2"}),s.jsx("p",{className:"text-sm text-[#2C3E50]",children:Z.title}),s.jsx("p",{className:"text-xs text-gray-500",children:Z.author}),s.jsxs("p",{className:"text-sm text-[#C4A672] mt-1",children:["$",Z.price]})]},Z.id))})]})})},we))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{type:"text",placeholder:"Ask for book recommendations...",value:m,onChange:ie=>x(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&be(),className:"flex-1"}),s.jsx(J,{onClick:be,className:"bg-[#C4A672] hover:bg-[#8B7355]",children:"Send"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[#2C3E50] text-xl",children:["Search Results (",P.length,")"]}),s.jsxs(rn,{defaultValue:"relevance",children:[s.jsx(on,{className:"w-40",children:s.jsx(an,{})}),s.jsxs(ln,{children:[s.jsx(De,{value:"relevance",children:"Relevance"}),s.jsx(De,{value:"price-low",children:"Price: Low to High"}),s.jsx(De,{value:"price-high",children:"Price: High to Low"}),s.jsx(De,{value:"newest",children:"Newest First"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:P.map(ie=>s.jsx(Et,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e?.(ie.id),children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx(ol,{src:ie.image,alt:ie.title,className:"w-24 h-32 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-1",children:ie.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",ie.author]}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("p",{children:["ISBN: ",ie.isbn]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(In,{className:"w-3 h-3"}),ie.location]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(I_,{className:"w-3 h-3"}),ie.condition]})]}),s.jsxs("p",{className:"text-[#C4A672] text-lg mt-2",children:["$",ie.price]})]})]})},ie.id))})]})]})]})}),i&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsx(Et,{className:"w-full max-w-md p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:s.jsx(Ot,{className:"w-6 h-6"})}),s.jsx("div",{className:`w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center ${C?"bg-red-100 animate-pulse":"bg-[#C4A672]/20"}`,children:s.jsx(bx,{className:`w-12 h-12 ${C?"text-red-500":"text-[#C4A672]"}`})}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:C?"Listening...":"Voice Search"}),s.jsx("p",{className:"text-gray-600 mb-6",children:C?"Speak now":"Tap the microphone to start"}),C?s.jsx("div",{className:"text-sm text-gray-500",children:"Transcribing your voice..."}):s.jsxs(J,{onClick:se,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(bx,{className:"w-5 h-5 mr-2"}),"Start Recording"]})]})})})]})}function WU({onBack:n,onNavigateToMarketplace:e,onNavigateToBook:t}){const[r,i]=_.useState("buy"),c=[{id:"1",title:"The Hobbit",author:"J.R.R. Tolkien",price:14.99,condition:"Like New",available:!0,image:"https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400&q=80",addedDate:"2 days ago"},{id:"2",title:"Dune",author:"Frank Herbert",price:16.5,condition:"Very Good",available:!0,image:"https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&q=80",addedDate:"5 days ago"},{id:"3",title:"1984",author:"George Orwell",price:11.99,condition:"Good",available:!1,image:"https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&q=80",addedDate:"1 week ago"}],u=[{id:"4",title:"To Kill a Mockingbird",author:"Harper Lee",price:5.99,duration:"2 weeks",available:!0,image:"https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400&q=80",addedDate:"3 days ago"},{id:"5",title:"The Great Gatsby",author:"F. Scott Fitzgerald",price:4.99,duration:"2 weeks",available:!0,image:"https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400&q=80",addedDate:"1 week ago"}],f=[{id:"r1",title:"Lord of the Rings",author:"J.R.R. Tolkien",price:24.99,image:"https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?w=400&q=80",reason:"Because you liked The Hobbit"},{id:"r2",title:"Foundation",author:"Isaac Asimov",price:15.99,image:"https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&q=80",reason:"Similar to Dune"}],m=y=>{console.log("Remove item:",y)},x=y=>{console.log("Add to cart:",y)},w=r==="buy"?c:u;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-8",children:[s.jsx("div",{className:"bg-[#C4A672] shadow-md",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-[#2C3E50] hover:text-[#1a252f]",children:[s.jsx(Wr,{className:"w-5 h-5"}),s.jsx("span",{children:"Back"})]}),s.jsxs("h1",{className:"text-[#2C3E50] text-2xl flex items-center gap-2",children:[s.jsx($i,{className:"w-7 h-7 text-red-500 fill-red-500"}),"My Wishlist"]}),s.jsx(J,{onClick:e,variant:"outline",className:"border-[#2C3E50] text-[#2C3E50] hover:bg-[#2C3E50] hover:text-white",children:"Browse Books"})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs(yT,{value:r,onValueChange:y=>i(y),className:"mb-8",children:[s.jsxs(wT,{className:"grid w-full max-w-md mx-auto grid-cols-2",children:[s.jsxs(Xm,{value:"buy",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:["Buy (",c.length,")"]}),s.jsxs(Xm,{value:"rent",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:["Rent (",u.length,")"]})]}),s.jsx(Jm,{value:"buy",className:"mt-8",children:c.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(y=>s.jsxs(Et,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ol,{src:y.image,alt:y.title,className:"w-full h-56 object-cover"}),!y.available&&s.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:s.jsx(Xe,{variant:"destructive",className:"text-lg",children:"Not Available"})}),s.jsx("button",{onClick:()=>m(y.id),className:"absolute top-2 right-2 bg-white/90 hover:bg-white rounded-full p-2 shadow-md",children:s.jsx(Ot,{className:"w-4 h-4 text-red-500"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:y.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",y.author]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",y.price.toFixed(2)]}),s.jsx(Xe,{variant:"outline",children:y.condition})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Added ",y.addedDate]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:()=>t?.(y.id),variant:"outline",className:"flex-1",disabled:!y.available,children:[s.jsx(Ur,{className:"w-4 h-4 mr-2"}),"View"]}),y.available&&s.jsxs(J,{onClick:()=>x(y.id),className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Kv,{className:"w-4 h-4 mr-2"}),"Buy Now"]})]})]})]},y.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx($i,{className:"w-20 h-20 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:"No books in your buy wishlist"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding books you want to purchase"}),s.jsx(J,{onClick:e,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Browse Books"})]})}),s.jsx(Jm,{value:"rent",className:"mt-8",children:u.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(y=>s.jsxs(Et,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ol,{src:y.image,alt:y.title,className:"w-full h-56 object-cover"}),!y.available&&s.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:s.jsx(Xe,{variant:"destructive",className:"text-lg",children:"Not Available"})}),s.jsx("button",{onClick:()=>m(y.id),className:"absolute top-2 right-2 bg-white/90 hover:bg-white rounded-full p-2 shadow-md",children:s.jsx(Ot,{className:"w-4 h-4 text-red-500"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:y.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",y.author]}),s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",y.price.toFixed(2),"/",y.duration]})}),s.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Added ",y.addedDate]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:()=>t?.(y.id),variant:"outline",className:"flex-1",disabled:!y.available,children:[s.jsx(Ur,{className:"w-4 h-4 mr-2"}),"View"]}),y.available&&s.jsx(J,{onClick:()=>x(y.id),className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Rent Now"})]})]})]},y.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx($i,{className:"w-20 h-20 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:"No books in your rent wishlist"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding books you want to rent"}),s.jsx(J,{onClick:e,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Browse Books"})]})})]}),w.length>0&&s.jsxs("div",{className:"mt-12",children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-6",children:"Recommended For You"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(y=>s.jsxs(Et,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t?.(y.id),children:[s.jsx(ol,{src:y.image,alt:y.title,className:"w-full h-56 object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:y.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",y.author]}),s.jsx("p",{className:"text-xs text-gray-500 italic mb-2",children:y.reason}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",y.price]}),s.jsx(J,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600",children:s.jsx($i,{className:"w-5 h-5"})})]})]})]},y.id))})]})]})]})}function qU({onBack:n,isLoggedIn:e}){const[t,r]=_.useState(""),[i,c]=_.useState("all"),u=[{id:"1",name:"Dr. Sarah Johnson",subject:"Mathematics",specialization:"Calculus & Algebra",rating:4.9,reviews:342,students:1200,hourlyRate:45,avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&q=80",verified:!0,experience:"10+ years",availability:"Available"},{id:"2",name:"Prof. Michael Chen",subject:"Physics",specialization:"Quantum Mechanics & Thermodynamics",rating:4.8,reviews:287,students:890,hourlyRate:50,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&q=80",verified:!0,experience:"15+ years",availability:"Available"},{id:"3",name:"Emily Rodriguez",subject:"English Literature",specialization:"Essay Writing & Literary Analysis",rating:4.7,reviews:198,students:650,hourlyRate:35,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&q=80",verified:!0,experience:"7+ years",availability:"Limited Slots"},{id:"4",name:"James Wilson",subject:"Computer Science",specialization:"Programming & Data Structures",rating:4.9,reviews:421,students:1500,hourlyRate:55,avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400&q=80",verified:!0,experience:"12+ years",availability:"Available"},{id:"5",name:"Dr. Lisa Anderson",subject:"Chemistry",specialization:"Organic & Inorganic Chemistry",rating:4.8,reviews:267,students:780,hourlyRate:48,avatar:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&q=80",verified:!0,experience:"9+ years",availability:"Available"},{id:"6",name:"David Kim",subject:"Economics",specialization:"Microeconomics & Macroeconomics",rating:4.6,reviews:156,students:520,hourlyRate:40,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&q=80",verified:!0,experience:"6+ years",availability:"Available"}],f=[{id:"s1",tutor:"Dr. Sarah Johnson",subject:"Calculus II",date:"Today",time:"3:00 PM - 4:00 PM",type:"Live Session"},{id:"s2",tutor:"Prof. Michael Chen",subject:"Quantum Mechanics",date:"Tomorrow",time:"2:00 PM - 3:30 PM",type:"Live Session"}],m=[{id:"all",label:"All Subjects",icon:ar},{id:"math",label:"Mathematics",icon:_x},{id:"science",label:"Science",icon:ar},{id:"english",label:"English",icon:ar},{id:"cs",label:"Computer Science",icon:ar}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white shadow-md",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-white/90 hover:text-white mb-4",children:[s.jsx(Wr,{className:"w-5 h-5"}),s.jsx("span",{children:"Back"})]}),s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:s.jsx(_x,{className:"w-10 h-10"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl mb-2",children:"Online Tuition Hub"}),s.jsx("p",{className:"text-white/90",children:"Connect with expert tutors for personalized learning"})]})]}),s.jsxs("div",{className:"relative max-w-2xl",children:[s.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by subject, tutor name, or topic...",value:t,onChange:x=>r(x.target.value),className:"pl-12 h-14 bg-white border-0"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx(_x,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"500+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Expert Tutors"})]}),s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx(gn,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"10K+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Students"})]}),s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx(ar,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"50+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Subjects"})]}),s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx(lc,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"4.8"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]}),e&&f.length>0&&s.jsxs(Et,{className:"p-6 mb-8 bg-gradient-to-r from-[#C4A672]/10 to-transparent",children:[s.jsxs("h3",{className:"text-[#2C3E50] text-xl mb-4 flex items-center gap-2",children:[s.jsx(Gs,{className:"w-6 h-6 text-[#C4A672]"}),"Your Upcoming Sessions"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(x=>s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-lg flex items-center justify-center",children:s.jsx(Jx,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50]",children:x.subject}),s.jsxs("p",{className:"text-sm text-gray-600",children:["with ",x.tutor]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.date,"  ",x.time]})]}),s.jsx(J,{size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355]",children:"Join"})]},x.id))})]}),s.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2",children:m.map(x=>{const w=x.icon;return s.jsxs(J,{onClick:()=>c(x.id),variant:i===x.id?"default":"outline",className:i===x.id?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:[s.jsx(w,{className:"w-4 h-4 mr-2"}),x.label]},x.id)})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-[#2C3E50] text-2xl",children:["Available Tutors (",u.length,")"]}),s.jsxs(J,{variant:"outline",children:[s.jsx(Gv,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(x=>s.jsx(Et,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ol,{src:x.avatar,alt:x.name,className:"w-16 h-16 rounded-full object-cover"}),x.verified&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:s.jsx("span",{className:"text-white text-xs",children:""})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50]",children:x.name}),s.jsx("p",{className:"text-sm text-gray-600",children:x.subject}),s.jsx(Xe,{variant:x.availability==="Available"?"default":"secondary",className:"mt-1",children:x.availability})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x.specialization}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 text-yellow-500 mb-1",children:[s.jsx(lc,{className:"w-4 h-4 fill-yellow-500"}),s.jsx("span",{className:"text-sm text-[#2C3E50]",children:x.rating})]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[x.reviews," reviews"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[s.jsx(gn,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-sm text-[#2C3E50]",children:x.students})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"students"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[s.jsx(ip,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-sm text-[#2C3E50]",children:x.experience})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"experience"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Starting at"}),s.jsxs("p",{className:"text-[#C4A672] text-xl",children:["$",x.hourlyRate,"/hr"]})]}),s.jsx(J,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:!e,children:e?"Book Session":"Login to Book"})]})]})},x.id))})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl text-center mb-8",children:"How It Works"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-[#C4A672]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ln,{className:"w-8 h-8 text-[#C4A672]"})}),s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"1. Find Your Tutor"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Browse through our verified tutors and find the perfect match for your learning needs"})]}),s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-[#C4A672]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Gs,{className:"w-8 h-8 text-[#C4A672]"})}),s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"2. Book a Session"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Schedule a convenient time slot and choose between one-on-one or group sessions"})]}),s.jsxs(Et,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-[#C4A672]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Jx,{className:"w-8 h-8 text-[#C4A672]"})}),s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"3. Start Learning"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Join live video sessions and get personalized guidance from expert tutors"})]})]})]})]})]})}function GU({amount:n,type:e,itemTitle:t,onSuccess:r,onCancel:i}){const[c,u]=_.useState("card"),[f,m]=_.useState(!1),[x,w]=_.useState(!1),[y,j]=_.useState(""),[S,C]=_.useState(""),[A,M]=_.useState(""),[R,z]=_.useState(""),[W,G]=_.useState(""),K=q=>{const se=q.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),be=se&&se[0]||"",ie=[];for(let we=0,Z=be.length;we<Z;we+=4)ie.push(be.substring(we,we+4));return ie.length?ie.join(" "):q},ee=q=>{const H=q.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return H.length>=2?H.slice(0,2)+"/"+H.slice(2,4):H},D=q=>{const H=K(q.target.value);H.replace(/\s/g,"").length<=16&&C(H)},P=q=>{const H=ee(q.target.value);H.replace("/","").length<=4&&z(H)},V=q=>{const H=q.target.value.replace(/[^0-9]/gi,"");H.length<=4&&G(H)},B=async q=>{q.preventDefault(),m(!0),setTimeout(()=>{const H="TXN"+Math.random().toString(36).substr(2,9).toUpperCase();j(H),m(!1),w(!0)},2e3)},U=()=>{r(y)};return x?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Et,{className:"w-full max-w-md p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ll,{className:"w-12 h-12 text-green-600"})}),s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:"Payment Successful!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your transaction has been completed"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Transaction ID:"}),s.jsx("span",{className:"text-[#2C3E50]",children:y})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Item:"}),s.jsx("span",{className:"text-[#2C3E50]",children:t})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Type:"}),s.jsx("span",{className:"text-[#2C3E50] capitalize",children:e})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Amount:"}),s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",n.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 mb-6",children:[s.jsx(Qx,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Secure transaction via SSL encryption"})]}),s.jsx(J,{onClick:U,className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Continue"})]})}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:s.jsxs(Et,{className:"w-full max-w-2xl my-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white p-6 rounded-t-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl",children:"Secure Checkout"}),s.jsx("button",{onClick:i,className:"text-white/80 hover:text-white",children:s.jsx(Ot,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-white/90 text-sm",children:[s.jsx(fs,{className:"w-4 h-4"}),s.jsx("span",{children:"256-bit SSL Encrypted Payment"})]})]}),s.jsxs("form",{onSubmit:B,className:"p-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Summary"}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600",children:t}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",n.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Processing Fee"}),s.jsx("span",{className:"text-[#2C3E50]",children:"$0.00"})]}),s.jsxs("div",{className:"border-t pt-2 mt-2 flex justify-between items-center",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total Amount"}),s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",n.toFixed(2)]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(ke,{className:"mb-3 block",children:"Select Payment Method"}),s.jsx(Pv,{value:c,onValueChange:q=>u(q),children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${c==="card"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsx(rc,{value:"card",id:"card",className:"sr-only"}),s.jsxs("label",{htmlFor:"card",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx(Pu,{className:`w-6 h-6 ${c==="card"?"text-[#C4A672]":"text-gray-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Credit/Debit Card"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Visa, Mastercard, Amex"})]}),s.jsx("img",{src:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='25' viewBox='0 0 40 25'%3E%3Crect fill='%236772E5' width='40' height='25' rx='3'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-size='10' font-weight='bold'%3EStripe%3C/text%3E%3C/svg%3E",alt:"Stripe",className:"h-6"})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${c==="paypal"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsx(rc,{value:"paypal",id:"paypal",className:"sr-only"}),s.jsxs("label",{htmlFor:"paypal",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("div",{className:"w-6 h-6 bg-[#0070BA] rounded flex items-center justify-center text-white text-xs",children:"P"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"PayPal"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Fast & Secure"})]})]})]})]})})]}),c==="card"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"cardNumber",children:"Card Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:S,onChange:D,className:"pr-10",required:!0}),s.jsx(Pu,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"cardName",children:"Cardholder Name"}),s.jsx(Ie,{id:"cardName",type:"text",placeholder:"John Doe",value:A,onChange:q=>M(q.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"expiry",children:"Expiry Date"}),s.jsx(Ie,{id:"expiry",type:"text",placeholder:"MM/YY",value:R,onChange:P,required:!0})]}),s.jsxs("div",{children:[s.jsx(ke,{htmlFor:"cvv",children:"CVV"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"cvv",type:"password",placeholder:"123",value:W,onChange:V,maxLength:4,required:!0}),s.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]})]}),c==="paypal"&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:s.jsx("p",{className:"text-sm text-blue-800",children:"You will be redirected to PayPal to complete your payment securely."})}),s.jsxs("div",{className:"flex items-center justify-center gap-6 my-6 py-4 border-y border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Qx,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{children:"SSL Secure"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(fs,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{children:"PCI Compliant"})]}),s.jsxs(Xe,{variant:"outline",className:"text-xs",children:[s.jsx(ll,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{type:"button",onClick:i,variant:"outline",className:"flex-1",disabled:f,children:"Cancel"}),s.jsx(J,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:f,children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-4 h-4 mr-2"}),"Pay $",n.toFixed(2)]})})]}),s.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Your payment information is encrypted and secure. We never store your card details."})]})]})})}function KU({orderId:n="ORD123456",estimatedDelivery:e="Jan 18, 2024",onClose:t,onBack:r}){const[i]=_.useState([{id:1,title:"Order Confirmed",description:"Your order has been placed successfully",timestamp:"2024-01-15 10:30 AM",status:"completed",icon:cr},{id:2,title:"Package Prepared",description:"Seller is preparing your package",timestamp:"2024-01-15 02:45 PM",status:"completed",icon:$r},{id:3,title:"Out for Delivery",description:"Package is on the way to your location",timestamp:"2024-01-16 09:00 AM",status:"active",icon:Lu,location:"Distribution Center, Main Street"},{id:4,title:"Delivered",description:"Package will be delivered to your address",timestamp:"Expected: "+e,status:"pending",icon:In}]),[c]=_.useState({name:"Express Logistics",phone:"+1 (555) 123-4567",email:"support@expresslogistics.com",trackingNumber:"EXP"+Math.random().toString(36).substr(2,9).toUpperCase()}),u=i.find(f=>f.status==="active");return s.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[s.jsxs(Et,{className:"p-6 mb-6 bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl mb-2",children:"Delivery Tracking"}),s.jsxs("p",{className:"text-white/90",children:["Order ID: ",n]})]}),s.jsx(Xe,{className:"bg-white text-[#C4A672]",children:u?.title||"Processing"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ip,{className:"w-5 h-5"}),s.jsxs("span",{children:["Estimated Delivery: ",e]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(Et,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-6",children:"Shipping Timeline"}),s.jsx("div",{className:"space-y-6",children:i.map((f,m)=>{const x=f.icon,w=f.status==="completed",y=f.status==="active";return f.status,s.jsxs("div",{className:"relative",children:[m<i.length-1&&s.jsx("div",{className:`absolute left-5 top-12 w-0.5 h-full ${w?"bg-[#C4A672]":"bg-gray-200"}`}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${w?"bg-[#C4A672] text-white":y?"bg-blue-500 text-white animate-pulse":"bg-gray-200 text-gray-400"}`,children:s.jsx(x,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 pb-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsx("h4",{className:`${w||y?"text-[#2C3E50]":"text-gray-400"}`,children:f.title}),y&&s.jsx(Xe,{variant:"outline",className:"text-blue-600 border-blue-600",children:"In Progress"})]}),s.jsx("p",{className:`text-sm mb-1 ${w||y?"text-gray-600":"text-gray-400"}`,children:f.description}),s.jsx("p",{className:"text-xs text-gray-500",children:f.timestamp}),f.location&&y&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-blue-600",children:[s.jsx(In,{className:"w-4 h-4"}),s.jsxs("span",{children:["Current Location: ",f.location]})]})]})]})]},f.id)})})]}),s.jsxs(Et,{className:"p-6 mt-6",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-4",children:"Live Tracking Map"}),s.jsx("div",{className:"bg-gray-100 rounded-lg overflow-hidden",style:{height:"300px"},children:s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50"}),s.jsx("svg",{className:"absolute inset-0 w-full h-full",children:s.jsx("path",{d:"M 50 250 Q 150 200, 250 150 T 450 50",stroke:"#C4A672",strokeWidth:"3",strokeDasharray:"10,5",fill:"none",className:"animate-pulse"})}),s.jsx("div",{className:"absolute left-12 bottom-12 w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center shadow-lg",children:s.jsx($r,{className:"w-4 h-4 text-white"})}),s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:s.jsx(Lu,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"absolute right-12 top-12 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(In,{className:"w-4 h-4 text-white"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-4 text-center",children:[s.jsx(In,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Live tracking map"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Updates every 30 minutes"})]})})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Et,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Courier Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Courier Service"}),s.jsx("p",{className:"text-[#2C3E50]",children:c.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tracking Number"}),s.jsx("p",{className:"text-[#2C3E50] font-mono text-sm",children:c.trackingNumber})]}),s.jsxs("div",{className:"pt-4 border-t space-y-3",children:[s.jsxs(J,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href=`tel:${c.phone}`,children:[s.jsx(ih,{className:"w-4 h-4 mr-2"}),c.phone]}),s.jsxs(J,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href=`mailto:${c.email}`,children:[s.jsx(_c,{className:"w-4 h-4 mr-2"}),"Contact Support"]})]})]})]}),s.jsxs(Et,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Delivery Address"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"John Doe"}),s.jsx("p",{className:"text-gray-600",children:"123 Main Street, Apt 4B"}),s.jsx("p",{className:"text-gray-600",children:"New York, NY 10001"}),s.jsx("p",{className:"text-gray-600",children:"United States"})]})]}),s.jsxs(Et,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Need Help?"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(J,{variant:"outline",className:"w-full justify-between",children:["Report an Issue",s.jsx(Xo,{className:"w-4 h-4"})]}),s.jsxs(J,{variant:"outline",className:"w-full justify-between",children:["Change Address",s.jsx(Xo,{className:"w-4 h-4"})]}),s.jsxs(J,{variant:"outline",className:"w-full justify-between",children:["Delivery Instructions",s.jsx(Xo,{className:"w-4 h-4"})]})]})]})]})]})]})}function ZU({onScanComplete:n,onCancel:e}){const[t,r]=_.useState(!1),[i,c]=_.useState(""),[u,f]=_.useState(!1),m=()=>{r(!0),setTimeout(()=>{const x="978-"+Math.floor(Math.random()*1e10).toString().padStart(10,"0");c(x),r(!1),f(!0),setTimeout(()=>{n(x)},1500)},3e3)};return s.jsxs("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:[s.jsxs(Et,{className:"w-full max-w-lg bg-white",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white p-6 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl",children:"Scan ISBN Barcode"}),s.jsx("button",{onClick:e,className:"text-white/80 hover:text-white",children:s.jsx(Ot,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden mb-6",style:{aspectRatio:"4/3"},children:[!t&&!u&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[s.jsx(E_,{className:"w-16 h-16 mb-4 text-white/60"}),s.jsx("p",{className:"text-sm text-white/80",children:"Position the barcode in the frame"})]}),t&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900"}),s.jsxs("div",{className:"relative z-10 w-64 h-40 border-4 border-[#C4A672] rounded-lg",children:[s.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-white/30 rounded-lg animate-pulse"}),s.jsx("div",{className:"absolute left-0 right-0 h-1 bg-[#C4A672] shadow-lg shadow-[#C4A672]/50 animate-scan"})]}),s.jsx("p",{className:"text-white mt-6 animate-pulse",children:"Scanning..."})]}),u&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-green-600/20",children:[s.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mb-4",children:s.jsx(ll,{className:"w-12 h-12 text-white"})}),s.jsx("p",{className:"text-white text-lg",children:"Barcode Scanned!"}),s.jsx("p",{className:"text-white/80 text-sm mt-2",children:i})]}),s.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 border-t-2 border-l-2 border-[#C4A672]"}),s.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 border-t-2 border-r-2 border-[#C4A672]"}),s.jsx("div",{className:"absolute bottom-4 left-4 w-8 h-8 border-b-2 border-l-2 border-[#C4A672]"}),s.jsx("div",{className:"absolute bottom-4 right-4 w-8 h-8 border-b-2 border-r-2 border-[#C4A672]"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(bh,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"mb-2",children:"Tips for best results:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"Ensure good lighting"}),s.jsx("li",{children:"Hold the book steady"}),s.jsx("li",{children:"Position barcode within the frame"}),s.jsx("li",{children:"Keep camera focused"})]})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{onClick:e,variant:"outline",className:"flex-1",disabled:t,children:"Cancel"}),!t&&!u&&s.jsxs(J,{onClick:m,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(E_,{className:"w-4 h-4 mr-2"}),"Start Scanning"]}),t&&s.jsxs(J,{onClick:()=>r(!1),variant:"outline",className:"flex-1",children:[s.jsx(yP,{className:"w-4 h-4 mr-2"}),"Retry"]})]})]})]}),s.jsx("style",{children:`
        @keyframes scan {
          0% {
            top: 0;
          }
          50% {
            top: 100%;
          }
          100% {
            top: 0;
          }
        }
        .animate-scan {
          animation: scan 2s linear infinite;
        }
      `})]})}function YU({title:n,description:e,duration:t="15:30",onClose:r,downloadable:i=!1}){const[c,u]=_.useState(!1),[f,m]=_.useState(!1),[x,w]=_.useState([30]),[y,j]=_.useState([70]);return s.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"w-full max-w-5xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"text-white",children:[s.jsx("h2",{className:"text-2xl mb-1",children:n}),e&&s.jsx("p",{className:"text-white/70 text-sm",children:e})]}),s.jsx("button",{onClick:r,className:"text-white/80 hover:text-white",children:s.jsx(Ot,{className:"w-8 h-8"})})]}),s.jsx(Et,{className:"bg-black overflow-hidden",children:s.jsxs("div",{className:"relative",style:{aspectRatio:"16/9"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4 cursor-pointer hover:bg-white/20 transition-colors",onClick:()=>u(!c),children:c?s.jsx(A_,{className:"w-12 h-12 text-white"}):s.jsx(k_,{className:"w-12 h-12 text-white ml-2"})}),s.jsx("p",{className:"text-white/70 text-sm",children:"Video Lecture Player"}),s.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Placeholder for embedded video content"})]})}),c&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/60"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(yh,{value:x,onValueChange:w,max:100,step:1,className:"w-full cursor-pointer"}),s.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-white/70",children:[s.jsxs("span",{children:[Math.floor(x[0]/100*15),":",String(Math.floor(x[0]/100*30%60)).padStart(2,"0")]}),s.jsx("span",{children:t})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>u(!c),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-colors",children:c?s.jsx(A_,{className:"w-5 h-5"}):s.jsx(k_,{className:"w-5 h-5 ml-0.5"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>m(!f),className:"text-white/80 hover:text-white",children:f?s.jsx(QP,{className:"w-5 h-5"}):s.jsx(ZP,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-24 hidden md:block",children:s.jsx(yh,{value:y,onValueChange:j,max:100,step:1,className:"cursor-pointer"})})]}),s.jsxs("span",{className:"text-white/80 text-sm hidden sm:inline",children:[Math.floor(x[0]/100*15),":",String(Math.floor(x[0]/100*30%60)).padStart(2,"0")," / ",t]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[i&&s.jsx("button",{className:"text-white/80 hover:text-white p-2",children:s.jsx(Iu,{className:"w-5 h-5"})}),s.jsx("button",{className:"text-white/80 hover:text-white p-2",children:s.jsx(Nh,{className:"w-5 h-5"})}),s.jsx("button",{className:"text-white/80 hover:text-white p-2",children:s.jsx(tP,{className:"w-5 h-5"})})]})]})]})]})}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Et,{className:"p-4 bg-white/10 border-white/20 text-white",children:[s.jsx("p",{className:"text-sm text-white/70 mb-1",children:"Quality"}),s.jsx("p",{children:"1080p HD"})]}),s.jsxs(Et,{className:"p-4 bg-white/10 border-white/20 text-white",children:[s.jsx("p",{className:"text-sm text-white/70 mb-1",children:"Duration"}),s.jsxs("p",{children:[t," minutes"]})]}),s.jsxs(Et,{className:"p-4 bg-white/10 border-white/20 text-white",children:[s.jsx("p",{className:"text-sm text-white/70 mb-1",children:"Format"}),s.jsx("p",{children:"MP4 Video"})]})]}),i&&s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsxs(J,{className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Iu,{className:"w-4 h-4 mr-2"}),"Download Video"]}),s.jsx(J,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:"Share"})]})]})})}function QU({title:n,author:e="BookOra",pages:t=12,onClose:r,downloadable:i=!0}){const[c,u]=_.useState(1),[f,m]=_.useState(100),x=()=>{f<200&&m(f+25)},w=()=>{f>50&&m(f-25)},y=()=>{alert(`Downloading PDF...

In a production app, this would trigger a PDF download.`)},j=()=>{alert(`Opening print dialog...

In a production app, this would open the browser print dialog.`)};return s.jsxs("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-50",children:[s.jsx("div",{className:"bg-[#1E1E1E] border-b border-gray-700 px-6 py-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Kx,{className:"w-8 h-8 text-[#C4A672]"}),s.jsxs("div",{className:"text-white",children:[s.jsx("h2",{className:"text-xl",children:n}),s.jsxs("p",{className:"text-sm text-gray-400",children:["by ",e]})]}),s.jsx(Xe,{variant:"outline",className:"border-gray-600 text-gray-300",children:"PDF Document"})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:s.jsx(Ot,{className:"w-6 h-6"})})]})}),s.jsx("div",{className:"bg-[#2A2A2A] border-b border-gray-700 px-6 py-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>u(Math.max(1,c-1)),disabled:c===1,className:"text-white hover:bg-gray-700",children:s.jsx(rp,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-white text-sm",children:["Page ",c," of ",t]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>u(Math.min(t,c+1)),disabled:c===t,className:"text-white hover:bg-gray-700",children:s.jsx(Xo,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(J,{variant:"ghost",size:"sm",onClick:w,disabled:f<=50,className:"text-white hover:bg-gray-700",children:s.jsx(rI,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-white text-sm w-16 text-center",children:[f,"%"]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:x,disabled:f>=200,className:"text-white hover:bg-gray-700",children:s.jsx(nI,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(J,{variant:"ghost",size:"sm",onClick:j,className:"text-white hover:bg-gray-700",children:[s.jsx(gP,{className:"w-4 h-4 mr-2"}),"Print"]}),s.jsxs(J,{variant:"ghost",size:"sm",className:"text-white hover:bg-gray-700",children:[s.jsx(CP,{className:"w-4 h-4 mr-2"}),"Share"]}),i&&s.jsxs(J,{onClick:y,size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Iu,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto bg-gray-800 p-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx(Et,{className:"bg-white shadow-2xl",style:{transform:`scale(${f/100})`,transformOrigin:"top center",transition:"transform 0.2s"},children:s.jsx("div",{className:"p-12",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-b pb-6",children:[s.jsx("h1",{className:"text-4xl text-[#2C3E50] mb-2",children:n}),s.jsxs("p",{className:"text-gray-600",children:["Page ",c]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-2xl text-[#2C3E50]",children:["Chapter ",c,": Introduction"]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}),s.jsx("div",{className:"bg-gray-100 rounded-lg p-4 my-6",children:s.jsx("pre",{className:"text-sm text-gray-800 overflow-x-auto",children:`function example() {
  console.log("Sample code block");
  return true;
}`})}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mt-6",children:"Key Points"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[s.jsx("li",{children:"Important concept number one with detailed explanation"}),s.jsx("li",{children:"Key takeaway from this section"}),s.jsx("li",{children:"Critical information to remember"}),s.jsx("li",{children:"Additional notes and references"})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed mt-6",children:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo."}),s.jsx("div",{className:"bg-gray-200 rounded-lg p-8 my-6 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(Kx,{className:"w-16 h-16 mx-auto mb-2"}),s.jsxs("p",{children:["Figure ",c,".1: Diagram or Image"]})]})}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt."})]}),s.jsxs("div",{className:"border-t pt-6 mt-8 text-center text-sm text-gray-500",children:[s.jsxs("p",{children:[n," - Page ",c," of ",t]}),s.jsxs("p",{className:"mt-1",children:[" 2024 ",e,". All rights reserved."]})]})]})})})})}),s.jsx("div",{className:"bg-[#1E1E1E] border-t border-gray-700 px-6 py-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-sm text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("span",{children:["Total Pages: ",t]}),s.jsx("span",{children:"File Size: 2.4 MB"}),s.jsx("span",{children:"Format: PDF"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Document loaded successfully"})]})]})})]})}function XU({title:n="Error",message:e,onClose:t,onRetry:r}){return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Et,{className:"w-full max-w-md p-6 animate-in fade-in slide-in-from-bottom-4 duration-200",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(bh,{className:"w-10 h-10 text-red-600"})}),s.jsx("h2",{className:"text-[#2C3E50] text-2xl text-center mb-3",children:n}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:e}),s.jsxs("div",{className:"flex gap-3",children:[r&&s.jsxs(J,{onClick:r,variant:"outline",className:"flex-1",children:[s.jsx(t1,{className:"w-4 h-4 mr-2"}),"Retry"]}),s.jsx(J,{onClick:t,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Close"})]})]})})}function JU({message:n="Loading...",fullScreen:e=!1}){return e?s.jsx("div",{className:"fixed inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(T_,{className:"w-12 h-12 text-[#C4A672] animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-[#2C3E50]",children:n})]})}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(T_,{className:"w-10 h-10 text-[#C4A672] animate-spin mb-4"}),s.jsx("p",{className:"text-gray-600",children:n})]})}function e$(){const[n,e]=_.useState("home"),[t,r]=_.useState(!1),[i,c]=_.useState(null),[u,f]=_.useState(null),[m,x]=_.useState(null),[w,y]=_.useState(null),[j,S]=_.useState(!1),[C,A]=_.useState(null),[M,R]=_.useState(!1),[z,W]=_.useState(!1),[G,K]=_.useState(!1),[ee,D]=_.useState(!1),[P,V]=_.useState(""),[B,U]=_.useState(!1),[q,H]=_.useState(null);_.useEffect(()=>{const je=E6(Jt,Ee=>{c(Ee?"user":null)});return()=>je()},[]);const se=()=>{c("admin"),e("admin-dashboard")},be=()=>{c("user"),e("home")},ie=()=>{r(!0)},we=()=>{c(null),e("login"),r(!1)},Z=()=>{r(!1)},ce=()=>{e("communities-browse")},ue=je=>{f(je),e("community-detail")},X=()=>{e("communities-create")},me=je=>{f(je),e("community-detail")};return n==="admin-login"?s.jsx(V9,{onLogin:se,onBack:()=>e("home")}):n==="admin-dashboard"?s.jsx(eB,{onLogout:ie}):n==="user-dashboard"?s.jsxs(s.Fragment,{children:[s.jsx(zB,{onLogout:ie,onNavigateToMarketplace:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToCommunities:ce,onNavigateToAdminLogin:()=>e("admin-login")}),t&&s.jsx(ZN,{onConfirm:we,onCancel:Z})]}):n==="rent"?s.jsx(GB,{onClose:()=>e("home")}):n==="communities-browse"?s.jsx(KB,{onNavigateToDetail:ue,onNavigateToCreate:X,isLoggedIn:i==="user"}):n==="communities-create"?s.jsx(ZB,{onBack:()=>e("communities-browse"),onSuccess:me,userId:"current-user-id",userName:"Current User"}):n==="community-detail"&&u?s.jsx(rz,{communityId:u,onBack:()=>e("communities-browse"),onNavigateToChat:je=>{f(je),e("group-chat")},isAdmin:!1,isMember:!0,userId:"current-user-id"}):n==="group-chat"&&u?s.jsx(az,{communityId:u,communityName:"Science Fiction Lovers",onBack:()=>e("community-detail"),currentUserId:"current-user-id"}):n==="private-chat"&&w?s.jsx(FU,{otherUser:w.otherUser,bookContext:w.bookContext,onBack:()=>e("marketplace"),currentUserId:"current-user-id"}):n==="announcements"?s.jsx(zU,{isAdmin:i==="admin",onBack:()=>e("home")}):n==="about"?s.jsxs(s.Fragment,{children:[s.jsx(du,{isLoggedIn:i==="user",currentPage:n,onNavigateHome:()=>e("home"),onNavigateBuy:()=>e("marketplace"),onNavigateRent:()=>e("rent"),onNavigateSell:()=>e("sell"),onNavigateCommunities:ce,onNavigateLogin:()=>e("login"),onNavigateRegister:()=>e("signup"),onNavigateProfile:()=>e("user-dashboard"),onLogout:ie}),s.jsx($U,{onBack:()=>e("home"),onNavigateToCommunities:ce}),s.jsx(hu,{onNavigateToAbout:()=>e("about"),onNavigateToBuy:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToAnnouncements:()=>e("announcements")})]}):n==="advanced-search"?s.jsxs(s.Fragment,{children:[s.jsx(du,{isLoggedIn:i==="user",currentPage:n,onNavigateHome:()=>e("home"),onNavigateBuy:()=>e("marketplace"),onNavigateRent:()=>e("rent"),onNavigateSell:()=>e("sell"),onNavigateCommunities:ce,onNavigateSearch:()=>e("advanced-search"),onNavigateWishlist:()=>e("wishlist"),onNavigateTuition:()=>e("tuition"),onNavigateAnnouncements:()=>e("announcements"),onNavigateAbout:()=>e("about"),onNavigateLogin:()=>e("login"),onNavigateRegister:()=>e("signup"),onNavigateProfile:()=>e("user-dashboard"),onLogout:ie}),s.jsx(HU,{onBack:()=>e("home"),onNavigateToBook:je=>{x(je),e("marketplace")}}),s.jsx(hu,{onNavigateToAbout:()=>e("about"),onNavigateToBuy:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToAnnouncements:()=>e("announcements")})]}):n==="wishlist"?s.jsxs(s.Fragment,{children:[s.jsx(du,{isLoggedIn:i==="user",currentPage:n,onNavigateHome:()=>e("home"),onNavigateBuy:()=>e("marketplace"),onNavigateRent:()=>e("rent"),onNavigateSell:()=>e("sell"),onNavigateCommunities:ce,onNavigateSearch:()=>e("advanced-search"),onNavigateWishlist:()=>e("wishlist"),onNavigateTuition:()=>e("tuition"),onNavigateAnnouncements:()=>e("announcements"),onNavigateAbout:()=>e("about"),onNavigateLogin:()=>e("login"),onNavigateRegister:()=>e("signup"),onNavigateProfile:()=>e("user-dashboard"),onLogout:ie}),s.jsx(WU,{onBack:()=>e("home"),onNavigateToMarketplace:()=>e("marketplace"),onNavigateToBook:je=>{x(je),e("marketplace")}}),s.jsx(hu,{onNavigateToAbout:()=>e("about"),onNavigateToBuy:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToAnnouncements:()=>e("announcements")})]}):n==="tuition"?s.jsxs(s.Fragment,{children:[s.jsx(du,{isLoggedIn:i==="user",currentPage:n,onNavigateHome:()=>e("home"),onNavigateBuy:()=>e("marketplace"),onNavigateRent:()=>e("rent"),onNavigateSell:()=>e("sell"),onNavigateCommunities:ce,onNavigateSearch:()=>e("advanced-search"),onNavigateWishlist:()=>e("wishlist"),onNavigateTuition:()=>e("tuition"),onNavigateAnnouncements:()=>e("announcements"),onNavigateAbout:()=>e("about"),onNavigateLogin:()=>e("login"),onNavigateRegister:()=>e("signup"),onNavigateProfile:()=>e("user-dashboard"),onLogout:ie}),s.jsx(qU,{onBack:()=>e("home"),isLoggedIn:i==="user"}),s.jsx(hu,{onNavigateToAbout:()=>e("about"),onNavigateToBuy:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToAnnouncements:()=>e("announcements")})]}):n==="delivery-tracking"?s.jsxs(s.Fragment,{children:[s.jsx(du,{isLoggedIn:i==="user",currentPage:n,onNavigateHome:()=>e("home"),onNavigateBuy:()=>e("marketplace"),onNavigateRent:()=>e("rent"),onNavigateSell:()=>e("sell"),onNavigateCommunities:ce,onNavigateSearch:()=>e("advanced-search"),onNavigateWishlist:()=>e("wishlist"),onNavigateTuition:()=>e("tuition"),onNavigateAnnouncements:()=>e("announcements"),onNavigateAbout:()=>e("about"),onNavigateLogin:()=>e("login"),onNavigateRegister:()=>e("signup"),onNavigateProfile:()=>e("user-dashboard"),onLogout:ie}),s.jsx(KU,{onBack:()=>e("home"),orderId:q}),s.jsx(hu,{onNavigateToAbout:()=>e("about"),onNavigateToBuy:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToAnnouncements:()=>e("announcements")})]}):s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(du,{isLoggedIn:i==="user",currentPage:n,onNavigateHome:()=>e("home"),onNavigateBuy:()=>e("marketplace"),onNavigateRent:()=>e("rent"),onNavigateSell:()=>e("sell"),onNavigateCommunities:ce,onNavigateSearch:()=>e("advanced-search"),onNavigateWishlist:()=>e("wishlist"),onNavigateTuition:()=>e("tuition"),onNavigateAnnouncements:()=>e("announcements"),onNavigateAbout:()=>e("about"),onNavigateLogin:()=>e("login"),onNavigateRegister:()=>e("signup"),onNavigateProfile:()=>e("user-dashboard"),onLogout:ie}),s.jsxs("main",{className:"flex-1",children:[n==="home"&&s.jsx(dO,{onNavigateToCommunities:ce,onNavigateToBook:je=>{x(je),e("marketplace")},onNavigateToAnnouncements:()=>e("announcements"),onNavigateToSearch:()=>e("advanced-search"),isLoggedIn:i==="user"}),n==="login"&&s.jsx(QD,{onSwitchToSignUp:()=>e("signup"),onLogin:be}),n==="signup"&&s.jsx(XD,{onSwitchToLogin:()=>e("login"),onSignUp:be}),n==="marketplace"&&s.jsx(O9,{}),n==="sell"&&s.jsx("div",{className:"fixed inset-0 z-50",children:s.jsx(PE,{onClose:()=>e("home")})})]}),s.jsx(hu,{onNavigateToAbout:()=>e("about"),onNavigateToBuy:()=>e("marketplace"),onNavigateToRent:()=>e("rent"),onNavigateToSell:()=>e("sell"),onNavigateToAnnouncements:()=>e("announcements")}),s.jsx(F9,{}),t&&s.jsx(ZN,{onConfirm:we,onCancel:Z}),j&&C&&s.jsx(GU,{amount:C.amount,type:C.type,itemTitle:C.itemTitle,onSuccess:je=>{S(!1),H(je),e("delivery-tracking")},onCancel:()=>S(!1)}),M&&s.jsx(ZU,{onScanComplete:je=>{R(!1)},onCancel:()=>R(!1)}),z&&s.jsx(YU,{title:"Lecture Video",description:"Educational content",onClose:()=>W(!1),downloadable:!0}),G&&s.jsx(QU,{title:"Study Notes",author:"Book Bloom",onClose:()=>K(!1),downloadable:!0}),ee&&s.jsx(XU,{message:P,onClose:()=>D(!1)}),B&&s.jsx(JU,{fullScreen:!0,message:"Please wait..."})]})}zA.createRoot(document.getElementById("root")).render(s.jsx(e$,{}));
