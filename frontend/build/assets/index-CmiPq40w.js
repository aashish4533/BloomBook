function dI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ky(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dv={exports:{}},fh={},hv={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function hI(){if($b)return Et;$b=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),g=Symbol.iterator;function b(J){return J===null||typeof J!="object"?null:(J=g&&J[g]||J["@@iterator"],typeof J=="function"?J:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function k(J,me,we){this.props=J,this.context=me,this.refs=S,this.updater=we||E}k.prototype.isReactComponent={},k.prototype.setState=function(J,me){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,me,"setState")},k.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function R(){}R.prototype=k.prototype;function I(J,me,we){this.props=J,this.context=me,this.refs=S,this.updater=we||E}var z=I.prototype=new R;z.constructor=I,N(z,k.prototype),z.isPureReactComponent=!0;var H=Array.isArray,G=Object.prototype.hasOwnProperty,Q={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function D(J,me,we){var _e,je={},Ee=null,ve=null;if(me!=null)for(_e in me.ref!==void 0&&(ve=me.ref),me.key!==void 0&&(Ee=""+me.key),me)G.call(me,_e)&&!F.hasOwnProperty(_e)&&(je[_e]=me[_e]);var ke=arguments.length-2;if(ke===1)je.children=we;else if(1<ke){for(var Xe=Array(ke),tt=0;tt<ke;tt++)Xe[tt]=arguments[tt+2];je.children=Xe}if(J&&J.defaultProps)for(_e in ke=J.defaultProps,ke)je[_e]===void 0&&(je[_e]=ke[_e]);return{$$typeof:t,type:J,key:Ee,ref:ve,props:je,_owner:Q.current}}function O(J,me){return{$$typeof:t,type:J.type,key:me,ref:J.ref,props:J.props,_owner:J._owner}}function U(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function $(J){var me={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(we){return me[we]})}var K=/\/+/g;function W(J,me){return typeof J=="object"&&J!==null&&J.key!=null?$(""+J.key):me.toString(36)}function ce(J,me,we,_e,je){var Ee=typeof J;(Ee==="undefined"||Ee==="boolean")&&(J=null);var ve=!1;if(J===null)ve=!0;else switch(Ee){case"string":case"number":ve=!0;break;case"object":switch(J.$$typeof){case t:case e:ve=!0}}if(ve)return ve=J,je=je(ve),J=_e===""?"."+W(ve,0):_e,H(je)?(we="",J!=null&&(we=J.replace(K,"$&/")+"/"),ce(je,me,we,"",function(tt){return tt})):je!=null&&(U(je)&&(je=O(je,we+(!je.key||ve&&ve.key===je.key?"":(""+je.key).replace(K,"$&/")+"/")+J)),me.push(je)),1;if(ve=0,_e=_e===""?".":_e+":",H(J))for(var ke=0;ke<J.length;ke++){Ee=J[ke];var Xe=_e+W(Ee,ke);ve+=ce(Ee,me,we,Xe,je)}else if(Xe=b(J),typeof Xe=="function")for(J=Xe.call(J),ke=0;!(Ee=J.next()).done;)Ee=Ee.value,Xe=_e+W(Ee,ke++),ve+=ce(Ee,me,we,Xe,je);else if(Ee==="object")throw me=String(J),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.");return ve}function oe(J,me,we){if(J==null)return J;var _e=[],je=0;return ce(J,_e,"","",function(Ee){return me.call(we,Ee,je++)}),_e}function ne(J){if(J._status===-1){var me=J._result;me=me(),me.then(function(we){(J._status===0||J._status===-1)&&(J._status=1,J._result=we)},function(we){(J._status===0||J._status===-1)&&(J._status=2,J._result=we)}),J._status===-1&&(J._status=0,J._result=me)}if(J._status===1)return J._result.default;throw J._result}var xe={current:null},Z={transition:null},de={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:Q};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Et.Children={map:oe,forEach:function(J,me,we){oe(J,function(){me.apply(this,arguments)},we)},count:function(J){var me=0;return oe(J,function(){me++}),me},toArray:function(J){return oe(J,function(me){return me})||[]},only:function(J){if(!U(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Et.Component=k,Et.Fragment=n,Et.Profiler=i,Et.PureComponent=I,Et.StrictMode=r,Et.Suspense=f,Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Et.act=ie,Et.cloneElement=function(J,me,we){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var _e=N({},J.props),je=J.key,Ee=J.ref,ve=J._owner;if(me!=null){if(me.ref!==void 0&&(Ee=me.ref,ve=Q.current),me.key!==void 0&&(je=""+me.key),J.type&&J.type.defaultProps)var ke=J.type.defaultProps;for(Xe in me)G.call(me,Xe)&&!F.hasOwnProperty(Xe)&&(_e[Xe]=me[Xe]===void 0&&ke!==void 0?ke[Xe]:me[Xe])}var Xe=arguments.length-2;if(Xe===1)_e.children=we;else if(1<Xe){ke=Array(Xe);for(var tt=0;tt<Xe;tt++)ke[tt]=arguments[tt+2];_e.children=ke}return{$$typeof:t,type:J.type,key:je,ref:Ee,props:_e,_owner:ve}},Et.createContext=function(J){return J={$$typeof:u,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:o,_context:J},J.Consumer=J},Et.createElement=D,Et.createFactory=function(J){var me=D.bind(null,J);return me.type=J,me},Et.createRef=function(){return{current:null}},Et.forwardRef=function(J){return{$$typeof:d,render:J}},Et.isValidElement=U,Et.lazy=function(J){return{$$typeof:y,_payload:{_status:-1,_result:J},_init:ne}},Et.memo=function(J,me){return{$$typeof:p,type:J,compare:me===void 0?null:me}},Et.startTransition=function(J){var me=Z.transition;Z.transition={};try{J()}finally{Z.transition=me}},Et.unstable_act=ie,Et.useCallback=function(J,me){return xe.current.useCallback(J,me)},Et.useContext=function(J){return xe.current.useContext(J)},Et.useDebugValue=function(){},Et.useDeferredValue=function(J){return xe.current.useDeferredValue(J)},Et.useEffect=function(J,me){return xe.current.useEffect(J,me)},Et.useId=function(){return xe.current.useId()},Et.useImperativeHandle=function(J,me,we){return xe.current.useImperativeHandle(J,me,we)},Et.useInsertionEffect=function(J,me){return xe.current.useInsertionEffect(J,me)},Et.useLayoutEffect=function(J,me){return xe.current.useLayoutEffect(J,me)},Et.useMemo=function(J,me){return xe.current.useMemo(J,me)},Et.useReducer=function(J,me,we){return xe.current.useReducer(J,me,we)},Et.useRef=function(J){return xe.current.useRef(J)},Et.useState=function(J){return xe.current.useState(J)},Et.useSyncExternalStore=function(J,me,we){return xe.current.useSyncExternalStore(J,me,we)},Et.useTransition=function(){return xe.current.useTransition()},Et.version="18.3.1",Et}var Hb;function Up(){return Hb||(Hb=1,hv.exports=hI()),hv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function fI(){if(Wb)return fh;Wb=1;var t=Up(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,p){var y,g={},b=null,E=null;p!==void 0&&(b=""+p),f.key!==void 0&&(b=""+f.key),f.ref!==void 0&&(E=f.ref);for(y in f)r.call(f,y)&&!o.hasOwnProperty(y)&&(g[y]=f[y]);if(d&&d.defaultProps)for(y in f=d.defaultProps,f)g[y]===void 0&&(g[y]=f[y]);return{$$typeof:e,type:d,key:b,ref:E,props:g,_owner:i.current}}return fh.Fragment=n,fh.jsx=u,fh.jsxs=u,fh}var qb;function mI(){return qb||(qb=1,dv.exports=fI()),dv.exports}var s=mI(),_m={},fv={exports:{}},Cr={},mv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function pI(){return Gb||(Gb=1,(function(t){function e(Z,de){var ie=Z.length;Z.push(de);e:for(;0<ie;){var J=ie-1>>>1,me=Z[J];if(0<i(me,de))Z[J]=de,Z[ie]=me,ie=J;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var de=Z[0],ie=Z.pop();if(ie!==de){Z[0]=ie;e:for(var J=0,me=Z.length,we=me>>>1;J<we;){var _e=2*(J+1)-1,je=Z[_e],Ee=_e+1,ve=Z[Ee];if(0>i(je,ie))Ee<me&&0>i(ve,je)?(Z[J]=ve,Z[Ee]=ie,J=Ee):(Z[J]=je,Z[_e]=ie,J=_e);else if(Ee<me&&0>i(ve,ie))Z[J]=ve,Z[Ee]=ie,J=Ee;else break e}}return de}function i(Z,de){var ie=Z.sortIndex-de.sortIndex;return ie!==0?ie:Z.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],p=[],y=1,g=null,b=3,E=!1,N=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(Z){for(var de=n(p);de!==null;){if(de.callback===null)r(p);else if(de.startTime<=Z)r(p),de.sortIndex=de.expirationTime,e(f,de);else break;de=n(p)}}function H(Z){if(S=!1,z(Z),!N)if(n(f)!==null)N=!0,ne(G);else{var de=n(p);de!==null&&xe(H,de.startTime-Z)}}function G(Z,de){N=!1,S&&(S=!1,R(D),D=-1),E=!0;var ie=b;try{for(z(de),g=n(f);g!==null&&(!(g.expirationTime>de)||Z&&!$());){var J=g.callback;if(typeof J=="function"){g.callback=null,b=g.priorityLevel;var me=J(g.expirationTime<=de);de=t.unstable_now(),typeof me=="function"?g.callback=me:g===n(f)&&r(f),z(de)}else r(f);g=n(f)}if(g!==null)var we=!0;else{var _e=n(p);_e!==null&&xe(H,_e.startTime-de),we=!1}return we}finally{g=null,b=ie,E=!1}}var Q=!1,F=null,D=-1,O=5,U=-1;function $(){return!(t.unstable_now()-U<O)}function K(){if(F!==null){var Z=t.unstable_now();U=Z;var de=!0;try{de=F(!0,Z)}finally{de?W():(Q=!1,F=null)}}else Q=!1}var W;if(typeof I=="function")W=function(){I(K)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,oe=ce.port2;ce.port1.onmessage=K,W=function(){oe.postMessage(null)}}else W=function(){k(K,0)};function ne(Z){F=Z,Q||(Q=!0,W())}function xe(Z,de){D=k(function(){Z(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,ne(G))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var de=3;break;default:de=b}var ie=b;b=de;try{return Z()}finally{b=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,de){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ie=b;b=Z;try{return de()}finally{b=ie}},t.unstable_scheduleCallback=function(Z,de,ie){var J=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?J+ie:J):ie=J,Z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ie+me,Z={id:y++,callback:de,priorityLevel:Z,startTime:ie,expirationTime:me,sortIndex:-1},ie>J?(Z.sortIndex=ie,e(p,Z),n(f)===null&&Z===n(p)&&(S?(R(D),D=-1):S=!0,xe(H,ie-J))):(Z.sortIndex=me,e(f,Z),N||E||(N=!0,ne(G))),Z},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(Z){var de=b;return function(){var ie=b;b=de;try{return Z.apply(this,arguments)}finally{b=ie}}}})(pv)),pv}var Kb;function gI(){return Kb||(Kb=1,mv.exports=pI()),mv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function xI(){if(Zb)return Cr;Zb=1;var t=Up(),e=gI();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,c){u(a,c),u(a+"Capture",c)}function u(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},g={};function b(a){return f.call(g,a)?!0:f.call(y,a)?!1:p.test(a)?g[a]=!0:(y[a]=!0,!1)}function E(a,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function N(a,c,m,w){if(c===null||typeof c>"u"||E(a,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(a,c,m,w,C,T,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=T,this.removeEmptyString=V}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new S(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];k[c]=new S(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new S(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new S(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new S(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new S(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new S(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new S(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new S(a,5,!1,a.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function I(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(R,I);k[c]=new S(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(R,I);k[c]=new S(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(R,I);k[c]=new S(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new S(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new S(a,1,!1,a.toLowerCase(),null,!0,!0)});function z(a,c,m,w){var C=k.hasOwnProperty(c)?k[c]:null;(C!==null?C.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(N(c,m,C,w)&&(m=null),w||C===null?b(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):C.mustUseProperty?a[C.propertyName]=m===null?C.type===3?!1:"":m:(c=C.attributeName,w=C.attributeNamespace,m===null?a.removeAttribute(c):(C=C.type,m=C===3||C===4&&m===!0?"":""+m,w?a.setAttributeNS(w,c,m):a.setAttribute(c,m))))}var H=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),Q=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),$=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function de(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Object.assign,J;function me(a){if(J===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);J=c&&c[1]||""}return`
`+J+a}var we=!1;function _e(a,c){if(!a||we)return"";we=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ge){var w=ge}Reflect.construct(a,[],c)}else{try{c.call()}catch(ge){w=ge}a.call(c.prototype)}else{try{throw Error()}catch(ge){w=ge}a()}}catch(ge){if(ge&&w&&typeof ge.stack=="string"){for(var C=ge.stack.split(`
`),T=w.stack.split(`
`),V=C.length-1,Y=T.length-1;1<=V&&0<=Y&&C[V]!==T[Y];)Y--;for(;1<=V&&0<=Y;V--,Y--)if(C[V]!==T[Y]){if(V!==1||Y!==1)do if(V--,Y--,0>Y||C[V]!==T[Y]){var te=`
`+C[V].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=V&&0<=Y);break}}}finally{we=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?me(a):""}function je(a){switch(a.tag){case 5:return me(a.type);case 16:return me("Lazy");case 13:return me("Suspense");case 19:return me("SuspenseList");case 0:case 2:case 15:return a=_e(a.type,!1),a;case 11:return a=_e(a.type.render,!1),a;case 1:return a=_e(a.type,!0),a;default:return""}}function Ee(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case Q:return"Portal";case O:return"Profiler";case D:return"StrictMode";case W:return"Suspense";case ce:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case $:return(a.displayName||"Context")+".Consumer";case U:return(a._context.displayName||"Context")+".Provider";case K:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case oe:return c=a.displayName||null,c!==null?c:Ee(a.type)||"Memo";case ne:c=a._payload,a=a._init;try{return Ee(a(c))}catch{}}return null}function ve(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(c);case 8:return c===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ke(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Xe(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function tt(a){var c=Xe(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,T=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return C.call(this)},set:function(V){w=""+V,T.call(this,V)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(V){w=""+V},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function yt(a){a._valueTracker||(a._valueTracker=tt(a))}function wt(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return a&&(w=Xe(a)?a.checked?"true":"false":a.value),a=w,a!==m?(c.setValue(a),!0):!1}function Yt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ln(a,c){var m=c.checked;return ie({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function kr(a,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=ke(c.value!=null?c.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function js(a,c){c=c.checked,c!=null&&z(a,"checked",c,!1)}function An(a,c){js(a,c);var m=ke(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Ot(a,c.type,m):c.hasOwnProperty("defaultValue")&&Ot(a,c.type,ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function Pr(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function Ot(a,c,m){(c!=="number"||Yt(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var Xt=Array.isArray;function cs(a,c,m,w){if(a=a.options,c){c={};for(var C=0;C<m.length;C++)c["$"+m[C]]=!0;for(m=0;m<a.length;m++)C=c.hasOwnProperty("$"+a[m].value),a[m].selected!==C&&(a[m].selected=C),C&&w&&(a[m].defaultSelected=!0)}else{for(m=""+ke(m),c=null,C=0;C<a.length;C++){if(a[C].value===m){a[C].selected=!0,w&&(a[C].defaultSelected=!0);return}c!==null||a[C].disabled||(c=a[C])}c!==null&&(c.selected=!0)}}function Nn(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return ie({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Us(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(Xt(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:ke(m)}}function Bo(a,c){var m=ke(c.value),w=ke(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function Jr(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function or(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pi(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?or(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var lr,Ji=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,C){MSApp.execUnsafeLocalFunction(function(){return a(c,m,w,C)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=lr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function us(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(a){Ir.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),cr[c]=cr[a]})});function Rr(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||cr.hasOwnProperty(a)&&cr[a]?(""+c).trim():c+"px"}function ei(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,C=Rr(m,c[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,C):a[m]=C}}var Ii=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cs(a,c){if(c){if(Ii[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function ur(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function ds(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var hr=null,fr=null,qt=null;function ea(a){if(a=oo(a)){if(typeof hr!="function")throw Error(n(280));var c=a.stateNode;c&&(c=wu(c),hr(a.stateNode,a.type,c))}}function rt(a){fr?qt?qt.push(a):qt=[a]:fr=a}function Ht(){if(fr){var a=fr,c=qt;if(qt=fr=null,ea(a),c)for(a=0;a<c.length;a++)ea(c[a])}}function hn(a,c){return a(c)}function Mn(){}var hs=!1;function Jt(a,c,m){if(hs)return a(c,m);hs=!0;try{return hn(a,c,m)}finally{hs=!1,(fr!==null||qt!==null)&&(Mn(),Ht())}}function jn(a,c){var m=a.stateNode;if(m===null)return null;var w=wu(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var $s=!1;if(d)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){$s=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{$s=!1}function es(a,c,m,w,C,T,V,Y,te){var ge=Array.prototype.slice.call(arguments,3);try{c.apply(m,ge)}catch(Se){this.onError(Se)}}var fn=!1,Be=null,ta=!1,Hs=null,ac={onError:function(a){fn=!0,Be=a}};function oc(a,c,m,w,C,T,V,Y,te){fn=!1,Be=null,es.apply(ac,arguments)}function Ua(a,c,m,w,C,T,V,Y,te){if(oc.apply(this,arguments),fn){if(fn){var ge=Be;fn=!1,Be=null}else throw Error(n(198));ta||(ta=!0,Hs=ge)}}function mr(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function ti(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function lc(a){if(mr(a)!==a)throw Error(n(188))}function ou(a){var c=a.alternate;if(!c){if(c=mr(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,w=c;;){var C=m.return;if(C===null)break;var T=C.alternate;if(T===null){if(w=C.return,w!==null){m=w;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===m)return lc(C),a;if(T===w)return lc(C),c;T=T.sibling}throw Error(n(188))}if(m.return!==w.return)m=C,w=T;else{for(var V=!1,Y=C.child;Y;){if(Y===m){V=!0,m=C,w=T;break}if(Y===w){V=!0,w=C,m=T;break}Y=Y.sibling}if(!V){for(Y=T.child;Y;){if(Y===m){V=!0,m=T,w=C;break}if(Y===w){V=!0,w=T,m=C;break}Y=Y.sibling}if(!V)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function lu(a){return a=ou(a),a!==null?$a(a):null}function $a(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=$a(a);if(c!==null)return c;a=a.sibling}return null}var cc=e.unstable_scheduleCallback,Ha=e.unstable_cancelCallback,Wa=e.unstable_shouldYield,pr=e.unstable_requestPaint,Qt=e.unstable_now,Bd=e.unstable_getCurrentPriorityLevel,zo=e.unstable_ImmediatePriority,uc=e.unstable_UserBlockingPriority,qa=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,ni=e.unstable_IdlePriority,na=null,Es=null;function sa(a){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(na,a,void 0,(a.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:gr,Pt=Math.log,fs=Math.LN2;function gr(a){return a>>>=0,a===0?32:31-(Pt(a)/fs|0)|0}var ms=64,si=4194304;function Ue(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function zt(a,c){var m=a.pendingLanes;if(m===0)return 0;var w=0,C=a.suspendedLanes,T=a.pingedLanes,V=m&268435455;if(V!==0){var Y=V&~C;Y!==0?w=Ue(Y):(T&=V,T!==0&&(w=Ue(T)))}else V=m&~C,V!==0?w=Ue(V):T!==0&&(w=Ue(T));if(w===0)return 0;if(c!==0&&c!==w&&(c&C)===0&&(C=w&-w,T=c&-c,C>=T||C===16&&(T&4194240)!==0))return c;if((w&4)!==0&&(w|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)m=31-xt(c),C=1<<m,w|=a[m],c&=~C;return w}function Ri(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(a,c){for(var m=a.suspendedLanes,w=a.pingedLanes,C=a.expirationTimes,T=a.pendingLanes;0<T;){var V=31-xt(T),Y=1<<V,te=C[V];te===-1?((Y&m)===0||(Y&w)!==0)&&(C[V]=Ri(Y,c)):te<=c&&(a.expiredLanes|=Y),T&=~Y}}function ts(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function dc(){var a=ms;return ms<<=1,(ms&4194240)===0&&(ms=64),a}function ra(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function Ws(a,c,m){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-xt(c),a[c]=m}function on(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var C=31-xt(m),T=1<<C;c[C]=0,w[C]=-1,a[C]=-1,m&=~T}}function Lr(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var w=31-xt(m),C=1<<w;C&c|a[w]&c&&(a[w]|=c),m&=~C}}var Nt=0;function Ss(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ka,ii,Za,Ya,ia,xr=!1,aa=[],qs=null,Mr=null,kn=null,Qa=new Map,it=new Map,ln=[],Ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Li(a,c){switch(a){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Qa.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":it.delete(c.pointerId)}}function Gs(a,c,m,w,C,T){return a===null||a.nativeEvent!==T?(a={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:T,targetContainers:[C]},c!==null&&(c=oo(c),c!==null&&ii(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),a)}function Uo(a,c,m,w,C){switch(c){case"focusin":return qs=Gs(qs,a,c,m,w,C),!0;case"dragenter":return Mr=Gs(Mr,a,c,m,w,C),!0;case"mouseover":return kn=Gs(kn,a,c,m,w,C),!0;case"pointerover":var T=C.pointerId;return Qa.set(T,Gs(Qa.get(T)||null,a,c,m,w,C)),!0;case"gotpointercapture":return T=C.pointerId,it.set(T,Gs(it.get(T)||null,a,c,m,w,C)),!0}return!1}function oa(a){var c=ao(a.target);if(c!==null){var m=mr(c);if(m!==null){if(c=m.tag,c===13){if(c=ti(m),c!==null){a.blockedOn=c,ia(a.priority,function(){Za(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function kt(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=eo(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);dr=w,m.target.dispatchEvent(w),dr=null}else return c=oo(m),c!==null&&ii(c),a.blockedOn=m,!1;c.shift()}return!0}function $o(a,c,m){kt(a)&&m.delete(c)}function Xa(){xr=!1,qs!==null&&kt(qs)&&(qs=null),Mr!==null&&kt(Mr)&&(Mr=null),kn!==null&&kt(kn)&&(kn=null),Qa.forEach($o),it.forEach($o)}function en(a,c){a.blockedOn===c&&(a.blockedOn=null,xr||(xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xa)))}function Ts(a){function c(C){return en(C,a)}if(0<aa.length){en(aa[0],a);for(var m=1;m<aa.length;m++){var w=aa[m];w.blockedOn===a&&(w.blockedOn=null)}}for(qs!==null&&en(qs,a),Mr!==null&&en(Mr,a),kn!==null&&en(kn,a),Qa.forEach(c),it.forEach(c),m=0;m<ln.length;m++)w=ln[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<ln.length&&(m=ln[0],m.blockedOn===null);)oa(m),m.blockedOn===null&&ln.shift()}var ai=H.ReactCurrentBatchConfig,oi=!0;function li(a,c,m,w){var C=Nt,T=ai.transition;ai.transition=null;try{Nt=1,Ja(a,c,m,w)}finally{Nt=C,ai.transition=T}}function hc(a,c,m,w){var C=Nt,T=ai.transition;ai.transition=null;try{Nt=4,Ja(a,c,m,w)}finally{Nt=C,ai.transition=T}}function Ja(a,c,m,w){if(oi){var C=eo(a,c,m,w);if(C===null)l(a,c,w,ci,m),Li(a,w);else if(Uo(C,a,c,m,w))w.stopPropagation();else if(Li(a,w),c&4&&-1<Ut.indexOf(a)){for(;C!==null;){var T=oo(C);if(T!==null&&Ka(T),T=eo(a,c,m,w),T===null&&l(a,c,w,ci,m),T===C)break;C=T}C!==null&&w.stopPropagation()}else l(a,c,w,null,m)}}var ci=null;function eo(a,c,m,w){if(ci=null,a=ds(w),a=ao(a),a!==null)if(c=mr(a),c===null)a=null;else if(m=c.tag,m===13){if(a=ti(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return ci=a,null}function jt(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bd()){case zo:return 1;case uc:return 4;case qa:case Ga:return 16;case ni:return 536870912;default:return 16}default:return 16}}var Ks=null,ns=null,Zs=null;function fc(){if(Zs)return Zs;var a,c=ns,m=c.length,w,C="value"in Ks?Ks.value:Ks.textContent,T=C.length;for(a=0;a<m&&c[a]===C[a];a++);var V=m-a;for(w=1;w<=V&&c[m-w]===C[T-w];w++);return Zs=C.slice(a,1<w?1-w:void 0)}function to(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function vr(){return!0}function mc(){return!1}function Wn(a){function c(m,w,C,T,V){this._reactName=m,this._targetInst=C,this.type=w,this.nativeEvent=T,this.target=V,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(m=a[Y],this[Y]=m?m(T):T[Y]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?vr:mc,this.isPropagationStopped=mc,this}return ie(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),c}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Wn(ui),di=ie({},ui,{view:0,detail:0}),Ho=Wn(di),ps,Wo,As,ks=ie({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ct,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==As&&(As&&a.type==="mousemove"?(ps=a.screenX-As.screenX,Wo=a.screenY-As.screenY):Wo=ps=0,As=a),ps)},movementY:function(a){return"movementY"in a?a.movementY:Wo}}),qo=Wn(ks),pc=ie({},ks,{dataTransfer:0}),Go=Wn(pc),Ko=ie({},di,{relatedTarget:0}),Dn=Wn(Ko),gc=ie({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),cu=Wn(gc),la=ie({},ui,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),x=Wn(la),A=ie({},ui,{data:0}),M=Wn(A),q={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},re={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function De(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=fe[a])?!!c[a]:!1}function ct(){return De}var It=ie({},di,{key:function(a){if(a.key){var c=q[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=to(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?re[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ct,charCode:function(a){return a.type==="keypress"?to(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?to(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ft=Wn(It),mn=ie({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ys=Wn(mn),Dr=ie({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ct}),yr=Wn(Dr),hi=ie({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zo=Wn(hi),Yo=ie({},ks,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),tx=Wn(Yo),Or=[9,13,27,32],ca=d&&"CompositionEvent"in window,xc=null;d&&"documentMode"in document&&(xc=document.documentMode);var Mi=d&&"TextEvent"in window&&!xc,jf=d&&(!ca||xc&&8<xc&&11>=xc),so=" ",Cf=!1;function Qo(a,c){switch(a){case"keyup":return Or.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Di=!1;function nx(a,c){switch(a){case"compositionend":return zd(c);case"keypress":return c.which!==32?null:(Cf=!0,so);case"textInput":return a=c.data,a===so&&Cf?null:a;default:return null}}function ua(a,c){if(Di)return a==="compositionend"||!ca&&Qo(a,c)?(a=fc(),Zs=ns=Ks=null,Di=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return jf&&c.locale!=="ko"?null:c.data;default:return null}}var uu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!uu[a.type]:c==="textarea"}function du(a,c,m,w){rt(w),c=v(c,"onChange"),0<c.length&&(m=new no("onChange","change",null,m,w),a.push({event:m,listeners:c}))}var vc=null,Qs=null;function sx(a){Yd(a,0)}function Oi(a){var c=lo(a);if(wt(c))return a}function rx(a,c){if(a==="change")return c}var fi=!1;if(d){var Xo;if(d){var hu="oninput"in document;if(!hu){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),hu=typeof fu.oninput=="function"}Xo=hu}else Xo=!1;fi=Xo&&(!document.documentMode||9<document.documentMode)}function yc(){vc&&(vc.detachEvent("onpropertychange",mu),Qs=vc=null)}function mu(a){if(a.propertyName==="value"&&Oi(Qs)){var c=[];du(c,Qs,a,ds(a)),Jt(sx,c)}}function pu(a,c,m){a==="focusin"?(yc(),vc=c,Qs=m,vc.attachEvent("onpropertychange",mu)):a==="focusout"&&yc()}function Jo(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Oi(Qs)}function gu(a,c){if(a==="click")return Oi(c)}function Ud(a,c){if(a==="input"||a==="change")return Oi(c)}function Sf(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Fr=typeof Object.is=="function"?Object.is:Sf;function da(a,c){if(Fr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var C=m[w];if(!f.call(c,C)||!Fr(a[C],c[C]))return!1}return!0}function Tf(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $d(a,c){var m=Tf(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=c&&w>=c)return{node:m,offset:c-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Tf(m)}}function Af(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Af(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Hd(){for(var a=window,c=Yt();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=Yt(a.document)}return c}function Wd(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function mi(a){var c=Hd(),m=a.focusedElem,w=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&Af(m.ownerDocument.documentElement,m)){if(w!==null&&Wd(m)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var C=m.textContent.length,T=Math.min(w.start,C);w=w.end===void 0?T:Math.min(w.end,C),!a.extend&&T>w&&(C=w,w=T,T=C),C=$d(m,T);var V=$d(m,w);C&&V&&(a.rangeCount!==1||a.anchorNode!==C.node||a.anchorOffset!==C.offset||a.focusNode!==V.node||a.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),a.removeAllRanges(),T>w?(a.addRange(c),a.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var xu=d&&"documentMode"in document&&11>=document.documentMode,el=null,tl=null,wc=null,vu=!1;function kf(a,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;vu||el==null||el!==Yt(w)||(w=el,"selectionStart"in w&&Wd(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),wc&&da(wc,w)||(wc=w,w=v(tl,"onSelect"),0<w.length&&(c=new no("onSelect","select",null,c,m),a.push({event:c,listeners:w}),c.target=el)))}function ha(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var nl={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionend:ha("Transition","TransitionEnd")},fa={},qd={};d&&(qd=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function _c(a){if(fa[a])return fa[a];if(!nl[a])return a;var c=nl[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in qd)return fa[a]=c[m];return a}var Pf=_c("animationend"),pi=_c("animationiteration"),Gd=_c("animationstart"),Kd=_c("transitionend"),sl=new Map,If="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(a,c){sl.set(a,c),o(c,[a])}for(var ro=0;ro<If.length;ro++){var yu=If[ro],Rf=yu.toLowerCase(),ix=yu[0].toUpperCase()+yu.slice(1);Vr(Rf,"on"+ix)}Vr(Pf,"onAnimationEnd"),Vr(pi,"onAnimationIteration"),Vr(Gd,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Kd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lf=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Zd(a,c,m){var w=a.type||"unknown-event";a.currentTarget=m,Ua(w,c,void 0,a),a.currentTarget=null}function Yd(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],C=w.event;w=w.listeners;e:{var T=void 0;if(c)for(var V=w.length-1;0<=V;V--){var Y=w[V],te=Y.instance,ge=Y.currentTarget;if(Y=Y.listener,te!==T&&C.isPropagationStopped())break e;Zd(C,Y,ge),T=te}else for(V=0;V<w.length;V++){if(Y=w[V],te=Y.instance,ge=Y.currentTarget,Y=Y.listener,te!==T&&C.isPropagationStopped())break e;Zd(C,Y,ge),T=te}}}if(ta)throw a=Hs,ta=!1,Hs=null,a}function Gt(a,c){var m=c[ll];m===void 0&&(m=c[ll]=new Set);var w=a+"__bubble";m.has(w)||(Mf(c,a,2,!1),m.add(w))}function Qd(a,c,m){var w=0;c&&(w|=4),Mf(m,a,w,c)}var bc="_reactListening"+Math.random().toString(36).slice(2);function il(a){if(!a[bc]){a[bc]=!0,r.forEach(function(m){m!=="selectionchange"&&(Lf.has(m)||Qd(m,!1,a),Qd(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[bc]||(c[bc]=!0,Qd("selectionchange",!1,c))}}function Mf(a,c,m,w){switch(jt(c)){case 1:var C=li;break;case 4:C=hc;break;default:C=Ja}m=C.bind(null,c,m,a),C=void 0,!$s||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),w?C!==void 0?a.addEventListener(c,m,{capture:!0,passive:C}):a.addEventListener(c,m,!0):C!==void 0?a.addEventListener(c,m,{passive:C}):a.addEventListener(c,m,!1)}function l(a,c,m,w,C){var T=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var V=w.tag;if(V===3||V===4){var Y=w.stateNode.containerInfo;if(Y===C||Y.nodeType===8&&Y.parentNode===C)break;if(V===4)for(V=w.return;V!==null;){var te=V.tag;if((te===3||te===4)&&(te=V.stateNode.containerInfo,te===C||te.nodeType===8&&te.parentNode===C))return;V=V.return}for(;Y!==null;){if(V=ao(Y),V===null)return;if(te=V.tag,te===5||te===6){w=T=V;continue e}Y=Y.parentNode}}w=w.return}Jt(function(){var ge=T,Se=ds(m),Pe=[];e:{var Ce=sl.get(a);if(Ce!==void 0){var $e=no,qe=a;switch(a){case"keypress":if(to(m)===0)break e;case"keydown":case"keyup":$e=Ft;break;case"focusin":qe="focus",$e=Dn;break;case"focusout":qe="blur",$e=Dn;break;case"beforeblur":case"afterblur":$e=Dn;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Go;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=yr;break;case Pf:case pi:case Gd:$e=cu;break;case Kd:$e=Zo;break;case"scroll":$e=Ho;break;case"wheel":$e=tx;break;case"copy":case"cut":case"paste":$e=x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Ys}var Ze=(c&4)!==0,Pn=!Ze&&a==="scroll",le=Ze?Ce!==null?Ce+"Capture":null:Ce;Ze=[];for(var se=ge,he;se!==null;){he=se;var Le=he.stateNode;if(he.tag===5&&Le!==null&&(he=Le,le!==null&&(Le=jn(se,le),Le!=null&&Ze.push(h(se,Le,he)))),Pn)break;se=se.return}0<Ze.length&&(Ce=new $e(Ce,qe,null,m,Se),Pe.push({event:Ce,listeners:Ze}))}}if((c&7)===0){e:{if(Ce=a==="mouseover"||a==="pointerover",$e=a==="mouseout"||a==="pointerout",Ce&&m!==dr&&(qe=m.relatedTarget||m.fromElement)&&(ao(qe)||qe[$t]))break e;if(($e||Ce)&&(Ce=Se.window===Se?Se:(Ce=Se.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,$e?(qe=m.relatedTarget||m.toElement,$e=ge,qe=qe?ao(qe):null,qe!==null&&(Pn=mr(qe),qe!==Pn||qe.tag!==5&&qe.tag!==6)&&(qe=null)):($e=null,qe=ge),$e!==qe)){if(Ze=qo,Le="onMouseLeave",le="onMouseEnter",se="mouse",(a==="pointerout"||a==="pointerover")&&(Ze=Ys,Le="onPointerLeave",le="onPointerEnter",se="pointer"),Pn=$e==null?Ce:lo($e),he=qe==null?Ce:lo(qe),Ce=new Ze(Le,se+"leave",$e,m,Se),Ce.target=Pn,Ce.relatedTarget=he,Le=null,ao(Se)===ge&&(Ze=new Ze(le,se+"enter",qe,m,Se),Ze.target=he,Ze.relatedTarget=Pn,Le=Ze),Pn=Le,$e&&qe)t:{for(Ze=$e,le=qe,se=0,he=Ze;he;he=j(he))se++;for(he=0,Le=le;Le;Le=j(Le))he++;for(;0<se-he;)Ze=j(Ze),se--;for(;0<he-se;)le=j(le),he--;for(;se--;){if(Ze===le||le!==null&&Ze===le.alternate)break t;Ze=j(Ze),le=j(le)}Ze=null}else Ze=null;$e!==null&&P(Pe,Ce,$e,Ze,!1),qe!==null&&Pn!==null&&P(Pe,Pn,qe,Ze,!0)}}e:{if(Ce=ge?lo(ge):window,$e=Ce.nodeName&&Ce.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Ce.type==="file")var Ye=rx;else if(Ef(Ce))if(fi)Ye=Ud;else{Ye=Jo;var at=pu}else($e=Ce.nodeName)&&$e.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(Ye=gu);if(Ye&&(Ye=Ye(a,ge))){du(Pe,Ye,m,Se);break e}at&&at(a,Ce,ge),a==="focusout"&&(at=Ce._wrapperState)&&at.controlled&&Ce.type==="number"&&Ot(Ce,"number",Ce.value)}switch(at=ge?lo(ge):window,a){case"focusin":(Ef(at)||at.contentEditable==="true")&&(el=at,tl=ge,wc=null);break;case"focusout":wc=tl=el=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,kf(Pe,m,Se);break;case"selectionchange":if(xu)break;case"keydown":case"keyup":kf(Pe,m,Se)}var ot;if(ca)e:{switch(a){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Di?Qo(a,m)&&(pt="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(pt="onCompositionStart");pt&&(jf&&m.locale!=="ko"&&(Di||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Di&&(ot=fc()):(Ks=Se,ns="value"in Ks?Ks.value:Ks.textContent,Di=!0)),at=v(ge,pt),0<at.length&&(pt=new M(pt,a,null,m,Se),Pe.push({event:pt,listeners:at}),ot?pt.data=ot:(ot=zd(m),ot!==null&&(pt.data=ot)))),(ot=Mi?nx(a,m):ua(a,m))&&(ge=v(ge,"onBeforeInput"),0<ge.length&&(Se=new M("onBeforeInput","beforeinput",null,m,Se),Pe.push({event:Se,listeners:ge}),Se.data=ot))}Yd(Pe,c)})}function h(a,c,m){return{instance:a,listener:c,currentTarget:m}}function v(a,c){for(var m=c+"Capture",w=[];a!==null;){var C=a,T=C.stateNode;C.tag===5&&T!==null&&(C=T,T=jn(a,m),T!=null&&w.unshift(h(a,T,C)),T=jn(a,c),T!=null&&w.push(h(a,T,C))),a=a.return}return w}function j(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function P(a,c,m,w,C){for(var T=c._reactName,V=[];m!==null&&m!==w;){var Y=m,te=Y.alternate,ge=Y.stateNode;if(te!==null&&te===w)break;Y.tag===5&&ge!==null&&(Y=ge,C?(te=jn(m,T),te!=null&&V.unshift(h(m,te,Y))):C||(te=jn(m,T),te!=null&&V.push(h(m,te,Y)))),m=m.return}V.length!==0&&a.push({event:c,listeners:V})}var B=/\r\n?/g,ee=/\u0000|\uFFFD/g;function ae(a){return(typeof a=="string"?a:""+a).replace(B,`
`).replace(ee,"")}function pe(a,c,m){if(c=ae(c),ae(a)!==c&&m)throw Error(n(425))}function Ne(){}var ze=null,nt=null;function bt(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var qn=typeof setTimeout=="function"?setTimeout:void 0,On=typeof clearTimeout=="function"?clearTimeout:void 0,Xs=typeof Promise=="function"?Promise:void 0,Ps=typeof queueMicrotask=="function"?queueMicrotask:typeof Xs<"u"?function(a){return Xs.resolve(null).then(a).catch(al)}:qn;function al(a){setTimeout(function(){throw a})}function Xd(a,c){var m=c,w=0;do{var C=m.nextSibling;if(a.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(w===0){a.removeChild(C),Ts(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=C}while(m);Ts(c)}function ma(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Df(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var io=Math.random().toString(36).slice(2),gi="__reactFiber$"+io,ol="__reactProps$"+io,$t="__reactContainer$"+io,ll="__reactEvents$"+io,ax="__reactListeners$"+io,ox="__reactHandles$"+io;function ao(a){var c=a[gi];if(c)return c;for(var m=a.parentNode;m;){if(c=m[$t]||m[gi]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=Df(a);a!==null;){if(m=a[gi])return m;a=Df(a)}return c}a=m,m=a.parentNode}return null}function oo(a){return a=a[gi]||a[$t],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function lo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function wu(a){return a[ol]||null}var lx=[],_u=-1;function cl(a){return{current:a}}function sn(a){0>_u||(a.current=lx[_u],lx[_u]=null,_u--)}function tn(a,c){_u++,lx[_u]=a.current,a.current=c}var ul={},Is=cl(ul),wr=cl(!1),Nc=ul;function bu(a,c){var m=a.type.contextTypes;if(!m)return ul;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var C={},T;for(T in m)C[T]=c[T];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=C),C}function _r(a){return a=a.childContextTypes,a!=null}function Of(){sn(wr),sn(Is)}function d_(a,c,m){if(Is.current!==ul)throw Error(n(168));tn(Is,c),tn(wr,m)}function h_(a,c,m){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var C in w)if(!(C in c))throw Error(n(108,ve(a)||"Unknown",C));return ie({},m,w)}function Ff(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ul,Nc=Is.current,tn(Is,a),tn(wr,wr.current),!0}function f_(a,c,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=h_(a,c,Nc),w.__reactInternalMemoizedMergedChildContext=a,sn(wr),sn(Is),tn(Is,a)):sn(wr),tn(wr,m)}var co=null,Vf=!1,cx=!1;function m_(a){co===null?co=[a]:co.push(a)}function kP(a){Vf=!0,m_(a)}function dl(){if(!cx&&co!==null){cx=!0;var a=0,c=Nt;try{var m=co;for(Nt=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}co=null,Vf=!1}catch(C){throw co!==null&&(co=co.slice(a+1)),cc(zo,dl),C}finally{Nt=c,cx=!1}}return null}var Nu=[],ju=0,Bf=null,zf=0,xi=[],vi=0,jc=null,uo=1,ho="";function Cc(a,c){Nu[ju++]=zf,Nu[ju++]=Bf,Bf=a,zf=c}function p_(a,c,m){xi[vi++]=uo,xi[vi++]=ho,xi[vi++]=jc,jc=a;var w=uo;a=ho;var C=32-xt(w)-1;w&=~(1<<C),m+=1;var T=32-xt(c)+C;if(30<T){var V=C-C%5;T=(w&(1<<V)-1).toString(32),w>>=V,C-=V,uo=1<<32-xt(c)+C|m<<C|w,ho=T+a}else uo=1<<T|m<<C|w,ho=a}function ux(a){a.return!==null&&(Cc(a,1),p_(a,1,0))}function dx(a){for(;a===Bf;)Bf=Nu[--ju],Nu[ju]=null,zf=Nu[--ju],Nu[ju]=null;for(;a===jc;)jc=xi[--vi],xi[vi]=null,ho=xi[--vi],xi[vi]=null,uo=xi[--vi],xi[vi]=null}var Br=null,zr=null,cn=!1,Fi=null;function g_(a,c){var m=bi(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function x_(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Br=a,zr=ma(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Br=a,zr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=jc!==null?{id:uo,overflow:ho}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=bi(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,Br=a,zr=null,!0):!1;default:return!1}}function hx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function fx(a){if(cn){var c=zr;if(c){var m=c;if(!x_(a,c)){if(hx(a))throw Error(n(418));c=ma(m.nextSibling);var w=Br;c&&x_(a,c)?g_(w,m):(a.flags=a.flags&-4097|2,cn=!1,Br=a)}}else{if(hx(a))throw Error(n(418));a.flags=a.flags&-4097|2,cn=!1,Br=a}}}function v_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Br=a}function Uf(a){if(a!==Br)return!1;if(!cn)return v_(a),cn=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!bt(a.type,a.memoizedProps)),c&&(c=zr)){if(hx(a))throw y_(),Error(n(418));for(;c;)g_(a,c),c=ma(c.nextSibling)}if(v_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){zr=ma(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}zr=null}}else zr=Br?ma(a.stateNode.nextSibling):null;return!0}function y_(){for(var a=zr;a;)a=ma(a.nextSibling)}function Cu(){zr=Br=null,cn=!1}function mx(a){Fi===null?Fi=[a]:Fi.push(a)}var PP=H.ReactCurrentBatchConfig;function Jd(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var C=w,T=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===T?c.ref:(c=function(V){var Y=C.refs;V===null?delete Y[T]:Y[T]=V},c._stringRef=T,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function $f(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function w_(a){var c=a._init;return c(a._payload)}function __(a){function c(le,se){if(a){var he=le.deletions;he===null?(le.deletions=[se],le.flags|=16):he.push(se)}}function m(le,se){if(!a)return null;for(;se!==null;)c(le,se),se=se.sibling;return null}function w(le,se){for(le=new Map;se!==null;)se.key!==null?le.set(se.key,se):le.set(se.index,se),se=se.sibling;return le}function C(le,se){return le=yl(le,se),le.index=0,le.sibling=null,le}function T(le,se,he){return le.index=he,a?(he=le.alternate,he!==null?(he=he.index,he<se?(le.flags|=2,se):he):(le.flags|=2,se)):(le.flags|=1048576,se)}function V(le){return a&&le.alternate===null&&(le.flags|=2),le}function Y(le,se,he,Le){return se===null||se.tag!==6?(se=iv(he,le.mode,Le),se.return=le,se):(se=C(se,he),se.return=le,se)}function te(le,se,he,Le){var Ye=he.type;return Ye===F?Se(le,se,he.props.children,Le,he.key):se!==null&&(se.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===ne&&w_(Ye)===se.type)?(Le=C(se,he.props),Le.ref=Jd(le,se,he),Le.return=le,Le):(Le=fm(he.type,he.key,he.props,null,le.mode,Le),Le.ref=Jd(le,se,he),Le.return=le,Le)}function ge(le,se,he,Le){return se===null||se.tag!==4||se.stateNode.containerInfo!==he.containerInfo||se.stateNode.implementation!==he.implementation?(se=av(he,le.mode,Le),se.return=le,se):(se=C(se,he.children||[]),se.return=le,se)}function Se(le,se,he,Le,Ye){return se===null||se.tag!==7?(se=Rc(he,le.mode,Le,Ye),se.return=le,se):(se=C(se,he),se.return=le,se)}function Pe(le,se,he){if(typeof se=="string"&&se!==""||typeof se=="number")return se=iv(""+se,le.mode,he),se.return=le,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case G:return he=fm(se.type,se.key,se.props,null,le.mode,he),he.ref=Jd(le,null,se),he.return=le,he;case Q:return se=av(se,le.mode,he),se.return=le,se;case ne:var Le=se._init;return Pe(le,Le(se._payload),he)}if(Xt(se)||de(se))return se=Rc(se,le.mode,he,null),se.return=le,se;$f(le,se)}return null}function Ce(le,se,he,Le){var Ye=se!==null?se.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return Ye!==null?null:Y(le,se,""+he,Le);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case G:return he.key===Ye?te(le,se,he,Le):null;case Q:return he.key===Ye?ge(le,se,he,Le):null;case ne:return Ye=he._init,Ce(le,se,Ye(he._payload),Le)}if(Xt(he)||de(he))return Ye!==null?null:Se(le,se,he,Le,null);$f(le,he)}return null}function $e(le,se,he,Le,Ye){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return le=le.get(he)||null,Y(se,le,""+Le,Ye);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case G:return le=le.get(Le.key===null?he:Le.key)||null,te(se,le,Le,Ye);case Q:return le=le.get(Le.key===null?he:Le.key)||null,ge(se,le,Le,Ye);case ne:var at=Le._init;return $e(le,se,he,at(Le._payload),Ye)}if(Xt(Le)||de(Le))return le=le.get(he)||null,Se(se,le,Le,Ye,null);$f(se,Le)}return null}function qe(le,se,he,Le){for(var Ye=null,at=null,ot=se,pt=se=0,is=null;ot!==null&&pt<he.length;pt++){ot.index>pt?(is=ot,ot=null):is=ot.sibling;var Vt=Ce(le,ot,he[pt],Le);if(Vt===null){ot===null&&(ot=is);break}a&&ot&&Vt.alternate===null&&c(le,ot),se=T(Vt,se,pt),at===null?Ye=Vt:at.sibling=Vt,at=Vt,ot=is}if(pt===he.length)return m(le,ot),cn&&Cc(le,pt),Ye;if(ot===null){for(;pt<he.length;pt++)ot=Pe(le,he[pt],Le),ot!==null&&(se=T(ot,se,pt),at===null?Ye=ot:at.sibling=ot,at=ot);return cn&&Cc(le,pt),Ye}for(ot=w(le,ot);pt<he.length;pt++)is=$e(ot,le,pt,he[pt],Le),is!==null&&(a&&is.alternate!==null&&ot.delete(is.key===null?pt:is.key),se=T(is,se,pt),at===null?Ye=is:at.sibling=is,at=is);return a&&ot.forEach(function(wl){return c(le,wl)}),cn&&Cc(le,pt),Ye}function Ze(le,se,he,Le){var Ye=de(he);if(typeof Ye!="function")throw Error(n(150));if(he=Ye.call(he),he==null)throw Error(n(151));for(var at=Ye=null,ot=se,pt=se=0,is=null,Vt=he.next();ot!==null&&!Vt.done;pt++,Vt=he.next()){ot.index>pt?(is=ot,ot=null):is=ot.sibling;var wl=Ce(le,ot,Vt.value,Le);if(wl===null){ot===null&&(ot=is);break}a&&ot&&wl.alternate===null&&c(le,ot),se=T(wl,se,pt),at===null?Ye=wl:at.sibling=wl,at=wl,ot=is}if(Vt.done)return m(le,ot),cn&&Cc(le,pt),Ye;if(ot===null){for(;!Vt.done;pt++,Vt=he.next())Vt=Pe(le,Vt.value,Le),Vt!==null&&(se=T(Vt,se,pt),at===null?Ye=Vt:at.sibling=Vt,at=Vt);return cn&&Cc(le,pt),Ye}for(ot=w(le,ot);!Vt.done;pt++,Vt=he.next())Vt=$e(ot,le,pt,Vt.value,Le),Vt!==null&&(a&&Vt.alternate!==null&&ot.delete(Vt.key===null?pt:Vt.key),se=T(Vt,se,pt),at===null?Ye=Vt:at.sibling=Vt,at=Vt);return a&&ot.forEach(function(uI){return c(le,uI)}),cn&&Cc(le,pt),Ye}function Pn(le,se,he,Le){if(typeof he=="object"&&he!==null&&he.type===F&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case G:e:{for(var Ye=he.key,at=se;at!==null;){if(at.key===Ye){if(Ye=he.type,Ye===F){if(at.tag===7){m(le,at.sibling),se=C(at,he.props.children),se.return=le,le=se;break e}}else if(at.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===ne&&w_(Ye)===at.type){m(le,at.sibling),se=C(at,he.props),se.ref=Jd(le,at,he),se.return=le,le=se;break e}m(le,at);break}else c(le,at);at=at.sibling}he.type===F?(se=Rc(he.props.children,le.mode,Le,he.key),se.return=le,le=se):(Le=fm(he.type,he.key,he.props,null,le.mode,Le),Le.ref=Jd(le,se,he),Le.return=le,le=Le)}return V(le);case Q:e:{for(at=he.key;se!==null;){if(se.key===at)if(se.tag===4&&se.stateNode.containerInfo===he.containerInfo&&se.stateNode.implementation===he.implementation){m(le,se.sibling),se=C(se,he.children||[]),se.return=le,le=se;break e}else{m(le,se);break}else c(le,se);se=se.sibling}se=av(he,le.mode,Le),se.return=le,le=se}return V(le);case ne:return at=he._init,Pn(le,se,at(he._payload),Le)}if(Xt(he))return qe(le,se,he,Le);if(de(he))return Ze(le,se,he,Le);$f(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,se!==null&&se.tag===6?(m(le,se.sibling),se=C(se,he),se.return=le,le=se):(m(le,se),se=iv(he,le.mode,Le),se.return=le,le=se),V(le)):m(le,se)}return Pn}var Eu=__(!0),b_=__(!1),Hf=cl(null),Wf=null,Su=null,px=null;function gx(){px=Su=Wf=null}function xx(a){var c=Hf.current;sn(Hf),a._currentValue=c}function vx(a,c,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===m)break;a=a.return}}function Tu(a,c){Wf=a,px=Su=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(br=!0),a.firstContext=null)}function yi(a){var c=a._currentValue;if(px!==a)if(a={context:a,memoizedValue:c,next:null},Su===null){if(Wf===null)throw Error(n(308));Su=a,Wf.dependencies={lanes:0,firstContext:a}}else Su=Su.next=a;return c}var Ec=null;function yx(a){Ec===null?Ec=[a]:Ec.push(a)}function N_(a,c,m,w){var C=c.interleaved;return C===null?(m.next=m,yx(c)):(m.next=C.next,C.next=m),c.interleaved=m,fo(a,w)}function fo(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var hl=!1;function wx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j_(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mo(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function fl(a,c,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,(Mt&2)!==0){var C=w.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),w.pending=c,fo(a,m)}return C=w.interleaved,C===null?(c.next=c,yx(w)):(c.next=C.next,C.next=c),w.interleaved=c,fo(a,m)}function qf(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Lr(a,m)}}function C_(a,c){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var C=null,T=null;if(m=m.firstBaseUpdate,m!==null){do{var V={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};T===null?C=T=V:T=T.next=V,m=m.next}while(m!==null);T===null?C=T=c:T=T.next=c}else C=T=c;m={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function Gf(a,c,m,w){var C=a.updateQueue;hl=!1;var T=C.firstBaseUpdate,V=C.lastBaseUpdate,Y=C.shared.pending;if(Y!==null){C.shared.pending=null;var te=Y,ge=te.next;te.next=null,V===null?T=ge:V.next=ge,V=te;var Se=a.alternate;Se!==null&&(Se=Se.updateQueue,Y=Se.lastBaseUpdate,Y!==V&&(Y===null?Se.firstBaseUpdate=ge:Y.next=ge,Se.lastBaseUpdate=te))}if(T!==null){var Pe=C.baseState;V=0,Se=ge=te=null,Y=T;do{var Ce=Y.lane,$e=Y.eventTime;if((w&Ce)===Ce){Se!==null&&(Se=Se.next={eventTime:$e,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var qe=a,Ze=Y;switch(Ce=c,$e=m,Ze.tag){case 1:if(qe=Ze.payload,typeof qe=="function"){Pe=qe.call($e,Pe,Ce);break e}Pe=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ze.payload,Ce=typeof qe=="function"?qe.call($e,Pe,Ce):qe,Ce==null)break e;Pe=ie({},Pe,Ce);break e;case 2:hl=!0}}Y.callback!==null&&Y.lane!==0&&(a.flags|=64,Ce=C.effects,Ce===null?C.effects=[Y]:Ce.push(Y))}else $e={eventTime:$e,lane:Ce,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Se===null?(ge=Se=$e,te=Pe):Se=Se.next=$e,V|=Ce;if(Y=Y.next,Y===null){if(Y=C.shared.pending,Y===null)break;Ce=Y,Y=Ce.next,Ce.next=null,C.lastBaseUpdate=Ce,C.shared.pending=null}}while(!0);if(Se===null&&(te=Pe),C.baseState=te,C.firstBaseUpdate=ge,C.lastBaseUpdate=Se,c=C.shared.interleaved,c!==null){C=c;do V|=C.lane,C=C.next;while(C!==c)}else T===null&&(C.shared.lanes=0);Ac|=V,a.lanes=V,a.memoizedState=Pe}}function E_(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],C=w.callback;if(C!==null){if(w.callback=null,w=m,typeof C!="function")throw Error(n(191,C));C.call(w)}}}var eh={},pa=cl(eh),th=cl(eh),nh=cl(eh);function Sc(a){if(a===eh)throw Error(n(174));return a}function _x(a,c){switch(tn(nh,c),tn(th,a),tn(pa,eh),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Pi(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Pi(c,a)}sn(pa),tn(pa,c)}function Au(){sn(pa),sn(th),sn(nh)}function S_(a){Sc(nh.current);var c=Sc(pa.current),m=Pi(c,a.type);c!==m&&(tn(th,a),tn(pa,m))}function bx(a){th.current===a&&(sn(pa),sn(th))}var pn=cl(0);function Kf(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Nx=[];function jx(){for(var a=0;a<Nx.length;a++)Nx[a]._workInProgressVersionPrimary=null;Nx.length=0}var Zf=H.ReactCurrentDispatcher,Cx=H.ReactCurrentBatchConfig,Tc=0,gn=null,Gn=null,ss=null,Yf=!1,sh=!1,rh=0,IP=0;function Rs(){throw Error(n(321))}function Ex(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!Fr(a[m],c[m]))return!1;return!0}function Sx(a,c,m,w,C,T){if(Tc=T,gn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Zf.current=a===null||a.memoizedState===null?DP:OP,a=m(w,C),sh){T=0;do{if(sh=!1,rh=0,25<=T)throw Error(n(301));T+=1,ss=Gn=null,c.updateQueue=null,Zf.current=FP,a=m(w,C)}while(sh)}if(Zf.current=Jf,c=Gn!==null&&Gn.next!==null,Tc=0,ss=Gn=gn=null,Yf=!1,c)throw Error(n(300));return a}function Tx(){var a=rh!==0;return rh=0,a}function ga(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?gn.memoizedState=ss=a:ss=ss.next=a,ss}function wi(){if(Gn===null){var a=gn.alternate;a=a!==null?a.memoizedState:null}else a=Gn.next;var c=ss===null?gn.memoizedState:ss.next;if(c!==null)ss=c,Gn=a;else{if(a===null)throw Error(n(310));Gn=a,a={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},ss===null?gn.memoizedState=ss=a:ss=ss.next=a}return ss}function ih(a,c){return typeof c=="function"?c(a):c}function Ax(a){var c=wi(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=Gn,C=w.baseQueue,T=m.pending;if(T!==null){if(C!==null){var V=C.next;C.next=T.next,T.next=V}w.baseQueue=C=T,m.pending=null}if(C!==null){T=C.next,w=w.baseState;var Y=V=null,te=null,ge=T;do{var Se=ge.lane;if((Tc&Se)===Se)te!==null&&(te=te.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),w=ge.hasEagerState?ge.eagerState:a(w,ge.action);else{var Pe={lane:Se,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};te===null?(Y=te=Pe,V=w):te=te.next=Pe,gn.lanes|=Se,Ac|=Se}ge=ge.next}while(ge!==null&&ge!==T);te===null?V=w:te.next=Y,Fr(w,c.memoizedState)||(br=!0),c.memoizedState=w,c.baseState=V,c.baseQueue=te,m.lastRenderedState=w}if(a=m.interleaved,a!==null){C=a;do T=C.lane,gn.lanes|=T,Ac|=T,C=C.next;while(C!==a)}else C===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function kx(a){var c=wi(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,C=m.pending,T=c.memoizedState;if(C!==null){m.pending=null;var V=C=C.next;do T=a(T,V.action),V=V.next;while(V!==C);Fr(T,c.memoizedState)||(br=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),m.lastRenderedState=T}return[T,w]}function T_(){}function A_(a,c){var m=gn,w=wi(),C=c(),T=!Fr(w.memoizedState,C);if(T&&(w.memoizedState=C,br=!0),w=w.queue,Px(I_.bind(null,m,w,a),[a]),w.getSnapshot!==c||T||ss!==null&&ss.memoizedState.tag&1){if(m.flags|=2048,ah(9,P_.bind(null,m,w,C,c),void 0,null),rs===null)throw Error(n(349));(Tc&30)!==0||k_(m,c,C)}return C}function k_(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=gn.updateQueue,c===null?(c={lastEffect:null,stores:null},gn.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function P_(a,c,m,w){c.value=m,c.getSnapshot=w,R_(c)&&L_(a)}function I_(a,c,m){return m(function(){R_(c)&&L_(a)})}function R_(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!Fr(a,m)}catch{return!0}}function L_(a){var c=fo(a,1);c!==null&&Ui(c,a,1,-1)}function M_(a){var c=ga();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ih,lastRenderedState:a},c.queue=a,a=a.dispatch=MP.bind(null,gn,a),[c.memoizedState,a]}function ah(a,c,m,w){return a={tag:a,create:c,destroy:m,deps:w,next:null},c=gn.updateQueue,c===null?(c={lastEffect:null,stores:null},gn.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,c.lastEffect=a)),a}function D_(){return wi().memoizedState}function Qf(a,c,m,w){var C=ga();gn.flags|=a,C.memoizedState=ah(1|c,m,void 0,w===void 0?null:w)}function Xf(a,c,m,w){var C=wi();w=w===void 0?null:w;var T=void 0;if(Gn!==null){var V=Gn.memoizedState;if(T=V.destroy,w!==null&&Ex(w,V.deps)){C.memoizedState=ah(c,m,T,w);return}}gn.flags|=a,C.memoizedState=ah(1|c,m,T,w)}function O_(a,c){return Qf(8390656,8,a,c)}function Px(a,c){return Xf(2048,8,a,c)}function F_(a,c){return Xf(4,2,a,c)}function V_(a,c){return Xf(4,4,a,c)}function B_(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function z_(a,c,m){return m=m!=null?m.concat([a]):null,Xf(4,4,B_.bind(null,c,a),m)}function Ix(){}function U_(a,c){var m=wi();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Ex(c,w[1])?w[0]:(m.memoizedState=[a,c],a)}function $_(a,c){var m=wi();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Ex(c,w[1])?w[0]:(a=a(),m.memoizedState=[a,c],a)}function H_(a,c,m){return(Tc&21)===0?(a.baseState&&(a.baseState=!1,br=!0),a.memoizedState=m):(Fr(m,c)||(m=dc(),gn.lanes|=m,Ac|=m,a.baseState=!0),c)}function RP(a,c){var m=Nt;Nt=m!==0&&4>m?m:4,a(!0);var w=Cx.transition;Cx.transition={};try{a(!1),c()}finally{Nt=m,Cx.transition=w}}function W_(){return wi().memoizedState}function LP(a,c,m){var w=xl(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},q_(a))G_(c,m);else if(m=N_(a,c,m,w),m!==null){var C=er();Ui(m,a,w,C),K_(m,c,w)}}function MP(a,c,m){var w=xl(a),C={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(q_(a))G_(c,C);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var V=c.lastRenderedState,Y=T(V,m);if(C.hasEagerState=!0,C.eagerState=Y,Fr(Y,V)){var te=c.interleaved;te===null?(C.next=C,yx(c)):(C.next=te.next,te.next=C),c.interleaved=C;return}}catch{}finally{}m=N_(a,c,C,w),m!==null&&(C=er(),Ui(m,a,w,C),K_(m,c,w))}}function q_(a){var c=a.alternate;return a===gn||c!==null&&c===gn}function G_(a,c){sh=Yf=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function K_(a,c,m){if((m&4194240)!==0){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Lr(a,m)}}var Jf={readContext:yi,useCallback:Rs,useContext:Rs,useEffect:Rs,useImperativeHandle:Rs,useInsertionEffect:Rs,useLayoutEffect:Rs,useMemo:Rs,useReducer:Rs,useRef:Rs,useState:Rs,useDebugValue:Rs,useDeferredValue:Rs,useTransition:Rs,useMutableSource:Rs,useSyncExternalStore:Rs,useId:Rs,unstable_isNewReconciler:!1},DP={readContext:yi,useCallback:function(a,c){return ga().memoizedState=[a,c===void 0?null:c],a},useContext:yi,useEffect:O_,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,Qf(4194308,4,B_.bind(null,c,a),m)},useLayoutEffect:function(a,c){return Qf(4194308,4,a,c)},useInsertionEffect:function(a,c){return Qf(4,2,a,c)},useMemo:function(a,c){var m=ga();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var w=ga();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=LP.bind(null,gn,a),[w.memoizedState,a]},useRef:function(a){var c=ga();return a={current:a},c.memoizedState=a},useState:M_,useDebugValue:Ix,useDeferredValue:function(a){return ga().memoizedState=a},useTransition:function(){var a=M_(!1),c=a[0];return a=RP.bind(null,a[1]),ga().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var w=gn,C=ga();if(cn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),rs===null)throw Error(n(349));(Tc&30)!==0||k_(w,c,m)}C.memoizedState=m;var T={value:m,getSnapshot:c};return C.queue=T,O_(I_.bind(null,w,T,a),[a]),w.flags|=2048,ah(9,P_.bind(null,w,T,m,c),void 0,null),m},useId:function(){var a=ga(),c=rs.identifierPrefix;if(cn){var m=ho,w=uo;m=(w&~(1<<32-xt(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=rh++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=IP++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},OP={readContext:yi,useCallback:U_,useContext:yi,useEffect:Px,useImperativeHandle:z_,useInsertionEffect:F_,useLayoutEffect:V_,useMemo:$_,useReducer:Ax,useRef:D_,useState:function(){return Ax(ih)},useDebugValue:Ix,useDeferredValue:function(a){var c=wi();return H_(c,Gn.memoizedState,a)},useTransition:function(){var a=Ax(ih)[0],c=wi().memoizedState;return[a,c]},useMutableSource:T_,useSyncExternalStore:A_,useId:W_,unstable_isNewReconciler:!1},FP={readContext:yi,useCallback:U_,useContext:yi,useEffect:Px,useImperativeHandle:z_,useInsertionEffect:F_,useLayoutEffect:V_,useMemo:$_,useReducer:kx,useRef:D_,useState:function(){return kx(ih)},useDebugValue:Ix,useDeferredValue:function(a){var c=wi();return Gn===null?c.memoizedState=a:H_(c,Gn.memoizedState,a)},useTransition:function(){var a=kx(ih)[0],c=wi().memoizedState;return[a,c]},useMutableSource:T_,useSyncExternalStore:A_,useId:W_,unstable_isNewReconciler:!1};function Vi(a,c){if(a&&a.defaultProps){c=ie({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function Rx(a,c,m,w){c=a.memoizedState,m=m(w,c),m=m==null?c:ie({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var em={isMounted:function(a){return(a=a._reactInternals)?mr(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var w=er(),C=xl(a),T=mo(w,C);T.payload=c,m!=null&&(T.callback=m),c=fl(a,T,C),c!==null&&(Ui(c,a,C,w),qf(c,a,C))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var w=er(),C=xl(a),T=mo(w,C);T.tag=1,T.payload=c,m!=null&&(T.callback=m),c=fl(a,T,C),c!==null&&(Ui(c,a,C,w),qf(c,a,C))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=er(),w=xl(a),C=mo(m,w);C.tag=2,c!=null&&(C.callback=c),c=fl(a,C,w),c!==null&&(Ui(c,a,w,m),qf(c,a,w))}};function Z_(a,c,m,w,C,T,V){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,T,V):c.prototype&&c.prototype.isPureReactComponent?!da(m,w)||!da(C,T):!0}function Y_(a,c,m){var w=!1,C=ul,T=c.contextType;return typeof T=="object"&&T!==null?T=yi(T):(C=_r(c)?Nc:Is.current,w=c.contextTypes,T=(w=w!=null)?bu(a,C):ul),c=new c(m,T),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=em,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=C,a.__reactInternalMemoizedMaskedChildContext=T),c}function Q_(a,c,m,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==a&&em.enqueueReplaceState(c,c.state,null)}function Lx(a,c,m,w){var C=a.stateNode;C.props=m,C.state=a.memoizedState,C.refs={},wx(a);var T=c.contextType;typeof T=="object"&&T!==null?C.context=yi(T):(T=_r(c)?Nc:Is.current,C.context=bu(a,T)),C.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Rx(a,c,T,m),C.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&em.enqueueReplaceState(C,C.state,null),Gf(a,m,C,w),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308)}function ku(a,c){try{var m="",w=c;do m+=je(w),w=w.return;while(w);var C=m}catch(T){C=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:c,stack:C,digest:null}}function Mx(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function Dx(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var VP=typeof WeakMap=="function"?WeakMap:Map;function X_(a,c,m){m=mo(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){om||(om=!0,Qx=w),Dx(a,c)},m}function J_(a,c,m){m=mo(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var C=c.value;m.payload=function(){return w(C)},m.callback=function(){Dx(a,c)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(m.callback=function(){Dx(a,c),typeof w!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),m}function eb(a,c,m){var w=a.pingCache;if(w===null){w=a.pingCache=new VP;var C=new Set;w.set(c,C)}else C=w.get(c),C===void 0&&(C=new Set,w.set(c,C));C.has(m)||(C.add(m),a=JP.bind(null,a,c,m),c.then(a,a))}function tb(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function nb(a,c,m,w,C){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=mo(-1,1),c.tag=2,fl(m,c,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=C,a)}var BP=H.ReactCurrentOwner,br=!1;function Js(a,c,m,w){c.child=a===null?b_(c,null,m,w):Eu(c,a.child,m,w)}function sb(a,c,m,w,C){m=m.render;var T=c.ref;return Tu(c,C),w=Sx(a,c,m,w,T,C),m=Tx(),a!==null&&!br?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,po(a,c,C)):(cn&&m&&ux(c),c.flags|=1,Js(a,c,w,C),c.child)}function rb(a,c,m,w,C){if(a===null){var T=m.type;return typeof T=="function"&&!rv(T)&&T.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=T,ib(a,c,T,w,C)):(a=fm(m.type,null,w,c,c.mode,C),a.ref=c.ref,a.return=c,c.child=a)}if(T=a.child,(a.lanes&C)===0){var V=T.memoizedProps;if(m=m.compare,m=m!==null?m:da,m(V,w)&&a.ref===c.ref)return po(a,c,C)}return c.flags|=1,a=yl(T,w),a.ref=c.ref,a.return=c,c.child=a}function ib(a,c,m,w,C){if(a!==null){var T=a.memoizedProps;if(da(T,w)&&a.ref===c.ref)if(br=!1,c.pendingProps=w=T,(a.lanes&C)!==0)(a.flags&131072)!==0&&(br=!0);else return c.lanes=a.lanes,po(a,c,C)}return Ox(a,c,m,w,C)}function ab(a,c,m){var w=c.pendingProps,C=w.children,T=a!==null?a.memoizedState:null;if(w.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},tn(Iu,Ur),Ur|=m;else{if((m&1073741824)===0)return a=T!==null?T.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,tn(Iu,Ur),Ur|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=T!==null?T.baseLanes:m,tn(Iu,Ur),Ur|=w}else T!==null?(w=T.baseLanes|m,c.memoizedState=null):w=m,tn(Iu,Ur),Ur|=w;return Js(a,c,C,m),c.child}function ob(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Ox(a,c,m,w,C){var T=_r(m)?Nc:Is.current;return T=bu(c,T),Tu(c,C),m=Sx(a,c,m,w,T,C),w=Tx(),a!==null&&!br?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,po(a,c,C)):(cn&&w&&ux(c),c.flags|=1,Js(a,c,m,C),c.child)}function lb(a,c,m,w,C){if(_r(m)){var T=!0;Ff(c)}else T=!1;if(Tu(c,C),c.stateNode===null)nm(a,c),Y_(c,m,w),Lx(c,m,w,C),w=!0;else if(a===null){var V=c.stateNode,Y=c.memoizedProps;V.props=Y;var te=V.context,ge=m.contextType;typeof ge=="object"&&ge!==null?ge=yi(ge):(ge=_r(m)?Nc:Is.current,ge=bu(c,ge));var Se=m.getDerivedStateFromProps,Pe=typeof Se=="function"||typeof V.getSnapshotBeforeUpdate=="function";Pe||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Y!==w||te!==ge)&&Q_(c,V,w,ge),hl=!1;var Ce=c.memoizedState;V.state=Ce,Gf(c,w,V,C),te=c.memoizedState,Y!==w||Ce!==te||wr.current||hl?(typeof Se=="function"&&(Rx(c,m,Se,w),te=c.memoizedState),(Y=hl||Z_(c,m,Y,w,Ce,te,ge))?(Pe||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=te),V.props=w,V.state=te,V.context=ge,w=Y):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{V=c.stateNode,j_(a,c),Y=c.memoizedProps,ge=c.type===c.elementType?Y:Vi(c.type,Y),V.props=ge,Pe=c.pendingProps,Ce=V.context,te=m.contextType,typeof te=="object"&&te!==null?te=yi(te):(te=_r(m)?Nc:Is.current,te=bu(c,te));var $e=m.getDerivedStateFromProps;(Se=typeof $e=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Y!==Pe||Ce!==te)&&Q_(c,V,w,te),hl=!1,Ce=c.memoizedState,V.state=Ce,Gf(c,w,V,C);var qe=c.memoizedState;Y!==Pe||Ce!==qe||wr.current||hl?(typeof $e=="function"&&(Rx(c,m,$e,w),qe=c.memoizedState),(ge=hl||Z_(c,m,ge,w,Ce,qe,te)||!1)?(Se||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(w,qe,te),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(w,qe,te)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||Y===a.memoizedProps&&Ce===a.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&Ce===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=qe),V.props=w,V.state=qe,V.context=te,w=ge):(typeof V.componentDidUpdate!="function"||Y===a.memoizedProps&&Ce===a.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&Ce===a.memoizedState||(c.flags|=1024),w=!1)}return Fx(a,c,m,w,T,C)}function Fx(a,c,m,w,C,T){ob(a,c);var V=(c.flags&128)!==0;if(!w&&!V)return C&&f_(c,m,!1),po(a,c,T);w=c.stateNode,BP.current=c;var Y=V&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&V?(c.child=Eu(c,a.child,null,T),c.child=Eu(c,null,Y,T)):Js(a,c,Y,T),c.memoizedState=w.state,C&&f_(c,m,!0),c.child}function cb(a){var c=a.stateNode;c.pendingContext?d_(a,c.pendingContext,c.pendingContext!==c.context):c.context&&d_(a,c.context,!1),_x(a,c.containerInfo)}function ub(a,c,m,w,C){return Cu(),mx(C),c.flags|=256,Js(a,c,m,w),c.child}var Vx={dehydrated:null,treeContext:null,retryLane:0};function Bx(a){return{baseLanes:a,cachePool:null,transitions:null}}function db(a,c,m){var w=c.pendingProps,C=pn.current,T=!1,V=(c.flags&128)!==0,Y;if((Y=V)||(Y=a!==null&&a.memoizedState===null?!1:(C&2)!==0),Y?(T=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(C|=1),tn(pn,C&1),a===null)return fx(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=w.children,a=w.fallback,T?(w=c.mode,T=c.child,V={mode:"hidden",children:V},(w&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=V):T=mm(V,w,0,null),a=Rc(a,w,m,null),T.return=c,a.return=c,T.sibling=a,c.child=T,c.child.memoizedState=Bx(m),c.memoizedState=Vx,a):zx(c,V));if(C=a.memoizedState,C!==null&&(Y=C.dehydrated,Y!==null))return zP(a,c,V,w,Y,C,m);if(T){T=w.fallback,V=c.mode,C=a.child,Y=C.sibling;var te={mode:"hidden",children:w.children};return(V&1)===0&&c.child!==C?(w=c.child,w.childLanes=0,w.pendingProps=te,c.deletions=null):(w=yl(C,te),w.subtreeFlags=C.subtreeFlags&14680064),Y!==null?T=yl(Y,T):(T=Rc(T,V,m,null),T.flags|=2),T.return=c,w.return=c,w.sibling=T,c.child=w,w=T,T=c.child,V=a.child.memoizedState,V=V===null?Bx(m):{baseLanes:V.baseLanes|m,cachePool:null,transitions:V.transitions},T.memoizedState=V,T.childLanes=a.childLanes&~m,c.memoizedState=Vx,w}return T=a.child,a=T.sibling,w=yl(T,{mode:"visible",children:w.children}),(c.mode&1)===0&&(w.lanes=m),w.return=c,w.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=w,c.memoizedState=null,w}function zx(a,c){return c=mm({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function tm(a,c,m,w){return w!==null&&mx(w),Eu(c,a.child,null,m),a=zx(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function zP(a,c,m,w,C,T,V){if(m)return c.flags&256?(c.flags&=-257,w=Mx(Error(n(422))),tm(a,c,V,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(T=w.fallback,C=c.mode,w=mm({mode:"visible",children:w.children},C,0,null),T=Rc(T,C,V,null),T.flags|=2,w.return=c,T.return=c,w.sibling=T,c.child=w,(c.mode&1)!==0&&Eu(c,a.child,null,V),c.child.memoizedState=Bx(V),c.memoizedState=Vx,T);if((c.mode&1)===0)return tm(a,c,V,null);if(C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var Y=w.dgst;return w=Y,T=Error(n(419)),w=Mx(T,w,void 0),tm(a,c,V,w)}if(Y=(V&a.childLanes)!==0,br||Y){if(w=rs,w!==null){switch(V&-V){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(w.suspendedLanes|V))!==0?0:C,C!==0&&C!==T.retryLane&&(T.retryLane=C,fo(a,C),Ui(w,a,C,-1))}return sv(),w=Mx(Error(n(421))),tm(a,c,V,w)}return C.data==="$?"?(c.flags|=128,c.child=a.child,c=eI.bind(null,a),C._reactRetry=c,null):(a=T.treeContext,zr=ma(C.nextSibling),Br=c,cn=!0,Fi=null,a!==null&&(xi[vi++]=uo,xi[vi++]=ho,xi[vi++]=jc,uo=a.id,ho=a.overflow,jc=c),c=zx(c,w.children),c.flags|=4096,c)}function hb(a,c,m){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),vx(a.return,c,m)}function Ux(a,c,m,w,C){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:C}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=w,T.tail=m,T.tailMode=C)}function fb(a,c,m){var w=c.pendingProps,C=w.revealOrder,T=w.tail;if(Js(a,c,w.children,m),w=pn.current,(w&2)!==0)w=w&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&hb(a,m,c);else if(a.tag===19)hb(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(tn(pn,w),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(m=c.child,C=null;m!==null;)a=m.alternate,a!==null&&Kf(a)===null&&(C=m),m=m.sibling;m=C,m===null?(C=c.child,c.child=null):(C=m.sibling,m.sibling=null),Ux(c,!1,C,m,T);break;case"backwards":for(m=null,C=c.child,c.child=null;C!==null;){if(a=C.alternate,a!==null&&Kf(a)===null){c.child=C;break}a=C.sibling,C.sibling=m,m=C,C=a}Ux(c,!0,m,null,T);break;case"together":Ux(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function nm(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function po(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Ac|=c.lanes,(m&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=yl(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=yl(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function UP(a,c,m){switch(c.tag){case 3:cb(c),Cu();break;case 5:S_(c);break;case 1:_r(c.type)&&Ff(c);break;case 4:_x(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,C=c.memoizedProps.value;tn(Hf,w._currentValue),w._currentValue=C;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(tn(pn,pn.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?db(a,c,m):(tn(pn,pn.current&1),a=po(a,c,m),a!==null?a.sibling:null);tn(pn,pn.current&1);break;case 19:if(w=(m&c.childLanes)!==0,(a.flags&128)!==0){if(w)return fb(a,c,m);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),tn(pn,pn.current),w)break;return null;case 22:case 23:return c.lanes=0,ab(a,c,m)}return po(a,c,m)}var mb,$x,pb,gb;mb=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},$x=function(){},pb=function(a,c,m,w){var C=a.memoizedProps;if(C!==w){a=c.stateNode,Sc(pa.current);var T=null;switch(m){case"input":C=Ln(a,C),w=Ln(a,w),T=[];break;case"select":C=ie({},C,{value:void 0}),w=ie({},w,{value:void 0}),T=[];break;case"textarea":C=Nn(a,C),w=Nn(a,w),T=[];break;default:typeof C.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Ne)}Cs(m,w);var V;m=null;for(ge in C)if(!w.hasOwnProperty(ge)&&C.hasOwnProperty(ge)&&C[ge]!=null)if(ge==="style"){var Y=C[ge];for(V in Y)Y.hasOwnProperty(V)&&(m||(m={}),m[V]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?T||(T=[]):(T=T||[]).push(ge,null));for(ge in w){var te=w[ge];if(Y=C?.[ge],w.hasOwnProperty(ge)&&te!==Y&&(te!=null||Y!=null))if(ge==="style")if(Y){for(V in Y)!Y.hasOwnProperty(V)||te&&te.hasOwnProperty(V)||(m||(m={}),m[V]="");for(V in te)te.hasOwnProperty(V)&&Y[V]!==te[V]&&(m||(m={}),m[V]=te[V])}else m||(T||(T=[]),T.push(ge,m)),m=te;else ge==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Y=Y?Y.__html:void 0,te!=null&&Y!==te&&(T=T||[]).push(ge,te)):ge==="children"?typeof te!="string"&&typeof te!="number"||(T=T||[]).push(ge,""+te):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(i.hasOwnProperty(ge)?(te!=null&&ge==="onScroll"&&Gt("scroll",a),T||Y===te||(T=[])):(T=T||[]).push(ge,te))}m&&(T=T||[]).push("style",m);var ge=T;(c.updateQueue=ge)&&(c.flags|=4)}},gb=function(a,c,m,w){m!==w&&(c.flags|=4)};function oh(a,c){if(!cn)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function Ls(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(c)for(var C=a.child;C!==null;)m|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=a,C=C.sibling;else for(C=a.child;C!==null;)m|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=a,C=C.sibling;return a.subtreeFlags|=w,a.childLanes=m,c}function $P(a,c,m){var w=c.pendingProps;switch(dx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(c),null;case 1:return _r(c.type)&&Of(),Ls(c),null;case 3:return w=c.stateNode,Au(),sn(wr),sn(Is),jx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Uf(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Fi!==null&&(ev(Fi),Fi=null))),$x(a,c),Ls(c),null;case 5:bx(c);var C=Sc(nh.current);if(m=c.type,a!==null&&c.stateNode!=null)pb(a,c,m,w,C),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return Ls(c),null}if(a=Sc(pa.current),Uf(c)){w=c.stateNode,m=c.type;var T=c.memoizedProps;switch(w[gi]=c,w[ol]=T,a=(c.mode&1)!==0,m){case"dialog":Gt("cancel",w),Gt("close",w);break;case"iframe":case"object":case"embed":Gt("load",w);break;case"video":case"audio":for(C=0;C<rl.length;C++)Gt(rl[C],w);break;case"source":Gt("error",w);break;case"img":case"image":case"link":Gt("error",w),Gt("load",w);break;case"details":Gt("toggle",w);break;case"input":kr(w,T),Gt("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!T.multiple},Gt("invalid",w);break;case"textarea":Us(w,T),Gt("invalid",w)}Cs(m,T),C=null;for(var V in T)if(T.hasOwnProperty(V)){var Y=T[V];V==="children"?typeof Y=="string"?w.textContent!==Y&&(T.suppressHydrationWarning!==!0&&pe(w.textContent,Y,a),C=["children",Y]):typeof Y=="number"&&w.textContent!==""+Y&&(T.suppressHydrationWarning!==!0&&pe(w.textContent,Y,a),C=["children",""+Y]):i.hasOwnProperty(V)&&Y!=null&&V==="onScroll"&&Gt("scroll",w)}switch(m){case"input":yt(w),Pr(w,T,!0);break;case"textarea":yt(w),Jr(w);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(w.onclick=Ne)}w=C,c.updateQueue=w,w!==null&&(c.flags|=4)}else{V=C.nodeType===9?C:C.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=or(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=V.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=V.createElement(m,{is:w.is}):(a=V.createElement(m),m==="select"&&(V=a,w.multiple?V.multiple=!0:w.size&&(V.size=w.size))):a=V.createElementNS(a,m),a[gi]=c,a[ol]=w,mb(a,c,!1,!1),c.stateNode=a;e:{switch(V=ur(m,w),m){case"dialog":Gt("cancel",a),Gt("close",a),C=w;break;case"iframe":case"object":case"embed":Gt("load",a),C=w;break;case"video":case"audio":for(C=0;C<rl.length;C++)Gt(rl[C],a);C=w;break;case"source":Gt("error",a),C=w;break;case"img":case"image":case"link":Gt("error",a),Gt("load",a),C=w;break;case"details":Gt("toggle",a),C=w;break;case"input":kr(a,w),C=Ln(a,w),Gt("invalid",a);break;case"option":C=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},C=ie({},w,{value:void 0}),Gt("invalid",a);break;case"textarea":Us(a,w),C=Nn(a,w),Gt("invalid",a);break;default:C=w}Cs(m,C),Y=C;for(T in Y)if(Y.hasOwnProperty(T)){var te=Y[T];T==="style"?ei(a,te):T==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Ji(a,te)):T==="children"?typeof te=="string"?(m!=="textarea"||te!=="")&&us(a,te):typeof te=="number"&&us(a,""+te):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?te!=null&&T==="onScroll"&&Gt("scroll",a):te!=null&&z(a,T,te,V))}switch(m){case"input":yt(a),Pr(a,w,!1);break;case"textarea":yt(a),Jr(a);break;case"option":w.value!=null&&a.setAttribute("value",""+ke(w.value));break;case"select":a.multiple=!!w.multiple,T=w.value,T!=null?cs(a,!!w.multiple,T,!1):w.defaultValue!=null&&cs(a,!!w.multiple,w.defaultValue,!0);break;default:typeof C.onClick=="function"&&(a.onclick=Ne)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ls(c),null;case 6:if(a&&c.stateNode!=null)gb(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=Sc(nh.current),Sc(pa.current),Uf(c)){if(w=c.stateNode,m=c.memoizedProps,w[gi]=c,(T=w.nodeValue!==m)&&(a=Br,a!==null))switch(a.tag){case 3:pe(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&pe(w.nodeValue,m,(a.mode&1)!==0)}T&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[gi]=c,c.stateNode=w}return Ls(c),null;case 13:if(sn(pn),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(cn&&zr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)y_(),Cu(),c.flags|=98560,T=!1;else if(T=Uf(c),w!==null&&w.dehydrated!==null){if(a===null){if(!T)throw Error(n(318));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[gi]=c}else Cu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ls(c),T=!1}else Fi!==null&&(ev(Fi),Fi=null),T=!0;if(!T)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(pn.current&1)!==0?Kn===0&&(Kn=3):sv())),c.updateQueue!==null&&(c.flags|=4),Ls(c),null);case 4:return Au(),$x(a,c),a===null&&il(c.stateNode.containerInfo),Ls(c),null;case 10:return xx(c.type._context),Ls(c),null;case 17:return _r(c.type)&&Of(),Ls(c),null;case 19:if(sn(pn),T=c.memoizedState,T===null)return Ls(c),null;if(w=(c.flags&128)!==0,V=T.rendering,V===null)if(w)oh(T,!1);else{if(Kn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(V=Kf(a),V!==null){for(c.flags|=128,oh(T,!1),w=V.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)T=m,a=w,T.flags&=14680066,V=T.alternate,V===null?(T.childLanes=0,T.lanes=a,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=V.childLanes,T.lanes=V.lanes,T.child=V.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=V.memoizedProps,T.memoizedState=V.memoizedState,T.updateQueue=V.updateQueue,T.type=V.type,a=V.dependencies,T.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return tn(pn,pn.current&1|2),c.child}a=a.sibling}T.tail!==null&&Qt()>Ru&&(c.flags|=128,w=!0,oh(T,!1),c.lanes=4194304)}else{if(!w)if(a=Kf(V),a!==null){if(c.flags|=128,w=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),oh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!V.alternate&&!cn)return Ls(c),null}else 2*Qt()-T.renderingStartTime>Ru&&m!==1073741824&&(c.flags|=128,w=!0,oh(T,!1),c.lanes=4194304);T.isBackwards?(V.sibling=c.child,c.child=V):(m=T.last,m!==null?m.sibling=V:c.child=V,T.last=V)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=Qt(),c.sibling=null,m=pn.current,tn(pn,w?m&1|2:m&1),c):(Ls(c),null);case 22:case 23:return nv(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&(c.mode&1)!==0?(Ur&1073741824)!==0&&(Ls(c),c.subtreeFlags&6&&(c.flags|=8192)):Ls(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function HP(a,c){switch(dx(c),c.tag){case 1:return _r(c.type)&&Of(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Au(),sn(wr),sn(Is),jx(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return bx(c),null;case 13:if(sn(pn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Cu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return sn(pn),null;case 4:return Au(),null;case 10:return xx(c.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var sm=!1,Ms=!1,WP=typeof WeakSet=="function"?WeakSet:Set,We=null;function Pu(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){En(a,c,w)}else m.current=null}function Hx(a,c,m){try{m()}catch(w){En(a,c,w)}}var xb=!1;function qP(a,c){if(ze=oi,a=Hd(),Wd(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var C=w.anchorOffset,T=w.focusNode;w=w.focusOffset;try{m.nodeType,T.nodeType}catch{m=null;break e}var V=0,Y=-1,te=-1,ge=0,Se=0,Pe=a,Ce=null;t:for(;;){for(var $e;Pe!==m||C!==0&&Pe.nodeType!==3||(Y=V+C),Pe!==T||w!==0&&Pe.nodeType!==3||(te=V+w),Pe.nodeType===3&&(V+=Pe.nodeValue.length),($e=Pe.firstChild)!==null;)Ce=Pe,Pe=$e;for(;;){if(Pe===a)break t;if(Ce===m&&++ge===C&&(Y=V),Ce===T&&++Se===w&&(te=V),($e=Pe.nextSibling)!==null)break;Pe=Ce,Ce=Pe.parentNode}Pe=$e}m=Y===-1||te===-1?null:{start:Y,end:te}}else m=null}m=m||{start:0,end:0}}else m=null;for(nt={focusedElem:a,selectionRange:m},oi=!1,We=c;We!==null;)if(c=We,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,We=a;else for(;We!==null;){c=We;try{var qe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Ze=qe.memoizedProps,Pn=qe.memoizedState,le=c.stateNode,se=le.getSnapshotBeforeUpdate(c.elementType===c.type?Ze:Vi(c.type,Ze),Pn);le.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var he=c.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Le){En(c,c.return,Le)}if(a=c.sibling,a!==null){a.return=c.return,We=a;break}We=c.return}return qe=xb,xb=!1,qe}function lh(a,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&a)===a){var T=C.destroy;C.destroy=void 0,T!==void 0&&Hx(c,m,T)}C=C.next}while(C!==w)}}function rm(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function Wx(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function vb(a){var c=a.alternate;c!==null&&(a.alternate=null,vb(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[gi],delete c[ol],delete c[ll],delete c[ax],delete c[ox])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function yb(a){return a.tag===5||a.tag===3||a.tag===4}function wb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||yb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function qx(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Ne));else if(w!==4&&(a=a.child,a!==null))for(qx(a,c,m),a=a.sibling;a!==null;)qx(a,c,m),a=a.sibling}function Gx(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(Gx(a,c,m),a=a.sibling;a!==null;)Gx(a,c,m),a=a.sibling}var gs=null,Bi=!1;function ml(a,c,m){for(m=m.child;m!==null;)_b(a,c,m),m=m.sibling}function _b(a,c,m){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(na,m)}catch{}switch(m.tag){case 5:Ms||Pu(m,c);case 6:var w=gs,C=Bi;gs=null,ml(a,c,m),gs=w,Bi=C,gs!==null&&(Bi?(a=gs,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):gs.removeChild(m.stateNode));break;case 18:gs!==null&&(Bi?(a=gs,m=m.stateNode,a.nodeType===8?Xd(a.parentNode,m):a.nodeType===1&&Xd(a,m),Ts(a)):Xd(gs,m.stateNode));break;case 4:w=gs,C=Bi,gs=m.stateNode.containerInfo,Bi=!0,ml(a,c,m),gs=w,Bi=C;break;case 0:case 11:case 14:case 15:if(!Ms&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){C=w=w.next;do{var T=C,V=T.destroy;T=T.tag,V!==void 0&&((T&2)!==0||(T&4)!==0)&&Hx(m,c,V),C=C.next}while(C!==w)}ml(a,c,m);break;case 1:if(!Ms&&(Pu(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(Y){En(m,c,Y)}ml(a,c,m);break;case 21:ml(a,c,m);break;case 22:m.mode&1?(Ms=(w=Ms)||m.memoizedState!==null,ml(a,c,m),Ms=w):ml(a,c,m);break;default:ml(a,c,m)}}function bb(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new WP),c.forEach(function(w){var C=tI.bind(null,a,w);m.has(w)||(m.add(w),w.then(C,C))})}}function zi(a,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var C=m[w];try{var T=a,V=c,Y=V;e:for(;Y!==null;){switch(Y.tag){case 5:gs=Y.stateNode,Bi=!1;break e;case 3:gs=Y.stateNode.containerInfo,Bi=!0;break e;case 4:gs=Y.stateNode.containerInfo,Bi=!0;break e}Y=Y.return}if(gs===null)throw Error(n(160));_b(T,V,C),gs=null,Bi=!1;var te=C.alternate;te!==null&&(te.return=null),C.return=null}catch(ge){En(C,c,ge)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Nb(c,a),c=c.sibling}function Nb(a,c){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(zi(c,a),xa(a),w&4){try{lh(3,a,a.return),rm(3,a)}catch(Ze){En(a,a.return,Ze)}try{lh(5,a,a.return)}catch(Ze){En(a,a.return,Ze)}}break;case 1:zi(c,a),xa(a),w&512&&m!==null&&Pu(m,m.return);break;case 5:if(zi(c,a),xa(a),w&512&&m!==null&&Pu(m,m.return),a.flags&32){var C=a.stateNode;try{us(C,"")}catch(Ze){En(a,a.return,Ze)}}if(w&4&&(C=a.stateNode,C!=null)){var T=a.memoizedProps,V=m!==null?m.memoizedProps:T,Y=a.type,te=a.updateQueue;if(a.updateQueue=null,te!==null)try{Y==="input"&&T.type==="radio"&&T.name!=null&&js(C,T),ur(Y,V);var ge=ur(Y,T);for(V=0;V<te.length;V+=2){var Se=te[V],Pe=te[V+1];Se==="style"?ei(C,Pe):Se==="dangerouslySetInnerHTML"?Ji(C,Pe):Se==="children"?us(C,Pe):z(C,Se,Pe,ge)}switch(Y){case"input":An(C,T);break;case"textarea":Bo(C,T);break;case"select":var Ce=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!T.multiple;var $e=T.value;$e!=null?cs(C,!!T.multiple,$e,!1):Ce!==!!T.multiple&&(T.defaultValue!=null?cs(C,!!T.multiple,T.defaultValue,!0):cs(C,!!T.multiple,T.multiple?[]:"",!1))}C[ol]=T}catch(Ze){En(a,a.return,Ze)}}break;case 6:if(zi(c,a),xa(a),w&4){if(a.stateNode===null)throw Error(n(162));C=a.stateNode,T=a.memoizedProps;try{C.nodeValue=T}catch(Ze){En(a,a.return,Ze)}}break;case 3:if(zi(c,a),xa(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Ts(c.containerInfo)}catch(Ze){En(a,a.return,Ze)}break;case 4:zi(c,a),xa(a);break;case 13:zi(c,a),xa(a),C=a.child,C.flags&8192&&(T=C.memoizedState!==null,C.stateNode.isHidden=T,!T||C.alternate!==null&&C.alternate.memoizedState!==null||(Yx=Qt())),w&4&&bb(a);break;case 22:if(Se=m!==null&&m.memoizedState!==null,a.mode&1?(Ms=(ge=Ms)||Se,zi(c,a),Ms=ge):zi(c,a),xa(a),w&8192){if(ge=a.memoizedState!==null,(a.stateNode.isHidden=ge)&&!Se&&(a.mode&1)!==0)for(We=a,Se=a.child;Se!==null;){for(Pe=We=Se;We!==null;){switch(Ce=We,$e=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:lh(4,Ce,Ce.return);break;case 1:Pu(Ce,Ce.return);var qe=Ce.stateNode;if(typeof qe.componentWillUnmount=="function"){w=Ce,m=Ce.return;try{c=w,qe.props=c.memoizedProps,qe.state=c.memoizedState,qe.componentWillUnmount()}catch(Ze){En(w,m,Ze)}}break;case 5:Pu(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){Eb(Pe);continue}}$e!==null?($e.return=Ce,We=$e):Eb(Pe)}Se=Se.sibling}e:for(Se=null,Pe=a;;){if(Pe.tag===5){if(Se===null){Se=Pe;try{C=Pe.stateNode,ge?(T=C.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(Y=Pe.stateNode,te=Pe.memoizedProps.style,V=te!=null&&te.hasOwnProperty("display")?te.display:null,Y.style.display=Rr("display",V))}catch(Ze){En(a,a.return,Ze)}}}else if(Pe.tag===6){if(Se===null)try{Pe.stateNode.nodeValue=ge?"":Pe.memoizedProps}catch(Ze){En(a,a.return,Ze)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===a)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===a)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===a)break e;Se===Pe&&(Se=null),Pe=Pe.return}Se===Pe&&(Se=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:zi(c,a),xa(a),w&4&&bb(a);break;case 21:break;default:zi(c,a),xa(a)}}function xa(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(yb(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var C=w.stateNode;w.flags&32&&(us(C,""),w.flags&=-33);var T=wb(a);Gx(a,T,C);break;case 3:case 4:var V=w.stateNode.containerInfo,Y=wb(a);qx(a,Y,V);break;default:throw Error(n(161))}}catch(te){En(a,a.return,te)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function GP(a,c,m){We=a,jb(a)}function jb(a,c,m){for(var w=(a.mode&1)!==0;We!==null;){var C=We,T=C.child;if(C.tag===22&&w){var V=C.memoizedState!==null||sm;if(!V){var Y=C.alternate,te=Y!==null&&Y.memoizedState!==null||Ms;Y=sm;var ge=Ms;if(sm=V,(Ms=te)&&!ge)for(We=C;We!==null;)V=We,te=V.child,V.tag===22&&V.memoizedState!==null?Sb(C):te!==null?(te.return=V,We=te):Sb(C);for(;T!==null;)We=T,jb(T),T=T.sibling;We=C,sm=Y,Ms=ge}Cb(a)}else(C.subtreeFlags&8772)!==0&&T!==null?(T.return=C,We=T):Cb(a)}}function Cb(a){for(;We!==null;){var c=We;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ms||rm(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ms)if(m===null)w.componentDidMount();else{var C=c.elementType===c.type?m.memoizedProps:Vi(c.type,m.memoizedProps);w.componentDidUpdate(C,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var T=c.updateQueue;T!==null&&E_(c,T,w);break;case 3:var V=c.updateQueue;if(V!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}E_(c,V,m)}break;case 5:var Y=c.stateNode;if(m===null&&c.flags&4){m=Y;var te=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&m.focus();break;case"img":te.src&&(m.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ge=c.alternate;if(ge!==null){var Se=ge.memoizedState;if(Se!==null){var Pe=Se.dehydrated;Pe!==null&&Ts(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ms||c.flags&512&&Wx(c)}catch(Ce){En(c,c.return,Ce)}}if(c===a){We=null;break}if(m=c.sibling,m!==null){m.return=c.return,We=m;break}We=c.return}}function Eb(a){for(;We!==null;){var c=We;if(c===a){We=null;break}var m=c.sibling;if(m!==null){m.return=c.return,We=m;break}We=c.return}}function Sb(a){for(;We!==null;){var c=We;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{rm(4,c)}catch(te){En(c,m,te)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var C=c.return;try{w.componentDidMount()}catch(te){En(c,C,te)}}var T=c.return;try{Wx(c)}catch(te){En(c,T,te)}break;case 5:var V=c.return;try{Wx(c)}catch(te){En(c,V,te)}}}catch(te){En(c,c.return,te)}if(c===a){We=null;break}var Y=c.sibling;if(Y!==null){Y.return=c.return,We=Y;break}We=c.return}}var KP=Math.ceil,im=H.ReactCurrentDispatcher,Kx=H.ReactCurrentOwner,_i=H.ReactCurrentBatchConfig,Mt=0,rs=null,Fn=null,xs=0,Ur=0,Iu=cl(0),Kn=0,ch=null,Ac=0,am=0,Zx=0,uh=null,Nr=null,Yx=0,Ru=1/0,go=null,om=!1,Qx=null,pl=null,lm=!1,gl=null,cm=0,dh=0,Xx=null,um=-1,dm=0;function er(){return(Mt&6)!==0?Qt():um!==-1?um:um=Qt()}function xl(a){return(a.mode&1)===0?1:(Mt&2)!==0&&xs!==0?xs&-xs:PP.transition!==null?(dm===0&&(dm=dc()),dm):(a=Nt,a!==0||(a=window.event,a=a===void 0?16:jt(a.type)),a)}function Ui(a,c,m,w){if(50<dh)throw dh=0,Xx=null,Error(n(185));Ws(a,m,w),((Mt&2)===0||a!==rs)&&(a===rs&&((Mt&2)===0&&(am|=m),Kn===4&&vl(a,xs)),jr(a,w),m===1&&Mt===0&&(c.mode&1)===0&&(Ru=Qt()+500,Vf&&dl()))}function jr(a,c){var m=a.callbackNode;ri(a,c);var w=zt(a,a===rs?xs:0);if(w===0)m!==null&&Ha(m),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(m!=null&&Ha(m),c===1)a.tag===0?kP(Ab.bind(null,a)):m_(Ab.bind(null,a)),Ps(function(){(Mt&6)===0&&dl()}),m=null;else{switch(Ss(w)){case 1:m=zo;break;case 4:m=uc;break;case 16:m=qa;break;case 536870912:m=ni;break;default:m=qa}m=Ob(m,Tb.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function Tb(a,c){if(um=-1,dm=0,(Mt&6)!==0)throw Error(n(327));var m=a.callbackNode;if(Lu()&&a.callbackNode!==m)return null;var w=zt(a,a===rs?xs:0);if(w===0)return null;if((w&30)!==0||(w&a.expiredLanes)!==0||c)c=hm(a,w);else{c=w;var C=Mt;Mt|=2;var T=Pb();(rs!==a||xs!==c)&&(go=null,Ru=Qt()+500,Pc(a,c));do try{QP();break}catch(Y){kb(a,Y)}while(!0);gx(),im.current=T,Mt=C,Fn!==null?c=0:(rs=null,xs=0,c=Kn)}if(c!==0){if(c===2&&(C=ts(a),C!==0&&(w=C,c=Jx(a,C))),c===1)throw m=ch,Pc(a,0),vl(a,w),jr(a,Qt()),m;if(c===6)vl(a,w);else{if(C=a.current.alternate,(w&30)===0&&!ZP(C)&&(c=hm(a,w),c===2&&(T=ts(a),T!==0&&(w=T,c=Jx(a,T))),c===1))throw m=ch,Pc(a,0),vl(a,w),jr(a,Qt()),m;switch(a.finishedWork=C,a.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:Ic(a,Nr,go);break;case 3:if(vl(a,w),(w&130023424)===w&&(c=Yx+500-Qt(),10<c)){if(zt(a,0)!==0)break;if(C=a.suspendedLanes,(C&w)!==w){er(),a.pingedLanes|=a.suspendedLanes&C;break}a.timeoutHandle=qn(Ic.bind(null,a,Nr,go),c);break}Ic(a,Nr,go);break;case 4:if(vl(a,w),(w&4194240)===w)break;for(c=a.eventTimes,C=-1;0<w;){var V=31-xt(w);T=1<<V,V=c[V],V>C&&(C=V),w&=~T}if(w=C,w=Qt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*KP(w/1960))-w,10<w){a.timeoutHandle=qn(Ic.bind(null,a,Nr,go),w);break}Ic(a,Nr,go);break;case 5:Ic(a,Nr,go);break;default:throw Error(n(329))}}}return jr(a,Qt()),a.callbackNode===m?Tb.bind(null,a):null}function Jx(a,c){var m=uh;return a.current.memoizedState.isDehydrated&&(Pc(a,c).flags|=256),a=hm(a,c),a!==2&&(c=Nr,Nr=m,c!==null&&ev(c)),a}function ev(a){Nr===null?Nr=a:Nr.push.apply(Nr,a)}function ZP(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var C=m[w],T=C.getSnapshot;C=C.value;try{if(!Fr(T(),C))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function vl(a,c){for(c&=~Zx,c&=~am,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-xt(c),w=1<<m;a[m]=-1,c&=~w}}function Ab(a){if((Mt&6)!==0)throw Error(n(327));Lu();var c=zt(a,0);if((c&1)===0)return jr(a,Qt()),null;var m=hm(a,c);if(a.tag!==0&&m===2){var w=ts(a);w!==0&&(c=w,m=Jx(a,w))}if(m===1)throw m=ch,Pc(a,0),vl(a,c),jr(a,Qt()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Ic(a,Nr,go),jr(a,Qt()),null}function tv(a,c){var m=Mt;Mt|=1;try{return a(c)}finally{Mt=m,Mt===0&&(Ru=Qt()+500,Vf&&dl())}}function kc(a){gl!==null&&gl.tag===0&&(Mt&6)===0&&Lu();var c=Mt;Mt|=1;var m=_i.transition,w=Nt;try{if(_i.transition=null,Nt=1,a)return a()}finally{Nt=w,_i.transition=m,Mt=c,(Mt&6)===0&&dl()}}function nv(){Ur=Iu.current,sn(Iu)}function Pc(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,On(m)),Fn!==null)for(m=Fn.return;m!==null;){var w=m;switch(dx(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Of();break;case 3:Au(),sn(wr),sn(Is),jx();break;case 5:bx(w);break;case 4:Au();break;case 13:sn(pn);break;case 19:sn(pn);break;case 10:xx(w.type._context);break;case 22:case 23:nv()}m=m.return}if(rs=a,Fn=a=yl(a.current,null),xs=Ur=c,Kn=0,ch=null,Zx=am=Ac=0,Nr=uh=null,Ec!==null){for(c=0;c<Ec.length;c++)if(m=Ec[c],w=m.interleaved,w!==null){m.interleaved=null;var C=w.next,T=m.pending;if(T!==null){var V=T.next;T.next=C,w.next=V}m.pending=w}Ec=null}return a}function kb(a,c){do{var m=Fn;try{if(gx(),Zf.current=Jf,Yf){for(var w=gn.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}Yf=!1}if(Tc=0,ss=Gn=gn=null,sh=!1,rh=0,Kx.current=null,m===null||m.return===null){Kn=1,ch=c,Fn=null;break}e:{var T=a,V=m.return,Y=m,te=c;if(c=xs,Y.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var ge=te,Se=Y,Pe=Se.tag;if((Se.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var Ce=Se.alternate;Ce?(Se.updateQueue=Ce.updateQueue,Se.memoizedState=Ce.memoizedState,Se.lanes=Ce.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var $e=tb(V);if($e!==null){$e.flags&=-257,nb($e,V,Y,T,c),$e.mode&1&&eb(T,ge,c),c=$e,te=ge;var qe=c.updateQueue;if(qe===null){var Ze=new Set;Ze.add(te),c.updateQueue=Ze}else qe.add(te);break e}else{if((c&1)===0){eb(T,ge,c),sv();break e}te=Error(n(426))}}else if(cn&&Y.mode&1){var Pn=tb(V);if(Pn!==null){(Pn.flags&65536)===0&&(Pn.flags|=256),nb(Pn,V,Y,T,c),mx(ku(te,Y));break e}}T=te=ku(te,Y),Kn!==4&&(Kn=2),uh===null?uh=[T]:uh.push(T),T=V;do{switch(T.tag){case 3:T.flags|=65536,c&=-c,T.lanes|=c;var le=X_(T,te,c);C_(T,le);break e;case 1:Y=te;var se=T.type,he=T.stateNode;if((T.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(pl===null||!pl.has(he)))){T.flags|=65536,c&=-c,T.lanes|=c;var Le=J_(T,Y,c);C_(T,Le);break e}}T=T.return}while(T!==null)}Rb(m)}catch(Ye){c=Ye,Fn===m&&m!==null&&(Fn=m=m.return);continue}break}while(!0)}function Pb(){var a=im.current;return im.current=Jf,a===null?Jf:a}function sv(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),rs===null||(Ac&268435455)===0&&(am&268435455)===0||vl(rs,xs)}function hm(a,c){var m=Mt;Mt|=2;var w=Pb();(rs!==a||xs!==c)&&(go=null,Pc(a,c));do try{YP();break}catch(C){kb(a,C)}while(!0);if(gx(),Mt=m,im.current=w,Fn!==null)throw Error(n(261));return rs=null,xs=0,Kn}function YP(){for(;Fn!==null;)Ib(Fn)}function QP(){for(;Fn!==null&&!Wa();)Ib(Fn)}function Ib(a){var c=Db(a.alternate,a,Ur);a.memoizedProps=a.pendingProps,c===null?Rb(a):Fn=c,Kx.current=null}function Rb(a){var c=a;do{var m=c.alternate;if(a=c.return,(c.flags&32768)===0){if(m=$P(m,c,Ur),m!==null){Fn=m;return}}else{if(m=HP(m,c),m!==null){m.flags&=32767,Fn=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Kn=6,Fn=null;return}}if(c=c.sibling,c!==null){Fn=c;return}Fn=c=a}while(c!==null);Kn===0&&(Kn=5)}function Ic(a,c,m){var w=Nt,C=_i.transition;try{_i.transition=null,Nt=1,XP(a,c,m,w)}finally{_i.transition=C,Nt=w}return null}function XP(a,c,m,w){do Lu();while(gl!==null);if((Mt&6)!==0)throw Error(n(327));m=a.finishedWork;var C=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var T=m.lanes|m.childLanes;if(on(a,T),a===rs&&(Fn=rs=null,xs=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||lm||(lm=!0,Ob(qa,function(){return Lu(),null})),T=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||T){T=_i.transition,_i.transition=null;var V=Nt;Nt=1;var Y=Mt;Mt|=4,Kx.current=null,qP(a,m),Nb(m,a),mi(nt),oi=!!ze,nt=ze=null,a.current=m,GP(m),pr(),Mt=Y,Nt=V,_i.transition=T}else a.current=m;if(lm&&(lm=!1,gl=a,cm=C),T=a.pendingLanes,T===0&&(pl=null),sa(m.stateNode),jr(a,Qt()),c!==null)for(w=a.onRecoverableError,m=0;m<c.length;m++)C=c[m],w(C.value,{componentStack:C.stack,digest:C.digest});if(om)throw om=!1,a=Qx,Qx=null,a;return(cm&1)!==0&&a.tag!==0&&Lu(),T=a.pendingLanes,(T&1)!==0?a===Xx?dh++:(dh=0,Xx=a):dh=0,dl(),null}function Lu(){if(gl!==null){var a=Ss(cm),c=_i.transition,m=Nt;try{if(_i.transition=null,Nt=16>a?16:a,gl===null)var w=!1;else{if(a=gl,gl=null,cm=0,(Mt&6)!==0)throw Error(n(331));var C=Mt;for(Mt|=4,We=a.current;We!==null;){var T=We,V=T.child;if((We.flags&16)!==0){var Y=T.deletions;if(Y!==null){for(var te=0;te<Y.length;te++){var ge=Y[te];for(We=ge;We!==null;){var Se=We;switch(Se.tag){case 0:case 11:case 15:lh(8,Se,T)}var Pe=Se.child;if(Pe!==null)Pe.return=Se,We=Pe;else for(;We!==null;){Se=We;var Ce=Se.sibling,$e=Se.return;if(vb(Se),Se===ge){We=null;break}if(Ce!==null){Ce.return=$e,We=Ce;break}We=$e}}}var qe=T.alternate;if(qe!==null){var Ze=qe.child;if(Ze!==null){qe.child=null;do{var Pn=Ze.sibling;Ze.sibling=null,Ze=Pn}while(Ze!==null)}}We=T}}if((T.subtreeFlags&2064)!==0&&V!==null)V.return=T,We=V;else e:for(;We!==null;){if(T=We,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:lh(9,T,T.return)}var le=T.sibling;if(le!==null){le.return=T.return,We=le;break e}We=T.return}}var se=a.current;for(We=se;We!==null;){V=We;var he=V.child;if((V.subtreeFlags&2064)!==0&&he!==null)he.return=V,We=he;else e:for(V=se;We!==null;){if(Y=We,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:rm(9,Y)}}catch(Ye){En(Y,Y.return,Ye)}if(Y===V){We=null;break e}var Le=Y.sibling;if(Le!==null){Le.return=Y.return,We=Le;break e}We=Y.return}}if(Mt=C,dl(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(na,a)}catch{}w=!0}return w}finally{Nt=m,_i.transition=c}}return!1}function Lb(a,c,m){c=ku(m,c),c=X_(a,c,1),a=fl(a,c,1),c=er(),a!==null&&(Ws(a,1,c),jr(a,c))}function En(a,c,m){if(a.tag===3)Lb(a,a,m);else for(;c!==null;){if(c.tag===3){Lb(c,a,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(pl===null||!pl.has(w))){a=ku(m,a),a=J_(c,a,1),c=fl(c,a,1),a=er(),c!==null&&(Ws(c,1,a),jr(c,a));break}}c=c.return}}function JP(a,c,m){var w=a.pingCache;w!==null&&w.delete(c),c=er(),a.pingedLanes|=a.suspendedLanes&m,rs===a&&(xs&m)===m&&(Kn===4||Kn===3&&(xs&130023424)===xs&&500>Qt()-Yx?Pc(a,0):Zx|=m),jr(a,c)}function Mb(a,c){c===0&&((a.mode&1)===0?c=1:(c=si,si<<=1,(si&130023424)===0&&(si=4194304)));var m=er();a=fo(a,c),a!==null&&(Ws(a,c,m),jr(a,m))}function eI(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),Mb(a,m)}function tI(a,c){var m=0;switch(a.tag){case 13:var w=a.stateNode,C=a.memoizedState;C!==null&&(m=C.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),Mb(a,m)}var Db;Db=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||wr.current)br=!0;else{if((a.lanes&m)===0&&(c.flags&128)===0)return br=!1,UP(a,c,m);br=(a.flags&131072)!==0}else br=!1,cn&&(c.flags&1048576)!==0&&p_(c,zf,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;nm(a,c),a=c.pendingProps;var C=bu(c,Is.current);Tu(c,m),C=Sx(null,c,w,a,C,m);var T=Tx();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,_r(w)?(T=!0,Ff(c)):T=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,wx(c),C.updater=em,c.stateNode=C,C._reactInternals=c,Lx(c,w,a,m),c=Fx(null,c,w,!0,T,m)):(c.tag=0,cn&&T&&ux(c),Js(null,c,C,m),c=c.child),c;case 16:w=c.elementType;e:{switch(nm(a,c),a=c.pendingProps,C=w._init,w=C(w._payload),c.type=w,C=c.tag=sI(w),a=Vi(w,a),C){case 0:c=Ox(null,c,w,a,m);break e;case 1:c=lb(null,c,w,a,m);break e;case 11:c=sb(null,c,w,a,m);break e;case 14:c=rb(null,c,w,Vi(w.type,a),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Vi(w,C),Ox(a,c,w,C,m);case 1:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Vi(w,C),lb(a,c,w,C,m);case 3:e:{if(cb(c),a===null)throw Error(n(387));w=c.pendingProps,T=c.memoizedState,C=T.element,j_(a,c),Gf(c,w,null,m);var V=c.memoizedState;if(w=V.element,T.isDehydrated)if(T={element:w,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){C=ku(Error(n(423)),c),c=ub(a,c,w,m,C);break e}else if(w!==C){C=ku(Error(n(424)),c),c=ub(a,c,w,m,C);break e}else for(zr=ma(c.stateNode.containerInfo.firstChild),Br=c,cn=!0,Fi=null,m=b_(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Cu(),w===C){c=po(a,c,m);break e}Js(a,c,w,m)}c=c.child}return c;case 5:return S_(c),a===null&&fx(c),w=c.type,C=c.pendingProps,T=a!==null?a.memoizedProps:null,V=C.children,bt(w,C)?V=null:T!==null&&bt(w,T)&&(c.flags|=32),ob(a,c),Js(a,c,V,m),c.child;case 6:return a===null&&fx(c),null;case 13:return db(a,c,m);case 4:return _x(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=Eu(c,null,w,m):Js(a,c,w,m),c.child;case 11:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Vi(w,C),sb(a,c,w,C,m);case 7:return Js(a,c,c.pendingProps,m),c.child;case 8:return Js(a,c,c.pendingProps.children,m),c.child;case 12:return Js(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,C=c.pendingProps,T=c.memoizedProps,V=C.value,tn(Hf,w._currentValue),w._currentValue=V,T!==null)if(Fr(T.value,V)){if(T.children===C.children&&!wr.current){c=po(a,c,m);break e}}else for(T=c.child,T!==null&&(T.return=c);T!==null;){var Y=T.dependencies;if(Y!==null){V=T.child;for(var te=Y.firstContext;te!==null;){if(te.context===w){if(T.tag===1){te=mo(-1,m&-m),te.tag=2;var ge=T.updateQueue;if(ge!==null){ge=ge.shared;var Se=ge.pending;Se===null?te.next=te:(te.next=Se.next,Se.next=te),ge.pending=te}}T.lanes|=m,te=T.alternate,te!==null&&(te.lanes|=m),vx(T.return,m,c),Y.lanes|=m;break}te=te.next}}else if(T.tag===10)V=T.type===c.type?null:T.child;else if(T.tag===18){if(V=T.return,V===null)throw Error(n(341));V.lanes|=m,Y=V.alternate,Y!==null&&(Y.lanes|=m),vx(V,m,c),V=T.sibling}else V=T.child;if(V!==null)V.return=T;else for(V=T;V!==null;){if(V===c){V=null;break}if(T=V.sibling,T!==null){T.return=V.return,V=T;break}V=V.return}T=V}Js(a,c,C.children,m),c=c.child}return c;case 9:return C=c.type,w=c.pendingProps.children,Tu(c,m),C=yi(C),w=w(C),c.flags|=1,Js(a,c,w,m),c.child;case 14:return w=c.type,C=Vi(w,c.pendingProps),C=Vi(w.type,C),rb(a,c,w,C,m);case 15:return ib(a,c,c.type,c.pendingProps,m);case 17:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Vi(w,C),nm(a,c),c.tag=1,_r(w)?(a=!0,Ff(c)):a=!1,Tu(c,m),Y_(c,w,C),Lx(c,w,C,m),Fx(null,c,w,!0,a,m);case 19:return fb(a,c,m);case 22:return ab(a,c,m)}throw Error(n(156,c.tag))};function Ob(a,c){return cc(a,c)}function nI(a,c,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(a,c,m,w){return new nI(a,c,m,w)}function rv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function sI(a){if(typeof a=="function")return rv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===K)return 11;if(a===oe)return 14}return 2}function yl(a,c){var m=a.alternate;return m===null?(m=bi(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function fm(a,c,m,w,C,T){var V=2;if(w=a,typeof a=="function")rv(a)&&(V=1);else if(typeof a=="string")V=5;else e:switch(a){case F:return Rc(m.children,C,T,c);case D:V=8,C|=8;break;case O:return a=bi(12,m,c,C|2),a.elementType=O,a.lanes=T,a;case W:return a=bi(13,m,c,C),a.elementType=W,a.lanes=T,a;case ce:return a=bi(19,m,c,C),a.elementType=ce,a.lanes=T,a;case xe:return mm(m,C,T,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:V=10;break e;case $:V=9;break e;case K:V=11;break e;case oe:V=14;break e;case ne:V=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=bi(V,m,c,C),c.elementType=a,c.type=w,c.lanes=T,c}function Rc(a,c,m,w){return a=bi(7,a,w,c),a.lanes=m,a}function mm(a,c,m,w){return a=bi(22,a,w,c),a.elementType=xe,a.lanes=m,a.stateNode={isHidden:!1},a}function iv(a,c,m){return a=bi(6,a,null,c),a.lanes=m,a}function av(a,c,m){return c=bi(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function rI(a,c,m,w,C){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=w,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function ov(a,c,m,w,C,T,V,Y,te){return a=new rI(a,c,m,Y,te),c===1?(c=1,T===!0&&(c|=8)):c=0,T=bi(3,null,null,c),a.current=T,T.stateNode=a,T.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},wx(T),a}function iI(a,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:w==null?null:""+w,children:a,containerInfo:c,implementation:m}}function Fb(a){if(!a)return ul;a=a._reactInternals;e:{if(mr(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(_r(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(_r(m))return h_(a,m,c)}return c}function Vb(a,c,m,w,C,T,V,Y,te){return a=ov(m,w,!0,a,C,T,V,Y,te),a.context=Fb(null),m=a.current,w=er(),C=xl(m),T=mo(w,C),T.callback=c??null,fl(m,T,C),a.current.lanes=C,Ws(a,C,w),jr(a,w),a}function pm(a,c,m,w){var C=c.current,T=er(),V=xl(C);return m=Fb(m),c.context===null?c.context=m:c.pendingContext=m,c=mo(T,V),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=fl(C,c,V),a!==null&&(Ui(a,C,V,T),qf(a,C,V)),V}function gm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Bb(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function lv(a,c){Bb(a,c),(a=a.alternate)&&Bb(a,c)}function aI(){return null}var zb=typeof reportError=="function"?reportError:function(a){console.error(a)};function cv(a){this._internalRoot=a}xm.prototype.render=cv.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));pm(a,c,null,null)},xm.prototype.unmount=cv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;kc(function(){pm(null,a,null,null)}),c[$t]=null}};function xm(a){this._internalRoot=a}xm.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ya();a={blockedOn:null,target:a,priority:c};for(var m=0;m<ln.length&&c!==0&&c<ln[m].priority;m++);ln.splice(m,0,a),m===0&&oa(a)}};function uv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function vm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ub(){}function oI(a,c,m,w,C){if(C){if(typeof w=="function"){var T=w;w=function(){var ge=gm(V);T.call(ge)}}var V=Vb(c,w,a,0,null,!1,!1,"",Ub);return a._reactRootContainer=V,a[$t]=V.current,il(a.nodeType===8?a.parentNode:a),kc(),V}for(;C=a.lastChild;)a.removeChild(C);if(typeof w=="function"){var Y=w;w=function(){var ge=gm(te);Y.call(ge)}}var te=ov(a,0,!1,null,null,!1,!1,"",Ub);return a._reactRootContainer=te,a[$t]=te.current,il(a.nodeType===8?a.parentNode:a),kc(function(){pm(c,te,m,w)}),te}function ym(a,c,m,w,C){var T=m._reactRootContainer;if(T){var V=T;if(typeof C=="function"){var Y=C;C=function(){var te=gm(V);Y.call(te)}}pm(c,V,a,C)}else V=oI(m,c,a,C,w);return gm(V)}Ka=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ue(c.pendingLanes);m!==0&&(Lr(c,m|1),jr(c,Qt()),(Mt&6)===0&&(Ru=Qt()+500,dl()))}break;case 13:kc(function(){var w=fo(a,1);if(w!==null){var C=er();Ui(w,a,1,C)}}),lv(a,1)}},ii=function(a){if(a.tag===13){var c=fo(a,134217728);if(c!==null){var m=er();Ui(c,a,134217728,m)}lv(a,134217728)}},Za=function(a){if(a.tag===13){var c=xl(a),m=fo(a,c);if(m!==null){var w=er();Ui(m,a,c,w)}lv(a,c)}},Ya=function(){return Nt},ia=function(a,c){var m=Nt;try{return Nt=a,c()}finally{Nt=m}},hr=function(a,c,m){switch(c){case"input":if(An(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==a&&w.form===a.form){var C=wu(w);if(!C)throw Error(n(90));wt(w),An(w,C)}}}break;case"textarea":Bo(a,m);break;case"select":c=m.value,c!=null&&cs(a,!!m.multiple,c,!1)}},hn=tv,Mn=kc;var lI={usingClientEntryPoint:!1,Events:[oo,lo,wu,rt,Ht,tv]},hh={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cI={bundleType:hh.bundleType,version:hh.version,rendererPackageName:hh.rendererPackageName,rendererConfig:hh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=lu(a),a===null?null:a.stateNode},findFiberByHostInstance:hh.findFiberByHostInstance||aI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{na=wm.inject(cI),Es=wm}catch{}}return Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lI,Cr.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uv(c))throw Error(n(200));return iI(a,c,null,m)},Cr.createRoot=function(a,c){if(!uv(a))throw Error(n(299));var m=!1,w="",C=zb;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=ov(a,1,!1,null,null,m,!1,w,C),a[$t]=c.current,il(a.nodeType===8?a.parentNode:a),new cv(c)},Cr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=lu(c),a=a===null?null:a.stateNode,a},Cr.flushSync=function(a){return kc(a)},Cr.hydrate=function(a,c,m){if(!vm(c))throw Error(n(200));return ym(null,a,c,!0,m)},Cr.hydrateRoot=function(a,c,m){if(!uv(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,C=!1,T="",V=zb;if(m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onRecoverableError!==void 0&&(V=m.onRecoverableError)),c=Vb(c,null,a,1,m??null,C,!1,T,V),a[$t]=c.current,il(a),w)for(a=0;a<w.length;a++)m=w[a],C=m._getVersion,C=C(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,C]:c.mutableSourceEagerHydrationData.push(m,C);return new xm(c)},Cr.render=function(a,c,m){if(!vm(c))throw Error(n(200));return ym(null,a,c,!1,m)},Cr.unmountComponentAtNode=function(a){if(!vm(a))throw Error(n(40));return a._reactRootContainer?(kc(function(){ym(null,null,a,!1,function(){a._reactRootContainer=null,a[$t]=null})}),!0):!1},Cr.unstable_batchedUpdates=tv,Cr.unstable_renderSubtreeIntoContainer=function(a,c,m,w){if(!vm(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return ym(a,c,m,!1,w)},Cr.version="18.3.1-next-f1338f8080-20240426",Cr}var Yb;function I1(){if(Yb)return fv.exports;Yb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fv.exports=xI(),fv.exports}var Qb;function vI(){if(Qb)return _m;Qb=1;var t=I1();return _m.createRoot=t.createRoot,_m.hydrateRoot=t.hydrateRoot,_m}var yI=vI(),_=Up();const Re=Ky(_),Zy=dI({__proto__:null,default:Re},[_]);/**
 * react-router v7.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xb="popstate";function wI(t={}){function e(r,i){let{pathname:o,search:u,hash:d}=r.location;return Zv("",{pathname:o,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Lh(i)}return bI(e,n,null,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ei(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _I(){return Math.random().toString(36).substring(2,10)}function Jb(t,e){return{usr:t.state,key:t.key,idx:e}}function Zv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?vd(e):e,state:n,key:e&&e.key||r||_I()}}function Lh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function bI(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,d="POP",f=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function g(){d="POP";let k=y(),R=k==null?null:k-p;p=k,f&&f({action:d,location:S.location,delta:R})}function b(k,R){d="PUSH";let I=Zv(S.location,k,R);p=y()+1;let z=Jb(I,p),H=S.createHref(I);try{u.pushState(z,"",H)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(H)}o&&f&&f({action:d,location:S.location,delta:1})}function E(k,R){d="REPLACE";let I=Zv(S.location,k,R);p=y();let z=Jb(I,p),H=S.createHref(I);u.replaceState(z,"",H),o&&f&&f({action:d,location:S.location,delta:0})}function N(k){return NI(k)}let S={get action(){return d},get location(){return t(i,u)},listen(k){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(Xb,g),f=k,()=>{i.removeEventListener(Xb,g),f=null}},createHref(k){return e(i,k)},createURL:N,encodeLocation(k){let R=N(k);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:E,go(k){return u.go(k)}};return S}function NI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Lh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function R1(t,e,n="/"){return jI(t,e,n,!1)}function jI(t,e,n,r){let i=typeof e=="string"?vd(e):e,o=Co(i.pathname||"/",n);if(o==null)return null;let u=L1(t);CI(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let p=DI(o);d=LI(u[f],p,r)}return d}function L1(t,e=[],n=[],r="",i=!1){let o=(u,d,f=i,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&f)return;dn(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let g=bo([r,y.relativePath]),b=n.concat(y);u.children&&u.children.length>0&&(dn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),L1(u.children,e,b,g,f)),!(u.path==null&&!u.index)&&e.push({path:g,score:II(g,u.index),routesMeta:b})};return t.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))o(u,d);else for(let f of M1(u.path))o(u,d,!0,f)}),e}function M1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=M1(r.join("/")),d=[];return d.push(...u.map(f=>f===""?o:[o,f].join("/"))),i&&d.push(...u),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function CI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var EI=/^:[\w-]+$/,SI=3,TI=2,AI=1,kI=10,PI=-2,eN=t=>t==="*";function II(t,e){let n=t.split("/"),r=n.length;return n.some(eN)&&(r+=PI),e&&(r+=TI),n.filter(i=>!eN(i)).reduce((i,o)=>i+(EI.test(o)?SI:o===""?AI:kI),r)}function RI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function LI(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],p=d===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",g=np({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},y),b=f.route;if(!g&&p&&n&&!r[r.length-1].route.index&&(g=np({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!g)return null;Object.assign(i,g.params),u.push({params:i,pathname:bo([o,g.pathname]),pathnameBase:zI(bo([o,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(o=bo([o,g.pathnameBase]))}return u}function np(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:g},b)=>{if(y==="*"){let N=d[b]||"";u=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const E=d[b];return g&&!E?p[y]=void 0:p[y]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:t}}function MI(t,e=!1,n=!0){Ei(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Co(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var OI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FI=t=>OI.test(t);function VI(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?vd(t):t,o;if(n)if(FI(n))o=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?o=tN(n.substring(1),"/"):o=tN(n,e)}else o=e;return{pathname:o,search:UI(r),hash:$I(i)}}function tN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function gv(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yy(t){let e=BI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Qy(t,e,n,r=!1){let i;typeof t=="string"?i=vd(t):(i={...t},dn(!i.pathname||!i.pathname.includes("?"),gv("?","pathname","search",i)),dn(!i.pathname||!i.pathname.includes("#"),gv("#","pathname","hash",i)),dn(!i.search||!i.search.includes("#"),gv("#","search","hash",i)));let o=t===""||i.pathname==="",u=o?"/":i.pathname,d;if(u==null)d=n;else{let g=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),g-=1;i.pathname=b.join("/")}d=g>=0?e[g]:"/"}let f=VI(i,d),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||y)&&(f.pathname+="/"),f}var bo=t=>t.join("/").replace(/\/\/+/g,"/"),zI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$I=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function WI(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var D1=["POST","PUT","PATCH","DELETE"];new Set(D1);var qI=["GET",...D1];new Set(qI);var yd=_.createContext(null);yd.displayName="DataRouter";var $p=_.createContext(null);$p.displayName="DataRouterState";_.createContext(!1);var O1=_.createContext({isTransitioning:!1});O1.displayName="ViewTransition";var GI=_.createContext(new Map);GI.displayName="Fetchers";var KI=_.createContext(null);KI.displayName="Await";var Ti=_.createContext(null);Ti.displayName="Navigation";var Xh=_.createContext(null);Xh.displayName="Location";var Ai=_.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var Xy=_.createContext(null);Xy.displayName="RouteError";function ZI(t,{relative:e}={}){dn(wd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=_.useContext(Ti),{hash:i,pathname:o,search:u}=Jh(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:bo([n,o])),r.createHref({pathname:d,search:u,hash:i})}function wd(){return _.useContext(Xh)!=null}function Qi(){return dn(wd(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Xh).location}var F1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function V1(t){_.useContext(Ti).static||_.useLayoutEffect(t)}function Jn(){let{isDataRoute:t}=_.useContext(Ai);return t?uR():YI()}function YI(){dn(wd(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(yd),{basename:e,navigator:n}=_.useContext(Ti),{matches:r}=_.useContext(Ai),{pathname:i}=Qi(),o=JSON.stringify(Yy(r)),u=_.useRef(!1);return V1(()=>{u.current=!0}),_.useCallback((f,p={})=>{if(Ei(u.current,F1),!u.current)return;if(typeof f=="number"){n.go(f);return}let y=Qy(f,JSON.parse(o),i,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:bo([e,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[e,n,o,i,t])}var B1=_.createContext(null);function QI(){return _.useContext(B1)}function XI(t){let e=_.useContext(Ai).outlet;return _.useMemo(()=>e&&_.createElement(B1.Provider,{value:t},e),[e,t])}function z1(){let{matches:t}=_.useContext(Ai),e=t[t.length-1];return e?e.params:{}}function Jh(t,{relative:e}={}){let{matches:n}=_.useContext(Ai),{pathname:r}=Qi(),i=JSON.stringify(Yy(n));return _.useMemo(()=>Qy(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function JI(t,e){return U1(t,e)}function U1(t,e,n,r,i){dn(wd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=_.useContext(Ti),{matches:u}=_.useContext(Ai),d=u[u.length-1],f=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",g=d&&d.route;{let I=g&&g.path||"";$1(p,!g||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let b=Qi(),E;if(e){let I=typeof e=="string"?vd(e):e;dn(y==="/"||I.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${I.pathname}" was given in the \`location\` prop.`),E=I}else E=b;let N=E.pathname||"/",S=N;if(y!=="/"){let I=y.replace(/^\//,"").split("/");S="/"+N.replace(/^\//,"").split("/").slice(I.length).join("/")}let k=R1(t,{pathname:S});Ei(g||k!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Ei(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=rR(k&&k.map(I=>Object.assign({},I,{params:Object.assign({},f,I.params),pathname:bo([y,o.encodeLocation?o.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?y:bo([y,o.encodeLocation?o.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),u,n,r,i);return e&&R?_.createElement(Xh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},R):R}function eR(){let t=cR(),e=HI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:o},"ErrorBoundary")," or"," ",_.createElement("code",{style:o},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,u)}var tR=_.createElement(eR,null),nR=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?_.createElement(Ai.Provider,{value:this.props.routeContext},_.createElement(Xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sR({routeContext:t,match:e,children:n}){let r=_.useContext(yd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Ai.Provider,{value:t},n)}function rR(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=n?.errors;if(u!=null){let y=o.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);dn(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let d=!1,f=-1;if(n)for(let y=0;y<o.length;y++){let g=o[y];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=y),g.route.id){let{loaderData:b,errors:E}=n,N=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||N){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let p=n&&r?(y,g)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:WI(n.matches),errorInfo:g})}:void 0;return o.reduceRight((y,g,b)=>{let E,N=!1,S=null,k=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,S=g.route.errorElement||tR,d&&(f<0&&b===0?($1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,k=null):f===b&&(N=!0,k=g.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,b+1)),I=()=>{let z;return E?z=S:N?z=k:g.route.Component?z=_.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=y,_.createElement(sR,{match:g,routeContext:{outlet:y,matches:R,isDataRoute:n!=null},children:z})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?_.createElement(nR,{location:n.location,revalidation:n.revalidation,component:S,error:E,children:I(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:p}):I()},null)}function Jy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iR(t){let e=_.useContext(yd);return dn(e,Jy(t)),e}function aR(t){let e=_.useContext($p);return dn(e,Jy(t)),e}function oR(t){let e=_.useContext(Ai);return dn(e,Jy(t)),e}function e0(t){let e=oR(t),n=e.matches[e.matches.length-1];return dn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lR(){return e0("useRouteId")}function cR(){let t=_.useContext(Xy),e=aR("useRouteError"),n=e0("useRouteError");return t!==void 0?t:e.errors?.[n]}function uR(){let{router:t}=iR("useNavigate"),e=e0("useNavigate"),n=_.useRef(!1);return V1(()=>{n.current=!0}),_.useCallback(async(i,o={})=>{Ei(n.current,F1),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var nN={};function $1(t,e,n){!e&&!nN[t]&&(nN[t]=!0,Ei(!1,n))}_.memo(dR);function dR({routes:t,future:e,state:n,unstable_onError:r}){return U1(t,void 0,n,r,e)}function Hp({to:t,replace:e,state:n,relative:r}){dn(wd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(Ti);Ei(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=_.useContext(Ai),{pathname:u}=Qi(),d=Jn(),f=Qy(t,Yy(o),u,r==="path"),p=JSON.stringify(f);return _.useEffect(()=>{d(JSON.parse(p),{replace:e,state:n,relative:r})},[d,p,r,e,n]),null}function _d(t){return XI(t.context)}function _t(t){dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:u}){dn(!wd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:d,navigator:i,static:o,unstable_useTransitions:u,future:{}}),[d,i,o,u]);typeof n=="string"&&(n=vd(n));let{pathname:p="/",search:y="",hash:g="",state:b=null,key:E="default"}=n,N=_.useMemo(()=>{let S=Co(p,d);return S==null?null:{location:{pathname:S,search:y,hash:g,state:b,key:E},navigationType:r}},[d,p,y,g,b,E,r]);return Ei(N!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${g}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:_.createElement(Ti.Provider,{value:f},_.createElement(Xh.Provider,{children:e,value:N}))}function fR({children:t,location:e}){return JI(Yv(t),e)}function Yv(t,e=[]){let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let o=[...e,i];if(r.type===_.Fragment){n.push.apply(n,Yv(r.props.children,o));return}dn(r.type===_t,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Yv(r.props.children,o)),n.push(u)}),n}var Bm="get",zm="application/x-www-form-urlencoded";function Wp(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function mR(t){return Wp(t)&&t.tagName.toLowerCase()==="button"}function pR(t){return Wp(t)&&t.tagName.toLowerCase()==="form"}function gR(t){return Wp(t)&&t.tagName.toLowerCase()==="input"}function xR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vR(t,e){return t.button===0&&(!e||e==="_self")&&!xR(t)}var bm=null;function yR(){if(bm===null)try{new FormData(document.createElement("form"),0),bm=!1}catch{bm=!0}return bm}var wR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xv(t){return t!=null&&!wR.has(t)?(Ei(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zm}"`),null):t}function _R(t,e){let n,r,i,o,u;if(pR(t)){let d=t.getAttribute("action");r=d?Co(d,e):null,n=t.getAttribute("method")||Bm,i=xv(t.getAttribute("enctype"))||zm,o=new FormData(t)}else if(mR(t)||gR(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(r=f?Co(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Bm,i=xv(t.getAttribute("formenctype"))||xv(d.getAttribute("enctype"))||zm,o=new FormData(d,t),!yR()){let{name:p,type:y,value:g}=t;if(y==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,g)}}else{if(Wp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bm,r=null,i=zm,u=t}return o&&i==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function t0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bR(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Co(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function NR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function CR(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let u=await NR(o,n);return u.links?u.links():[]}return[]}));return AR(r.flat(1).filter(jR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function sN(t,e,n,r,i,o){let u=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,d=(f,p)=>n[p].pathname!==f.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,p)=>u(f,p)||d(f,p)):o==="data"?e.filter((f,p)=>{let y=r.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(u(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function ER(t,e,{includeHydrateFallback:n}={}){return SR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function SR(t){return[...new Set(t)]}function TR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function AR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(TR(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function H1(){let t=_.useContext(yd);return t0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kR(){let t=_.useContext($p);return t0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var n0=_.createContext(void 0);n0.displayName="FrameworkContext";function W1(){let t=_.useContext(n0);return t0(t,"You must render this element inside a <HydratedRouter> element"),t}function PR(t,e){let n=_.useContext(n0),[r,i]=_.useState(!1),[o,u]=_.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:y,onTouchStart:g}=e,b=_.useRef(null);_.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let S=R=>{R.forEach(I=>{u(I.isIntersecting)})},k=new IntersectionObserver(S,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[t]),_.useEffect(()=>{if(r){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},N=()=>{i(!1),u(!1)};return n?t!=="intent"?[o,b,{}]:[o,b,{onFocus:mh(d,E),onBlur:mh(f,N),onMouseEnter:mh(p,E),onMouseLeave:mh(y,N),onTouchStart:mh(g,E)}]:[!1,b,{}]}function mh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function IR({page:t,...e}){let{router:n}=H1(),r=_.useMemo(()=>R1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?_.createElement(LR,{page:t,matches:r,...e}):null}function RR(t){let{manifest:e,routeModules:n}=W1(),[r,i]=_.useState([]);return _.useEffect(()=>{let o=!1;return CR(t,e,n).then(u=>{o||i(u)}),()=>{o=!0}},[t,e,n]),r}function LR({page:t,matches:e,...n}){let r=Qi(),{manifest:i,routeModules:o}=W1(),{basename:u}=H1(),{loaderData:d,matches:f}=kR(),p=_.useMemo(()=>sN(t,e,f,i,r,"data"),[t,e,f,i,r]),y=_.useMemo(()=>sN(t,e,f,i,r,"assets"),[t,e,f,i,r]),g=_.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,S=!1;if(e.forEach(R=>{let I=i.routes[R.route.id];!I||!I.hasLoader||(!p.some(z=>z.route.id===R.route.id)&&R.route.id in d&&o[R.route.id]?.shouldRevalidate||I.hasClientLoader?S=!0:N.add(R.route.id))}),N.size===0)return[];let k=bR(t,u,"data");return S&&N.size>0&&k.searchParams.set("_routes",e.filter(R=>N.has(R.route.id)).map(R=>R.route.id).join(",")),[k.pathname+k.search]},[u,d,r,i,p,e,t,o]),b=_.useMemo(()=>ER(y,i),[y,i]),E=RR(y);return _.createElement(_.Fragment,null,g.map(N=>_.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),b.map(N=>_.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),E.map(({key:N,link:S})=>_.createElement("link",{key:N,nonce:n.nonce,...S})))}function MR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var q1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q1&&(window.__reactRouterVersion="7.10.0")}catch{}function DR({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=_.useRef();i.current==null&&(i.current=wI({window:r,v5Compat:!0}));let o=i.current,[u,d]=_.useState({action:o.action,location:o.location}),f=_.useCallback(p=>{n===!1?d(p):_.startTransition(()=>d(p))},[n]);return _.useLayoutEffect(()=>o.listen(f),[o,f]),_.createElement(hR,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:n===!0})}var G1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=_.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:u,state:d,target:f,to:p,preventScrollReset:y,viewTransition:g,...b},E){let{basename:N,unstable_useTransitions:S}=_.useContext(Ti),k=typeof p=="string"&&G1.test(p),R,I=!1;if(typeof p=="string"&&k&&(R=p,q1))try{let U=new URL(window.location.href),$=p.startsWith("//")?new URL(U.protocol+p):new URL(p),K=Co($.pathname,N);$.origin===U.origin&&K!=null?p=K+$.search+$.hash:I=!0}catch{Ei(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=ZI(p,{relative:i}),[H,G,Q]=PR(r,b),F=VR(p,{replace:u,state:d,target:f,preventScrollReset:y,relative:i,viewTransition:g,unstable_useTransitions:S});function D(U){e&&e(U),U.defaultPrevented||F(U)}let O=_.createElement("a",{...b,...Q,href:R||z,onClick:I||o?e:D,ref:MR(E,G),target:f,"data-discover":!k&&n==="render"?"true":void 0});return H&&!k?_.createElement(_.Fragment,null,O,_.createElement(IR,{page:z})):O});rn.displayName="Link";var s0=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:u,viewTransition:d,children:f,...p},y){let g=Jh(u,{relative:p.relative}),b=Qi(),E=_.useContext($p),{navigator:N,basename:S}=_.useContext(Ti),k=E!=null&&HR(g)&&d===!0,R=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,I=b.pathname,z=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(I=I.toLowerCase(),z=z?z.toLowerCase():null,R=R.toLowerCase()),z&&S&&(z=Co(z,S)||z);const H=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let G=I===R||!i&&I.startsWith(R)&&I.charAt(H)==="/",Q=z!=null&&(z===R||!i&&z.startsWith(R)&&z.charAt(R.length)==="/"),F={isActive:G,isPending:Q,isTransitioning:k},D=G?e:void 0,O;typeof r=="function"?O=r(F):O=[r,G?"active":null,Q?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(F):o;return _.createElement(rn,{...p,"aria-current":D,className:O,ref:y,style:U,to:u,viewTransition:d},typeof f=="function"?f(F):f)});s0.displayName="NavLink";var OR=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:u=Bm,action:d,onSubmit:f,relative:p,preventScrollReset:y,viewTransition:g,...b},E)=>{let{unstable_useTransitions:N}=_.useContext(Ti),S=UR(),k=$R(d,{relative:p}),R=u.toLowerCase()==="get"?"get":"post",I=typeof d=="string"&&G1.test(d),z=H=>{if(f&&f(H),H.defaultPrevented)return;H.preventDefault();let G=H.nativeEvent.submitter,Q=G?.getAttribute("formmethod")||u,F=()=>S(G||H.currentTarget,{fetcherKey:e,method:Q,navigate:n,replace:i,state:o,relative:p,preventScrollReset:y,viewTransition:g});N&&n!==!1?_.startTransition(()=>F()):F()};return _.createElement("form",{ref:E,method:R,action:k,onSubmit:r?f:z,...b,"data-discover":!I&&t==="render"?"true":void 0})});OR.displayName="Form";function FR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K1(t){let e=_.useContext(yd);return dn(e,FR(t)),e}function VR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:u,unstable_useTransitions:d}={}){let f=Jn(),p=Qi(),y=Jh(t,{relative:o});return _.useCallback(g=>{if(vR(g,e)){g.preventDefault();let b=n!==void 0?n:Lh(p)===Lh(y),E=()=>f(t,{replace:b,state:r,preventScrollReset:i,relative:o,viewTransition:u});d?_.startTransition(()=>E()):E()}},[p,f,y,n,r,e,t,i,o,u,d])}var BR=0,zR=()=>`__${String(++BR)}__`;function UR(){let{router:t}=K1("useSubmit"),{basename:e}=_.useContext(Ti),n=lR(),r=t.fetch,i=t.navigate;return _.useCallback(async(o,u={})=>{let{action:d,method:f,encType:p,formData:y,body:g}=_R(o,e);if(u.navigate===!1){let b=u.fetcherKey||zR();await r(b,n,u.action||d,{preventScrollReset:u.preventScrollReset,formData:y,body:g,formMethod:u.method||f,formEncType:u.encType||p,flushSync:u.flushSync})}else await i(u.action||d,{preventScrollReset:u.preventScrollReset,formData:y,body:g,formMethod:u.method||f,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,i,e,n])}function $R(t,{relative:e}={}){let{basename:n}=_.useContext(Ti),r=_.useContext(Ai);dn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Jh(t||".",{relative:e})},u=Qi();if(t==null){o.search=u.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(y=>y==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let y=d.toString();o.search=y?`?${y}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:bo([n,o.pathname])),Lh(o)}function HR(t,{relative:e}={}){let n=_.useContext(O1);dn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=K1("useViewTransitionState"),i=Jh(t,{relative:e});if(!n.isTransitioning)return!1;let o=Co(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=Co(n.nextLocation.pathname,r)||n.nextLocation.pathname;return np(i.pathname,u)!=null||np(i.pathname,o)!=null}var bd=I1();const Z1=Ky(bd),WR=()=>{};var rN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],u=t[n++],d=t[n++],f=((i&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},Q1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],u=i+1<t.length,d=u?t[i+1]:0,f=i+2<t.length,p=f?t[i+2]:0,y=o>>2,g=(o&3)<<4|d>>4;let b=(d&15)<<2|p>>6,E=p&63;f||(E=64,u||(b=64)),r.push(n[y],n[g],n[b],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||d==null||p==null||g==null)throw new GR;const b=o<<2|d>>4;if(r.push(b),p!==64){const E=d<<4&240|p>>2;if(r.push(E),g!==64){const N=p<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KR=function(t){const e=Y1(t);return Q1.encodeByteArray(e,!0)},sp=function(t){return KR(t).replace(/\./g,"")},X1=function(t){try{return Q1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>ZR().__FIREBASE_DEFAULTS__,QR=()=>{if(typeof process>"u"||typeof rN>"u")return;const t=rN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&X1(t[1]);return e&&JSON.parse(e)},qp=()=>{try{return WR()||YR()||QR()||XR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J1=t=>qp()?.emulatorHosts?.[t],e2=t=>{const e=J1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},t2=()=>qp()?.config,n2=t=>qp()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function r0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sp(JSON.stringify(n)),sp(JSON.stringify(u)),""].join(".")}const Eh={};function e4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eh))Eh[e]?t.emulator.push(e):t.prod.push(e);return t}function t4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let iN=!1;function i0(t,e){if(typeof window>"u"||typeof document>"u"||!Xl(window.location.host)||Eh[t]===e||Eh[t]||iN)return;Eh[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",o=e4().prod.length>0;function u(){const b=document.getElementById(r);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{iN=!0,u()},b}function y(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function g(){const b=t4(r),E=n("text"),N=document.getElementById(E)||document.createElement("span"),S=n("learnmore"),k=document.getElementById(S)||document.createElement("a"),R=n("preprendIcon"),I=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const z=b.element;d(z),y(k,S);const H=p();f(I,R),z.append(I,N,k,H),document.body.appendChild(z)}o?(N.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bs())}function s4(){const t=qp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function a4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o4(){const t=Bs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function l4(){return!s4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function c4(){try{return typeof indexedDB=="object"}catch{return!1}}function u4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="FirebaseError";class Va extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=d4,Object.setPrototypeOf(this,Va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ef.prototype.create)}}class ef{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?h4(o,r):"Error",d=`${this.serviceName}: ${u} (${i}).`;return new Va(i,d,r)}}function h4(t,e){return t.replace(f4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const f4=/\{\$([^}]+)}/g;function m4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Eo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],u=e[i];if(aN(o)&&aN(u)){if(!Eo(o,u))return!1}else if(o!==u)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function aN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function vh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function p4(t,e){const n=new g4(t,e);return n.subscribe.bind(n)}class g4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");x4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=vv),i.error===void 0&&(i.error=vv),i.complete===void 0&&(i.complete=vv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class Ml{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w4(e))try{this.getOrInitializeService({instanceIdentifier:Mc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Mc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mc){return this.instances.has(e)}getOptions(e=Mc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mc){return this.component?this.component.multipleInstances?e:Mc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y4(t){return t===Mc?void 0:t}function w4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new v4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(St||(St={}));const b4={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},N4=St.INFO,j4={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},C4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=j4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a0{constructor(e){this.name=e,this._logLevel=N4,this._logHandler=C4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const E4=(t,e)=>e.some(n=>t instanceof n);let oN,lN;function S4(){return oN||(oN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T4(){return lN||(lN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r2=new WeakMap,Qv=new WeakMap,i2=new WeakMap,yv=new WeakMap,o0=new WeakMap;function A4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(kl(t.result)),i()},u=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&r2.set(n,t)}).catch(()=>{}),o0.set(e,t),e}function k4(t){if(Qv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),i()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});Qv.set(t,e)}let Xv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||i2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P4(t){Xv=t(Xv)}function I4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wv(this),e,...n);return i2.set(r,e.sort?e.sort():[e]),kl(r)}:T4().includes(t)?function(...e){return t.apply(wv(this),e),kl(r2.get(this))}:function(...e){return kl(t.apply(wv(this),e))}}function R4(t){return typeof t=="function"?I4(t):(t instanceof IDBTransaction&&k4(t),E4(t,S4())?new Proxy(t,Xv):t)}function kl(t){if(t instanceof IDBRequest)return A4(t);if(yv.has(t))return yv.get(t);const e=R4(t);return e!==t&&(yv.set(t,e),o0.set(e,t)),e}const wv=t=>o0.get(t);function L4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(t,e),d=kl(u);return r&&u.addEventListener("upgradeneeded",f=>{r(kl(u.result),f.oldVersion,f.newVersion,kl(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const M4=["get","getKey","getAll","getAllKeys","count"],D4=["put","add","delete","clear"],_v=new Map;function cN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_v.get(e))return _v.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=D4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M4.includes(n)))return;const o=async function(u,...d){const f=this.transaction(u,i?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),i&&f.done]))[0]};return _v.set(e,o),o}P4(t=>({...t,get:(e,n,r)=>cN(e,n)||t.get(e,n,r),has:(e,n)=>!!cN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function F4(t){return t.getComponent()?.type==="VERSION"}const Jv="@firebase/app",uN="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new a0("@firebase/app"),V4="@firebase/app-compat",B4="@firebase/analytics-compat",z4="@firebase/analytics",U4="@firebase/app-check-compat",$4="@firebase/app-check",H4="@firebase/auth",W4="@firebase/auth-compat",q4="@firebase/database",G4="@firebase/data-connect",K4="@firebase/database-compat",Z4="@firebase/functions",Y4="@firebase/functions-compat",Q4="@firebase/installations",X4="@firebase/installations-compat",J4="@firebase/messaging",e5="@firebase/messaging-compat",t5="@firebase/performance",n5="@firebase/performance-compat",s5="@firebase/remote-config",r5="@firebase/remote-config-compat",i5="@firebase/storage",a5="@firebase/storage-compat",o5="@firebase/firestore",l5="@firebase/ai",c5="@firebase/firestore-compat",u5="firebase",d5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",h5={[Jv]:"fire-core",[V4]:"fire-core-compat",[z4]:"fire-analytics",[B4]:"fire-analytics-compat",[$4]:"fire-app-check",[U4]:"fire-app-check-compat",[H4]:"fire-auth",[W4]:"fire-auth-compat",[q4]:"fire-rtdb",[G4]:"fire-data-connect",[K4]:"fire-rtdb-compat",[Z4]:"fire-fn",[Y4]:"fire-fn-compat",[Q4]:"fire-iid",[X4]:"fire-iid-compat",[J4]:"fire-fcm",[e5]:"fire-fcm-compat",[t5]:"fire-perf",[n5]:"fire-perf-compat",[s5]:"fire-rc",[r5]:"fire-rc-compat",[i5]:"fire-gcs",[a5]:"fire-gcs-compat",[o5]:"fire-fst",[c5]:"fire-fst-compat",[l5]:"fire-vertex","fire-js":"fire-js",[u5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new Map,f5=new Map,ty=new Map;function dN(t,e){try{t.container.addComponent(e)}catch(n){So.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Uc(t){const e=t.name;if(ty.has(e))return So.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(const n of rp.values())dN(n,t);for(const n of f5.values())dN(n,t);return!0}function Gp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pl=new ef("app","Firebase",m5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ml("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=d5;function a2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ey,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Pl.create("bad-app-name",{appName:String(i)});if(n||(n=t2()),!n)throw Pl.create("no-options");const o=rp.get(i);if(o){if(Eo(n,o.options)&&Eo(r,o.config))return o;throw Pl.create("duplicate-app",{appName:i})}const u=new _4(i);for(const f of ty.values())u.addComponent(f);const d=new p5(n,r,u);return rp.set(i,d),d}function l0(t=ey){const e=rp.get(t);if(!e&&t===ey&&t2())return a2();if(!e)throw Pl.create("no-app",{appName:t});return e}function Ea(t,e,n){let r=h5[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),So.warn(u.join(" "));return}Uc(new Ml(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="firebase-heartbeat-database",x5=1,Mh="firebase-heartbeat-store";let bv=null;function o2(){return bv||(bv=L4(g5,x5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pl.create("idb-open",{originalErrorMessage:t.message})})),bv}async function v5(t){try{const n=(await o2()).transaction(Mh),r=await n.objectStore(Mh).get(l2(t));return await n.done,r}catch(e){if(e instanceof Va)So.warn(e.message);else{const n=Pl.create("idb-get",{originalErrorMessage:e?.message});So.warn(n.message)}}}async function hN(t,e){try{const r=(await o2()).transaction(Mh,"readwrite");await r.objectStore(Mh).put(e,l2(t)),await r.done}catch(n){if(n instanceof Va)So.warn(n.message);else{const r=Pl.create("idb-set",{originalErrorMessage:n?.message});So.warn(r.message)}}}function l2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=1024,w5=30;class _5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fN();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>w5){const i=j5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){So.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fN(),{heartbeatsToSend:n,unsentEntries:r}=b5(this._heartbeatsCache.heartbeats),i=sp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return So.warn(e),""}}}function fN(){return new Date().toISOString().substring(0,10)}function b5(t,e=y5){const n=[];let r=t.slice();for(const i of t){const o=n.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),mN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return c4()?u4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await v5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mN(t){return sp(JSON.stringify({version:2,heartbeats:t})).length}function j5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t){Uc(new Ml("platform-logger",e=>new O4(e),"PRIVATE")),Uc(new Ml("heartbeat",e=>new _5(e),"PRIVATE")),Ea(Jv,uN,t),Ea(Jv,uN,"esm2020"),Ea("fire-js","")}C5("");function c2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u2=c2,d2=new ef("auth","Firebase",c2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new a0("@firebase/auth");function E5(t,...e){ip.logLevel<=St.WARN&&ip.warn(`Auth (${Xc}): ${t}`,...e)}function Um(t,...e){ip.logLevel<=St.ERROR&&ip.error(`Auth (${Xc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,...e){throw u0(t,...e)}function Wi(t,...e){return u0(t,...e)}function c0(t,e,n){const r={...u2(),[e]:n};return new ef("auth","Firebase",r).create(e,{appName:t.name})}function No(t){return c0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Si(t,"argument-error"),c0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function u0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d2.create(t,...e)}function dt(t,e,...n){if(!t)throw u0(e,...n)}function wo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Um(e),new Error(e)}function To(t,e){t||wo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){return typeof self<"u"&&self.location?.href||""}function T5(){return pN()==="http:"||pN()==="https:"}function pN(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T5()||i4()||"connection"in navigator)?navigator.onLine:!0}function k5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.shortDelay=e,this.longDelay=n,To(n>e,"Short delay should be less than long delay!"),this.isMobile=n4()||a4()}get(){return A5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e){To(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R5=new nf(3e4,6e4);function Jl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Oo(t,e,n,r,i={}){return f2(t,i,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=tf({key:t.config.apiKey,...u}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:f,...o};return r4()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Xl(t.emulatorConfig.host)&&(p.credentials="include"),h2.fetch()(await m2(t,t.config.apiHost,n,d),p)})}async function f2(t,e,n){t._canInitEmulator=!1;const r={...P5,...e};try{const i=new M5(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Nm(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nm(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Nm(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Nm(t,"user-disabled",u);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw c0(t,y,p);Si(t,y)}}catch(i){if(i instanceof Va)throw i;Si(t,"network-request-failed",{message:String(i)})}}async function sf(t,e,n,r,i={}){const o=await Oo(t,e,n,r,i);return"mfaPendingCredential"in o&&Si(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function m2(t,e,n,r){const i=`${e}${n}?${r}`,o=t,u=o.config.emulator?d0(t.config,i):`${t.config.apiScheme}://${i}`;return I5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function L5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wi(this.auth,"network-request-failed")),R5.get())})}}function Nm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Wi(t,e,r);return i.customData._tokenResponse=n,i}function gN(t){return t!==void 0&&t.enterprise!==void 0}class D5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return L5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O5(t,e){return Oo(t,"GET","/v2/recaptchaConfig",Jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(t,e){return Oo(t,"POST","/v1/accounts:delete",e)}async function ap(t,e){return Oo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p2(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),i=h0(r);dt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o?.sign_in_provider;return{claims:i,token:r,authTime:Sh(Nv(i.auth_time)),issuedAtTime:Sh(Nv(i.iat)),expirationTime:Sh(Nv(i.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Nv(t){return Number(t)*1e3}function h0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{const i=X1(n);return i?JSON.parse(i):(Um("Failed to decode base64 JWT payload"),null)}catch(i){return Um("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xN(t){const e=h0(t);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Va&&V5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function V5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sh(this.lastLoginAt),this.creationTime=Sh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(t){const e=t.auth,n=await t.getIdToken(),r=await nd(t,ap(e,{idToken:n}));dt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?x2(i.providerUserInfo):[],u=z5(t.providerData,o),d=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!u?.length,p=d?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new sy(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function g2(t){const e=Bt(t);await op(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function x2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(t,e){const n=await f2(t,{},async()=>{const r=tf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,u=await m2(t,i,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return t.emulatorConfig&&Xl(t.emulatorConfig.host)&&(f.credentials="include"),h2.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $5(t,e){return Oo(t,"POST","/v2/accounts:revokeToken",Jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const n=xN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await U5(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,u=new Gu;return r&&(dt(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(dt(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(dt(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t,e){dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new B5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await nd(this,this.stsTokenManager.getToken(this.auth,e));return dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return p2(this,e)}reload(){return g2(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await op(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(No(this.auth));const e=await this.getIdToken();return await nd(this,F5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,d=n.tenantId??void 0,f=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:g,emailVerified:b,isAnonymous:E,providerData:N,stsTokenManager:S}=n;dt(g&&S,e,"internal-error");const k=Gu.fromJSON(this.name,S);dt(typeof g=="string",e,"internal-error"),_l(r,e.name),_l(i,e.name),dt(typeof b=="boolean",e,"internal-error"),dt(typeof E=="boolean",e,"internal-error"),_l(o,e.name),_l(u,e.name),_l(d,e.name),_l(f,e.name),_l(p,e.name),_l(y,e.name);const R=new Hi({uid:g,auth:e,email:i,emailVerified:b,displayName:r,isAnonymous:E,photoURL:u,phoneNumber:o,tenantId:d,stsTokenManager:k,createdAt:p,lastLoginAt:y});return N&&Array.isArray(N)&&(R.providerData=N.map(I=>({...I}))),f&&(R._redirectEventId=f),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gu;i.updateFromServerResponse(n);const o=new Hi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await op(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];dt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?x2(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!o?.length,d=new Gu;d.updateFromIdToken(r);const f=new Hi({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new sy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new Map;function _o(t){To(t instanceof Function,"Expected a class definition");let e=vN.get(t);return e?(To(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}v2.type="NONE";const ry=v2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e,n){return`firebase:${t}:${e}:${n}`}class Ku{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=$m(this.userKey,i.apiKey,o),this.fullPersistenceKey=$m("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ap(this.auth,{idToken:e}).catch(()=>{});return n?Hi._fromGetAccountInfoResponse(this.auth,n,e):null}return Hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ku(_o(ry),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||_o(ry);const u=$m(r,e.config.apiKey,e.name);let d=null;for(const p of n)try{const y=await p._get(u);if(y){let g;if(typeof y=="string"){const b=await ap(e,{idToken:y}).catch(()=>{});if(!b)break;g=await Hi._fromGetAccountInfoResponse(e,b,y)}else g=Hi._fromJSON(e,y);p!==o&&(d=g),o=p;break}}catch{}const f=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Ku(o,e,r):(o=f[0],d&&await o._set(u,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Ku(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(b2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j2(e))return"Blackberry";if(C2(e))return"Webos";if(w2(e))return"Safari";if((e.includes("chrome/")||_2(e))&&!e.includes("edge/"))return"Chrome";if(N2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function y2(t=Bs()){return/firefox\//i.test(t)}function w2(t=Bs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _2(t=Bs()){return/crios\//i.test(t)}function b2(t=Bs()){return/iemobile/i.test(t)}function N2(t=Bs()){return/android/i.test(t)}function j2(t=Bs()){return/blackberry/i.test(t)}function C2(t=Bs()){return/webos/i.test(t)}function f0(t=Bs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function H5(t=Bs()){return f0(t)&&!!window.navigator?.standalone}function W5(){return o4()&&document.documentMode===10}function E2(t=Bs()){return f0(t)||N2(t)||C2(t)||j2(t)||/windows phone/i.test(t)||b2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e=[]){let n;switch(t){case"Browser":n=yN(Bs());break;case"Worker":n=`${yN(Bs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,d)=>{try{const f=e(o);u(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(t,e={}){return Oo(t,"GET","/v2/passwordPolicy",Jl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=6;class Z5{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??K5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wN(this),this.idTokenSubscription=new wN(this),this.beforeStateQueue=new q5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_o(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ku.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ap(this,{idToken:e}),r=await Hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===u)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await op(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(No(this));const n=e?Bt(e):null;return n&&dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(No(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(No(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_o(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G5(this),n=new Z5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ef("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_o(e)||this._popupRedirectResolver;dt(n,this,"argument-error"),this.redirectPersistenceManager=await Ku.create(this,[_o(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&E5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ec(t){return Bt(t)}class wN{constructor(e){this.auth=e,this.observer=null,this.addObserver=p4(n=>this.observer=n)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q5(t){Kp=t}function T2(t){return Kp.loadJS(t)}function X5(){return Kp.recaptchaEnterpriseScript}function J5(){return Kp.gapiScript}function e6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class t6{constructor(){this.enterprise=new n6}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class n6{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const s6="recaptcha-enterprise",A2="NO_RECAPTCHA";class r6{constructor(e){this.type=s6,this.auth=ec(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{O5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new D5(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(f=>{d(f)})})}function i(o,u,d){const f=window.grecaptcha;gN(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(A2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t6().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!n&&gN(window.grecaptcha))i(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=X5();f.length!==0&&(f+=d),T2(f).then(()=>{i(d,o,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function _N(t,e,n,r=!1,i=!1){const o=new r6(t);let u;if(i)u=A2;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function iy(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _N(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await _N(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e){const n=Gp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Eo(o,e??{}))return i;Si(i,"already-initialized")}return n.initialize({options:e})}function i6(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_o);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function P2(t,e,n){const r=ec(t);dt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=I2(e),{host:u,port:d}=a6(e),f=d===null?"":`:${d}`,p={url:`${o}//${u}${f}/`},y=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){dt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),dt(Eo(p,r.config.emulator)&&Eo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Xl(u)?(r0(`${o}//${u}${f}`),i0("Auth",!0)):o6()}function I2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function a6(t){const e=I2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:bN(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:bN(u)}}}function bN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wo("not implemented")}_getIdTokenResponse(e){return wo("not implemented")}_linkToIdToken(e,n){return wo("not implemented")}_getReauthenticationResolver(e){return wo("not implemented")}}async function l6(t,e){return Oo(t,"POST","/v1/accounts:update",e)}async function c6(t,e){return Oo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(t,e){return sf(t,"POST","/v1/accounts:signInWithPassword",Jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(t,e){return sf(t,"POST","/v1/accounts:signInWithEmailLink",Jl(t,e))}async function h6(t,e){return sf(t,"POST","/v1/accounts:signInWithEmailLink",Jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Zp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iy(e,n,"signInWithPassword",u6);case"emailLink":return d6(e,{email:this._email,oobCode:this._password});default:Si(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iy(e,r,"signUpPassword",c6);case"emailLink":return h6(e,{idToken:n,email:this._email,oobCode:this._password});default:Si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t,e){return sf(t,"POST","/v1/accounts:signInWithIdp",Jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="http://localhost";class Dl extends Zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Dl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Si("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const u=new Dl(r,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Zu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zu(e,n)}buildRequest(){const e={requestUri:f6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function p6(t){const e=xh(vh(t)).link,n=e?xh(vh(e)).deep_link_id:null,r=xh(vh(t)).deep_link_id;return(r?xh(vh(r)).link:null)||r||n||e||t}class Yp{constructor(e){const n=xh(vh(e)),r=n.apiKey??null,i=n.oobCode??null,o=m6(n.mode??null);dt(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=p6(e);try{return new Yp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.providerId=tc.PROVIDER_ID}static credential(e,n){return sd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yp.parseLink(n);return dt(r,"argument-error"),sd._fromEmailAndCode(e,r.code,r.tenantId)}}tc.PROVIDER_ID="password";tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends m0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends rf{constructor(){super("facebook.com")}static credential(e){return Dl._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Dl._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _a.credential(n,r)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends rf{constructor(){super("github.com")}static credential(e){return Dl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.GITHUB_SIGN_IN_METHOD="github.com";vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends rf{constructor(){super("twitter.com")}static credential(e,n){return Dl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yo.credential(n,r)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(t,e){return sf(t,"POST","/v1/accounts:signUp",Jl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Hi._fromIdTokenResponse(e,r,i),u=NN(r);return new $c({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=NN(r);return new $c({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function NN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends Va{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new lp(e,n,r,i)}}function R2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lp._fromErrorAndOperation(t,o,e,r):o})}async function x6(t,e,n=!1){const r=await nd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $c._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,e,n=!1){const{auth:r}=t;if(Tr(r.app))return Promise.reject(No(r));const i="reauthenticate";try{const o=await nd(t,R2(r,i,e,t),n);dt(o.idToken,r,"internal-error");const u=h0(o.idToken);dt(u,r,"internal-error");const{sub:d}=u;return dt(t.uid===d,r,"user-mismatch"),$c._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Si(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e,n=!1){if(Tr(t.app))return Promise.reject(No(t));const r="signIn",i=await R2(t,r,e),o=await $c._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function D2(t,e){return M2(ec(t),e)}async function O2(t,e){return L2(Bt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t){const e=ec(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function V2(t,e,n){if(Tr(t.app))return Promise.reject(No(t));const r=ec(t),u=await iy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g6).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&F2(t),f}),d=await $c._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function p0(t,e,n){return Tr(t.app)?Promise.reject(No(t)):D2(Bt(t),tc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&F2(t),r})}function B2(t,e){return v6(Bt(t),null,e)}async function v6(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const u=await nd(t,l6(r,o));await t._updateTokensIfNecessary(u,!0)}function z2(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function U2(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function g0(t,e,n,r){return Bt(t).onAuthStateChanged(e,n,r)}async function $2(t){return Bt(t).delete()}const cp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=1e3,w6=10;class W2 extends H2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);W5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,w6):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},y6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}W2.type="LOCAL";const q2=W2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2 extends H2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G2.type="SESSION";const x0=G2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Qp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,u=this.handlersMap[i];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(u).map(async p=>p(n.origin,o)),f=await _6(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((d,f)=>{const p=v0("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(g){const b=g;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(b.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(){return window}function N6(t){Sa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return typeof Sa().WorkerGlobalScope<"u"&&typeof Sa().importScripts=="function"}async function j6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C6(){return navigator?.serviceWorker?.controller||null}function E6(){return K2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebaseLocalStorageDb",S6=1,up="firebaseLocalStorage",Y2="fbase_key";class af{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xp(t,e){return t.transaction([up],e?"readwrite":"readonly").objectStore(up)}function T6(){const t=indexedDB.deleteDatabase(Z2);return new af(t).toPromise()}function ay(){const t=indexedDB.open(Z2,S6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(up,{keyPath:Y2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(up)?e(r):(r.close(),await T6(),e(await ay()))})})}async function jN(t,e,n){const r=Xp(t,!0).put({[Y2]:e,value:n});return new af(r).toPromise()}async function A6(t,e){const n=Xp(t,!1).get(e),r=await new af(n).toPromise();return r===void 0?null:r.value}function CN(t,e){const n=Xp(t,!0).delete(e);return new af(n).toPromise()}const k6=800,P6=3;class Q2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>P6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qp._getInstance(E6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await j6(),!this.activeServiceWorker)return;this.sender=new b6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await jN(e,cp,"1"),await CN(e,cp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>A6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Xp(i,!1).getAll();return new af(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q2.type="LOCAL";const X2=Q2;new nf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t,e){return e?_o(e):(dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends Zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function I6(t){return M2(t.auth,new y0(t),t.bypassAuthState)}function R6(t){const{auth:e,user:n}=t;return dt(n,e,"internal-error"),L2(n,new y0(t),t.bypassAuthState)}async function L6(t){const{auth:e,user:n}=t;return dt(n,e,"internal-error"),x6(n,new y0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I6;case"linkViaPopup":case"linkViaRedirect":return L6;case"reauthViaPopup":case"reauthViaRedirect":return R6;default:Si(this.auth,"internal-error")}}resolve(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new nf(2e3,1e4);async function dp(t,e,n){if(Tr(t.app))return Promise.reject(Wi(t,"operation-not-supported-in-this-environment"));const r=ec(t);S5(t,e,m0);const i=J2(r,n);return new Oc(r,"signInViaPopup",e,i).executeNotNull()}class Oc extends eC{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Oc.currentPopupAction&&Oc.currentPopupAction.cancel(),Oc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){To(this.filter.length===1,"Popup operations only handle one event");const e=v0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M6.get())};e()}}Oc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="pendingRedirect",Hm=new Map;class O6 extends eC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hm.get(this.auth._key());if(!e){try{const r=await F6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hm.set(this.auth._key(),e)}return this.bypassAuthState||Hm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F6(t,e){const n=z6(e),r=B6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function V6(t,e){Hm.set(t._key(),e)}function B6(t){return _o(t._redirectPersistence)}function z6(t){return $m(D6,t.config.apiKey,t.name)}async function U6(t,e,n=!1){if(Tr(t.app))return Promise.reject(No(t));const r=ec(t),i=J2(r,e),u=await new O6(r,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=600*1e3;class H6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!tC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Wi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$6&&this.cachedEventUids.clear(),this.cachedEventUids.has(EN(e))}saveEventToCache(e){this.cachedEventUids.add(EN(e)),this.lastProcessedEventTime=Date.now()}}function EN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function W6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q6(t,e={}){return Oo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K6=/^https?/;async function Z6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await q6(t);for(const n of e)try{if(Y6(n))return}catch{}Si(t,"unauthorized-domain")}function Y6(t){const e=ny(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!K6.test(n))return!1;if(G6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new nf(3e4,6e4);function SN(){const t=Sa().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function X6(t){return new Promise((e,n)=>{function r(){SN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SN(),n(Wi(t,"network-request-failed"))},timeout:Q6.get()})}if(Sa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Sa().gapi?.load)r();else{const i=e6("iframefcb");return Sa()[i]=()=>{gapi.load?r():n(Wi(t,"network-request-failed"))},T2(`${J5()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Wm=null,e})}let Wm=null;function J6(t){return Wm=Wm||X6(t),Wm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new nf(5e3,15e3),t3="__/auth/iframe",n3="emulator/auth/iframe",s3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i3(t){const e=t.config;dt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?d0(e,n3):`https://${t.config.authDomain}/${t3}`,r={apiKey:e.apiKey,appName:t.name,v:Xc},i=r3.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${tf(r).slice(1)}`}async function a3(t){const e=await J6(t),n=Sa().gapi;return dt(n,t,"internal-error"),e.open({where:document.body,url:i3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s3,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const u=Wi(t,"network-request-failed"),d=Sa().setTimeout(()=>{o(u)},e3.get());function f(){Sa().clearTimeout(d),i(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l3=500,c3=600,u3="_blank",d3="http://localhost";class TN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h3(t,e,n,r=l3,i=c3){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f={...o3,width:r.toString(),height:i.toString(),top:o,left:u},p=Bs().toLowerCase();n&&(d=_2(p)?u3:n),y2(p)&&(e=e||d3,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[E,N])=>`${b}${E}=${N},`,"");if(H5(p)&&d!=="_self")return f3(e||"",d),new TN(null);const g=window.open(e||"",d,y);dt(g,t,"popup-blocked");try{g.focus()}catch{}return new TN(g)}function f3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="__/auth/handler",p3="emulator/auth/handler",g3=encodeURIComponent("fac");async function AN(t,e,n,r,i,o){dt(t.config.authDomain,t,"auth-domain-config-required"),dt(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xc,eventId:i};if(e instanceof m0){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",m4(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,g]of Object.entries({}))u[y]=g}if(e instanceof rf){const y=e.getScopes().filter(g=>g!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),p=f?`#${g3}=${encodeURIComponent(f)}`:"";return`${x3(t)}?${tf(d).slice(1)}${p}`}function x3({config:t}){return t.emulator?d0(t,p3):`https://${t.authDomain}/${m3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="webStorageSupport";class v3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x0,this._completeRedirectFn=U6,this._overrideRedirectResult=V6}async _openPopup(e,n,r,i){To(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await AN(e,n,r,ny(),i);return h3(e,o,v0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await AN(e,n,r,ny(),i);return N6(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(To(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await a3(e),r=new H6(e);return n.register("authEvent",i=>(dt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jv,{type:jv},i=>{const o=i?.[0]?.[jv];o!==void 0&&n(!!o),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return E2()||w2()||f0()}}const nC=v3;var kN="@firebase/auth",PN="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _3(t){Uc(new Ml("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;dt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S2(t)},p=new Y5(r,i,o,f);return i6(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Uc(new Ml("auth-internal",e=>{const n=ec(e.getProvider("auth").getImmediate());return(r=>new y3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ea(kN,PN,w3(t)),Ea(kN,PN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=300,N3=n2("authIdTokenMaxAge")||b3;let IN=null;const j3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>N3)return;const i=n?.token;IN!==i&&(IN=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sC(t=l0()){const e=Gp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=k2(t,{popupRedirectResolver:nC,persistence:[X2,q2,x0]}),r=n2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=j3(o.toString());U2(n,u,()=>u(n.currentUser)),z2(n,d=>u(d))}}const i=J1("auth");return i&&P2(n,`http://${i}`),n}function C3(){return document.getElementsByTagName("head")?.[0]??document}Q5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Wi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",C3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_3("Browser");const E3=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Yp,AuthCredential:Zp,EmailAuthCredential:sd,EmailAuthProvider:tc,FacebookAuthProvider:wa,GithubAuthProvider:vo,GoogleAuthProvider:_a,OAuthCredential:Dl,TwitterAuthProvider:yo,beforeAuthStateChanged:U2,browserLocalPersistence:q2,browserPopupRedirectResolver:nC,browserSessionPersistence:x0,connectAuthEmulator:P2,createUserWithEmailAndPassword:V2,deleteUser:$2,getAuth:sC,getIdTokenResult:p2,inMemoryPersistence:ry,indexedDBLocalPersistence:X2,initializeAuth:k2,onAuthStateChanged:g0,onIdTokenChanged:z2,prodErrorMap:u2,reauthenticateWithCredential:O2,reload:g2,signInWithCredential:D2,signInWithEmailAndPassword:p0,signInWithPopup:dp,updatePassword:B2},Symbol.toStringTag,{value:"Module"}));var S3="firebase",T3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ea(S3,T3,"app");var RN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Il,rC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,D){function O(){}O.prototype=D.prototype,F.F=D.prototype,F.prototype=new O,F.prototype.constructor=F,F.D=function(U,$,K){for(var W=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)W[ce-2]=arguments[ce];return D.prototype[$].apply(U,W)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,D,O){O||(O=0);const U=Array(16);if(typeof D=="string")for(var $=0;$<16;++$)U[$]=D.charCodeAt(O++)|D.charCodeAt(O++)<<8|D.charCodeAt(O++)<<16|D.charCodeAt(O++)<<24;else for($=0;$<16;++$)U[$]=D[O++]|D[O++]<<8|D[O++]<<16|D[O++]<<24;D=F.g[0],O=F.g[1],$=F.g[2];let K=F.g[3],W;W=D+(K^O&($^K))+U[0]+3614090360&4294967295,D=O+(W<<7&4294967295|W>>>25),W=K+($^D&(O^$))+U[1]+3905402710&4294967295,K=D+(W<<12&4294967295|W>>>20),W=$+(O^K&(D^O))+U[2]+606105819&4294967295,$=K+(W<<17&4294967295|W>>>15),W=O+(D^$&(K^D))+U[3]+3250441966&4294967295,O=$+(W<<22&4294967295|W>>>10),W=D+(K^O&($^K))+U[4]+4118548399&4294967295,D=O+(W<<7&4294967295|W>>>25),W=K+($^D&(O^$))+U[5]+1200080426&4294967295,K=D+(W<<12&4294967295|W>>>20),W=$+(O^K&(D^O))+U[6]+2821735955&4294967295,$=K+(W<<17&4294967295|W>>>15),W=O+(D^$&(K^D))+U[7]+4249261313&4294967295,O=$+(W<<22&4294967295|W>>>10),W=D+(K^O&($^K))+U[8]+1770035416&4294967295,D=O+(W<<7&4294967295|W>>>25),W=K+($^D&(O^$))+U[9]+2336552879&4294967295,K=D+(W<<12&4294967295|W>>>20),W=$+(O^K&(D^O))+U[10]+4294925233&4294967295,$=K+(W<<17&4294967295|W>>>15),W=O+(D^$&(K^D))+U[11]+2304563134&4294967295,O=$+(W<<22&4294967295|W>>>10),W=D+(K^O&($^K))+U[12]+1804603682&4294967295,D=O+(W<<7&4294967295|W>>>25),W=K+($^D&(O^$))+U[13]+4254626195&4294967295,K=D+(W<<12&4294967295|W>>>20),W=$+(O^K&(D^O))+U[14]+2792965006&4294967295,$=K+(W<<17&4294967295|W>>>15),W=O+(D^$&(K^D))+U[15]+1236535329&4294967295,O=$+(W<<22&4294967295|W>>>10),W=D+($^K&(O^$))+U[1]+4129170786&4294967295,D=O+(W<<5&4294967295|W>>>27),W=K+(O^$&(D^O))+U[6]+3225465664&4294967295,K=D+(W<<9&4294967295|W>>>23),W=$+(D^O&(K^D))+U[11]+643717713&4294967295,$=K+(W<<14&4294967295|W>>>18),W=O+(K^D&($^K))+U[0]+3921069994&4294967295,O=$+(W<<20&4294967295|W>>>12),W=D+($^K&(O^$))+U[5]+3593408605&4294967295,D=O+(W<<5&4294967295|W>>>27),W=K+(O^$&(D^O))+U[10]+38016083&4294967295,K=D+(W<<9&4294967295|W>>>23),W=$+(D^O&(K^D))+U[15]+3634488961&4294967295,$=K+(W<<14&4294967295|W>>>18),W=O+(K^D&($^K))+U[4]+3889429448&4294967295,O=$+(W<<20&4294967295|W>>>12),W=D+($^K&(O^$))+U[9]+568446438&4294967295,D=O+(W<<5&4294967295|W>>>27),W=K+(O^$&(D^O))+U[14]+3275163606&4294967295,K=D+(W<<9&4294967295|W>>>23),W=$+(D^O&(K^D))+U[3]+4107603335&4294967295,$=K+(W<<14&4294967295|W>>>18),W=O+(K^D&($^K))+U[8]+1163531501&4294967295,O=$+(W<<20&4294967295|W>>>12),W=D+($^K&(O^$))+U[13]+2850285829&4294967295,D=O+(W<<5&4294967295|W>>>27),W=K+(O^$&(D^O))+U[2]+4243563512&4294967295,K=D+(W<<9&4294967295|W>>>23),W=$+(D^O&(K^D))+U[7]+1735328473&4294967295,$=K+(W<<14&4294967295|W>>>18),W=O+(K^D&($^K))+U[12]+2368359562&4294967295,O=$+(W<<20&4294967295|W>>>12),W=D+(O^$^K)+U[5]+4294588738&4294967295,D=O+(W<<4&4294967295|W>>>28),W=K+(D^O^$)+U[8]+2272392833&4294967295,K=D+(W<<11&4294967295|W>>>21),W=$+(K^D^O)+U[11]+1839030562&4294967295,$=K+(W<<16&4294967295|W>>>16),W=O+($^K^D)+U[14]+4259657740&4294967295,O=$+(W<<23&4294967295|W>>>9),W=D+(O^$^K)+U[1]+2763975236&4294967295,D=O+(W<<4&4294967295|W>>>28),W=K+(D^O^$)+U[4]+1272893353&4294967295,K=D+(W<<11&4294967295|W>>>21),W=$+(K^D^O)+U[7]+4139469664&4294967295,$=K+(W<<16&4294967295|W>>>16),W=O+($^K^D)+U[10]+3200236656&4294967295,O=$+(W<<23&4294967295|W>>>9),W=D+(O^$^K)+U[13]+681279174&4294967295,D=O+(W<<4&4294967295|W>>>28),W=K+(D^O^$)+U[0]+3936430074&4294967295,K=D+(W<<11&4294967295|W>>>21),W=$+(K^D^O)+U[3]+3572445317&4294967295,$=K+(W<<16&4294967295|W>>>16),W=O+($^K^D)+U[6]+76029189&4294967295,O=$+(W<<23&4294967295|W>>>9),W=D+(O^$^K)+U[9]+3654602809&4294967295,D=O+(W<<4&4294967295|W>>>28),W=K+(D^O^$)+U[12]+3873151461&4294967295,K=D+(W<<11&4294967295|W>>>21),W=$+(K^D^O)+U[15]+530742520&4294967295,$=K+(W<<16&4294967295|W>>>16),W=O+($^K^D)+U[2]+3299628645&4294967295,O=$+(W<<23&4294967295|W>>>9),W=D+($^(O|~K))+U[0]+4096336452&4294967295,D=O+(W<<6&4294967295|W>>>26),W=K+(O^(D|~$))+U[7]+1126891415&4294967295,K=D+(W<<10&4294967295|W>>>22),W=$+(D^(K|~O))+U[14]+2878612391&4294967295,$=K+(W<<15&4294967295|W>>>17),W=O+(K^($|~D))+U[5]+4237533241&4294967295,O=$+(W<<21&4294967295|W>>>11),W=D+($^(O|~K))+U[12]+1700485571&4294967295,D=O+(W<<6&4294967295|W>>>26),W=K+(O^(D|~$))+U[3]+2399980690&4294967295,K=D+(W<<10&4294967295|W>>>22),W=$+(D^(K|~O))+U[10]+4293915773&4294967295,$=K+(W<<15&4294967295|W>>>17),W=O+(K^($|~D))+U[1]+2240044497&4294967295,O=$+(W<<21&4294967295|W>>>11),W=D+($^(O|~K))+U[8]+1873313359&4294967295,D=O+(W<<6&4294967295|W>>>26),W=K+(O^(D|~$))+U[15]+4264355552&4294967295,K=D+(W<<10&4294967295|W>>>22),W=$+(D^(K|~O))+U[6]+2734768916&4294967295,$=K+(W<<15&4294967295|W>>>17),W=O+(K^($|~D))+U[13]+1309151649&4294967295,O=$+(W<<21&4294967295|W>>>11),W=D+($^(O|~K))+U[4]+4149444226&4294967295,D=O+(W<<6&4294967295|W>>>26),W=K+(O^(D|~$))+U[11]+3174756917&4294967295,K=D+(W<<10&4294967295|W>>>22),W=$+(D^(K|~O))+U[2]+718787259&4294967295,$=K+(W<<15&4294967295|W>>>17),W=O+(K^($|~D))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+D&4294967295,F.g[1]=F.g[1]+($+(W<<21&4294967295|W>>>11))&4294967295,F.g[2]=F.g[2]+$&4294967295,F.g[3]=F.g[3]+K&4294967295}r.prototype.v=function(F,D){D===void 0&&(D=F.length);const O=D-this.blockSize,U=this.C;let $=this.h,K=0;for(;K<D;){if($==0)for(;K<=O;)i(this,F,K),K+=this.blockSize;if(typeof F=="string"){for(;K<D;)if(U[$++]=F.charCodeAt(K++),$==this.blockSize){i(this,U),$=0;break}}else for(;K<D;)if(U[$++]=F[K++],$==this.blockSize){i(this,U),$=0;break}}this.h=$,this.o+=D},r.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var D=1;D<F.length-8;++D)F[D]=0;D=this.o*8;for(var O=F.length-8;O<F.length;++O)F[O]=D&255,D/=256;for(this.v(F),F=Array(16),D=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)F[D++]=this.g[O]>>>U&255;return F};function o(F,D){var O=d;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=D(F)}function u(F,D){this.h=D;const O=[];let U=!0;for(let $=F.length-1;$>=0;$--){const K=F[$]|0;U&&K==D||(O[$]=K,U=!1)}this.g=O}var d={};function f(F){return-128<=F&&F<128?o(F,function(D){return new u([D|0],D<0?-1:0)}):new u([F|0],F<0?-1:0)}function p(F){if(isNaN(F)||!isFinite(F))return g;if(F<0)return k(p(-F));const D=[];let O=1;for(let U=0;F>=O;U++)D[U]=F/O|0,O*=4294967296;return new u(D,0)}function y(F,D){if(F.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(F.charAt(0)=="-")return k(y(F.substring(1),D));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=p(Math.pow(D,8));let U=g;for(let K=0;K<F.length;K+=8){var $=Math.min(8,F.length-K);const W=parseInt(F.substring(K,K+$),D);$<8?($=p(Math.pow(D,$)),U=U.j($).add(p(W))):(U=U.j(O),U=U.add(p(W)))}return U}var g=f(0),b=f(1),E=f(16777216);t=u.prototype,t.m=function(){if(S(this))return-k(this).m();let F=0,D=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);F+=(U>=0?U:4294967296+U)*D,D*=4294967296}return F},t.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(N(this))return"0";if(S(this))return"-"+k(this).toString(F);const D=p(Math.pow(F,6));var O=this;let U="";for(;;){const $=H(O,D).g;O=R(O,$.j(D));let K=((O.g.length>0?O.g[0]:O.h)>>>0).toString(F);if(O=$,N(O))return K+U;for(;K.length<6;)K="0"+K;U=K+U}},t.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function N(F){if(F.h!=0)return!1;for(let D=0;D<F.g.length;D++)if(F.g[D]!=0)return!1;return!0}function S(F){return F.h==-1}t.l=function(F){return F=R(this,F),S(F)?-1:N(F)?0:1};function k(F){const D=F.g.length,O=[];for(let U=0;U<D;U++)O[U]=~F.g[U];return new u(O,~F.h).add(b)}t.abs=function(){return S(this)?k(this):this},t.add=function(F){const D=Math.max(this.g.length,F.g.length),O=[];let U=0;for(let $=0;$<=D;$++){let K=U+(this.i($)&65535)+(F.i($)&65535),W=(K>>>16)+(this.i($)>>>16)+(F.i($)>>>16);U=W>>>16,K&=65535,W&=65535,O[$]=W<<16|K}return new u(O,O[O.length-1]&-2147483648?-1:0)};function R(F,D){return F.add(k(D))}t.j=function(F){if(N(this)||N(F))return g;if(S(this))return S(F)?k(this).j(k(F)):k(k(this).j(F));if(S(F))return k(this.j(k(F)));if(this.l(E)<0&&F.l(E)<0)return p(this.m()*F.m());const D=this.g.length+F.g.length,O=[];for(var U=0;U<2*D;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let $=0;$<F.g.length;$++){const K=this.i(U)>>>16,W=this.i(U)&65535,ce=F.i($)>>>16,oe=F.i($)&65535;O[2*U+2*$]+=W*oe,I(O,2*U+2*$),O[2*U+2*$+1]+=K*oe,I(O,2*U+2*$+1),O[2*U+2*$+1]+=W*ce,I(O,2*U+2*$+1),O[2*U+2*$+2]+=K*ce,I(O,2*U+2*$+2)}for(F=0;F<D;F++)O[F]=O[2*F+1]<<16|O[2*F];for(F=D;F<2*D;F++)O[F]=0;return new u(O,0)};function I(F,D){for(;(F[D]&65535)!=F[D];)F[D+1]+=F[D]>>>16,F[D]&=65535,D++}function z(F,D){this.g=F,this.h=D}function H(F,D){if(N(D))throw Error("division by zero");if(N(F))return new z(g,g);if(S(F))return D=H(k(F),D),new z(k(D.g),k(D.h));if(S(D))return D=H(F,k(D)),new z(k(D.g),D.h);if(F.g.length>30){if(S(F)||S(D))throw Error("slowDivide_ only works with positive integers.");for(var O=b,U=D;U.l(F)<=0;)O=G(O),U=G(U);var $=Q(O,1),K=Q(U,1);for(U=Q(U,2),O=Q(O,2);!N(U);){var W=K.add(U);W.l(F)<=0&&($=$.add(O),K=W),U=Q(U,1),O=Q(O,1)}return D=R(F,$.j(D)),new z($,D)}for($=g;F.l(D)>=0;){for(O=Math.max(1,Math.floor(F.m()/D.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),K=p(O),W=K.j(D);S(W)||W.l(F)>0;)O-=U,K=p(O),W=K.j(D);N(K)&&(K=b),$=$.add(K),F=R(F,W)}return new z($,F)}t.B=function(F){return H(this,F).h},t.and=function(F){const D=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<D;U++)O[U]=this.i(U)&F.i(U);return new u(O,this.h&F.h)},t.or=function(F){const D=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<D;U++)O[U]=this.i(U)|F.i(U);return new u(O,this.h|F.h)},t.xor=function(F){const D=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<D;U++)O[U]=this.i(U)^F.i(U);return new u(O,this.h^F.h)};function G(F){const D=F.g.length+1,O=[];for(let U=0;U<D;U++)O[U]=F.i(U)<<1|F.i(U-1)>>>31;return new u(O,F.h)}function Q(F,D){const O=D>>5;D%=32;const U=F.g.length-O,$=[];for(let K=0;K<U;K++)$[K]=D>0?F.i(K+O)>>>D|F.i(K+O+1)<<32-D:F.i(K+O);return new u($,F.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rC=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Il=u}).apply(typeof RN<"u"?RN:typeof self<"u"?self:typeof window<"u"?window:{});var jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iC,yh,aC,qm,oy,oC,lC,cC;(function(){var t,e=Object.defineProperty;function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof jm=="object"&&jm];for(var A=0;A<x.length;++A){var M=x[A];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function i(x,A){if(A)e:{var M=r;x=x.split(".");for(var q=0;q<x.length-1;q++){var re=x[q];if(!(re in M))break e;M=M[re]}x=x[x.length-1],q=M[x],A=A(q),A!=q&&A!=null&&e(M,x,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(A){var M=[],q;for(q in A)Object.prototype.hasOwnProperty.call(A,q)&&M.push([q,A[q]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function d(x){var A=typeof x;return A=="object"&&x!=null||A=="function"}function f(x,A,M){return x.call.apply(x.bind,arguments)}function p(x,A,M){return p=f,p.apply(null,arguments)}function y(x,A){var M=Array.prototype.slice.call(arguments,1);return function(){var q=M.slice();return q.push.apply(q,arguments),x.apply(this,q)}}function g(x,A){function M(){}M.prototype=A.prototype,x.Z=A.prototype,x.prototype=new M,x.prototype.constructor=x,x.Ob=function(q,re,fe){for(var De=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)De[ct-2]=arguments[ct];return A.prototype[re].apply(q,De)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function E(x){const A=x.length;if(A>0){const M=Array(A);for(let q=0;q<A;q++)M[q]=x[q];return M}return[]}function N(x,A){for(let q=1;q<arguments.length;q++){const re=arguments[q];var M=typeof re;if(M=M!="object"?M:re?Array.isArray(re)?"array":M:"null",M=="array"||M=="object"&&typeof re.length=="number"){M=x.length||0;const fe=re.length||0;x.length=M+fe;for(let De=0;De<fe;De++)x[M+De]=re[De]}else x.push(re)}}class S{constructor(A,M){this.i=A,this.j=M,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function k(x){u.setTimeout(()=>{throw x},0)}function R(){var x=F;let A=null;return x.g&&(A=x.g,x.g=x.g.next,x.g||(x.h=null),A.next=null),A}class I{constructor(){this.h=this.g=null}add(A,M){const q=z.get();q.set(A,M),this.h?this.h.next=q:this.g=q,this.h=q}}var z=new S(()=>new H,x=>x.reset());class H{constructor(){this.next=this.g=this.h=null}set(A,M){this.h=A,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Q=!1,F=new I,D=()=>{const x=Promise.resolve(void 0);G=()=>{x.then(O)}};function O(){for(var x;x=R();){try{x.h.call(x.g)}catch(M){k(M)}var A=z;A.j(x),A.h<100&&(A.h++,x.next=A.g,A.g=x)}Q=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(x,A){this.type=x,this.g=this.target=A,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var K=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,A=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const M=()=>{};u.addEventListener("test",M,A),u.removeEventListener("test",M,A)}catch{}return x})();function W(x){return/^[\s\xa0]*$/.test(x)}function ce(x,A){$.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,A)}g(ce,$),ce.prototype.init=function(x,A){const M=this.type=x.type,q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=A,A=x.relatedTarget,A||(M=="mouseover"?A=x.fromElement:M=="mouseout"&&(A=x.toElement)),this.relatedTarget=A,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),ne=0;function xe(x,A,M,q,re){this.listener=x,this.proxy=null,this.src=A,this.type=M,this.capture=!!q,this.ha=re,this.key=++ne,this.da=this.fa=!1}function Z(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function de(x,A,M){for(const q in x)A.call(M,x[q],q,x)}function ie(x,A){for(const M in x)A.call(void 0,x[M],M,x)}function J(x){const A={};for(const M in x)A[M]=x[M];return A}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(x,A){let M,q;for(let re=1;re<arguments.length;re++){q=arguments[re];for(M in q)x[M]=q[M];for(let fe=0;fe<me.length;fe++)M=me[fe],Object.prototype.hasOwnProperty.call(q,M)&&(x[M]=q[M])}}function _e(x){this.src=x,this.g={},this.h=0}_e.prototype.add=function(x,A,M,q,re){const fe=x.toString();x=this.g[fe],x||(x=this.g[fe]=[],this.h++);const De=Ee(x,A,q,re);return De>-1?(A=x[De],M||(A.fa=!1)):(A=new xe(A,this.src,fe,!!q,re),A.fa=M,x.push(A)),A};function je(x,A){const M=A.type;if(M in x.g){var q=x.g[M],re=Array.prototype.indexOf.call(q,A,void 0),fe;(fe=re>=0)&&Array.prototype.splice.call(q,re,1),fe&&(Z(A),x.g[M].length==0&&(delete x.g[M],x.h--))}}function Ee(x,A,M,q){for(let re=0;re<x.length;++re){const fe=x[re];if(!fe.da&&fe.listener==A&&fe.capture==!!M&&fe.ha==q)return re}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),ke={};function Xe(x,A,M,q,re){if(Array.isArray(A)){for(let fe=0;fe<A.length;fe++)Xe(x,A[fe],M,q,re);return null}return M=Pr(M),x&&x[oe]?x.J(A,M,d(q)?!!q.capture:!1,re):tt(x,A,M,!1,q,re)}function tt(x,A,M,q,re,fe){if(!A)throw Error("Invalid event type");const De=d(re)?!!re.capture:!!re;let ct=js(x);if(ct||(x[ve]=ct=new _e(x)),M=ct.add(A,M,q,De,fe),M.proxy)return M;if(q=yt(),M.proxy=q,q.src=x,q.listener=M,x.addEventListener)K||(re=De),re===void 0&&(re=!1),x.addEventListener(A.toString(),q,re);else if(x.attachEvent)x.attachEvent(Ln(A.toString()),q);else if(x.addListener&&x.removeListener)x.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return M}function yt(){function x(M){return A.call(x.src,x.listener,M)}const A=kr;return x}function wt(x,A,M,q,re){if(Array.isArray(A))for(var fe=0;fe<A.length;fe++)wt(x,A[fe],M,q,re);else q=d(q)?!!q.capture:!!q,M=Pr(M),x&&x[oe]?(x=x.i,fe=String(A).toString(),fe in x.g&&(A=x.g[fe],M=Ee(A,M,q,re),M>-1&&(Z(A[M]),Array.prototype.splice.call(A,M,1),A.length==0&&(delete x.g[fe],x.h--)))):x&&(x=js(x))&&(A=x.g[A.toString()],x=-1,A&&(x=Ee(A,M,q,re)),(M=x>-1?A[x]:null)&&Yt(M))}function Yt(x){if(typeof x!="number"&&x&&!x.da){var A=x.src;if(A&&A[oe])je(A.i,x);else{var M=x.type,q=x.proxy;A.removeEventListener?A.removeEventListener(M,q,x.capture):A.detachEvent?A.detachEvent(Ln(M),q):A.addListener&&A.removeListener&&A.removeListener(q),(M=js(A))?(je(M,x),M.h==0&&(M.src=null,A[ve]=null)):Z(x)}}}function Ln(x){return x in ke?ke[x]:ke[x]="on"+x}function kr(x,A){if(x.da)x=!0;else{A=new ce(A,this);const M=x.listener,q=x.ha||x.src;x.fa&&Yt(x),x=M.call(q,A)}return x}function js(x){return x=x[ve],x instanceof _e?x:null}var An="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pr(x){return typeof x=="function"?x:(x[An]||(x[An]=function(A){return x.handleEvent(A)}),x[An])}function Ot(){U.call(this),this.i=new _e(this),this.M=this,this.G=null}g(Ot,U),Ot.prototype[oe]=!0,Ot.prototype.removeEventListener=function(x,A,M,q){wt(this,x,A,M,q)};function Xt(x,A){var M,q=x.G;if(q)for(M=[];q;q=q.G)M.push(q);if(x=x.M,q=A.type||A,typeof A=="string")A=new $(A,x);else if(A instanceof $)A.target=A.target||x;else{var re=A;A=new $(q,x),we(A,re)}re=!0;let fe,De;if(M)for(De=M.length-1;De>=0;De--)fe=A.g=M[De],re=cs(fe,q,!0,A)&&re;if(fe=A.g=x,re=cs(fe,q,!0,A)&&re,re=cs(fe,q,!1,A)&&re,M)for(De=0;De<M.length;De++)fe=A.g=M[De],re=cs(fe,q,!1,A)&&re}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var x=this.i;for(const A in x.g){const M=x.g[A];for(let q=0;q<M.length;q++)Z(M[q]);delete x.g[A],x.h--}}this.G=null},Ot.prototype.J=function(x,A,M,q){return this.i.add(String(x),A,!1,M,q)},Ot.prototype.K=function(x,A,M,q){return this.i.add(String(x),A,!0,M,q)};function cs(x,A,M,q){if(A=x.i.g[String(A)],!A)return!0;A=A.concat();let re=!0;for(let fe=0;fe<A.length;++fe){const De=A[fe];if(De&&!De.da&&De.capture==M){const ct=De.listener,It=De.ha||De.src;De.fa&&je(x.i,De),re=ct.call(It,q)!==!1&&re}}return re&&!q.defaultPrevented}function Nn(x,A){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=p(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:u.setTimeout(x,A||0)}function Us(x){x.g=Nn(()=>{x.g=null,x.i&&(x.i=!1,Us(x))},x.l);const A=x.h;x.h=null,x.m.apply(null,A)}class Bo extends U{constructor(A,M){super(),this.m=A,this.l=M,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Us(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(x){U.call(this),this.h=x,this.g={}}g(Jr,U);var or=[];function Pi(x){de(x.g,function(A,M){this.g.hasOwnProperty(M)&&Yt(A)},x),x.g={}}Jr.prototype.N=function(){Jr.Z.N.call(this),Pi(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lr=u.JSON.stringify,Ji=u.JSON.parse,us=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function cr(){}function Ir(){}var Rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ei(){$.call(this,"d")}g(ei,$);function Ii(){$.call(this,"c")}g(Ii,$);var Cs={},ur=null;function dr(){return ur=ur||new Ot}Cs.Ia="serverreachability";function ds(x){$.call(this,Cs.Ia,x)}g(ds,$);function hr(x){const A=dr();Xt(A,new ds(A))}Cs.STAT_EVENT="statevent";function fr(x,A){$.call(this,Cs.STAT_EVENT,x),this.stat=A}g(fr,$);function qt(x){const A=dr();Xt(A,new fr(A,x))}Cs.Ja="timingevent";function ea(x,A){$.call(this,Cs.Ja,x),this.size=A}g(ea,$);function rt(x,A){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},A)}function Ht(){this.g=!0}Ht.prototype.ua=function(){this.g=!1};function hn(x,A,M,q,re,fe){x.info(function(){if(x.g)if(fe){var De="",ct=fe.split("&");for(let Ft=0;Ft<ct.length;Ft++){var It=ct[Ft].split("=");if(It.length>1){const mn=It[0];It=It[1];const Ys=mn.split("_");De=Ys.length>=2&&Ys[1]=="type"?De+(mn+"="+It+"&"):De+(mn+"=redacted&")}}}else De=null;else De=fe;return"XMLHTTP REQ ("+q+") [attempt "+re+"]: "+A+`
`+M+`
`+De})}function Mn(x,A,M,q,re,fe,De){x.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+re+"]: "+A+`
`+M+`
`+fe+" "+De})}function hs(x,A,M,q){x.info(function(){return"XMLHTTP TEXT ("+A+"): "+jn(x,M)+(q?" "+q:"")})}function Jt(x,A){x.info(function(){return"TIMEOUT: "+A})}Ht.prototype.info=function(){};function jn(x,A){if(!x.g)return A;if(!A)return null;try{const fe=JSON.parse(A);if(fe){for(x=0;x<fe.length;x++)if(Array.isArray(fe[x])){var M=fe[x];if(!(M.length<2)){var q=M[1];if(Array.isArray(q)&&!(q.length<1)){var re=q[0];if(re!="noop"&&re!="stop"&&re!="close")for(let De=1;De<q.length;De++)q[De]=""}}}}return lr(fe)}catch{return A}}var $s={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},es;function fn(){}g(fn,cr),fn.prototype.g=function(){return new XMLHttpRequest},es=new fn;function Be(x){return encodeURIComponent(String(x))}function ta(x){var A=1;x=x.split(":");const M=[];for(;A>0&&x.length;)M.push(x.shift()),A--;return x.length&&M.push(x.join(":")),M}function Hs(x,A,M,q){this.j=x,this.i=A,this.l=M,this.S=q||1,this.V=new Jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ac}function ac(){this.i=null,this.g="",this.h=!1}var oc={},Ua={};function mr(x,A,M){x.M=1,x.A=zt(fs(A)),x.u=M,x.R=!0,ti(x,null)}function ti(x,A){x.F=Date.now(),$a(x),x.B=fs(x.A);var M=x.B,q=x.S;Array.isArray(q)||(q=[String(q)]),Ya(M.i,"t",q),x.C=0,M=x.j.L,x.h=new ac,x.g=pc(x.j,M?A:null,!x.u),x.P>0&&(x.O=new Bo(p(x.Y,x,x.g),x.P)),A=x.V,M=x.g,q=x.ba;var re="readystatechange";Array.isArray(re)||(re&&(or[0]=re.toString()),re=or);for(let fe=0;fe<re.length;fe++){const De=Xe(M,re[fe],q||A.handleEvent,!1,A.h||A);if(!De)break;A.g[De.key]=De}A=x.J?J(x.J):{},x.u?(x.v||(x.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,A)):(x.v="GET",x.g.ea(x.B,x.v,null,A)),hr(),hn(x.i,x.v,x.B,x.l,x.S,x.u)}Hs.prototype.ba=function(x){x=x.target;const A=this.O;A&&li(x)==3?A.j():this.Y(x)},Hs.prototype.Y=function(x){try{if(x==this.g)e:{const ct=li(this.g),It=this.g.ya(),Ft=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||hc(this.g)))){this.K||ct!=4||It==7||(It==8||Ft<=0?hr(3):hr(2)),Ha(this);var A=this.g.ca();this.X=A;var M=lc(this);if(this.o=A==200,Mn(this.i,this.v,this.B,this.l,this.S,ct,A),this.o){if(this.U&&!this.L){t:{if(this.g){var q,re=this.g;if((q=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(q)){var fe=q;break t}}fe=null}if(x=fe)hs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qt(this,x);else{this.o=!1,this.m=3,qt(12),pr(this),Wa(this);break e}}if(this.R){x=!0;let mn;for(;!this.K&&this.C<M.length;)if(mn=lu(this,M),mn==Ua){ct==4&&(this.m=4,qt(14),x=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==oc){this.m=4,qt(15),hs(this.i,this.l,M,"[Invalid Chunk]"),x=!1;break}else hs(this.i,this.l,mn,null),Qt(this,mn);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||M.length!=0||this.h.h||(this.m=1,qt(16),x=!1),this.o=this.o&&x,!x)hs(this.i,this.l,M,"[Invalid Chunked Response]"),pr(this),Wa(this);else if(M.length>0&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.aa&&!De.P&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),no(De),De.P=!0,qt(11))}}else hs(this.i,this.l,M,null),Qt(this,M);ct==4&&pr(this),this.o&&!this.K&&(ct==4?ps(this.j,this):(this.o=!1,$a(this)))}else Ja(this.g),A==400&&M.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),pr(this),Wa(this)}}}catch{}finally{}};function lc(x){if(!ou(x))return x.g.la();const A=hc(x.g);if(A==="")return"";let M="";const q=A.length,re=li(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return pr(x),Wa(x),"";x.h.i=new u.TextDecoder}for(let fe=0;fe<q;fe++)x.h.h=!0,M+=x.h.i.decode(A[fe],{stream:!(re&&fe==q-1)});return A.length=0,x.h.g+=M,x.C=0,x.h.g}function ou(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function lu(x,A){var M=x.C,q=A.indexOf(`
`,M);return q==-1?Ua:(M=Number(A.substring(M,q)),isNaN(M)?oc:(q+=1,q+M>A.length?Ua:(A=A.slice(q,q+M),x.C=q+M,A)))}Hs.prototype.cancel=function(){this.K=!0,pr(this)};function $a(x){x.T=Date.now()+x.H,cc(x,x.H)}function cc(x,A){if(x.D!=null)throw Error("WatchDog timer not null");x.D=rt(p(x.aa,x),A)}function Ha(x){x.D&&(u.clearTimeout(x.D),x.D=null)}Hs.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Jt(this.i,this.B),this.M!=2&&(hr(),qt(17)),pr(this),this.m=2,Wa(this)):cc(this,this.T-x)};function Wa(x){x.j.I==0||x.K||ps(x.j,x)}function pr(x){Ha(x);var A=x.O;A&&typeof A.dispose=="function"&&A.dispose(),x.O=null,Pi(x.V),x.g&&(A=x.g,x.g=null,A.abort(),A.dispose())}function Qt(x,A){try{var M=x.j;if(M.I!=0&&(M.g==x||Ga(M.h,x))){if(!x.L&&Ga(M.h,x)&&M.I==3){try{var q=M.Ba.g.parse(A)}catch{q=null}if(Array.isArray(q)&&q.length==3){var re=q;if(re[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<x.F)Ho(M),Ks(M);else break e;ui(M),qt(18)}}else M.xa=re[1],0<M.xa-M.K&&re[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=rt(p(M.Va,M),6e3));qa(M.h)<=1&&M.ta&&(M.ta=void 0)}else As(M,11)}else if((x.L||M.g==x)&&Ho(M),!W(A))for(re=M.Ba.g.parse(A),A=0;A<re.length;A++){let Ft=re[A];const mn=Ft[0];if(!(mn<=M.K))if(M.K=mn,Ft=Ft[1],M.I==2)if(Ft[0]=="c"){M.M=Ft[1],M.ba=Ft[2];const Ys=Ft[3];Ys!=null&&(M.ka=Ys,M.j.info("VER="+M.ka));const Dr=Ft[4];Dr!=null&&(M.za=Dr,M.j.info("SVER="+M.za));const yr=Ft[5];yr!=null&&typeof yr=="number"&&yr>0&&(q=1.5*yr,M.O=q,M.j.info("backChannelRequestTimeoutMs_="+q)),q=M;const hi=x.g;if(hi){const Zo=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var fe=q.h;fe.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(ni(fe,fe.h),fe.h=null))}if(q.G){const Yo=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(q.wa=Yo,Ue(q.J,q.G,Yo))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-x.F,M.j.info("Handshake RTT: "+M.T+"ms")),q=M;var De=x;if(q.na=qo(q,q.L?q.ba:null,q.W),De.L){na(q.h,De);var ct=De,It=q.O;It&&(ct.H=It),ct.D&&(Ha(ct),$a(ct)),q.g=De}else Wn(q);M.i.length>0&&Zs(M)}else Ft[0]!="stop"&&Ft[0]!="close"||As(M,7);else M.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?As(M,7):jt(M):Ft[0]!="noop"&&M.l&&M.l.qa(Ft),M.A=0)}}hr(4)}catch{}}var Bd=class{constructor(x,A){this.g=x,this.map=A}};function zo(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uc(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function qa(x){return x.h?1:x.g?x.g.size:0}function Ga(x,A){return x.h?x.h==A:x.g?x.g.has(A):!1}function ni(x,A){x.g?x.g.add(A):x.h=A}function na(x,A){x.h&&x.h==A?x.h=null:x.g&&x.g.has(A)&&x.g.delete(A)}zo.prototype.cancel=function(){if(this.i=Es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Es(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let A=x.i;for(const M of x.g.values())A=A.concat(M.G);return A}return E(x.i)}var sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xt(x,A){if(x){x=x.split("&");for(let M=0;M<x.length;M++){const q=x[M].indexOf("=");let re,fe=null;q>=0?(re=x[M].substring(0,q),fe=x[M].substring(q+1)):re=x[M],A(re,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function Pt(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;x instanceof Pt?(this.l=x.l,gr(this,x.j),this.o=x.o,this.g=x.g,ms(this,x.u),this.h=x.h,si(this,ia(x.i)),this.m=x.m):x&&(A=String(x).match(sa))?(this.l=!1,gr(this,A[1]||"",!0),this.o=Ri(A[2]||""),this.g=Ri(A[3]||"",!0),ms(this,A[4]),this.h=Ri(A[5]||"",!0),si(this,A[6]||"",!0),this.m=Ri(A[7]||"")):(this.l=!1,this.i=new Nt(null,this.l))}Pt.prototype.toString=function(){const x=[];var A=this.j;A&&x.push(ri(A,dc,!0),":");var M=this.g;return(M||A=="file")&&(x.push("//"),(A=this.o)&&x.push(ri(A,dc,!0),"@"),x.push(Be(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&x.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&x.push("/"),x.push(ri(M,M.charAt(0)=="/"?Ws:ra,!0))),(M=this.i.toString())&&x.push("?",M),(M=this.m)&&x.push("#",ri(M,Lr)),x.join("")},Pt.prototype.resolve=function(x){const A=fs(this);let M=!!x.j;M?gr(A,x.j):M=!!x.o,M?A.o=x.o:M=!!x.g,M?A.g=x.g:M=x.u!=null;var q=x.h;if(M)ms(A,x.u);else if(M=!!x.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var re=A.h.lastIndexOf("/");re!=-1&&(q=A.h.slice(0,re+1)+q)}if(re=q,re==".."||re==".")q="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){q=re.lastIndexOf("/",0)==0,re=re.split("/");const fe=[];for(let De=0;De<re.length;){const ct=re[De++];ct=="."?q&&De==re.length&&fe.push(""):ct==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),q&&De==re.length&&fe.push("")):(fe.push(ct),q=!0)}q=fe.join("/")}else q=re}return M?A.h=q:M=x.i.toString()!=="",M?si(A,ia(x.i)):M=!!x.m,M&&(A.m=x.m),A};function fs(x){return new Pt(x)}function gr(x,A,M){x.j=M?Ri(A,!0):A,x.j&&(x.j=x.j.replace(/:$/,""))}function ms(x,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);x.u=A}else x.u=null}function si(x,A,M){A instanceof Nt?(x.i=A,aa(x.i,x.l)):(M||(A=ri(A,on)),x.i=new Nt(A,x.l))}function Ue(x,A,M){x.i.set(A,M)}function zt(x){return Ue(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Ri(x,A){return x?A?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function ri(x,A,M){return typeof x=="string"?(x=encodeURI(x).replace(A,ts),M&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function ts(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var dc=/[#\/\?@]/g,ra=/[#\?:]/g,Ws=/[#\?]/g,on=/[#\?@]/g,Lr=/#/g;function Nt(x,A){this.h=this.g=null,this.i=x||null,this.j=!!A}function Ss(x){x.g||(x.g=new Map,x.h=0,x.i&&xt(x.i,function(A,M){x.add(decodeURIComponent(A.replace(/\+/g," ")),M)}))}t=Nt.prototype,t.add=function(x,A){Ss(this),this.i=null,x=xr(this,x);let M=this.g.get(x);return M||this.g.set(x,M=[]),M.push(A),this.h+=1,this};function Ka(x,A){Ss(x),A=xr(x,A),x.g.has(A)&&(x.i=null,x.h-=x.g.get(A).length,x.g.delete(A))}function ii(x,A){return Ss(x),A=xr(x,A),x.g.has(A)}t.forEach=function(x,A){Ss(this),this.g.forEach(function(M,q){M.forEach(function(re){x.call(A,re,q,this)},this)},this)};function Za(x,A){Ss(x);let M=[];if(typeof A=="string")ii(x,A)&&(M=M.concat(x.g.get(xr(x,A))));else for(x=Array.from(x.g.values()),A=0;A<x.length;A++)M=M.concat(x[A]);return M}t.set=function(x,A){return Ss(this),this.i=null,x=xr(this,x),ii(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[A]),this.h+=1,this},t.get=function(x,A){return x?(x=Za(this,x),x.length>0?String(x[0]):A):A};function Ya(x,A,M){Ka(x,A),M.length>0&&(x.i=null,x.g.set(xr(x,A),E(M)),x.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],A=Array.from(this.g.keys());for(let q=0;q<A.length;q++){var M=A[q];const re=Be(M);M=Za(this,M);for(let fe=0;fe<M.length;fe++){let De=re;M[fe]!==""&&(De+="="+Be(M[fe])),x.push(De)}}return this.i=x.join("&")};function ia(x){const A=new Nt;return A.i=x.i,x.g&&(A.g=new Map(x.g),A.h=x.h),A}function xr(x,A){return A=String(A),x.j&&(A=A.toLowerCase()),A}function aa(x,A){A&&!x.j&&(Ss(x),x.i=null,x.g.forEach(function(M,q){const re=q.toLowerCase();q!=re&&(Ka(this,q),Ya(this,re,M))},x)),x.j=A}function qs(x,A){const M=new Ht;if(u.Image){const q=new Image;q.onload=y(kn,M,"TestLoadImage: loaded",!0,A,q),q.onerror=y(kn,M,"TestLoadImage: error",!1,A,q),q.onabort=y(kn,M,"TestLoadImage: abort",!1,A,q),q.ontimeout=y(kn,M,"TestLoadImage: timeout",!1,A,q),u.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=x}else A(!1)}function Mr(x,A){const M=new Ht,q=new AbortController,re=setTimeout(()=>{q.abort(),kn(M,"TestPingServer: timeout",!1,A)},1e4);fetch(x,{signal:q.signal}).then(fe=>{clearTimeout(re),fe.ok?kn(M,"TestPingServer: ok",!0,A):kn(M,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(re),kn(M,"TestPingServer: error",!1,A)})}function kn(x,A,M,q,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),q(M)}catch{}}function Qa(){this.g=new us}function it(x){this.i=x.Sb||null,this.h=x.ab||!1}g(it,cr),it.prototype.g=function(){return new ln(this.i,this.h)};function ln(x,A){Ot.call(this),this.H=x,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(ln,Ot),t=ln.prototype,t.open=function(x,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=A,this.readyState=1,Gs(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(A.body=x),(this.H||u).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ut(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ut(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}t.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var A=x.value?x.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!x.done}))&&(this.response=this.responseText+=A)}x.done?Li(this):Gs(this),this.readyState==3&&Ut(this)}},t.Oa=function(x){this.g&&(this.response=this.responseText=x,Li(this))},t.Na=function(x){this.g&&(this.response=x,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(x){x.readyState=4,x.l=null,x.j=null,x.B=null,Gs(x)}t.setRequestHeader=function(x,A){this.A.append(x,A)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],A=this.h.entries();for(var M=A.next();!M.done;)M=M.value,x.push(M[0]+": "+M[1]),M=A.next();return x.join(`\r
`)};function Gs(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Uo(x){let A="";return de(x,function(M,q){A+=q,A+=":",A+=M,A+=`\r
`}),A}function oa(x,A,M){e:{for(q in M){var q=!1;break e}q=!0}q||(M=Uo(M),typeof x=="string"?M!=null&&Be(M):Ue(x,A,M))}function kt(x){Ot.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(kt,Ot);var $o=/^https?$/i,Xa=["POST","PUT"];t=kt.prototype,t.Fa=function(x){this.H=x},t.ea=function(x,A,M,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);A=A?A.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():es.g(),this.g.onreadystatechange=b(p(this.Ca,this));try{this.B=!0,this.g.open(A,String(x),!0),this.B=!1}catch(fe){en(this,fe);return}if(x=M||"",M=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var re in q)M.set(re,q[re]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const fe of q.keys())M.set(fe,q.get(fe));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(M.keys()).find(fe=>fe.toLowerCase()=="content-type"),re=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(Xa,A,void 0)>=0)||q||re||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,De]of M)this.g.setRequestHeader(fe,De);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(fe){en(this,fe)}};function en(x,A){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=A,x.o=5,Ts(x),oi(x)}function Ts(x){x.A||(x.A=!0,Xt(x,"complete"),Xt(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Xt(this,"complete"),Xt(this,"abort"),oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),kt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ai(this):this.Xa())},t.Xa=function(){ai(this)};function ai(x){if(x.h&&typeof o<"u"){if(x.v&&li(x)==4)setTimeout(x.Ca.bind(x),0);else if(Xt(x,"readystatechange"),li(x)==4){x.h=!1;try{const fe=x.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var M;if(!(M=A)){var q;if(q=fe===0){let De=String(x.D).match(sa)[1]||null;!De&&u.self&&u.self.location&&(De=u.self.location.protocol.slice(0,-1)),q=!$o.test(De?De.toLowerCase():"")}M=q}if(M)Xt(x,"complete"),Xt(x,"success");else{x.o=6;try{var re=li(x)>2?x.g.statusText:""}catch{re=""}x.l=re+" ["+x.ca()+"]",Ts(x)}}finally{oi(x)}}}}function oi(x,A){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const M=x.g;x.g=null,A||Xt(x,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function li(x){return x.g?x.g.readyState:0}t.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(x){if(this.g){var A=this.g.responseText;return x&&A.indexOf(x)==0&&(A=A.substring(x.length)),Ji(A)}};function hc(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Ja(x){const A={};x=(x.g&&li(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<x.length;q++){if(W(x[q]))continue;var M=ta(x[q]);const re=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const fe=A[re]||[];A[re]=fe,fe.push(M)}ie(A,function(q){return q.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(x,A,M){return M&&M.internalChannelParams&&M.internalChannelParams[x]||A}function eo(x){this.za=0,this.i=[],this.j=new Ht,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ci("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ci("baseRetryDelayMs",5e3,x),this.Za=ci("retryDelaySeedMs",1e4,x),this.Ta=ci("forwardChannelMaxRetries",2,x),this.va=ci("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new zo(x&&x.concurrentRequestLimit),this.Ba=new Qa,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=eo.prototype,t.ka=8,t.I=1,t.connect=function(x,A,M,q){qt(0),this.W=x,this.H=A||{},M&&q!==void 0&&(this.H.OSID=M,this.H.OAID=q),this.F=this.X,this.J=qo(this,null,this.W),Zs(this)};function jt(x){if(ns(x),x.I==3){var A=x.V++,M=fs(x.J);if(Ue(M,"SID",x.M),Ue(M,"RID",A),Ue(M,"TYPE","terminate"),vr(x,M),A=new Hs(x,x.j,A),A.M=2,A.A=zt(fs(M)),M=!1,u.navigator&&u.navigator.sendBeacon)try{M=u.navigator.sendBeacon(A.A.toString(),"")}catch{}!M&&u.Image&&(new Image().src=A.A,M=!0),M||(A.g=pc(A.j,null),A.g.ea(A.A)),A.F=Date.now(),$a(A)}ks(x)}function Ks(x){x.g&&(no(x),x.g.cancel(),x.g=null)}function ns(x){Ks(x),x.v&&(u.clearTimeout(x.v),x.v=null),Ho(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function Zs(x){if(!uc(x.h)&&!x.m){x.m=!0;var A=x.Ea;G||D(),Q||(G(),Q=!0),F.add(A,x),x.D=0}}function fc(x,A){return qa(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=A.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=rt(p(x.Ea,x,A),Wo(x,x.D)),x.D++,!0)}t.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const re=new Hs(this,this.j,x);let fe=this.o;if(this.U&&(fe?(fe=J(fe),we(fe,this.U)):fe=this.U),this.u!==null||this.R||(re.J=fe,fe=null),this.S)e:{for(var A=0,M=0;M<this.i.length;M++){t:{var q=this.i[M];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(A+=q,A>4096){A=M;break e}if(A===4096||M===this.i.length-1){A=M+1;break e}}A=1e3}else A=1e3;A=mc(this,re,A),M=fs(this.J),Ue(M,"RID",x),Ue(M,"CVER",22),this.G&&Ue(M,"X-HTTP-Session-Id",this.G),vr(this,M),fe&&(this.R?A="headers="+Be(Uo(fe))+"&"+A:this.u&&oa(M,this.u,fe)),ni(this.h,re),this.Ra&&Ue(M,"TYPE","init"),this.S?(Ue(M,"$req",A),Ue(M,"SID","null"),re.U=!0,mr(re,M,null)):mr(re,M,A),this.I=2}}else this.I==3&&(x?to(this,x):this.i.length==0||uc(this.h)||to(this))};function to(x,A){var M;A?M=A.l:M=x.V++;const q=fs(x.J);Ue(q,"SID",x.M),Ue(q,"RID",M),Ue(q,"AID",x.K),vr(x,q),x.u&&x.o&&oa(q,x.u,x.o),M=new Hs(x,x.j,M,x.D+1),x.u===null&&(M.J=x.o),A&&(x.i=A.G.concat(x.i)),A=mc(x,M,1e3),M.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),ni(x.h,M),mr(M,q,A)}function vr(x,A){x.H&&de(x.H,function(M,q){Ue(A,q,M)}),x.l&&de({},function(M,q){Ue(A,q,M)})}function mc(x,A,M){M=Math.min(x.i.length,M);const q=x.l?p(x.l.Ka,x.l,x):null;e:{var re=x.i;let ct=-1;for(;;){const It=["count="+M];ct==-1?M>0?(ct=re[0].g,It.push("ofs="+ct)):ct=0:It.push("ofs="+ct);let Ft=!0;for(let mn=0;mn<M;mn++){var fe=re[mn].g;const Ys=re[mn].map;if(fe-=ct,fe<0)ct=Math.max(0,re[mn].g-100),Ft=!1;else try{fe="req"+fe+"_"||"";try{var De=Ys instanceof Map?Ys:Object.entries(Ys);for(const[Dr,yr]of De){let hi=yr;d(yr)&&(hi=lr(yr)),It.push(fe+Dr+"="+encodeURIComponent(hi))}}catch(Dr){throw It.push(fe+"type="+encodeURIComponent("_badmap")),Dr}}catch{q&&q(Ys)}}if(Ft){De=It.join("&");break e}}De=void 0}return x=x.i.splice(0,M),A.G=x,De}function Wn(x){if(!x.g&&!x.v){x.Y=1;var A=x.Da;G||D(),Q||(G(),Q=!0),F.add(A,x),x.A=0}}function ui(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=rt(p(x.Da,x),Wo(x,x.A)),x.A++,!0)}t.Da=function(){if(this.v=null,di(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=rt(p(this.Wa,this),x)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),Ks(this),di(this))};function no(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function di(x){x.g=new Hs(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var A=fs(x.na);Ue(A,"RID","rpc"),Ue(A,"SID",x.M),Ue(A,"AID",x.K),Ue(A,"CI",x.F?"0":"1"),!x.F&&x.ia&&Ue(A,"TO",x.ia),Ue(A,"TYPE","xmlhttp"),vr(x,A),x.u&&x.o&&oa(A,x.u,x.o),x.O&&(x.g.H=x.O);var M=x.g;x=x.ba,M.M=1,M.A=zt(fs(A)),M.u=null,M.R=!0,ti(M,x)}t.Va=function(){this.C!=null&&(this.C=null,Ks(this),ui(this),qt(19))};function Ho(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function ps(x,A){var M=null;if(x.g==A){Ho(x),no(x),x.g=null;var q=2}else if(Ga(x.h,A))M=A.G,na(x.h,A),q=1;else return;if(x.I!=0){if(A.o)if(q==1){M=A.u?A.u.length:0,A=Date.now()-A.F;var re=x.D;q=dr(),Xt(q,new ea(q,M)),Zs(x)}else Wn(x);else if(re=A.m,re==3||re==0&&A.X>0||!(q==1&&fc(x,A)||q==2&&ui(x)))switch(M&&M.length>0&&(A=x.h,A.i=A.i.concat(M)),re){case 1:As(x,5);break;case 4:As(x,10);break;case 3:As(x,6);break;default:As(x,2)}}}function Wo(x,A){let M=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(M*=2),M*A}function As(x,A){if(x.j.info("Error code "+A),A==2){var M=p(x.bb,x),q=x.Ua;const re=!q;q=new Pt(q||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||gr(q,"https"),zt(q),re?qs(q.toString(),M):Mr(q.toString(),M)}else qt(2);x.I=0,x.l&&x.l.pa(A),ks(x),ns(x)}t.bb=function(x){x?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function ks(x){if(x.I=0,x.ja=[],x.l){const A=Es(x.h);(A.length!=0||x.i.length!=0)&&(N(x.ja,A),N(x.ja,x.i),x.h.i.length=0,E(x.i),x.i.length=0),x.l.oa()}}function qo(x,A,M){var q=M instanceof Pt?fs(M):new Pt(M);if(q.g!="")A&&(q.g=A+"."+q.g),ms(q,q.u);else{var re=u.location;q=re.protocol,A=A?A+"."+re.hostname:re.hostname,re=+re.port;const fe=new Pt(null);q&&gr(fe,q),A&&(fe.g=A),re&&ms(fe,re),M&&(fe.h=M),q=fe}return M=x.G,A=x.wa,M&&A&&Ue(q,M,A),Ue(q,"VER",x.ka),vr(x,q),q}function pc(x,A,M){if(A&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=x.Aa&&!x.ma?new kt(new it({ab:M})):new kt(x.ma),A.Fa(x.L),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Go(){}t=Go.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ko(){}Ko.prototype.g=function(x,A){return new Dn(x,A)};function Dn(x,A){Ot.call(this),this.g=new eo(A),this.l=x,this.h=A&&A.messageUrlParams||null,x=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(x?x["X-WebChannel-Content-Type"]=A.messageContentType:x={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(x?x["X-WebChannel-Client-Profile"]=A.sa:x={"X-WebChannel-Client-Profile":A.sa}),this.g.U=x,(x=A&&A.Qb)&&!W(x)&&(this.g.u=x),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!W(A)&&(this.g.G=A,x=this.h,x!==null&&A in x&&(x=this.h,A in x&&delete x[A])),this.j=new la(this)}g(Dn,Ot),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){jt(this.g)},Dn.prototype.o=function(x){var A=this.g;if(typeof x=="string"){var M={};M.__data__=x,x=M}else this.v&&(M={},M.__data__=lr(x),x=M);A.i.push(new Bd(A.Ya++,x)),A.I==3&&Zs(A)},Dn.prototype.N=function(){this.g.l=null,delete this.j,jt(this.g),delete this.g,Dn.Z.N.call(this)};function gc(x){ei.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var A=x.__sm__;if(A){e:{for(const M in A){x=M;break e}x=void 0}(this.i=x)&&(x=this.i,A=A!==null&&x in A?A[x]:void 0),this.data=A}else this.data=x}g(gc,ei);function cu(){Ii.call(this),this.status=1}g(cu,Ii);function la(x){this.g=x}g(la,Go),la.prototype.ra=function(){Xt(this.g,"a")},la.prototype.qa=function(x){Xt(this.g,new gc(x))},la.prototype.pa=function(x){Xt(this.g,new cu)},la.prototype.oa=function(){Xt(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,cC=function(){return new Ko},lC=function(){return dr()},oC=Cs,oy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,qm=$s,Cn.COMPLETE="complete",aC=Cn,Ir.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,yh=Ir,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,iC=kt}).apply(typeof jm<"u"?jm:typeof self<"u"?self:typeof window<"u"?window:{});const LN="@firebase/firestore",MN="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Os.UNAUTHENTICATED=new Os(null),Os.GOOGLE_CREDENTIALS=new Os("google-credentials-uid"),Os.FIRST_PARTY=new Os("first-party-uid"),Os.MOCK_USER=new Os("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new a0("@firebase/firestore");function Bu(){return Hc.logLevel}function He(t,...e){if(Hc.logLevel<=St.DEBUG){const n=e.map(w0);Hc.debug(`Firestore (${Nd}): ${t}`,...n)}}function Ao(t,...e){if(Hc.logLevel<=St.ERROR){const n=e.map(w0);Hc.error(`Firestore (${Nd}): ${t}`,...n)}}function rd(t,...e){if(Hc.logLevel<=St.WARN){const n=e.map(w0);Hc.warn(`Firestore (${Nd}): ${t}`,...n)}}function w0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uC(t,r,n)}function uC(t,e,n){let r=`FIRESTORE (${Nd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ao(r),new Error(r)}function Lt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||uC(e,i,r)}function vt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Va{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Os.UNAUTHENTICATED)))}shutdown(){}}class k3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class P3{constructor(e){this.t=e,this.currentUser=Os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Lt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ta,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},d=f=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ta)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string",31837,{l:r}),new dC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string",2055,{h:e}),new Os(e)}}class I3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Os.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new I3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Os.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Lt(this.o===void 0,3512);const r=o=>{o.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,He("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new DN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new DN(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=M3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Tt(t,e){return t<e?-1:t>e?1:0}function ly(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Cv(i)===Cv(o)?Tt(i,o):Cv(i)?1:-1}return Tt(t.length,e.length)}const D3=55296,O3=57343;function Cv(t){const e=t.charCodeAt(0);return e>=D3&&e<=O3}function id(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="__name__";class ya{constructor(e,n,r){n===void 0?n=0:n>e.length&&st(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&st(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ya.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Tt(e.length,n.length)}static compareSegments(e,n){const r=ya.isNumericId(e),i=ya.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ya.extractNumericId(e).compare(ya.extractNumericId(n)):ly(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Il.fromString(e.substring(4,e.length-2))}}class Zt extends ya{construct(e,n,r){return new Zt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const F3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ys extends ya{construct(e,n,r){return new ys(e,n,r)}static isValidIdentifier(e){return F3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ys.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ON}static keyField(){return new ys([ON])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Oe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Oe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else d==="`"?(u=!u,i++):d!=="."||u?(r+=d,i++):(o(),i++)}if(o(),u)throw new Oe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ys(n)}static emptyPath(){return new ys([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et(Zt.fromString(e))}static fromName(e){return new et(Zt.fromString(e).popFirst(5))}static empty(){return new et(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new Zt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e,n){if(!n)throw new Oe(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function V3(t,e,n,r){if(e===!0&&r===!0)throw new Oe(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FN(t){if(!et.isDocumentKey(t))throw new Oe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VN(t){if(et.isDocumentKey(t))throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Jp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st(12329,{type:typeof t})}function Vs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jp(t);throw new Oe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function B3(t,e){if(e<=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,e){const n={typeString:t};return e&&(n.value=e),n}function of(t,e){if(!fC(t))throw new Oe(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(i&&typeof u!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Oe(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=-62135596800,zN=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zN);return new nn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<BN)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zN}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(of(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-BN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:Un("string",nn._jsonSchemaVersion),seconds:Un("number"),nanoseconds:Un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new nn(0,0))}static max(){return new ut(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=-1;function z3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(r===1e9?new nn(n+1,0):new nn(n,r));return new Ol(i,et.empty(),e)}function U3(t){return new Ol(t.readTime,t.key,Dh)}class Ol{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ol(ut.min(),et.empty(),Dh)}static max(){return new Ol(ut.max(),et.empty(),Dh)}}function $3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(t.documentKey,e.documentKey),n!==0?n:Tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==H3)throw t;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):be.reject(n)}static resolve(e){return new be(((n,r)=>{n(e)}))}static reject(e){return new be(((n,r)=>{r(e)}))}static waitFor(e){return new be(((n,r)=>{let i=0,o=0,u=!1;e.forEach((d=>{++i,d.next((()=>{++o,u&&o===i&&n()}),(f=>r(f)))})),u=!0,o===i&&n()}))}static or(e){let n=be.resolve(!1);for(const r of e)n=n.next((i=>i?be.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new be(((r,i)=>{const o=e.length,u=new Array(o);let d=0;for(let f=0;f<o;f++){const p=f;n(e[p]).next((y=>{u[p]=y,++d,d===o&&r(u)}),(y=>i(y)))}}))}static doWhile(e,n){return new be(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}function q3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}eg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=-1;function lf(t){return t==null}function hp(t){return t===0&&1/t==-1/0}function G3(t){return typeof t=="number"&&Number.isInteger(t)&&!hp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="";function K3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UN(e)),e=Z3(t.get(n),e);return UN(e)}function Z3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case mC:n+="";break;default:n+=o}}return n}function UN(t){return t+mC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.comparator=e,this.root=n||vs.EMPTY}insert(e,n){return new bn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vs.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cm(this.root,e,this.comparator,!0)}}class Cm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vs{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??vs.RED,this.left=i??vs.EMPTY,this.right=o??vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new vs(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw st(27949);return e+(this.isRed()?0:1)}}vs.EMPTY=null,vs.RED=!0,vs.BLACK=!1;vs.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new vs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new HN(this.data.getIterator())}getIteratorFrom(e){return new HN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Xn(this.comparator);return n.data=e,n}}class HN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.fields=e,e.sort(ys.comparator)}static empty(){return new Gr([])}unionWith(e){let n=new Xn(ys.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return id(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gC("Invalid base64 string: "+o):o}})(e);return new ws(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o})(e);return new ws(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ws.EMPTY_BYTE_STRING=new ws("");const Y3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fl(t){if(Lt(!!t,39018),typeof t=="string"){let e=0;const n=Y3.exec(t);if(Lt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:In(t.seconds),nanos:In(t.nanos)}}function In(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vl(t){return typeof t=="string"?ws.fromBase64String(t):ws.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="server_timestamp",vC="__type__",yC="__previous_value__",wC="__local_write_time__";function N0(t){return(t?.mapValue?.fields||{})[vC]?.stringValue===xC}function tg(t){const e=t.mapValue.fields[yC];return N0(e)?tg(e):e}function Oh(t){const e=Fl(t.mapValue.fields[wC].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,r,i,o,u,d,f,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const fp="(default)";class Fh{constructor(e,n){this.projectId=e,this.database=n||fp}static empty(){return new Fh("","")}get isDefaultDatabase(){return this.database===fp}isEqual(e){return e instanceof Fh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="__type__",X3="__max__",Em={mapValue:{}},bC="__vector__",mp="value";function Bl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?N0(t)?4:eL(t)?9007199254740991:J3(t)?10:11:st(28295,{value:t})}function Da(t,e){if(t===e)return!0;const n=Bl(t);if(n!==Bl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oh(t).isEqual(Oh(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=Fl(i.timestampValue),d=Fl(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Vl(i.bytesValue).isEqual(Vl(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return In(i.geoPointValue.latitude)===In(o.geoPointValue.latitude)&&In(i.geoPointValue.longitude)===In(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return In(i.integerValue)===In(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=In(i.doubleValue),d=In(o.doubleValue);return u===d?hp(u)===hp(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return id(t.arrayValue.values||[],e.arrayValue.values||[],Da);case 10:case 11:return(function(i,o){const u=i.mapValue.fields||{},d=o.mapValue.fields||{};if($N(u)!==$N(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Da(u[f],d[f])))return!1;return!0})(t,e);default:return st(52216,{left:t})}}function Vh(t,e){return(t.values||[]).find((n=>Da(n,e)))!==void 0}function ad(t,e){if(t===e)return 0;const n=Bl(t),r=Bl(e);if(n!==r)return Tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tt(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const d=In(o.integerValue||o.doubleValue),f=In(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(t,e);case 3:return WN(t.timestampValue,e.timestampValue);case 4:return WN(Oh(t),Oh(e));case 5:return ly(t.stringValue,e.stringValue);case 6:return(function(o,u){const d=Vl(o),f=Vl(u);return d.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const d=o.split("/"),f=u.split("/");for(let p=0;p<d.length&&p<f.length;p++){const y=Tt(d[p],f[p]);if(y!==0)return y}return Tt(d.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const d=Tt(In(o.latitude),In(u.latitude));return d!==0?d:Tt(In(o.longitude),In(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return qN(t.arrayValue,e.arrayValue);case 10:return(function(o,u){const d=o.fields||{},f=u.fields||{},p=d[mp]?.arrayValue,y=f[mp]?.arrayValue,g=Tt(p?.values?.length||0,y?.values?.length||0);return g!==0?g:qN(p,y)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Em.mapValue&&u===Em.mapValue)return 0;if(o===Em.mapValue)return 1;if(u===Em.mapValue)return-1;const d=o.fields||{},f=Object.keys(d),p=u.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let g=0;g<f.length&&g<y.length;++g){const b=ly(f[g],y[g]);if(b!==0)return b;const E=ad(d[f[g]],p[y[g]]);if(E!==0)return E}return Tt(f.length,y.length)})(t.mapValue,e.mapValue);default:throw st(23264,{he:n})}}function WN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Tt(t,e);const n=Fl(t),r=Fl(e),i=Tt(n.seconds,r.seconds);return i!==0?i:Tt(n.nanos,r.nanos)}function qN(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=ad(n[i],r[i]);if(o)return o}return Tt(n.length,r.length)}function od(t){return cy(t)}function cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Fl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Vl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return et.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=cy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const u of r)o?o=!1:i+=",",i+=`${u}:${cy(n.fields[u])}`;return i+"}"})(t.mapValue):st(61005,{value:t})}function Gm(t){switch(Bl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(t);return e?16+Gm(e):16;case 5:return 2*t.stringValue.length;case 6:return Vl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Gm(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return nc(r.fields,((o,u)=>{i+=o.length+Gm(u)})),i})(t.mapValue);default:throw st(13486,{value:t})}}function GN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uy(t){return!!t&&"integerValue"in t}function j0(t){return!!t&&"arrayValue"in t}function KN(t){return!!t&&"nullValue"in t}function ZN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Km(t){return!!t&&"mapValue"in t}function J3(t){return(t?.mapValue?.fields||{})[_C]?.stringValue===bC}function Th(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return nc(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Th(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Th(t.arrayValue.values[n]);return e}return{...t}}function eL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===X3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Km(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(n)}setAll(e){let n=ys.emptyPath(),r={},i=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=d.popLast()}u?r[d.lastSegment()]=Th(u):i.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Km(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Km(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){nc(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new nr(Th(this.value))}}function NC(t){const e=[];return nc(t.fields,((n,r)=>{const i=new ys([n]);if(Km(r)){const o=NC(r.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)})),new Gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r,i,o,u,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new os(e,0,ut.min(),ut.min(),ut.min(),nr.empty(),0)}static newFoundDocument(e,n,r,i){return new os(e,1,n,ut.min(),r,i,0)}static newNoDocument(e,n){return new os(e,2,n,ut.min(),ut.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new os(e,3,n,ut.min(),ut.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.position=e,this.inclusive=n}}function YN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],u=t.position[i];if(o.field.isKeyField()?r=et.comparator(et.fromName(u.referenceValue),n.key):r=ad(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Da(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n="asc"){this.field=e,this.dir=n}}function tL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{}class Bn extends jC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sL(e,n,r):n==="array-contains"?new aL(e,r):n==="in"?new oL(e,r):n==="not-in"?new lL(e,r):n==="array-contains-any"?new cL(e,r):new Bn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rL(e,r):new iL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ad(n,this.value)):n!==null&&Bl(this.value)===Bl(n)&&this.matchesComparison(ad(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends jC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qi(e,n)}matches(e){return CC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CC(t){return t.op==="and"}function EC(t){return nL(t)&&CC(t)}function nL(t){for(const e of t.filters)if(e instanceof qi)return!1;return!0}function dy(t){if(t instanceof Bn)return t.field.canonicalString()+t.op.toString()+od(t.value);if(EC(t))return t.filters.map((e=>dy(e))).join(",");{const e=t.filters.map((n=>dy(n))).join(",");return`${t.op}(${e})`}}function SC(t,e){return t instanceof Bn?(function(r,i){return i instanceof Bn&&r.op===i.op&&r.field.isEqual(i.field)&&Da(r.value,i.value)})(t,e):t instanceof qi?(function(r,i){return i instanceof qi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,u,d)=>o&&SC(u,i.filters[d])),!0):!1})(t,e):void st(19439)}function TC(t){return t instanceof Bn?(function(n){return`${n.field.canonicalString()} ${n.op} ${od(n.value)}`})(t):t instanceof qi?(function(n){return n.op.toString()+" {"+n.getFilters().map(TC).join(" ,")+"}"})(t):"Filter"}class sL extends Bn{constructor(e,n,r){super(e,n,r),this.key=et.fromName(r.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class rL extends Bn{constructor(e,n){super(e,"in",n),this.keys=AC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iL extends Bn{constructor(e,n){super(e,"not-in",n),this.keys=AC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function AC(t,e){return(e.arrayValue?.values||[]).map((n=>et.fromName(n.referenceValue)))}class aL extends Bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return j0(n)&&Vh(n.arrayValue,this.value)}}class oL extends Bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vh(this.value.arrayValue,n)}}class lL extends Bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vh(this.value.arrayValue,n)}}class cL extends Bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!j0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Vh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n=null,r=[],i=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=d,this.Te=null}}function XN(t,e=null,n=[],r=[],i=null,o=null,u=null){return new uL(t,e,n,r,i,o,u)}function C0(t){const e=vt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>dy(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>od(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>od(r))).join(",")),e.Te=n}return e.Te}function E0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QN(t.startAt,e.startAt)&&QN(t.endAt,e.endAt)}function hy(t){return et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n=null,r=[],i=[],o=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dL(t,e,n,r,i,o,u,d){return new Ed(t,e,n,r,i,o,u,d)}function ng(t){return new Ed(t)}function JN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kC(t){return t.collectionGroup!==null}function Ah(t){const e=vt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Xn(ys.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Bh(o,r))})),n.has(ys.keyField().canonicalString())||e.Ie.push(new Bh(ys.keyField(),r))}return e.Ie}function Aa(t){const e=vt(t);return e.Ee||(e.Ee=hL(e,Ah(t))),e.Ee}function hL(t,e){if(t.limitType==="F")return XN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Bh(i.field,o)}));const n=t.endAt?new pp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pp(t.startAt.position,t.startAt.inclusive):null;return XN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fy(t,e){const n=t.filters.concat([e]);return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gp(t,e,n){return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cf(t,e){return E0(Aa(t),Aa(e))&&t.limitType===e.limitType}function PC(t){return`${C0(Aa(t))}|lt:${t.limitType}`}function zu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>TC(i))).join(", ")}]`),lf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>od(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>od(i))).join(",")),`Target(${r})`})(Aa(t))}; limitType=${t.limitType})`}function sg(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):et.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Ah(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(u,d,f){const p=YN(u,d,f);return u.inclusive?p<=0:p<0})(r.startAt,Ah(r),i)||r.endAt&&!(function(u,d,f){const p=YN(u,d,f);return u.inclusive?p>=0:p>0})(r.endAt,Ah(r),i))})(t,e)}function fL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IC(t){return(e,n)=>{let r=!1;for(const i of Ah(t)){const o=mL(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mL(t,e,n){const r=t.field.isKeyField()?et.comparator(e.key,n.key):(function(o,u,d){const f=u.data.field(o),p=d.data.field(o);return f!==null&&p!==null?ad(f,p):st(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return st(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nc(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return pC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new bn(et.comparator);function ko(){return pL}const RC=new bn(et.comparator);function wh(...t){let e=RC;for(const n of t)e=e.insert(n.key,n);return e}function LC(t){let e=RC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Fc(){return kh()}function MC(){return kh()}function kh(){return new Jc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const gL=new bn(et.comparator),xL=new Xn(et.comparator);function At(...t){let e=xL;for(const n of t)e=e.add(n);return e}const vL=new Xn(Tt);function yL(){return vL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hp(e)?"-0":e}}function DC(t){return{integerValue:""+t}}function OC(t,e){return G3(e)?DC(e):S0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this._=void 0}}function wL(t,e,n){return t instanceof zh?(function(i,o){const u={fields:{[vC]:{stringValue:xC},[wC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&N0(o)&&(o=tg(o)),o&&(u.fields[yC]=o),{mapValue:u}})(n,e):t instanceof ld?VC(t,e):t instanceof cd?BC(t,e):(function(i,o){const u=FC(i,o),d=ej(u)+ej(i.Ae);return uy(u)&&uy(i.Ae)?DC(d):S0(i.serializer,d)})(t,e)}function _L(t,e,n){return t instanceof ld?VC(t,e):t instanceof cd?BC(t,e):n}function FC(t,e){return t instanceof Uh?(function(r){return uy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class zh extends rg{}class ld extends rg{constructor(e){super(),this.elements=e}}function VC(t,e){const n=zC(e);for(const r of t.elements)n.some((i=>Da(i,r)))||n.push(r);return{arrayValue:{values:n}}}class cd extends rg{constructor(e){super(),this.elements=e}}function BC(t,e){let n=zC(e);for(const r of t.elements)n=n.filter((i=>!Da(i,r)));return{arrayValue:{values:n}}}class Uh extends rg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ej(t){return In(t.integerValue||t.doubleValue)}function zC(t){return j0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.field=e,this.transform=n}}function bL(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ld&&i instanceof ld||r instanceof cd&&i instanceof cd?id(r.elements,i.elements,Da):r instanceof Uh&&i instanceof Uh?Da(r.Ae,i.Ae):r instanceof zh&&i instanceof zh})(t.transform,e.transform)}class NL{constructor(e,n){this.version=e,this.transformResults=n}}class zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ag{}function UC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new df(t.key,zn.none()):new uf(t.key,t.data,zn.none());{const n=t.data,r=nr.empty();let i=new Xn(ys.comparator);for(let o of e.fields)if(!i.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),i=i.add(o)}return new sc(t.key,r,new Gr(i.toArray()),zn.none())}}function jL(t,e,n){t instanceof uf?(function(i,o,u){const d=i.value.clone(),f=nj(i.fieldTransforms,o,u.transformResults);d.setAll(f),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof sc?(function(i,o,u){if(!Zm(i.precondition,o))return void o.convertToUnknownDocument(u.version);const d=nj(i.fieldTransforms,o,u.transformResults),f=o.data;f.setAll($C(i)),f.setAll(d),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Ph(t,e,n,r){return t instanceof uf?(function(o,u,d,f){if(!Zm(o.precondition,u))return d;const p=o.value.clone(),y=sj(o.fieldTransforms,f,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof sc?(function(o,u,d,f){if(!Zm(o.precondition,u))return d;const p=sj(o.fieldTransforms,f,u),y=u.data;return y.setAll($C(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,u,d){return Zm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function CL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=FC(r.transform,i||null);o!=null&&(n===null&&(n=nr.empty()),n.set(r.field,o))}return n||null}function tj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&id(r,i,((o,u)=>bL(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uf extends ag{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sc extends ag{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $C(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function nj(t,e,n){const r=new Map;Lt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],u=o.transform,d=e.data.field(o.field);r.set(o.field,_L(u,d,n[i]))}return r}function sj(t,e,n){const r=new Map;for(const i of t){const o=i.transform,u=n.data.field(i.field);r.set(i.field,wL(o,u,e))}return r}class df extends ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HC extends ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&jL(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ph(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ph(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=MC();return this.mutations.forEach((i=>{const o=e.get(i.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=n.has(i.key)?null:d;const f=UC(u,d);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(ut.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),At())}isEqual(e){return this.batchId===e.batchId&&id(this.mutations,e.mutations,((n,r)=>tj(n,r)))&&id(this.baseMutations,e.baseMutations,((n,r)=>tj(n,r)))}}class T0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return gL})();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new T0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SL=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn,Rt;function WC(t){switch(t){case ye.OK:return st(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return st(15467,{code:t})}}function qC(t){if(t===void 0)return Ao("GRPC error has no .code"),ye.UNKNOWN;switch(t){case Vn.OK:return ye.OK;case Vn.CANCELLED:return ye.CANCELLED;case Vn.UNKNOWN:return ye.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return ye.INTERNAL;case Vn.UNAVAILABLE:return ye.UNAVAILABLE;case Vn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Vn.NOT_FOUND:return ye.NOT_FOUND;case Vn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Vn.ABORTED:return ye.ABORTED;case Vn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Vn.DATA_LOSS:return ye.DATA_LOSS;default:return st(39323,{code:t})}}(Rt=Vn||(Vn={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new Il([4294967295,4294967295],0);function rj(t){const e=AL().encode(t),n=new rC;return n.update(e),new Uint8Array(n.digest())}function ij(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Il([n,r],0),new Il([i,o],0)]}class A0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _h(`Invalid padding: ${n}`);if(r<0)throw new _h(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _h(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _h(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Il.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Il.fromNumber(r)));return i.compare(kL)===1&&(i=new Il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=rj(e),[r,i]=ij(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);if(!this.we(u))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new A0(o,i,n);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const n=rj(e),[r,i]=ij(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new og(ut.min(),i,new bn(Tt),ko(),At())}}class hf{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hf(r,n,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class GC{constructor(e,n){this.targetId=e,this.Ce=n}}class KC{constructor(e,n,r=ws.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class aj{constructor(){this.ve=0,this.Fe=oj(),this.Me=ws.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=At(),n=At(),r=At();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:st(38017,{changeType:o})}})),new hf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=oj()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PL{constructor(e){this.Ge=e,this.ze=new Map,this.je=ko(),this.Je=Sm(),this.He=Sm(),this.Ye=new bn(Tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:st(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(hy(o))if(r===0){const u=new et(o.path);this.et(n,u,os.newNoDocument(u,ut.min()))}else Lt(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const d=this.ut(e),f=d?this.ct(d,e,u):1;if(f!==0){this.it(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let u,d;try{u=Vl(r).toUint8Array()}catch(f){if(f instanceof gC)return rd("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new A0(u,i,o)}catch(f){return rd(f instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const d=this.ot(u);if(d){if(o.current&&hy(d.target)){const f=new et(d.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,os.newNoDocument(f,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let r=At();this.He.forEach(((o,u)=>{let d=!0;u.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const i=new og(e,n,this.Ye,this.je,r);return this.je=ko(),this.Je=Sm(),this.He=Sm(),this.Ye=new bn(Tt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new aj,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xn(Tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xn(Tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aj),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sm(){return new bn(et.comparator)}function oj(){return new bn(et.comparator)}const IL={asc:"ASCENDING",desc:"DESCENDING"},RL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LL={and:"AND",or:"OR"};class ML{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function my(t,e){return t.useProto3Json||lf(e)?e:{value:e}}function xp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DL(t,e){return xp(t,e.toTimestamp())}function Zr(t){return Lt(!!t,49232),ut.fromTimestamp((function(n){const r=Fl(n);return new nn(r.seconds,r.nanos)})(t))}function k0(t,e){return py(t,e).canonicalString()}function py(t,e){const n=(function(i){return new Zt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function YC(t){const e=Zt.fromString(t);return Lt(nE(e),10190,{key:e.toString()}),e}function vp(t,e){return k0(t.databaseId,e.path)}function Ih(t,e){const n=YC(e);if(n.get(1)!==t.databaseId.projectId)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new et(XC(n))}function QC(t,e){return k0(t.databaseId,e)}function OL(t){const e=YC(t);return e.length===4?Zt.emptyPath():XC(e)}function gy(t){return new Zt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XC(t){return Lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lj(t,e,n){return{name:vp(t,e),fields:n.value.mapValue.fields}}function FL(t,e){return"found"in e?(function(r,i){Lt(!!i.found,43571),i.found.name,i.found.updateTime;const o=Ih(r,i.found.name),u=Zr(i.found.updateTime),d=i.found.createTime?Zr(i.found.createTime):ut.min(),f=new nr({mapValue:{fields:i.found.fields}});return os.newFoundDocument(o,u,d,f)})(t,e):"missing"in e?(function(r,i){Lt(!!i.missing,3894),Lt(!!i.readTime,22933);const o=Ih(r,i.missing),u=Zr(i.readTime);return os.newNoDocument(o,u)})(t,e):st(7234,{result:e})}function VL(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:st(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(p,y){return p.useProto3Json?(Lt(y===void 0||typeof y=="string",58123),ws.fromBase64String(y||"")):(Lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ws.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const y=p.code===void 0?ye.UNKNOWN:qC(p.code);return new Oe(y,p.message||"")})(u);n=new KC(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ih(t,r.document.name),o=Zr(r.document.updateTime),u=r.document.createTime?Zr(r.document.createTime):ut.min(),d=new nr({mapValue:{fields:r.document.fields}}),f=os.newFoundDocument(i,o,u,d),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Ym(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ih(t,r.document),o=r.readTime?Zr(r.readTime):ut.min(),u=os.newNoDocument(i,o),d=r.removedTargetIds||[];n=new Ym([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ih(t,r.document),o=r.removedTargetIds||[];n=new Ym([],o,i,null)}else{if(!("filter"in e))return st(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,u=new TL(i,o),d=r.targetId;n=new GC(d,u)}}return n}function JC(t,e){let n;if(e instanceof uf)n={update:lj(t,e.key,e.value)};else if(e instanceof df)n={delete:vp(t,e.key)};else if(e instanceof sc)n={update:lj(t,e.key,e.data),updateMask:KL(e.fieldMask)};else{if(!(e instanceof HC))return st(16599,{Vt:e.type});n={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const d=u.transform;if(d instanceof zh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ld)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof cd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Uh)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw st(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:DL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:st(27497)})(t,e.precondition)),n}function BL(t,e){return t&&t.length>0?(Lt(e!==void 0,14353),t.map((n=>(function(i,o){let u=i.updateTime?Zr(i.updateTime):Zr(o);return u.isEqual(ut.min())&&(u=Zr(o)),new NL(u,i.transformResults||[])})(n,e)))):[]}function zL(t,e){return{documents:[QC(t,e.path)]}}function UL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QC(t,i);const o=(function(p){if(p.length!==0)return tE(qi.create(p,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((y=>(function(b){return{field:Uu(b.field),direction:WL(b.dir)}})(y)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=my(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:i}}function $L(t){let e=OL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lt(r===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(g){const b=eE(g);return b instanceof qi&&EC(b)?b.getFilters():[b]})(n.where));let u=[];n.orderBy&&(u=(function(g){return g.map((b=>(function(N){return new Bh($u(N.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(n.orderBy));let d=null;n.limit&&(d=(function(g){let b;return b=typeof g=="object"?g.value:g,lf(b)?null:b})(n.limit));let f=null;n.startAt&&(f=(function(g){const b=!!g.before,E=g.values||[];return new pp(E,b)})(n.startAt));let p=null;return n.endAt&&(p=(function(g){const b=!g.before,E=g.values||[];return new pp(E,b)})(n.endAt)),dL(e,i,u,o,d,"F",f,p)}function HL(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$u(n.unaryFilter.field);return Bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$u(n.unaryFilter.field);return Bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$u(n.unaryFilter.field);return Bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=$u(n.unaryFilter.field);return Bn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Bn.create($u(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return qi.create(n.compositeFilter.filters.map((r=>eE(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(n.compositeFilter.op))})(t):st(30097,{filter:t})}function WL(t){return IL[t]}function qL(t){return RL[t]}function GL(t){return LL[t]}function Uu(t){return{fieldPath:t.canonicalString()}}function $u(t){return ys.fromServerFormat(t.fieldPath)}function tE(t){return t instanceof Bn?(function(n){if(n.op==="=="){if(ZN(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NAN"}};if(KN(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZN(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NOT_NAN"}};if(KN(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(n.field),op:qL(n.op),value:n.value}}})(t):t instanceof qi?(function(n){const r=n.getFilters().map((i=>tE(i)));return r.length===1?r[0]:{compositeFilter:{op:GL(n.op),filters:r}}})(t):st(54877,{filter:t})}function KL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function nE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,i,o=ut.min(),u=ut.min(),d=ws.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new El(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.yt=e}}function YL(t){const e=$L({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.Cn=new XL}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(Ol.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(Ol.min())}updateCollectionGroup(e,n,r){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class XL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xn(Zt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xn(Zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sE=41943040;class Sr{static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(sE,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ud(0)}static cr(){return new ud(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="LruGarbageCollector",JL=1048576;function dj([t,e],[n,r]){const i=Tt(t,n);return i===0?Tt(e,r):i}class eM{constructor(e){this.Ir=e,this.buffer=new Xn(dj),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dj(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(uj,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cd(n)?He(uj,"Ignoring IndexedDB error during garbage collection: ",n):await jd(n)}await this.Vr(3e5)}))}}class nM{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return be.resolve(eg.ce);const r=new eM(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(cj)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cj):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,u,d,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,u=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,d=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(p=Date.now(),Bu()<=St.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${i} in `+(d-u)+`ms
	Removed ${o} targets in `+(f-d)+`ms
	Removed ${g} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function sM(t,e){return new nM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.changes=new Jc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,os.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Ph(r.mutation,i,Gr.empty(),nn.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,At()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=At()){const i=Fc();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let u=wh();return o.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Fc();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,At())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,r,i){let o=ko();const u=kh(),d=(function(){return kh()})();return n.forEach(((f,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof sc)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Ph(y.mutation,p,y.mutation.getFieldMask(),nn.now())):u.set(p.key,Gr.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((p,y)=>u.set(p,y))),n.forEach(((p,y)=>d.set(p,new iM(y,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,n){const r=kh();let i=new bn(((u,d)=>u-d)),o=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((f=>{const p=n.get(f);if(p===null)return;let y=r.get(f)||Gr.empty();y=d.applyToLocalView(p,y),r.set(f,y);const g=(i.get(d.batchId)||At()).add(f);i=i.insert(d.batchId,g)}))})).next((()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,y=f.value,g=MC();y.forEach((b=>{if(!o.has(b)){const E=UC(n.get(b),r.get(b));E!==null&&g.set(b,E),o=o.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,g))}return be.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(u){return et.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):be.resolve(Fc());let d=Dh,f=o;return u.next((p=>be.forEach(p,((y,g)=>(d<g.largestBatchId&&(d=g.largestBatchId),o.get(y)?be.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{f=f.insert(y,b)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,f,p,At()))).next((y=>({batchId:d,changes:LC(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next((r=>{let i=wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let u=wh();return this.indexManager.getCollectionParents(e,o).next((d=>be.forEach(d,(f=>{const p=(function(g,b){return new Ed(b,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((y=>{y.forEach(((g,b)=>{u=u.insert(g,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((u=>{o.forEach(((f,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,os.newInvalidDocument(y)))}));let d=wh();return u.forEach(((f,p)=>{const y=o.get(f);y!==void 0&&Ph(y.mutation,p,Gr.empty(),nn.now()),sg(n,p)&&(d=d.insert(f,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Zr(i.createTime)}})(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:YL(i.bundledQuery),readTime:Zr(i.readTime)}})(n)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.overlays=new bn(et.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fc();return be.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),be.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),be.resolve()}getOverlaysForCollection(e,n,r){const i=Fc(),o=n.length+1,u=new et(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return be.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new bn(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Fc(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Fc(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,y)=>d.set(p,y))),!(d.size()>=i)););return be.resolve(d)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new SL(n,r));let o=this.qr.get(n);o===void 0&&(o=At(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.sessionToken=ws.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Qr=new Xn(as.$r),this.Ur=new Xn(as.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new as(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new as(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new et(new Zt([])),r=new as(n,e),i=new as(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new et(new Zt([])),r=new as(n,e),i=new as(n,e+1);let o=At();return this.Ur.forEachInRange([r,i],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new as(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class as{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return et.comparator(e.key,n.key)||Tt(e.Yr,n.Yr)}static Kr(e,n){return Tt(e.Yr,n.Yr)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xn(as.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new EL(o,n,r,i);this.mutationQueue.push(u);for(const d of i)this.Zr=this.Zr.add(new as(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return be.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?b0:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new as(n,0),i=new as(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(u=>{const d=this.Xr(u.Yr);o.push(d)})),be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xn(Tt);return n.forEach((i=>{const o=new as(i,0),u=new as(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(d=>{r=r.add(d.Yr)}))})),be.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;et.isDocumentKey(o)||(o=o.child(""));const u=new as(new et(o),0);let d=new Xn(Tt);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(d=d.add(f.Yr)),!0)}),u),be.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return be.forEach(n.mutations,(i=>{const o=new as(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new as(n,0),i=this.Zr.firstAfterOrEqual(r);return be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.ri=e,this.docs=(function(){return new bn(et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():os.newInvalidDocument(n))}getEntries(e,n){let r=ko();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():os.newInvalidDocument(i))})),be.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ko();const u=n.path,d=new et(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||$3(U3(y),r)<=0||(i.has(y.key)||sg(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return be.resolve(o)}getAllFromCollectionGroup(e,n,r,i){st(9500)}ii(e,n){return be.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new hM(this)}getSize(e){return be.resolve(this.size)}}class hM extends rM{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.persistence=e,this.si=new Jc((n=>C0(n)),E0),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new P0,this.targetCount=0,this.ai=ud.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ud(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),be.waitFor(o).next((()=>i))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return be.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),be.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((u=>{o.push(i.markPotentiallyOrphaned(e,u))})),be.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return be.resolve(r)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.ui={},this.overlays={},this.ci=new eg(0),this.li=!1,this.li=!0,this.hi=new cM,this.referenceDelegate=e(this),this.Pi=new fM(this),this.indexManager=new QL,this.remoteDocumentCache=(function(i){return new dM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ZL(n),this.Ii=new oM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new uM(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){He("MemoryPersistence","Starting transaction:",e);const i=new mM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return be.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class mM extends W3{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new P0,this.Vi=null}static mi(e){return new I0(e)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),be.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(r=>{const i=et.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,ut.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yp{constructor(e,n){this.persistence=e,this.pi=new Jc((r=>K3(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=sM(this,n)}static mi(e,n){return new yp(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return be.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?be.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,n).next((d=>{d||(r++,o.removeEntry(u,ut.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gm(e.data.value)),n}br(e,n,r){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return be.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=At(),i=At();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new R0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return l4()?8:q3(Bs())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new pM;return this.Ss(e,n,u).next((d=>{if(o.result=d,this.Vs)return this.bs(e,n,u,d.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Bu()<=St.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",zu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(Bu()<=St.DEBUG&&He("QueryEngine","Query:",zu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Bu()<=St.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",zu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(n))):be.resolve())}ys(e,n){if(JN(n))return be.resolve(null);let r=Aa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=gp(n,null,"F"),r=Aa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=At(...o);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(n,d);return this.Cs(n,p,u,f.readTime)?this.ys(e,gp(n,null,"F")):this.vs(e,p,n,f)}))))})))))}ws(e,n,r,i){return JN(n)||i.isEqual(ut.min())?be.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,r,i)?be.resolve(null):(Bu()<=St.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zu(n)),this.vs(e,u,n,z3(i,Dh)).next((d=>d)))}))}Ds(e,n){let r=new Xn(IC(e));return n.forEach(((i,o)=>{sg(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Bu()<=St.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",zu(n)),this.ps.getDocumentsMatchingQuery(e,n,Ol.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="LocalStore",xM=3e8;class vM{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new bn(Tt),this.xs=new Jc((o=>C0(o)),E0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function yM(t,e,n,r){return new vM(t,e,n,r)}async function iE(t,e){const n=vt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let f=At();for(const p of i){u.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of o){d.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function wM(t,e){const n=vt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,p,y){const g=p.batch,b=g.keys();let E=be.resolve();return b.forEach((N=>{E=E.next((()=>y.getEntry(f,N))).next((S=>{const k=p.docVersions.get(N);Lt(k!==null,48541),S.version.compareTo(k)<0&&(g.applyToRemoteDocument(S,p),S.isValidDocument()&&(S.setReadTime(p.commitVersion),y.addEntry(S)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(f,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=At();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function aE(t){const e=vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function _M(t,e){const n=vt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const d=[];e.targetChanges.forEach(((y,g)=>{const b=i.get(g);if(!b)return;d.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(o,y.addedDocuments,g))));let E=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(ws.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),i=i.insert(g,E),(function(S,k,R){return S.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=xM?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(b,E,y)&&d.push(n.Pi.updateTargetData(o,E))}));let f=ko(),p=At();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),d.push(bM(o,u,e.documentUpdates).next((y=>{f=y.ks,p=y.qs}))),!r.isEqual(ut.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next((g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(y)}return be.waitFor(d).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,p))).next((()=>f))})).then((o=>(n.Ms=i,o)))}function bM(t,e,n){let r=At(),i=At();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=ko();return n.forEach(((d,f)=>{const p=o.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(ut.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):He(L0,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{ks:u,qs:i}}))}function NM(t,e){const n=vt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=b0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jM(t,e){const n=vt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,be.resolve(i)):n.Pi.allocateTargetId(r).next((u=>(i=new El(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function xy(t,e,n){const r=vt(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Cd(u))throw u;He(L0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function hj(t,e,n){const r=vt(t);let i=ut.min(),o=At();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,p,y){const g=vt(f),b=g.xs.get(y);return b!==void 0?be.resolve(g.Ms.get(b)):g.Pi.getTargetData(p,y)})(r,u,Aa(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{o=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?i:ut.min(),n?o:At()))).next((d=>(CM(r,fL(e),d),{documents:d,Qs:o})))))}function CM(t,e,n){let r=t.Os.get(e)||ut.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class fj{constructor(){this.activeTargetIds=yL()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EM{constructor(){this.Mo=new fj,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fj,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="ConnectivityMonitor";class pj{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(mj,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(mj,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm=null;function vy(){return Tm===null?Tm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tm++,"0x"+Tm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="RestConnection",TM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const u=vy(),d=this.zo(e,n.toUriEncodedString());He(Ev,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,o);const{host:p}=new URL(d),y=Xl(p);return this.Jo(e,d,f,r,y).then((g=>(He(Ev,`Received RPC '${e}' ${u}: `,g),g)),(g=>{throw rd(Ev,`RPC '${e}' ${u} failed with error: `,g,"url: ",d,"request:",r),g}))}Ho(e,n,r,i,o,u){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=TM[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="WebChannelConnection";class PM extends AM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const u=vy();return new Promise(((d,f)=>{const p=new iC;p.setWithCredentials(!0),p.listenOnce(aC.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case qm.NO_ERROR:const g=p.getResponseJson();He(Ds,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(g)),d(g);break;case qm.TIMEOUT:He(Ds,`RPC '${e}' ${u} timed out`),f(new Oe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case qm.HTTP_ERROR:const b=p.getStatus();if(He(Ds,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const N=E?.error;if(N&&N.status&&N.message){const S=(function(R){const I=R.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(I)>=0?I:ye.UNKNOWN})(N.status);f(new Oe(S,N.message))}else f(new Oe(ye.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new Oe(ye.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{He(Ds,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(i);He(Ds,`RPC '${e}' ${u} sending request:`,i),p.send(n,"POST",y,r,15)}))}T_(e,n,r){const i=vy(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=cC(),d=lC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const y=o.join("");He(Ds,`Creating RPC '${e}' stream ${i}: ${y}`,f);const g=u.createWebChannel(y,f);this.I_(g);let b=!1,E=!1;const N=new kM({Yo:k=>{E?He(Ds,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(He(Ds,`Opening RPC '${e}' stream ${i} transport.`),g.open(),b=!0),He(Ds,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Zo:()=>g.close()}),S=(k,R,I)=>{k.listen(R,(z=>{try{I(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return S(g,yh.EventType.OPEN,(()=>{E||(He(Ds,`RPC '${e}' stream ${i} transport opened.`),N.o_())})),S(g,yh.EventType.CLOSE,(()=>{E||(E=!0,He(Ds,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(g))})),S(g,yh.EventType.ERROR,(k=>{E||(E=!0,rd(Ds,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new Oe(ye.UNAVAILABLE,"The operation could not be completed")))})),S(g,yh.EventType.MESSAGE,(k=>{if(!E){const R=k.data[0];Lt(!!R,16349);const I=R,z=I?.error||I[0]?.error;if(z){He(Ds,`RPC '${e}' stream ${i} received error:`,z);const H=z.status;let G=(function(D){const O=Vn[D];if(O!==void 0)return qC(O)})(H),Q=z.message;G===void 0&&(G=ye.INTERNAL,Q="Unknown error status: "+H+" with message "+z.message),E=!0,N.a_(new Oe(G,Q)),g.close()}else He(Ds,`RPC '${e}' stream ${i} received:`,R),N.u_(R)}})),S(d,oC.STAT_EVENT,(k=>{k.stat===oy.PROXY?He(Ds,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===oy.NOPROXY&&He(Ds,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Sv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){return new ML(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="PersistentStream";class oE{constructor(e,n,r,i,o,u,d,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(Ao(n.toString()),Ao("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Oe(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(gj,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(gj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IM extends oE{constructor(e,n,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VL(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ut.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ut.min():u.readTime?Zr(u.readTime):ut.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=gy(this.serializer),n.addTarget=(function(o,u){let d;const f=u.target;if(d=hy(f)?{documents:zL(o,f)}:{query:UL(o,f).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=ZC(o,u.resumeToken);const p=my(o,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(ut.min())>0){d.readTime=xp(o,u.snapshotVersion.toTimestamp());const p=my(o,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=HL(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=gy(this.serializer),n.removeTarget=e,this.q_(n)}}class RM extends oE{constructor(e,n,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=BL(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>JC(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{}class MM extends LM{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,py(n,r),i,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(ye.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,py(n,r),i,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(ye.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class DM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ao(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="RemoteStore";class OM{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{eu(this)&&(He(Wc,"Restarting streams for network reachability change."),await(async function(f){const p=vt(f);p.Ea.add(4),await ff(p),p.Ra.set("Unknown"),p.Ea.delete(4),await cg(p)})(this))}))})),this.Ra=new DM(r,i)}}async function cg(t){if(eu(t))for(const e of t.da)await e(!0)}async function ff(t){for(const e of t.da)await e(!1)}function lE(t,e){const n=vt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),V0(n)?F0(n):Sd(n).O_()&&O0(n,e))}function D0(t,e){const n=vt(t),r=Sd(n);n.Ia.delete(e),r.O_()&&cE(n,e),n.Ia.size===0&&(r.O_()?r.L_():eu(n)&&n.Ra.set("Unknown"))}function O0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sd(t).Y_(e)}function cE(t,e){t.Va.Ue(e),Sd(t).Z_(e)}function F0(t){t.Va=new PL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sd(t).start(),t.Ra.ua()}function V0(t){return eu(t)&&!Sd(t).x_()&&t.Ia.size>0}function eu(t){return vt(t).Ea.size===0}function uE(t){t.Va=void 0}async function FM(t){t.Ra.set("Online")}async function VM(t){t.Ia.forEach(((e,n)=>{O0(t,e)}))}async function BM(t,e){uE(t),V0(t)?(t.Ra.ha(e),F0(t)):t.Ra.set("Unknown")}async function zM(t,e,n){if(t.Ra.set("Online"),e instanceof KC&&e.state===2&&e.cause)try{await(async function(i,o){const u=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,u),i.Ia.delete(d),i.Va.removeTarget(d))})(t,e)}catch(r){He(Wc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wp(t,r)}else if(e instanceof Ym?t.Va.Ze(e):e instanceof GC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ut.min()))try{const r=await aE(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const d=o.Va.Tt(u);return d.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,p)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(ws.EMPTY_BYTE_STRING,y.snapshotVersion)),cE(o,f);const g=new El(y.target,f,p,y.sequenceNumber);O0(o,g)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(r){He(Wc,"Failed to raise snapshot:",r),await wp(t,r)}}async function wp(t,e,n){if(!Cd(e))throw e;t.Ea.add(1),await ff(t),t.Ra.set("Offline"),n||(n=()=>aE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{He(Wc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await cg(t)}))}function dE(t,e){return e().catch((n=>wp(t,n,e)))}async function ug(t){const e=vt(t),n=zl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:b0;for(;UM(e);)try{const i=await NM(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,$M(e,i)}catch(i){await wp(e,i)}hE(e)&&fE(e)}function UM(t){return eu(t)&&t.Ta.length<10}function $M(t,e){t.Ta.push(e);const n=zl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function hE(t){return eu(t)&&!zl(t).x_()&&t.Ta.length>0}function fE(t){zl(t).start()}async function HM(t){zl(t).ra()}async function WM(t){const e=zl(t);for(const n of t.Ta)e.ea(n.mutations)}async function qM(t,e,n){const r=t.Ta.shift(),i=T0.from(r,e,n);await dE(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ug(t)}async function GM(t,e){e&&zl(t).X_&&await(async function(r,i){if((function(u){return WC(u)&&u!==ye.ABORTED})(i.code)){const o=r.Ta.shift();zl(r).B_(),await dE(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await ug(r)}})(t,e),hE(t)&&fE(t)}async function xj(t,e){const n=vt(t);n.asyncQueue.verifyOperationInProgress(),He(Wc,"RemoteStore received new credentials");const r=eu(n);n.Ea.add(3),await ff(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await cg(n)}async function KM(t,e){const n=vt(t);e?(n.Ea.delete(2),await cg(n)):e||(n.Ea.add(2),await ff(n),n.Ra.set("Unknown"))}function Sd(t){return t.ma||(t.ma=(function(n,r,i){const o=vt(n);return o.sa(),new IM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:FM.bind(null,t),t_:VM.bind(null,t),r_:BM.bind(null,t),H_:zM.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),V0(t)?F0(t):t.Ra.set("Unknown")):(await t.ma.stop(),uE(t))}))),t.ma}function zl(t){return t.fa||(t.fa=(function(n,r,i){const o=vt(n);return o.sa(),new RM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:HM.bind(null,t),r_:GM.bind(null,t),ta:WM.bind(null,t),na:qM.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await ug(t)):(await t.fa.stop(),t.Ta.length>0&&(He(Wc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const u=Date.now()+r,d=new B0(e,n,u,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z0(t,e){if(Ao("AsyncQueue",`${e}: ${t}`),Cd(t))return new Oe(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{static emptySet(e){return new Yu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=wh(),this.sortedSet=new bn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.ga=new bn(et.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):st(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class dd{constructor(e,n,r,i,o,u,d,f,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,o){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new dd(e,n,Yu.emptySet(n),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class YM{constructor(){this.queries=yj(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=vt(n),o=i.queries;i.queries=yj(),o.forEach(((u,d)=>{for(const f of d.Sa)f.onError(r)}))})(this,new Oe(ye.ABORTED,"Firestore shutting down"))}}function yj(){return new Jc((t=>PC(t)),cf)}async function U0(t,e){const n=vt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new ZM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const d=z0(u,`Initialization of query '${zu(e.query)}' failed`);return void e.onError(d)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&H0(n)}async function $0(t,e){const n=vt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QM(t,e){const n=vt(t);let r=!1;for(const i of e){const o=i.query,u=n.queries.get(o);if(u){for(const d of u.Sa)d.Fa(i)&&(r=!0);u.wa=i}}r&&H0(n)}function XM(t,e,n){const r=vt(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function H0(t){t.Ca.forEach((e=>{e.next()}))}var yy,wj;(wj=yy||(yy={})).Ma="default",wj.Cache="cache";class W0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.key=e}}class pE{constructor(e){this.key=e}}class JM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=At(),this.mutatedKeys=At(),this.eu=IC(e),this.tu=new Yu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new vj,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,g)=>{const b=i.get(y),E=sg(this.query,g)?g:null,N=!!b&&this.mutatedKeys.has(b.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;b&&E?b.data.isEqual(E.data)?N!==S&&(r.track({type:3,doc:E}),k=!0):this.su(b,E)||(r.track({type:2,doc:E}),k=!0,(f&&this.eu(E,f)>0||p&&this.eu(E,p)<0)&&(d=!0)):!b&&E?(r.track({type:0,doc:E}),k=!0):b&&!E&&(r.track({type:1,doc:b}),k=!0,(f||p)&&(d=!0)),k&&(E?(u=u.add(E),o=S?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:u,iu:r,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,g)=>(function(E,N){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:k})}};return S(E)-S(N)})(y.type,g.type)||this.eu(y.doc,g.doc))),this.ou(r),i=i??!1;const d=n&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,p=f!==this.Za;return this.Za=f,u.length!==0||p?{snapshot:new dd(this.query,e.tu,o,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vj,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=At(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new pE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new mE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=At();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const q0="SyncEngine";class eD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tD{constructor(e){this.key=e,this.hu=!1}}class nD{constructor(e,n,r,i,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Jc((d=>PC(d)),cf),this.Iu=new Map,this.Eu=new Set,this.du=new bn(et.comparator),this.Au=new Map,this.Ru=new P0,this.Vu={},this.mu=new Map,this.fu=ud.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sD(t,e,n=!0){const r=_E(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await gE(r,e,n,!0),i}async function rD(t,e){const n=_E(t);await gE(n,e,!0,!1)}async function gE(t,e,n,r){const i=await jM(t.localStore,Aa(e)),o=i.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await iD(t,e,o,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&lE(t.remoteStore,i),d}async function iD(t,e,n,r,i){t.pu=(g,b,E)=>(async function(S,k,R,I){let z=k.view.ru(R);z.Cs&&(z=await hj(S.localStore,k.query,!1).then((({documents:F})=>k.view.ru(F,z))));const H=I&&I.targetChanges.get(k.targetId),G=I&&I.targetMismatches.get(k.targetId)!=null,Q=k.view.applyChanges(z,S.isPrimaryClient,H,G);return bj(S,k.targetId,Q.au),Q.snapshot})(t,g,b,E);const o=await hj(t.localStore,e,!0),u=new JM(e,o.Qs),d=u.ru(o.documents),f=hf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=u.applyChanges(d,t.isPrimaryClient,f);bj(t,n,p.au);const y=new eD(e,n,u);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function aD(t,e,n){const r=vt(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((u=>!cf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xy(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&D0(r.remoteStore,i.targetId),wy(r,i.targetId)})).catch(jd)):(wy(r,i.targetId),await xy(r.localStore,i.targetId,!0))}async function oD(t,e){const n=vt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),D0(n.remoteStore,r.targetId))}async function lD(t,e,n){const r=pD(t);try{const i=await(function(u,d){const f=vt(u),p=nn.now(),y=d.reduce(((E,N)=>E.add(N.key)),At());let g,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let N=ko(),S=At();return f.Ns.getEntries(E,y).next((k=>{N=k,N.forEach(((R,I)=>{I.isValidDocument()||(S=S.add(R))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,N))).next((k=>{g=k;const R=[];for(const I of d){const z=CL(I,g.get(I.key).overlayedDocument);z!=null&&R.push(new sc(I.key,z,NC(z.value.mapValue),zn.exists(!0)))}return f.mutationQueue.addMutationBatch(E,p,R,d)})).next((k=>{b=k;const R=k.applyToLocalDocumentSet(g,S);return f.documentOverlayCache.saveOverlays(E,k.batchId,R)}))})).then((()=>({batchId:b.batchId,changes:LC(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,d,f){let p=u.Vu[u.currentUser.toKey()];p||(p=new bn(Tt)),p=p.insert(d,f),u.Vu[u.currentUser.toKey()]=p})(r,i.batchId,n),await mf(r,i.changes),await ug(r.remoteStore)}catch(i){const o=z0(i,"Failed to persist write");n.reject(o)}}async function xE(t,e){const n=vt(t);try{const r=await _M(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const u=n.Au.get(o);u&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Lt(u.hu,14607):i.removedDocuments.size>0&&(Lt(u.hu,42227),u.hu=!1))})),await mf(n,r,e)}catch(r){await jd(r)}}function _j(t,e,n){const r=vt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(u,d){const f=vt(u);f.onlineState=d;let p=!1;f.queries.forEach(((y,g)=>{for(const b of g.Sa)b.va(d)&&(p=!0)})),p&&H0(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cD(t,e,n){const r=vt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let u=new bn(et.comparator);u=u.insert(o,os.newNoDocument(o,ut.min()));const d=At().add(o),f=new og(ut.min(),new Map,new bn(Tt),u,d);await xE(r,f),r.du=r.du.remove(o),r.Au.delete(e),G0(r)}else await xy(r.localStore,e,!1).then((()=>wy(r,e,n))).catch(jd)}async function uD(t,e){const n=vt(t),r=e.batch.batchId;try{const i=await wM(n.localStore,e);yE(n,r,null),vE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mf(n,i)}catch(i){await jd(i)}}async function dD(t,e,n){const r=vt(t);try{const i=await(function(u,d){const f=vt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return f.mutationQueue.lookupMutationBatch(p,d).next((g=>(Lt(g!==null,37113),y=g.keys(),f.mutationQueue.removeMutationBatch(p,g)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>f.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);yE(r,e,n),vE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mf(r,i)}catch(i){await jd(i)}}function vE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function yE(t,e,n){const r=vt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function wy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||wE(t,r)}))}function wE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(D0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),G0(t))}function bj(t,e,n){for(const r of n)r instanceof mE?(t.Ru.addReference(r.key,e),hD(t,r)):r instanceof pE?(He(q0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||wE(t,r.key)):st(19791,{wu:r})}function hD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(He(q0,"New document in limbo: "+n),t.Eu.add(r),G0(t))}function G0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new et(Zt.fromString(e)),r=t.fu.next();t.Au.set(r,new tD(n)),t.du=t.du.insert(n,r),lE(t.remoteStore,new El(Aa(ng(n.path)),r,"TargetPurposeLimboResolution",eg.ce))}}async function mf(t,e,n){const r=vt(t),i=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,f)=>{u.push(r.pu(f,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const y=p?!p.fromCache:n?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(p){i.push(p);const y=R0.As(f.targetId,p);o.push(y)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(f,p){const y=vt(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>be.forEach(p,(b=>be.forEach(b.Es,(E=>y.persistence.referenceDelegate.addReference(g,b.targetId,E))).next((()=>be.forEach(b.ds,(E=>y.persistence.referenceDelegate.removeReference(g,b.targetId,E)))))))))}catch(g){if(!Cd(g))throw g;He(L0,"Failed to update sequence numbers: "+g)}for(const g of p){const b=g.targetId;if(!g.fromCache){const E=y.Ms.get(b),N=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(N);y.Ms=y.Ms.insert(b,S)}}})(r.localStore,o))}async function fD(t,e){const n=vt(t);if(!n.currentUser.isEqual(e)){He(q0,"User change. New user:",e.toKey());const r=await iE(n.localStore,e);n.currentUser=e,(function(o,u){o.mu.forEach((d=>{d.forEach((f=>{f.reject(new Oe(ye.CANCELLED,u))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mf(n,r.Ls)}}function mD(t,e){const n=vt(t),r=n.Au.get(e);if(r&&r.hu)return At().add(r.key);{let i=At();const o=n.Iu.get(e);if(!o)return i;for(const u of o){const d=n.Tu.get(u);i=i.unionWith(d.view.nu)}return i}}function _E(t){const e=vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cD.bind(null,e),e.Pu.H_=QM.bind(null,e.eventManager),e.Pu.yu=XM.bind(null,e.eventManager),e}function pD(t){const e=vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dD.bind(null,e),e}class _p{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return yM(this.persistence,new gM,e.initialUser,this.serializer)}Cu(e){return new rE(I0.mi,this.serializer)}Du(e){return new EM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_p.provider={build:()=>new _p};class gD extends _p{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Lt(this.persistence.referenceDelegate instanceof yp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new rE((r=>yp.mi(r,n)),this.serializer)}}class _y{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_j(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fD.bind(null,this.syncEngine),await KM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YM})()}createDatastore(e){const n=lg(e.databaseInfo.databaseId),r=(function(o){return new PM(o)})(e.databaseInfo);return(function(o,u,d,f){return new MM(o,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,u,d){return new OM(r,i,o,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>_j(this.syncEngine,n,0)),(function(){return pj.v()?new pj:new SM})())}createSyncEngine(e,n){return(function(i,o,u,d,f,p,y){const g=new nD(i,o,u,d,f,p);return y&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=vt(n);He(Wc,"RemoteStore shutting down."),r.Ea.add(5),await ff(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_y.provider={build:()=>new _y};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ao("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Oe(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const u=vt(i),d={documents:o.map((g=>vp(u.serializer,g)))},f=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Zt.emptyPath(),d,o.length),p=new Map;f.forEach((g=>{const b=FL(u.serializer,g);p.set(b.key.toString(),b)}));const y=[];return o.forEach((g=>{const b=p.get(g.toString());Lt(!!b,55234,{key:g}),y.push(b)})),y})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new df(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=et.fromPath(r);this.mutations.push(new HC(i,this.precondition(i)))})),await(async function(r,i){const o=vt(r),u={writes:i.map((d=>JC(o.serializer,d)))};await o.Go("Commit",o.serializer.databaseId,Zt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw st(50498,{Gu:e.constructor.name});n=ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Oe(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ut.min())?zn.exists(!1):zn.updateTime(n):zn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ut.min()))throw new Oe(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(n)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new M0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new xD(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!lf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!WC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="FirestoreClient";class yD{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Os.UNAUTHENTICATED,this.clientId=_0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{He(Ul,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(He(Ul,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=z0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Tv(t,e){t.asyncQueue.verifyOperationInProgress(),He(Ul,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await iE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Nj(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wD(t);He(Ul,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>xj(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>xj(e.remoteStore,i))),t._onlineComponents=e}async function wD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){He(Ul,"Using user provided OfflineComponentProvider");try{await Tv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;rd("Error using user provided cache. Falling back to memory cache: "+n),await Tv(t,new _p)}}else He(Ul,"Using default OfflineComponentProvider"),await Tv(t,new gD(void 0));return t._offlineComponents}async function Z0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(He(Ul,"Using user provided OnlineComponentProvider"),await Nj(t,t._uninitializedComponentsProvider._online)):(He(Ul,"Using default OnlineComponentProvider"),await Nj(t,new _y))),t._onlineComponents}function _D(t){return Z0(t).then((e=>e.syncEngine))}function bD(t){return Z0(t).then((e=>e.datastore))}async function bp(t){const e=await Z0(t),n=e.eventManager;return n.onListen=sD.bind(null,e.syncEngine),n.onUnlisten=aD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oD.bind(null,e.syncEngine),n}function ND(t,e,n={}){const r=new Ta;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,f,p){const y=new K0({next:b=>{y.Nu(),u.enqueueAndForget((()=>$0(o,g)));const E=b.docs.has(d);!E&&b.fromCache?p.reject(new Oe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&b.fromCache&&f&&f.source==="server"?p.reject(new Oe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),g=new W0(ng(d.path),y,{includeMetadataChanges:!0,qa:!0});return U0(o,g)})(await bp(t),t.asyncQueue,e,n,r))),r.promise}function jD(t,e,n={}){const r=new Ta;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,f,p){const y=new K0({next:b=>{y.Nu(),u.enqueueAndForget((()=>$0(o,g))),b.fromCache&&f.source==="server"?p.reject(new Oe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),g=new W0(d,y,{includeMetadataChanges:!0,qa:!0});return U0(o,g)})(await bp(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firestore.googleapis.com",Cj=!0;class Ej{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NE,this.ssl=Cj}else this.host=e.host,this.ssl=e.ssl??Cj;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JL)throw new Oe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Oe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Oe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Oe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ej({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ej(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new A3;switch(r.type){case"firstParty":return new R3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=jj.get(n);r&&(He("ComponentProvider","Removing Datastore"),jj.delete(n),r.terminate())})(this),Promise.resolve()}}function CD(t,e,n,r={}){t=Vs(t,dg);const i=Xl(e),o=t._getSettings(),u={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;i&&(r0(`https://${d}`),i0("Firestore",!0)),o.host!==NE&&o.host!==d&&rd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:d,ssl:i,emulatorOptions:r};if(!Eo(f,u)&&(t._setSettings(f),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=Os.MOCK_USER;else{p=s2(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Oe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Os(g)}t._authCredentials=new k3(new dC(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(of(n,an._jsonSchema))return new an(e,r||null,new et(Zt.fromString(n.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Un("string",an._jsonSchemaVersion),referencePath:Un("string")};class ka extends Gi{constructor(e,n,r){super(e,n,ng(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new et(e))}withConverter(e){return new ka(this.firestore,e,this._path)}}function lt(t,e,...n){if(t=Bt(t),hC("collection","path",e),t instanceof dg){const r=Zt.fromString(e,...n);return VN(r),new ka(t,null,r)}{if(!(t instanceof an||t instanceof ka))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Zt.fromString(e,...n));return VN(r),new ka(t.firestore,null,r)}}function ht(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=_0.newId()),hC("doc","path",e),t instanceof dg){const r=Zt.fromString(e,...n);return FN(r),new an(t,null,new et(r))}{if(!(t instanceof an||t instanceof ka))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Zt.fromString(e,...n));return FN(r),new an(t.firestore,t instanceof ka?t.converter:null,new et(r))}}function ED(t,e){return t=Bt(t),e=Bt(e),(t instanceof an||t instanceof ka)&&(e instanceof an||e instanceof ka)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function SD(t,e){return t=Bt(t),e=Bt(e),t instanceof Gi&&e instanceof Gi&&t.firestore===e.firestore&&cf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="AsyncQueue";class Tj{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M0(this,"async_queue_retry"),this._c=()=>{const r=Sv();r&&He(Sj,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cd(e))throw e;He(Sj,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ao("INTERNAL UNHANDLED ERROR: ",Aj(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=B0.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&st(47125,{Pc:Aj(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Aj(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Ki extends dg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Tj,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tj(e),this._firestoreClient=void 0,await e}}}function TD(t,e){const n=typeof t=="object"?t:l0(),r=typeof t=="string"?t:fp,i=Gp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=e2("firestore");o&&CD(i,...o)}return i}function Td(t){if(t._terminated)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AD(t),t._firestoreClient}function AD(t){const e=t._freezeSettings(),n=(function(i,o,u,d){return new Q3(i,o,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bE(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(ws.fromBase64String(e))}catch(n){throw new Oe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hr(ws.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(of(e,Hr._jsonSchema))return Hr.fromBase64String(e.bytes)}}Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:Un("string",Hr._jsonSchemaVersion),bytes:Un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Oe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pa._jsonSchemaVersion}}static fromJSON(e){if(of(e,Pa._jsonSchema))return new Pa(e.latitude,e.longitude)}}Pa._jsonSchemaVersion="firestore/geoPoint/1.0",Pa._jsonSchema={type:Un("string",Pa._jsonSchemaVersion),latitude:Un("number"),longitude:Un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ia._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(of(e,Ia._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ia(e.vectorValues);throw new Oe(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ia._jsonSchemaVersion="firestore/vectorValue/1.0",Ia._jsonSchema={type:Un("string",Ia._jsonSchemaVersion),vectorValues:Un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^__.*__$/;class PD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sc(e,this.data,this.fieldMask,n,this.fieldTransforms):new uf(e,this.data,n,this.fieldTransforms)}}class jE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:t})}}class hg{constructor(e,n,r,i,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Np(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CE(this.Ac)&&kD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ID{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lg(e)}Cc(e,n,r,i=!1){return new hg({Ac:e,methodName:n,Dc:r,path:ys.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kd(t){const e=t._freezeSettings(),n=lg(t._databaseId);return new ID(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fg(t,e,n,r,i,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);nw("Data must be an object, but it was:",u,r);const d=SE(r,u);let f,p;if(o.merge)f=new Gr(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const g of o.mergeFields){const b=by(e,g,n);if(!u.contains(b))throw new Oe(ye.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);AE(y,b)||y.push(b)}f=new Gr(y),p=u.fieldTransforms.filter((g=>f.covers(g.field)))}else f=null,p=u.fieldTransforms;return new PD(new nr(d),f,p)}class mg extends tu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mg}}function EE(t,e,n){return new hg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Y0 extends tu{_toFieldTransform(e){return new ig(e.path,new zh)}isEqual(e){return e instanceof Y0}}class Q0 extends tu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=EE(this,e,!0),r=this.vc.map((o=>nu(o,n))),i=new ld(r);return new ig(e.path,i)}isEqual(e){return e instanceof Q0&&Eo(this.vc,e.vc)}}class X0 extends tu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=EE(this,e,!0),r=this.vc.map((o=>nu(o,n))),i=new cd(r);return new ig(e.path,i)}isEqual(e){return e instanceof X0&&Eo(this.vc,e.vc)}}class J0 extends tu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Uh(e.serializer,OC(e.serializer,this.Fc));return new ig(e.path,n)}isEqual(e){return e instanceof J0&&this.Fc===e.Fc}}function ew(t,e,n,r){const i=t.Cc(1,e,n);nw("Data must be an object, but it was:",i,r);const o=[],u=nr.empty();nc(r,((f,p)=>{const y=sw(e,f,n);p=Bt(p);const g=i.yc(y);if(p instanceof mg)o.push(y);else{const b=nu(p,g);b!=null&&(o.push(y),u.set(y,b))}}));const d=new Gr(o);return new jE(u,d,i.fieldTransforms)}function tw(t,e,n,r,i,o){const u=t.Cc(1,e,n),d=[by(e,r,n)],f=[i];if(o.length%2!=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)d.push(by(e,o[b])),f.push(o[b+1]);const p=[],y=nr.empty();for(let b=d.length-1;b>=0;--b)if(!AE(p,d[b])){const E=d[b];let N=f[b];N=Bt(N);const S=u.yc(E);if(N instanceof mg)p.push(E);else{const k=nu(N,S);k!=null&&(p.push(E),y.set(E,k))}}const g=new Gr(p);return new jE(y,g,u.fieldTransforms)}function RD(t,e,n,r=!1){return nu(n,t.Cc(r?4:3,e))}function nu(t,e){if(TE(t=Bt(t)))return nw("Unsupported field value:",e,t),SE(t,e);if(t instanceof tu)return(function(r,i){if(!CE(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let u=0;for(const d of r){let f=nu(d,i.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=nn.fromDate(r);return{timestampValue:xp(i.serializer,o)}}if(r instanceof nn){const o=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xp(i.serializer,o)}}if(r instanceof Pa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hr)return{bytesValue:ZC(i.serializer,r._byteString)};if(r instanceof an){const o=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:k0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ia)return(function(u,d){return{mapValue:{fields:{[_C]:{stringValue:bC},[mp]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return S0(d.serializer,p)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Jp(r)}`)})(t,e)}function SE(t,e){const n={};return pC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nc(t,((r,i)=>{const o=nu(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function TE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nn||t instanceof Pa||t instanceof Hr||t instanceof an||t instanceof tu||t instanceof Ia)}function nw(t,e,n){if(!TE(n)||!fC(n)){const r=Jp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function by(t,e,n){if((e=Bt(e))instanceof Ad)return e._internalPath;if(typeof e=="string")return sw(t,e);throw Np("Field path arguments must be of type string or ",t,!1,void 0,n)}const LD=new RegExp("[~\\*/\\[\\]]");function sw(t,e,n){if(e.search(LD)>=0)throw Np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ad(...e.split("."))._internalPath}catch{throw Np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Np(t,e,n,r,i){const o=r&&!r.isEmpty(),u=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new Oe(ye.INVALID_ARGUMENT,d+t+f)}function AE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MD extends jp{data(){return super.data()}}function pg(t,e){return typeof e=="string"?sw(t,e):e instanceof Ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Oe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rw{}class iw extends rw{}function Wt(t,e,...n){let r=[];e instanceof rw&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((f=>f instanceof aw)).length,d=o.filter((f=>f instanceof gg)).length;if(u>1||u>0&&d>0)throw new Oe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class gg extends iw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gg(e,n,r)}_apply(e){const n=this._parse(e);return PE(e._query,n),new Gi(e.firestore,e.converter,fy(e._query,n))}_parse(e){const n=kd(e.firestore);return(function(o,u,d,f,p,y,g){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Ij(g,y);const N=[];for(const S of g)N.push(Pj(f,o,S));b={arrayValue:{values:N}}}else b=Pj(f,o,g)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Ij(g,y),b=RD(d,u,g,y==="in"||y==="not-in");return Bn.create(p,y,b)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yn(t,e,n){const r=e,i=pg("where",t);return gg._create(i,r,n)}class aw extends rw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new aw(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:qi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let u=i;const d=o.getFlattenedFilters();for(const f of d)PE(u,f),u=fy(u,f)})(e._query,n),new Gi(e.firestore,e.converter,fy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ow extends iw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ow(e,n)}_apply(e){const n=(function(i,o,u){if(i.startAt!==null)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bh(o,u)})(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,(function(i,o){const u=i.explicitOrderBy.concat([o]);return new Ed(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function _s(t,e="asc"){const n=e,r=pg("orderBy",t);return ow._create(r,n)}class lw extends iw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lw(e,n,r)}_apply(e){return new Gi(e.firestore,e.converter,gp(e._query,this._limit,this._limitType))}}function Pd(t){return B3("limit",t),lw._create("limit",t,"F")}function Pj(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(e)&&n.indexOf("/")!==-1)throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Zt.fromString(n));if(!et.isDocumentKey(r))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return GN(t,new et(r))}if(n instanceof an)return GN(t,n._key);throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jp(n)}.`)}function Ij(t,e){if(!Array.isArray(t)||t.length===0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PE(t,e){const n=(function(i,o){for(const u of i)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Oe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IE{convertValue(e,n="none"){switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return nc(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[mp].arrayValue?.values?.map((r=>In(r.doubleValue)));return new Ia(n)}convertGeoPoint(e){return new Pa(In(e.latitude),In(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const n=Fl(e);return new nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Zt.fromString(e);Lt(nE(r),9688,{name:e});const i=new Fh(r.get(1),r.get(3)),o=new et(r.popFirst(5));return i.isEqual(n)||Ao(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class DD extends IE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}class Hu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rl extends jp{constructor(e,n,r,i,o,u){super(e,n,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Rl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rl._jsonSchema={type:Un("string",Rl._jsonSchemaVersion),bundleSource:Un("string","DocumentSnapshot"),bundleName:Un("string"),bundle:Un("string")};class Qm extends Rl{data(e={}){return super.data(e)}}class Vc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Qm(this._firestore,this._userDataWriter,r.key,r,new Hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((d=>{const f=new Qm(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Hu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const f=new Qm(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Hu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:OD(d.type),doc:f,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){t=Vs(t,an);const e=Vs(t.firestore,Ki);return ND(Td(e),t._key).then((n=>RE(e,t,n)))}Vc._jsonSchemaVersion="firestore/querySnapshot/1.0",Vc._jsonSchema={type:Un("string",Vc._jsonSchemaVersion),bundleSource:Un("string","QuerySnapshot"),bundleName:Un("string"),bundle:Un("string")};class yg extends IE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function bs(t){t=Vs(t,Gi);const e=Vs(t.firestore,Ki),n=Td(e),r=new yg(e);return kE(t._query),jD(n,t._query).then((i=>new Vc(e,r,t,i)))}function $h(t,e,n){t=Vs(t,an);const r=Vs(t.firestore,Ki),i=xg(t.converter,e,n);return pf(r,[fg(kd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zn.none())])}function un(t,e,n,...r){t=Vs(t,an);const i=Vs(t.firestore,Ki),o=kd(i);let u;return u=typeof(e=Bt(e))=="string"||e instanceof Ad?tw(o,"updateDoc",t._key,e,n,r):ew(o,"updateDoc",t._key,e),pf(i,[u.toMutation(t._key,zn.exists(!0))])}function Po(t){return pf(Vs(t.firestore,Ki),[new df(t._key,zn.none())])}function Ns(t,e){const n=Vs(t.firestore,Ki),r=ht(t),i=xg(t.converter,e);return pf(n,[fg(kd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then((()=>r))}function Yr(t,...e){t=Bt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||kj(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(kj(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let o,u,d;if(t instanceof an)u=Vs(t.firestore,Ki),d=ng(t._key.path),o={next:f=>{e[r]&&e[r](RE(u,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Vs(t,Gi);u=Vs(f.firestore,Ki),d=f._query;const p=new yg(u);o={next:y=>{e[r]&&e[r](new Vc(u,p,f,y))},error:e[r+1],complete:e[r+2]},kE(t._query)}return(function(p,y,g,b){const E=new K0(b),N=new W0(y,E,g);return p.asyncQueue.enqueueAndForget((async()=>U0(await bp(p),N))),()=>{E.Nu(),p.asyncQueue.enqueueAndForget((async()=>$0(await bp(p),N)))}})(Td(u),d,i,o)}function pf(t,e){return(function(r,i){const o=new Ta;return r.asyncQueue.enqueueAndForget((async()=>lD(await _D(r),i,o))),o.promise})(Td(t),e)}function RE(t,e,n){const r=n.docs.get(e._key),i=new yg(t);return new Rl(t,i,e._key,r,new Hu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kd(e)}set(e,n,r){this._verifyNotCommitted();const i=Sl(e,this._firestore),o=xg(i.converter,n,r),u=fg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(u.toMutation(i._key,zn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Sl(e,this._firestore);let u;return u=typeof(n=Bt(n))=="string"||n instanceof Ad?tw(this._dataReader,"WriteBatch.update",o._key,n,r,i):ew(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Sl(e,this._firestore);return this._mutations=this._mutations.concat(new df(n._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sl(t,e){if((t=Bt(t)).firestore!==e)throw new Oe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=kd(e)}get(e){const n=Sl(e,this._firestore),r=new DD(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return st(24041);const o=i[0];if(o.isFoundDocument())return new jp(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new jp(this._firestore,r,n._key,null,n.converter);throw st(18433,{doc:o})}))}set(e,n,r){const i=Sl(e,this._firestore),o=xg(i.converter,n,r),u=fg(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,u),this}update(e,n,r,...i){const o=Sl(e,this._firestore);let u;return u=typeof(n=Bt(n))=="string"||n instanceof Ad?tw(this._dataReader,"Transaction.update",o._key,n,r,i):ew(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,u),this}delete(e){const n=Sl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD extends BD{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Sl(e,this._firestore),r=new yg(this._firestore);return super.get(e).then((i=>new Rl(this._firestore,r,n._key,i._document,new Hu(!1,!1),n.converter)))}}function Rj(t,e,n){t=Vs(t,Ki);const r={...FD,...n};return(function(o){if(o.maxAttempts<1)throw new Oe(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,u,d){const f=new Ta;return o.asyncQueue.enqueueAndForget((async()=>{const p=await bD(o);new vD(o.asyncQueue,p,d,u,f).ju()})),f.promise})(Td(t),(i=>e(new zD(t,i))),r)}function xn(){return new Y0("serverTimestamp")}function Qu(...t){return new Q0("arrayUnion",t)}function bh(...t){return new X0("arrayRemove",t)}function jl(t){return new J0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){return Td(t=Vs(t,Ki)),new VD(t,(e=>pf(t,e)))}(function(e,n=!0){(function(i){Nd=i})(Xc),Uc(new Ml("firestore",((r,{instanceIdentifier:i,options:o})=>{const u=r.getProvider("app").getImmediate(),d=new Ki(new P3(r.getProvider("auth-internal")),new L3(u,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Oe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fh(p.options.projectId,y)})(u,i),u);return o={useFetchStreams:n,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),Ea(LN,MN,e),Ea(LN,MN,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebasestorage.googleapis.com",ME="storageBucket",UD=120*1e3,$D=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn extends Va{constructor(e,n,r=0){super(Av(e),`Firebase Storage: ${n} (${Av(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Av(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Sn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Sn||(Sn={}));function Av(t){return"storage/"+t}function cw(){const t="An unknown error occurred, please check the error payload for server response.";return new Tn(Sn.UNKNOWN,t)}function HD(t){return new Tn(Sn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function WD(t){return new Tn(Sn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tn(Sn.UNAUTHENTICATED,t)}function GD(){return new Tn(Sn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KD(t){return new Tn(Sn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ZD(){return new Tn(Sn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YD(){return new Tn(Sn.CANCELED,"User canceled the upload/download.")}function QD(t){return new Tn(Sn.INVALID_URL,"Invalid URL '"+t+"'.")}function XD(t){return new Tn(Sn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function JD(){return new Tn(Sn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ME+"' property when initializing the app?")}function eO(){return new Tn(Sn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tO(){return new Tn(Sn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function nO(t){return new Tn(Sn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ny(t){return new Tn(Sn.INVALID_ARGUMENT,t)}function DE(){return new Tn(Sn.APP_DELETED,"The Firebase app was deleted.")}function sO(t){return new Tn(Sn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rh(t,e){return new Tn(Sn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ph(t){throw new Tn(Sn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Kr.makeFromUrl(e,n)}catch{return new Kr(e,"")}if(r.path==="")return r;throw XD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+i+u,"i"),f={bucket:1,path:3};function p(H){H.path_=decodeURIComponent(H.path)}const y="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${y}/b/${i}/o${b}`,"i"),N={bucket:1,path:3},S=n===LE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",R=new RegExp(`^https?://${S}/${i}/${k}`,"i"),z=[{regex:d,indices:f,postModify:o},{regex:E,indices:N,postModify:p},{regex:R,indices:{bucket:1,path:2},postModify:p}];for(let H=0;H<z.length;H++){const G=z[H],Q=G.regex.exec(e);if(Q){const F=Q[G.indices.bucket];let D=Q[G.indices.path];D||(D=""),r=new Kr(F,D),G.postModify(r);break}}if(r==null)throw QD(e);return r}}class rO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t,e,n){let r=1,i=null,o=null,u=!1,d=0;function f(){return d===2}let p=!1;function y(...k){p||(p=!0,e.apply(null,k))}function g(k){i=setTimeout(()=>{i=null,t(E,f())},k)}function b(){o&&clearTimeout(o)}function E(k,...R){if(p){b();return}if(k){b(),y.call(null,k,...R);return}if(f()||u){b(),y.call(null,k,...R);return}r<64&&(r*=2);let z;d===1?(d=2,z=0):z=(r+Math.random())*1e3,g(z)}let N=!1;function S(k){N||(N=!0,b(),!p&&(i!==null?(k||(d=2),clearTimeout(i),g(0)):k||(d=1)))}return g(0),o=setTimeout(()=>{u=!0,S(!0)},n),S}function aO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return t!==void 0}function lO(t){return typeof t=="object"&&!Array.isArray(t)}function uw(t){return typeof t=="string"||t instanceof String}function Mj(t){return dw()&&t instanceof Blob}function dw(){return typeof Blob<"u"}function Dj(t,e,n,r){if(r<e)throw Ny(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ny(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function OE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Bc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bc||(Bc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,r,i,o,u,d,f,p,y,g,b=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=g,this.retry=b,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,S)=>{this.resolve_=N,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Am(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{const f=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===Bc.NO_ERROR,f=o.getStatus();if(!d||cO(f,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Bc.ABORT;r(!1,new Am(!1,null,y));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new Am(p,o))})},n=(r,i)=>{const o=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());oO(f)?o(f):o()}catch(f){u(f)}else if(d!==null){const f=cw();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(i.canceled){const f=this.appDelete_?DE():YD();u(f)}else{const f=ZD();u(f)}};this.canceled_?n(!1,new Am(!1,null,!0)):this.backoffId_=iO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Am{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function dO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function hO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function pO(t,e,n,r,i,o,u=!0,d=!1){const f=OE(t.urlParams),p=t.url+f,y=Object.assign({},t.headers);return fO(y,e),dO(y,n),hO(y,o),mO(y,r),new uO(p,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xO(...t){const e=gO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(dw())return new Blob(t);throw new Tn(Sn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){if(typeof atob>"u")throw nO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kv{constructor(e,n){this.data=e,this.contentType=n||null}}function wO(t,e){switch(t){case Na.RAW:return new kv(FE(e));case Na.BASE64:case Na.BASE64URL:return new kv(VE(t,e));case Na.DATA_URL:return new kv(bO(e),NO(e))}throw cw()}function FE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=t.charCodeAt(++n);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _O(t){let e;try{e=decodeURIComponent(t)}catch{throw Rh(Na.DATA_URL,"Malformed data URL.")}return FE(e)}function VE(t,e){switch(t){case Na.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Rh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Na.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Rh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yO(e)}catch(i){throw i.message.includes("polyfill")?i:Rh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class BE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rh(Na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=jO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function bO(t){const e=new BE(t);return e.base64?VE(Na.BASE64,e.rest):_O(e.rest)}function NO(t){return new BE(t).contentType}function jO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){let r=0,i="";Mj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Mj(this.data_)){const r=this.data_,i=vO(r,e,n);return i===null?null:new Cl(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Cl(r,!0)}}static getBlob(...e){if(dw()){const n=e.map(r=>r instanceof Cl?r.data_:r);return new Cl(xO.apply(null,n))}else{const n=e.map(u=>uw(u)?wO(Na.RAW,u).data:u.data_);let r=0;n.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)i[o++]=u[d]}),new Cl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){let e;try{e=JSON.parse(t)}catch{return null}return lO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function EO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function UE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e){return e}class tr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||SO}}let km=null;function TO(t){return!uw(t)||t.length<2?t:UE(t)}function $E(){if(km)return km;const t=[];t.push(new tr("bucket")),t.push(new tr("generation")),t.push(new tr("metageneration")),t.push(new tr("name","fullPath",!0));function e(o,u){return TO(u)}const n=new tr("name");n.xform=e,t.push(n);function r(o,u){return u!==void 0?Number(u):u}const i=new tr("size");return i.xform=r,t.push(i),t.push(new tr("timeCreated")),t.push(new tr("updated")),t.push(new tr("md5Hash",null,!0)),t.push(new tr("cacheControl",null,!0)),t.push(new tr("contentDisposition",null,!0)),t.push(new tr("contentEncoding",null,!0)),t.push(new tr("contentLanguage",null,!0)),t.push(new tr("contentType",null,!0)),t.push(new tr("metadata","customMetadata",!0)),km=t,km}function AO(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Kr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function kO(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const u=n[o];r[u.local]=u.xform(r,e[u.server])}return AO(r,t),r}function HE(t,e,n){const r=zE(e);return r===null?null:kO(t,r,n)}function PO(t,e,n,r){const i=zE(e);if(i===null||!uw(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(p=>{const y=t.bucket,g=t.fullPath,b="/b/"+u(y)+"/o/"+u(g),E=hw(b,n,r),N=OE({alt:"media",token:p});return E+N})[0]}function IO(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class WE{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){if(!t)throw cw()}function RO(t,e){function n(r,i){const o=HE(t,i,e);return qE(o!==null),o}return n}function LO(t,e){function n(r,i){const o=HE(t,i,e);return qE(o!==null),PO(o,i,t.host,t._protocol)}return n}function GE(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=GD():i=qD():n.getStatus()===402?i=WD(t.bucket):n.getStatus()===403?i=KD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function MO(t){const e=GE(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=HD(t.path)),o.serverResponse=i.serverResponse,o}return n}function DO(t,e,n){const r=e.fullServerUrl(),i=hw(r,t.host,t._protocol),o="GET",u=t.maxOperationRetryTime,d=new WE(i,o,LO(t,n),u);return d.errorHandler=MO(e),d}function OO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=OO(null,e)),r}function VO(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let z="";for(let H=0;H<2;H++)z=z+Math.random().toString().slice(2);return z}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const p=FO(e,r,i),y=IO(p,n),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,b=`\r
--`+f+"--",E=Cl.getBlob(g,r,b);if(E===null)throw eO();const N={name:p.fullPath},S=hw(o,t.host,t._protocol),k="POST",R=t.maxUploadRetryTime,I=new WE(S,k,RO(t,n),R);return I.urlParams=N,I.headers=u,I.body=E.uploadData(),I.errorHandler=GE(e),I}class BO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw ph("cannot .send() more than once");if(Xl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ph("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ph("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ph("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ph("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zO extends BO{initXhr(){this.xhr_.responseType="text"}}function KE(){return new zO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this._service=e,n instanceof Kr?this._location=n:this._location=Kr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qc(e,n)}get root(){const e=new Kr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UE(this._location.path)}get storage(){return this._service}get parent(){const e=CO(this._location.path);if(e===null)return null;const n=new Kr(this._location.bucket,e);return new qc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sO(e)}}function UO(t,e,n){t._throwIfRoot("uploadBytes");const r=VO(t.storage,t._location,$E(),new Cl(e,!0),n);return t.storage.makeRequestWithTokens(r,KE).then(i=>({metadata:i,ref:t}))}function $O(t){t._throwIfRoot("getDownloadURL");const e=DO(t.storage,t._location,$E());return t.storage.makeRequestWithTokens(e,KE).then(n=>{if(n===null)throw tO();return n})}function HO(t,e){const n=EO(t._location.path,e),r=new Kr(t._location.bucket,n);return new qc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){return/^[A-Za-z]+:\/\//.test(t)}function qO(t,e){return new qc(t,e)}function ZE(t,e){if(t instanceof fw){const n=t;if(n._bucket==null)throw JD();const r=new qc(n,n._bucket);return e!=null?ZE(r,e):r}else return e!==void 0?HO(t,e):t}function GO(t,e){if(e&&WO(e)){if(t instanceof fw)return qO(t,e);throw Ny("To use ref(service, url), the first argument must be a Storage instance.")}else return ZE(t,e)}function Oj(t,e){const n=e?.[ME];return n==null?null:Kr.makeFromBucketSpec(n,t)}function KO(t,e,n,r={}){t.host=`${e}:${n}`;const i=Xl(e);i&&(r0(`https://${t.host}/b`),i0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:s2(o,t.app.options.projectId))}class fw{constructor(e,n,r,i,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=LE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UD,this._maxUploadRetryTime=$D,this._requests=new Set,i!=null?this._bucket=Kr.makeFromBucketSpec(i,this._host):this._bucket=Oj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kr.makeFromBucketSpec(this._url,e):this._bucket=Oj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new rO(DE());{const u=pO(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Fj="@firebase/storage",Vj="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="storage";function ZO(t,e,n){return t=Bt(t),UO(t,e,n)}function YO(t){return t=Bt(t),$O(t)}function QO(t,e){return t=Bt(t),GO(t,e)}function XO(t=l0(),e){t=Bt(t);const r=Gp(t,YE).getImmediate({identifier:e}),i=e2("storage");return i&&JO(r,...i),r}function JO(t,e,n,r={}){KO(t,e,n,r)}function eF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new fw(n,r,i,e,Xc)}function tF(){Uc(new Ml(YE,eF,"PUBLIC").setMultipleInstances(!0)),Ea(Fj,Vj,""),Ea(Fj,Vj,"esm2020")}tF();const nF={apiKey:"AIzaSyDFRufOWCuGDKfKffacZXgQWdGG7RJzIQI",authDomain:"bookbloom-5429e.firebaseapp.com",databaseURL:"https://bookbloom-5429e-default-rtdb.firebaseio.com",projectId:"bookbloom-5429e",storageBucket:"bookbloom-5429e.firebasestorage.app",messagingSenderId:"322581834006",appId:"1:322581834006:web:979f691da2d0a2cd7d0837",measurementId:"G-93D0YZERSQ"},mw=a2(nF),gt=sC(mw),Te=TD(mw),sF=XO(mw),QE=new _a,rF=new wa;function iF(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const aF=t=>{switch(t){case"success":return cF;case"info":return dF;case"warning":return uF;case"error":return hF;default:return null}},oF=Array(12).fill(0),lF=({visible:t,className:e})=>Re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},oF.map((n,r)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),cF=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uF=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dF=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hF=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fF=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),mF=()=>{const[t,e]=Re.useState(document.hidden);return Re.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let jy=1;class pF{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,o=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:jy++,u=this.toasts.find(f=>f.id===o),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(f=>f.id===o?(this.publish({...f,...e,id:o,title:r}),{...f,...e,id:o,dismissible:d,title:r}):f):this.addToast({title:r,...i,dismissible:d,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,u;const d=i.then(async p=>{if(u=["resolve",p],Re.isValidElement(p))o=!1,this.create({id:r,type:"default",message:p});else if(xF(p)&&!p.ok){o=!1;const g=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,b=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,N=typeof g=="object"&&!Re.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:b,...N})}else if(p instanceof Error){o=!1;const g=typeof n.error=="function"?await n.error(p):n.error,b=typeof n.description=="function"?await n.description(p):n.description,N=typeof g=="object"&&!Re.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:b,...N})}else if(n.success!==void 0){o=!1;const g=typeof n.success=="function"?await n.success(p):n.success,b=typeof n.description=="function"?await n.description(p):n.description,N=typeof g=="object"&&!Re.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:b,...N})}}).catch(async p=>{if(u=["reject",p],n.error!==void 0){o=!1;const y=typeof n.error=="function"?await n.error(p):n.error,g=typeof n.description=="function"?await n.description(p):n.description,E=typeof y=="object"&&!Re.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:g,...E})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((p,y)=>d.then(()=>u[0]==="reject"?y(u[1]):p(u[1])).catch(y));return typeof r!="string"&&typeof r!="number"?{unwrap:f}:Object.assign(r,{unwrap:f})},this.custom=(e,n)=>{const r=n?.id||jy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Er=new pF,gF=(t,e)=>{const n=e?.id||jy++;return Er.addToast({title:t,...e,id:n}),n},xF=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",vF=gF,yF=()=>Er.toasts,wF=()=>Er.getActiveToasts(),ue=Object.assign(vF,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:yF,getToasts:wF});iF("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Pm(t){return t.label!==void 0}const _F=3,bF="24px",NF="16px",Bj=4e3,jF=356,CF=14,EF=45,SF=200;function va(...t){return t.filter(Boolean).join(" ")}function TF(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const AF=t=>{var e,n,r,i,o,u,d,f,p;const{invert:y,toast:g,unstyled:b,interacting:E,setHeights:N,visibleToasts:S,heights:k,index:R,toasts:I,expanded:z,removeToast:H,defaultRichColors:G,closeButton:Q,style:F,cancelButtonStyle:D,actionButtonStyle:O,className:U="",descriptionClassName:$="",duration:K,position:W,gap:ce,expandByDefault:oe,classNames:ne,icons:xe,closeButtonAriaLabel:Z="Close toast"}=t,[de,ie]=Re.useState(null),[J,me]=Re.useState(null),[we,_e]=Re.useState(!1),[je,Ee]=Re.useState(!1),[ve,ke]=Re.useState(!1),[Xe,tt]=Re.useState(!1),[yt,wt]=Re.useState(!1),[Yt,Ln]=Re.useState(0),[kr,js]=Re.useState(0),An=Re.useRef(g.duration||K||Bj),Pr=Re.useRef(null),Ot=Re.useRef(null),Xt=R===0,cs=R+1<=S,Nn=g.type,Us=g.dismissible!==!1,Bo=g.className||"",Jr=g.descriptionClassName||"",or=Re.useMemo(()=>k.findIndex(rt=>rt.toastId===g.id)||0,[k,g.id]),Pi=Re.useMemo(()=>{var rt;return(rt=g.closeButton)!=null?rt:Q},[g.closeButton,Q]),lr=Re.useMemo(()=>g.duration||K||Bj,[g.duration,K]),Ji=Re.useRef(0),us=Re.useRef(0),cr=Re.useRef(0),Ir=Re.useRef(null),[Rr,ei]=W.split("-"),Ii=Re.useMemo(()=>k.reduce((rt,Ht,hn)=>hn>=or?rt:rt+Ht.height,0),[k,or]),Cs=mF(),ur=g.invert||y,dr=Nn==="loading";us.current=Re.useMemo(()=>or*ce+Ii,[or,Ii]),Re.useEffect(()=>{An.current=lr},[lr]),Re.useEffect(()=>{_e(!0)},[]),Re.useEffect(()=>{const rt=Ot.current;if(rt){const Ht=rt.getBoundingClientRect().height;return js(Ht),N(hn=>[{toastId:g.id,height:Ht,position:g.position},...hn]),()=>N(hn=>hn.filter(Mn=>Mn.toastId!==g.id))}},[N,g.id]),Re.useLayoutEffect(()=>{if(!we)return;const rt=Ot.current,Ht=rt.style.height;rt.style.height="auto";const hn=rt.getBoundingClientRect().height;rt.style.height=Ht,js(hn),N(Mn=>Mn.find(Jt=>Jt.toastId===g.id)?Mn.map(Jt=>Jt.toastId===g.id?{...Jt,height:hn}:Jt):[{toastId:g.id,height:hn,position:g.position},...Mn])},[we,g.title,g.description,N,g.id,g.jsx,g.action,g.cancel]);const ds=Re.useCallback(()=>{Ee(!0),Ln(us.current),N(rt=>rt.filter(Ht=>Ht.toastId!==g.id)),setTimeout(()=>{H(g)},SF)},[g,H,N,us]);Re.useEffect(()=>{if(g.promise&&Nn==="loading"||g.duration===1/0||g.type==="loading")return;let rt;return z||E||Cs?(()=>{if(cr.current<Ji.current){const Mn=new Date().getTime()-Ji.current;An.current=An.current-Mn}cr.current=new Date().getTime()})():(()=>{An.current!==1/0&&(Ji.current=new Date().getTime(),rt=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),ds()},An.current))})(),()=>clearTimeout(rt)},[z,E,g,Nn,Cs,ds]),Re.useEffect(()=>{g.delete&&(ds(),g.onDismiss==null||g.onDismiss.call(g,g))},[ds,g.delete]);function hr(){var rt;if(xe?.loading){var Ht;return Re.createElement("div",{className:va(ne?.loader,g==null||(Ht=g.classNames)==null?void 0:Ht.loader,"sonner-loader"),"data-visible":Nn==="loading"},xe.loading)}return Re.createElement(lF,{className:va(ne?.loader,g==null||(rt=g.classNames)==null?void 0:rt.loader),visible:Nn==="loading"})}const fr=g.icon||xe?.[Nn]||aF(Nn);var qt,ea;return Re.createElement("li",{tabIndex:0,ref:Ot,className:va(U,Bo,ne?.toast,g==null||(e=g.classNames)==null?void 0:e.toast,ne?.default,ne?.[Nn],g==null||(n=g.classNames)==null?void 0:n[Nn]),"data-sonner-toast":"","data-rich-colors":(qt=g.richColors)!=null?qt:G,"data-styled":!(g.jsx||g.unstyled||b),"data-mounted":we,"data-promise":!!g.promise,"data-swiped":yt,"data-removed":je,"data-visible":cs,"data-y-position":Rr,"data-x-position":ei,"data-index":R,"data-front":Xt,"data-swiping":ve,"data-dismissible":Us,"data-type":Nn,"data-invert":ur,"data-swipe-out":Xe,"data-swipe-direction":J,"data-expanded":!!(z||oe&&we),"data-testid":g.testId,style:{"--index":R,"--toasts-before":R,"--z-index":I.length-R,"--offset":`${je?Yt:us.current}px`,"--initial-height":oe?"auto":`${kr}px`,...F,...g.style},onDragEnd:()=>{ke(!1),ie(null),Ir.current=null},onPointerDown:rt=>{rt.button!==2&&(dr||!Us||(Pr.current=new Date,Ln(us.current),rt.target.setPointerCapture(rt.pointerId),rt.target.tagName!=="BUTTON"&&(ke(!0),Ir.current={x:rt.clientX,y:rt.clientY})))},onPointerUp:()=>{var rt,Ht,hn;if(Xe||!Us)return;Ir.current=null;const Mn=Number(((rt=Ot.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),hs=Number(((Ht=Ot.current)==null?void 0:Ht.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Jt=new Date().getTime()-((hn=Pr.current)==null?void 0:hn.getTime()),jn=de==="x"?Mn:hs,$s=Math.abs(jn)/Jt;if(Math.abs(jn)>=EF||$s>.11){Ln(us.current),g.onDismiss==null||g.onDismiss.call(g,g),me(de==="x"?Mn>0?"right":"left":hs>0?"down":"up"),ds(),tt(!0);return}else{var Cn,es;(Cn=Ot.current)==null||Cn.style.setProperty("--swipe-amount-x","0px"),(es=Ot.current)==null||es.style.setProperty("--swipe-amount-y","0px")}wt(!1),ke(!1),ie(null)},onPointerMove:rt=>{var Ht,hn,Mn;if(!Ir.current||!Us||((Ht=window.getSelection())==null?void 0:Ht.toString().length)>0)return;const Jt=rt.clientY-Ir.current.y,jn=rt.clientX-Ir.current.x;var $s;const Cn=($s=t.swipeDirections)!=null?$s:TF(W);!de&&(Math.abs(jn)>1||Math.abs(Jt)>1)&&ie(Math.abs(jn)>Math.abs(Jt)?"x":"y");let es={x:0,y:0};const fn=Be=>1/(1.5+Math.abs(Be)/20);if(de==="y"){if(Cn.includes("top")||Cn.includes("bottom"))if(Cn.includes("top")&&Jt<0||Cn.includes("bottom")&&Jt>0)es.y=Jt;else{const Be=Jt*fn(Jt);es.y=Math.abs(Be)<Math.abs(Jt)?Be:Jt}}else if(de==="x"&&(Cn.includes("left")||Cn.includes("right")))if(Cn.includes("left")&&jn<0||Cn.includes("right")&&jn>0)es.x=jn;else{const Be=jn*fn(jn);es.x=Math.abs(Be)<Math.abs(jn)?Be:jn}(Math.abs(es.x)>0||Math.abs(es.y)>0)&&wt(!0),(hn=Ot.current)==null||hn.style.setProperty("--swipe-amount-x",`${es.x}px`),(Mn=Ot.current)==null||Mn.style.setProperty("--swipe-amount-y",`${es.y}px`)}},Pi&&!g.jsx&&Nn!=="loading"?Re.createElement("button",{"aria-label":Z,"data-disabled":dr,"data-close-button":!0,onClick:dr||!Us?()=>{}:()=>{ds(),g.onDismiss==null||g.onDismiss.call(g,g)},className:va(ne?.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(ea=xe?.close)!=null?ea:fF):null,(Nn||g.icon||g.promise)&&g.icon!==null&&(xe?.[Nn]!==null||g.icon)?Re.createElement("div",{"data-icon":"",className:va(ne?.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||hr():null,g.type!=="loading"?fr:null):null,Re.createElement("div",{"data-content":"",className:va(ne?.content,g==null||(o=g.classNames)==null?void 0:o.content)},Re.createElement("div",{"data-title":"",className:va(ne?.title,g==null||(u=g.classNames)==null?void 0:u.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?Re.createElement("div",{"data-description":"",className:va($,Jr,ne?.description,g==null||(d=g.classNames)==null?void 0:d.description)},typeof g.description=="function"?g.description():g.description):null),Re.isValidElement(g.cancel)?g.cancel:g.cancel&&Pm(g.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||D,onClick:rt=>{Pm(g.cancel)&&Us&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,rt),ds())},className:va(ne?.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,Re.isValidElement(g.action)?g.action:g.action&&Pm(g.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||O,onClick:rt=>{Pm(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,rt),!rt.defaultPrevented&&ds())},className:va(ne?.actionButton,g==null||(p=g.classNames)==null?void 0:p.actionButton)},g.action.label):null)};function zj(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function kF(t,e){const n={};return[t,e].forEach((r,i)=>{const o=i===1,u=o?"--mobile-offset":"--offset",d=o?NF:bF;function f(p){["top","right","bottom","left"].forEach(y=>{n[`${u}-${y}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?f(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?n[`${u}-${p}`]=d:n[`${u}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):f(d)}),n}const PF=Re.forwardRef(function(e,n){const{id:r,invert:i,position:o="bottom-right",hotkey:u=["altKey","KeyT"],expand:d,closeButton:f,className:p,offset:y,mobileOffset:g,theme:b="light",richColors:E,duration:N,style:S,visibleToasts:k=_F,toastOptions:R,dir:I=zj(),gap:z=CF,icons:H,containerAriaLabel:G="Notifications"}=e,[Q,F]=Re.useState([]),D=Re.useMemo(()=>r?Q.filter(we=>we.toasterId===r):Q.filter(we=>!we.toasterId),[Q,r]),O=Re.useMemo(()=>Array.from(new Set([o].concat(D.filter(we=>we.position).map(we=>we.position)))),[D,o]),[U,$]=Re.useState([]),[K,W]=Re.useState(!1),[ce,oe]=Re.useState(!1),[ne,xe]=Re.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=Re.useRef(null),de=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),ie=Re.useRef(null),J=Re.useRef(!1),me=Re.useCallback(we=>{F(_e=>{var je;return(je=_e.find(Ee=>Ee.id===we.id))!=null&&je.delete||Er.dismiss(we.id),_e.filter(({id:Ee})=>Ee!==we.id)})},[]);return Re.useEffect(()=>Er.subscribe(we=>{if(we.dismiss){requestAnimationFrame(()=>{F(_e=>_e.map(je=>je.id===we.id?{...je,delete:!0}:je))});return}setTimeout(()=>{Z1.flushSync(()=>{F(_e=>{const je=_e.findIndex(Ee=>Ee.id===we.id);return je!==-1?[..._e.slice(0,je),{..._e[je],...we},..._e.slice(je+1)]:[we,..._e]})})})}),[Q]),Re.useEffect(()=>{if(b!=="system"){xe(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?xe("dark"):xe("light")),typeof window>"u")return;const we=window.matchMedia("(prefers-color-scheme: dark)");try{we.addEventListener("change",({matches:_e})=>{xe(_e?"dark":"light")})}catch{we.addListener(({matches:je})=>{try{xe(je?"dark":"light")}catch(Ee){console.error(Ee)}})}},[b]),Re.useEffect(()=>{Q.length<=1&&W(!1)},[Q]),Re.useEffect(()=>{const we=_e=>{var je;if(u.every(ke=>_e[ke]||_e.code===ke)){var ve;W(!0),(ve=Z.current)==null||ve.focus()}_e.code==="Escape"&&(document.activeElement===Z.current||(je=Z.current)!=null&&je.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",we),()=>document.removeEventListener("keydown",we)},[u]),Re.useEffect(()=>{if(Z.current)return()=>{ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null,J.current=!1)}},[Z.current]),Re.createElement("section",{ref:n,"aria-label":`${G} ${de}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((we,_e)=>{var je;const[Ee,ve]=we.split("-");return D.length?Re.createElement("ol",{key:we,dir:I==="auto"?zj():I,tabIndex:-1,ref:Z,className:p,"data-sonner-toaster":!0,"data-sonner-theme":ne,"data-y-position":Ee,"data-x-position":ve,style:{"--front-toast-height":`${((je=U[0])==null?void 0:je.height)||0}px`,"--width":`${jF}px`,"--gap":`${z}px`,...S,...kF(y,g)},onBlur:ke=>{J.current&&!ke.currentTarget.contains(ke.relatedTarget)&&(J.current=!1,ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null))},onFocus:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||J.current||(J.current=!0,ie.current=ke.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{ce||W(!1)},onDragEnd:()=>W(!1),onPointerDown:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},D.filter(ke=>!ke.position&&_e===0||ke.position===we).map((ke,Xe)=>{var tt,yt;return Re.createElement(AF,{key:ke.id,icons:H,index:Xe,toast:ke,defaultRichColors:E,duration:(tt=R?.duration)!=null?tt:N,className:R?.className,descriptionClassName:R?.descriptionClassName,invert:i,visibleToasts:k,closeButton:(yt=R?.closeButton)!=null?yt:f,interacting:ce,position:we,style:R?.style,unstyled:R?.unstyled,classNames:R?.classNames,cancelButtonStyle:R?.cancelButtonStyle,actionButtonStyle:R?.actionButtonStyle,closeButtonAriaLabel:R?.closeButtonAriaLabel,removeToast:me,toasts:D.filter(wt=>wt.position==ke.position),heights:U.filter(wt=>wt.position==ke.position),setHeights:$,expandByDefault:d,gap:z,expanded:K,swipeDirections:e.swipeDirections})})):null}))}),XE=_.createContext(void 0);function IF({children:t}){const[e,n]=_.useState(()=>{const d=localStorage.getItem("cart");return d?JSON.parse(d):[]});_.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(e))},[e]);const r=e.reduce((d,f)=>d+f.price,0),i=d=>{n(f=>f.some(p=>p.id===d.id&&p.type===d.type)?(ue.info("Item already in cart"),f):(ue.success("Added to cart"),[...f,d]))},o=d=>{n(f=>f.filter(p=>p.id!==d)),ue.success("Removed from cart")},u=()=>{n([])};return s.jsx(XE.Provider,{value:{items:e,addToCart:i,removeFromCart:o,clearCart:u,totalAmount:r},children:t})}function JE(){const t=_.useContext(XE);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Uj=t=>{const e=LF(t);return e.charAt(0).toUpperCase()+e.slice(1)},eS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:u,...d},f)=>_.createElement("svg",{ref:f,...MF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:eS("lucide",i),...d},[...u.map(([p,y])=>_.createElement(p,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(t,e)=>{const n=_.forwardRef(({className:r,...i},o)=>_.createElement(DF,{ref:o,iconNode:e,className:eS(`lucide-${RF(Uj(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Uj(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],tS=Me("archive",OF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],pw=Me("arrow-left-right",FF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zs=Me("arrow-left",VF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zF=Me("award",BF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],$F=Me("ban",UF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$l=Me("bell",HF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wr=Me("book-open",WF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],GF=Me("book",qF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Pv=Me("bot",KF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],YF=Me("building-2",ZF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ar=Me("calendar",QF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hl=Me("check",XF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wg=Me("chevron-down",JF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gw=Me("chevron-left",eV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Tl=Me("chevron-right",tV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sV=Me("chevron-up",nV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xw=Me("circle-alert",rV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ni=Me("circle-check-big",iV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xm=Me("circle-check",aV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lV=Me("circle-user-round",oV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uV=Me("circle",cV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],_g=Me("clock",dV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hd=Me("credit-card",hV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Io=Me("dollar-sign",fV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],gf=Me("download",mV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],nS=Me("ellipsis-vertical",pV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xu=Me("eye-off",gV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qr=Me("eye",xV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Cp=Me("file-text",vV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Iv=Me("flag",yV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vw=Me("funnel",wV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ep=Me("globe",_V);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Rv=Me("graduation-cap",bV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],jV=Me("grid-3x3",NV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],EV=Me("headphones",CV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ja=Me("heart",SV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],AV=Me("history",TV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],fd=Me("house",kV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],md=Me("image",PV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],RV=Me("languages",IV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],MV=Me("list",LV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cy=Me("loader-circle",DV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Fs=Me("lock",OV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],VV=Me("log-in",FV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],yw=Me("log-out",BV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],su=Me("mail",zV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qn=Me("map-pin",UV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],HV=Me("map-pinned",$V);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],sr=Me("message-circle",WV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ey=Me("message-square",qV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Lv=Me("mic",GV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ZV=Me("navigation",KV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ji=Me("package",YV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],XV=Me("paperclip",QV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Sy=Me("pen",JV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Hh=Me("phone",e7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ro=Me("plus",t7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],s7=Me("printer",n7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],i7=Me("refresh-cw",r7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sS=Me("save",a7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],$n=Me("search",o7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Sp=Me("send",l7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bg=Me("settings",c7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ty=Me("shield-check",u7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Lo=Me("shield",d7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Wh=Me("shopping-bag",h7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ng=Me("shopping-cart",f7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],rS=Me("sliders-horizontal",m7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],iS=Me("smile",p7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],$j=Me("sparkles",g7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],aS=Me("square-pen",x7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Gc=Me("star",v7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Hj=Me("tag",y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],_7=Me("thumbs-up",w7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Wl=Me("trash-2",b7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],oS=Me("trending-up",N7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],pd=Me("truck",j7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],jg=Me("upload",C7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],S7=Me("user-minus",E7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],lS=Me("user-plus",T7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qh=Me("user",A7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Rn=Me("users",k7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Ay=Me("video",P7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],R7=Me("wallet",I7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dt=Me("x",L7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],D7=Me("zoom-in",M7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],F7=Me("zoom-out",O7);function Wj(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fo(...t){return e=>{let n=!1;const r=t.map(i=>{const o=Wj(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():Wj(t[i],null)}}}}function mt(...t){return _.useCallback(Fo(...t),t)}var V7=Symbol.for("react.lazy"),Tp=Zy[" use ".trim().toString()];function B7(t){return typeof t=="object"&&t!==null&&"then"in t}function cS(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===V7&&"_payload"in t&&B7(t._payload)}function Cg(t){const e=z7(t),n=_.forwardRef((r,i)=>{let{children:o,...u}=r;cS(o)&&typeof Tp=="function"&&(o=Tp(o._payload));const d=_.Children.toArray(o),f=d.find($7);if(f){const p=f.props.children,y=d.map(g=>g===f?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:g);return s.jsx(e,{...u,ref:i,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return s.jsx(e,{...u,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}var uS=Cg("Slot");function z7(t){const e=_.forwardRef((n,r)=>{let{children:i,...o}=n;if(cS(i)&&typeof Tp=="function"&&(i=Tp(i._payload)),_.isValidElement(i)){const u=W7(i),d=H7(o,i.props);return i.type!==_.Fragment&&(d.ref=r?Fo(r,u):u),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var U7=Symbol("radix.slottable");function $7(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===U7}function H7(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{const f=o(...d);return i(...d),f}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function W7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=dS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hS(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=dS(t))&&(r&&(r+=" "),r+=e);return r}const qj=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Gj=hS,fS=(t,e)=>n=>{var r;if(e?.variants==null)return Gj(t,n?.class,n?.className);const{variants:i,defaultVariants:o}=e,u=Object.keys(i).map(p=>{const y=n?.[p],g=o?.[p];if(y===null)return null;const b=qj(y)||qj(g);return i[p][b]}),d=n&&Object.entries(n).reduce((p,y)=>{let[g,b]=y;return b===void 0||(p[g]=b),p},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,y)=>{let{class:g,className:b,...E}=y;return Object.entries(E).every(N=>{let[S,k]=N;return Array.isArray(k)?k.includes({...o,...d}[S]):{...o,...d}[S]===k})?[...p,g,b]:p},[]);return Gj(t,u,f,n?.class,n?.className)},q7=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},G7=(t,e)=>({classGroupId:t,validator:e}),mS=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Ap="-",Kj=[],K7="arbitrary..",Z7=t=>{const e=Q7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return Y7(u);const d=u.split(Ap),f=d[0]===""&&d.length>1?1:0;return pS(d,f,e)},getConflictingClassGroupIds:(u,d)=>{if(d){const f=r[u],p=n[u];return f?p?q7(p,f):f:p||Kj}return n[u]||Kj}}},pS=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],o=n.nextPart.get(i);if(o){const p=pS(t,e+1,o);if(p)return p}const u=n.validators;if(u===null)return;const d=e===0?t.join(Ap):t.slice(e).join(Ap),f=u.length;for(let p=0;p<f;p++){const y=u[p];if(y.validator(d))return y.classGroupId}},Y7=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?K7+r:void 0})(),Q7=t=>{const{theme:e,classGroups:n}=t;return X7(n,e)},X7=(t,e)=>{const n=mS();for(const r in t){const i=t[r];ww(i,n,r,e)}return n},ww=(t,e,n,r)=>{const i=t.length;for(let o=0;o<i;o++){const u=t[o];J7(u,e,n,r)}},J7=(t,e,n,r)=>{if(typeof t=="string"){eB(t,e,n);return}if(typeof t=="function"){tB(t,e,n,r);return}nB(t,e,n,r)},eB=(t,e,n)=>{const r=t===""?e:gS(e,t);r.classGroupId=n},tB=(t,e,n,r)=>{if(sB(t)){ww(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(G7(n,t))},nB=(t,e,n,r)=>{const i=Object.entries(t),o=i.length;for(let u=0;u<o;u++){const[d,f]=i[u];ww(f,gS(e,d),n,r)}},gS=(t,e)=>{let n=t;const r=e.split(Ap),i=r.length;for(let o=0;o<i;o++){const u=r[o];let d=n.nextPart.get(u);d||(d=mS(),n.nextPart.set(u,d)),n=d}return n},sB=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,rB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(o,u)=>{n[o]=u,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let u=n[o];if(u!==void 0)return u;if((u=r[o])!==void 0)return i(o,u),u},set(o,u){o in n?n[o]=u:i(o,u)}}},ky="!",Zj=":",iB=[],Yj=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),aB=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const o=[];let u=0,d=0,f=0,p;const y=i.length;for(let S=0;S<y;S++){const k=i[S];if(u===0&&d===0){if(k===Zj){o.push(i.slice(f,S)),f=S+1;continue}if(k==="/"){p=S;continue}}k==="["?u++:k==="]"?u--:k==="("?d++:k===")"&&d--}const g=o.length===0?i:i.slice(f);let b=g,E=!1;g.endsWith(ky)?(b=g.slice(0,-1),E=!0):g.startsWith(ky)&&(b=g.slice(1),E=!0);const N=p&&p>f?p-f:void 0;return Yj(o,E,b,N)};if(e){const i=e+Zj,o=r;r=u=>u.startsWith(i)?o(u.slice(i.length)):Yj(iB,!1,u,void 0,!0)}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},oB=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let o=0;o<n.length;o++){const u=n[o],d=u[0]==="[",f=e.has(u);d||f?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(u)):i.push(u)}return i.length>0&&(i.sort(),r.push(...i)),r}},lB=t=>({cache:rB(t.cacheSize),parseClassName:aB(t),sortModifiers:oB(t),...Z7(t)}),cB=/\s+/,uB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,u=[],d=t.trim().split(cB);let f="";for(let p=d.length-1;p>=0;p-=1){const y=d[p],{isExternal:g,modifiers:b,hasImportantModifier:E,baseClassName:N,maybePostfixModifierPosition:S}=n(y);if(g){f=y+(f.length>0?" "+f:f);continue}let k=!!S,R=r(k?N.substring(0,S):N);if(!R){if(!k){f=y+(f.length>0?" "+f:f);continue}if(R=r(N),!R){f=y+(f.length>0?" "+f:f);continue}k=!1}const I=b.length===0?"":b.length===1?b[0]:o(b).join(":"),z=E?I+ky:I,H=z+R;if(u.indexOf(H)>-1)continue;u.push(H);const G=i(R,k);for(let Q=0;Q<G.length;++Q){const F=G[Q];u.push(z+F)}f=y+(f.length>0?" "+f:f)}return f},dB=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=xS(n))&&(i&&(i+=" "),i+=r);return i},xS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=xS(t[r]))&&(n&&(n+=" "),n+=e);return n},hB=(t,...e)=>{let n,r,i,o;const u=f=>{const p=e.reduce((y,g)=>g(y),t());return n=lB(p),r=n.cache.get,i=n.cache.set,o=d,d(f)},d=f=>{const p=r(f);if(p)return p;const y=uB(f,n);return i(f,y),y};return o=u,(...f)=>o(dB(...f))},fB=[],Zn=t=>{const e=n=>n[t]||fB;return e.isThemeGetter=!0,e},vS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mB=/^\d+\/\d+$/,pB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,vB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mu=t=>mB.test(t),Ct=t=>!!t&&!Number.isNaN(Number(t)),bl=t=>!!t&&Number.isInteger(Number(t)),Mv=t=>t.endsWith("%")&&Ct(t.slice(0,-1)),xo=t=>pB.test(t),wB=()=>!0,_B=t=>gB.test(t)&&!xB.test(t),wS=()=>!1,bB=t=>vB.test(t),NB=t=>yB.test(t),jB=t=>!Ge(t)&&!Ke(t),CB=t=>Id(t,NS,wS),Ge=t=>vS.test(t),Lc=t=>Id(t,jS,_B),Dv=t=>Id(t,kB,Ct),Qj=t=>Id(t,_S,wS),EB=t=>Id(t,bS,NB),Im=t=>Id(t,CS,bB),Ke=t=>yS.test(t),gh=t=>Rd(t,jS),SB=t=>Rd(t,PB),Xj=t=>Rd(t,_S),TB=t=>Rd(t,NS),AB=t=>Rd(t,bS),Rm=t=>Rd(t,CS,!0),Id=(t,e,n)=>{const r=vS.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Rd=(t,e,n=!1)=>{const r=yS.exec(t);return r?r[1]?e(r[1]):n:!1},_S=t=>t==="position"||t==="percentage",bS=t=>t==="image"||t==="url",NS=t=>t==="length"||t==="size"||t==="bg-size",jS=t=>t==="length",kB=t=>t==="number",PB=t=>t==="family-name",CS=t=>t==="shadow",IB=()=>{const t=Zn("color"),e=Zn("font"),n=Zn("text"),r=Zn("font-weight"),i=Zn("tracking"),o=Zn("leading"),u=Zn("breakpoint"),d=Zn("container"),f=Zn("spacing"),p=Zn("radius"),y=Zn("shadow"),g=Zn("inset-shadow"),b=Zn("text-shadow"),E=Zn("drop-shadow"),N=Zn("blur"),S=Zn("perspective"),k=Zn("aspect"),R=Zn("ease"),I=Zn("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],G=()=>[...H(),Ke,Ge],Q=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],D=()=>[Ke,Ge,f],O=()=>[Mu,"full","auto",...D()],U=()=>[bl,"none","subgrid",Ke,Ge],$=()=>["auto",{span:["full",bl,Ke,Ge]},bl,Ke,Ge],K=()=>[bl,"auto",Ke,Ge],W=()=>["auto","min","max","fr",Ke,Ge],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...D()],xe=()=>[Mu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],Z=()=>[t,Ke,Ge],de=()=>[...H(),Xj,Qj,{position:[Ke,Ge]}],ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",TB,CB,{size:[Ke,Ge]}],me=()=>[Mv,gh,Lc],we=()=>["","none","full",p,Ke,Ge],_e=()=>["",Ct,gh,Lc],je=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[Ct,Mv,Xj,Qj],ke=()=>["","none",N,Ke,Ge],Xe=()=>["none",Ct,Ke,Ge],tt=()=>["none",Ct,Ke,Ge],yt=()=>[Ct,Ke,Ge],wt=()=>[Mu,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xo],breakpoint:[xo],color:[wB],container:[xo],"drop-shadow":[xo],ease:["in","out","in-out"],font:[jB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xo],shadow:[xo],spacing:["px",Ct],text:[xo],"text-shadow":[xo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Mu,Ge,Ke,k]}],container:["container"],columns:[{columns:[Ct,Ge,Ke,d]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:G()}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[bl,"auto",Ke,Ge]}],basis:[{basis:[Mu,"full","auto",d,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ct,Mu,"auto","initial","none",Ge]}],grow:[{grow:["",Ct,Ke,Ge]}],shrink:[{shrink:["",Ct,Ke,Ge]}],order:[{order:[bl,"first","last","none",Ke,Ge]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:xe()}],w:[{w:[d,"screen",...xe()]}],"min-w":[{"min-w":[d,"screen","none",...xe()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[u]},...xe()]}],h:[{h:["screen","lh",...xe()]}],"min-h":[{"min-h":["screen","lh","none",...xe()]}],"max-h":[{"max-h":["screen","lh",...xe()]}],"font-size":[{text:["base",n,gh,Lc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ke,Dv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mv,Ge]}],"font-family":[{font:[SB,Ge,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ke,Ge]}],"line-clamp":[{"line-clamp":[Ct,"none",Ke,Dv]}],leading:[{leading:[o,...D()]}],"list-image":[{"list-image":["none",Ke,Ge]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ke,Ge]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...je(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ct,"from-font","auto",Ke,Lc]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[Ct,"auto",Ke,Ge]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke,Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke,Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:ie()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},bl,Ke,Ge],radial:["",Ke,Ge],conic:[bl,Ke,Ge]},AB,EB]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:we()}],"rounded-s":[{"rounded-s":we()}],"rounded-e":[{"rounded-e":we()}],"rounded-t":[{"rounded-t":we()}],"rounded-r":[{"rounded-r":we()}],"rounded-b":[{"rounded-b":we()}],"rounded-l":[{"rounded-l":we()}],"rounded-ss":[{"rounded-ss":we()}],"rounded-se":[{"rounded-se":we()}],"rounded-ee":[{"rounded-ee":we()}],"rounded-es":[{"rounded-es":we()}],"rounded-tl":[{"rounded-tl":we()}],"rounded-tr":[{"rounded-tr":we()}],"rounded-br":[{"rounded-br":we()}],"rounded-bl":[{"rounded-bl":we()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...je(),"hidden","none"]}],"divide-style":[{divide:[...je(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ct,Ke,Ge]}],"outline-w":[{outline:["",Ct,gh,Lc]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",y,Rm,Im]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",g,Rm,Im]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[Ct,Lc]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",b,Rm,Im]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[Ct,Ke,Ge]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ct]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ke,Ge]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":H()}],"mask-image-conic-pos":[{"mask-conic":[Ct]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:ie()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ke,Ge]}],filter:[{filter:["","none",Ke,Ge]}],blur:[{blur:ke()}],brightness:[{brightness:[Ct,Ke,Ge]}],contrast:[{contrast:[Ct,Ke,Ge]}],"drop-shadow":[{"drop-shadow":["","none",E,Rm,Im]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",Ct,Ke,Ge]}],"hue-rotate":[{"hue-rotate":[Ct,Ke,Ge]}],invert:[{invert:["",Ct,Ke,Ge]}],saturate:[{saturate:[Ct,Ke,Ge]}],sepia:[{sepia:["",Ct,Ke,Ge]}],"backdrop-filter":[{"backdrop-filter":["","none",Ke,Ge]}],"backdrop-blur":[{"backdrop-blur":ke()}],"backdrop-brightness":[{"backdrop-brightness":[Ct,Ke,Ge]}],"backdrop-contrast":[{"backdrop-contrast":[Ct,Ke,Ge]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ct,Ke,Ge]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ct,Ke,Ge]}],"backdrop-invert":[{"backdrop-invert":["",Ct,Ke,Ge]}],"backdrop-opacity":[{"backdrop-opacity":[Ct,Ke,Ge]}],"backdrop-saturate":[{"backdrop-saturate":[Ct,Ke,Ge]}],"backdrop-sepia":[{"backdrop-sepia":["",Ct,Ke,Ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ke,Ge]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ct,"initial",Ke,Ge]}],ease:[{ease:["linear","initial",R,Ke,Ge]}],delay:[{delay:[Ct,Ke,Ge]}],animate:[{animate:["none",I,Ke,Ge]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Ke,Ge]}],"perspective-origin":[{"perspective-origin":G()}],rotate:[{rotate:Xe()}],"rotate-x":[{"rotate-x":Xe()}],"rotate-y":[{"rotate-y":Xe()}],"rotate-z":[{"rotate-z":Xe()}],scale:[{scale:tt()}],"scale-x":[{"scale-x":tt()}],"scale-y":[{"scale-y":tt()}],"scale-z":[{"scale-z":tt()}],"scale-3d":["scale-3d"],skew:[{skew:yt()}],"skew-x":[{"skew-x":yt()}],"skew-y":[{"skew-y":yt()}],transform:[{transform:[Ke,Ge,"","none","gpu","cpu"]}],"transform-origin":[{origin:G()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:wt()}],"translate-x":[{"translate-x":wt()}],"translate-y":[{"translate-y":wt()}],"translate-z":[{"translate-z":wt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke,Ge]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke,Ge]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[Ct,gh,Lc,Dv]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},RB=hB(IB);function ft(...t){return RB(hS(t))}const _w=fS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function X({className:t,variant:e,size:n,asChild:r=!1,...i}){const o=r?uS:"button";return s.jsx(o,{"data-slot":"button",className:ft(_w({variant:e,size:n,className:t})),...i})}const LB=fS("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Qe({className:t,variant:e,asChild:n=!1,...r}){const i=n?uS:"span";return s.jsx(i,{"data-slot":"badge",className:ft(LB({variant:e}),t),...r})}function MB(t){const e=DB(t),n=_.forwardRef((r,i)=>{const{children:o,...u}=r,d=_.Children.toArray(o),f=d.find(FB);if(f){const p=f.props.children,y=d.map(g=>g===f?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:g);return s.jsx(e,{...u,ref:i,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return s.jsx(e,{...u,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function DB(t){const e=_.forwardRef((n,r)=>{const{children:i,...o}=n;if(_.isValidElement(i)){const u=BB(i),d=VB(o,i.props);return i.type!==_.Fragment&&(d.ref=r?Fo(r,u):u),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var OB=Symbol("radix.slottable");function FB(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OB}function VB(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{const f=o(...d);return i(...d),f}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function BB(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=zB.reduce((t,e)=>{const n=MB(`Primitive.${e}`),r=_.forwardRef((i,o)=>{const{asChild:u,...d}=i,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ES(t,e){t&&bd.flushSync(()=>t.dispatchEvent(e))}var Hn=globalThis?.document?_.useLayoutEffect:()=>{};function UB(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var rr=t=>{const{present:e,children:n}=t,r=$B(e),i=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),o=mt(r.ref,HB(i));return typeof n=="function"||r.isPresent?_.cloneElement(i,{ref:o}):null};rr.displayName="Presence";function $B(t){const[e,n]=_.useState(),r=_.useRef(null),i=_.useRef(t),o=_.useRef("none"),u=t?"mounted":"unmounted",[d,f]=UB(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const p=Lm(r.current);o.current=d==="mounted"?p:"none"},[d]),Hn(()=>{const p=r.current,y=i.current;if(y!==t){const b=o.current,E=Lm(p);t?f("MOUNT"):E==="none"||p?.display==="none"?f("UNMOUNT"):f(y&&b!==E?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,f]),Hn(()=>{if(e){let p;const y=e.ownerDocument.defaultView??window,g=E=>{const S=Lm(r.current).includes(CSS.escape(E.animationName));if(E.target===e&&S&&(f("ANIMATION_END"),!i.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",p=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},b=E=>{E.target===e&&(o.current=Lm(r.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{y.clearTimeout(p),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:_.useCallback(p=>{r.current=p?getComputedStyle(p):null,n(p)},[])}}function Lm(t){return t?.animationName||"none"}function HB(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function WB(t,e){const n=_.createContext(e),r=o=>{const{children:u,...d}=o,f=_.useMemo(()=>d,Object.values(d));return s.jsx(n.Provider,{value:f,children:u})};r.displayName=t+"Provider";function i(o){const u=_.useContext(n);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function ir(t,e=[]){let n=[];function r(o,u){const d=_.createContext(u),f=n.length;n=[...n,u];const p=g=>{const{scope:b,children:E,...N}=g,S=b?.[t]?.[f]||d,k=_.useMemo(()=>N,Object.values(N));return s.jsx(S.Provider,{value:k,children:E})};p.displayName=o+"Provider";function y(g,b){const E=b?.[t]?.[f]||d,N=_.useContext(E);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[p,y]}const i=()=>{const o=n.map(u=>_.createContext(u));return function(d){const f=d?.[t]||o;return _.useMemo(()=>({[`__scope${t}`]:{...d,[t]:f}}),[d,f])}};return i.scopeName=t,[r,qB(i,...e)]}function qB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const u=r.reduce((d,{useScope:f,scopeName:p})=>{const g=f(o)[`__scope${p}`];return{...d,...g}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}function ls(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>e.current?.(...n),[])}var GB=_.createContext(void 0);function ru(t){const e=_.useContext(GB);return t||e||"ltr"}function Gh(t,[e,n]){return Math.min(n,Math.max(e,t))}function Fe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function KB(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var bw="ScrollArea",[SS]=ir(bw),[ZB,ki]=SS(bw),TS=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...u}=t,[d,f]=_.useState(null),[p,y]=_.useState(null),[g,b]=_.useState(null),[E,N]=_.useState(null),[S,k]=_.useState(null),[R,I]=_.useState(0),[z,H]=_.useState(0),[G,Q]=_.useState(!1),[F,D]=_.useState(!1),O=mt(e,$=>f($)),U=ru(i);return s.jsx(ZB,{scope:n,type:r,dir:U,scrollHideDelay:o,scrollArea:d,viewport:p,onViewportChange:y,content:g,onContentChange:b,scrollbarX:E,onScrollbarXChange:N,scrollbarXEnabled:G,onScrollbarXEnabledChange:Q,scrollbarY:S,onScrollbarYChange:k,scrollbarYEnabled:F,onScrollbarYEnabledChange:D,onCornerWidthChange:I,onCornerHeightChange:H,children:s.jsx(Je.div,{dir:U,...u,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":z+"px",...t.style}})})});TS.displayName=bw;var AS="ScrollAreaViewport",kS=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...o}=t,u=ki(AS,n),d=_.useRef(null),f=mt(e,d,u.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...o,ref:f,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...t.style},children:s.jsx("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});kS.displayName=AS;var Ba="ScrollAreaScrollbar",PS=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ki(Ba,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:u}=i,d=t.orientation==="horizontal";return _.useEffect(()=>(d?o(!0):u(!0),()=>{d?o(!1):u(!1)}),[d,o,u]),i.type==="hover"?s.jsx(YB,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(QB,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(IS,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(Nw,{...r,ref:e}):null});PS.displayName=Ba;var YB=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ki(Ba,t.__scopeScrollArea),[o,u]=_.useState(!1);return _.useEffect(()=>{const d=i.scrollArea;let f=0;if(d){const p=()=>{window.clearTimeout(f),u(!0)},y=()=>{f=window.setTimeout(()=>u(!1),i.scrollHideDelay)};return d.addEventListener("pointerenter",p),d.addEventListener("pointerleave",y),()=>{window.clearTimeout(f),d.removeEventListener("pointerenter",p),d.removeEventListener("pointerleave",y)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(rr,{present:n||o,children:s.jsx(IS,{"data-state":o?"visible":"hidden",...r,ref:e})})}),QB=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ki(Ba,t.__scopeScrollArea),o=t.orientation==="horizontal",u=Sg(()=>f("SCROLL_END"),100),[d,f]=KB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(d==="idle"){const p=window.setTimeout(()=>f("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(p)}},[d,i.scrollHideDelay,f]),_.useEffect(()=>{const p=i.viewport,y=o?"scrollLeft":"scrollTop";if(p){let g=p[y];const b=()=>{const E=p[y];g!==E&&(f("SCROLL"),u()),g=E};return p.addEventListener("scroll",b),()=>p.removeEventListener("scroll",b)}},[i.viewport,o,f,u]),s.jsx(rr,{present:n||d!=="hidden",children:s.jsx(Nw,{"data-state":d==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Fe(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Fe(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),IS=_.forwardRef((t,e)=>{const n=ki(Ba,t.__scopeScrollArea),{forceMount:r,...i}=t,[o,u]=_.useState(!1),d=t.orientation==="horizontal",f=Sg(()=>{if(n.viewport){const p=n.viewport.offsetWidth<n.viewport.scrollWidth,y=n.viewport.offsetHeight<n.viewport.scrollHeight;u(d?p:y)}},10);return gd(n.viewport,f),gd(n.content,f),s.jsx(rr,{present:r||o,children:s.jsx(Nw,{"data-state":o?"visible":"hidden",...i,ref:e})})}),Nw=_.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ki(Ba,t.__scopeScrollArea),o=_.useRef(null),u=_.useRef(0),[d,f]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=OS(d.viewport,d.content),y={...r,sizes:d,onSizesChange:f,hasThumb:p>0&&p<1,onThumbChange:b=>o.current=b,onThumbPointerUp:()=>u.current=0,onThumbPointerDown:b=>u.current=b};function g(b,E){return s8(b,u.current,d,E)}return n==="horizontal"?s.jsx(XB,{...y,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const b=i.viewport.scrollLeft,E=Jj(b,d,i.dir);o.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:b=>{i.viewport&&(i.viewport.scrollLeft=b)},onDragScroll:b=>{i.viewport&&(i.viewport.scrollLeft=g(b,i.dir))}}):n==="vertical"?s.jsx(JB,{...y,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const b=i.viewport.scrollTop,E=Jj(b,d);o.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:b=>{i.viewport&&(i.viewport.scrollTop=b)},onDragScroll:b=>{i.viewport&&(i.viewport.scrollTop=g(b))}}):null}),XB=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,o=ki(Ba,t.__scopeScrollArea),[u,d]=_.useState(),f=_.useRef(null),p=mt(e,f,o.onScrollbarXChange);return _.useEffect(()=>{f.current&&d(getComputedStyle(f.current))},[f]),s.jsx(LS,{"data-orientation":"horizontal",...i,ref:p,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Eg(n)+"px",...t.style},onThumbPointerDown:y=>t.onThumbPointerDown(y.x),onDragScroll:y=>t.onDragScroll(y.x),onWheelScroll:(y,g)=>{if(o.viewport){const b=o.viewport.scrollLeft+y.deltaX;t.onWheelScroll(b),VS(b,g)&&y.preventDefault()}},onResize:()=>{f.current&&o.viewport&&u&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Pp(u.paddingLeft),paddingEnd:Pp(u.paddingRight)}})}})}),JB=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,o=ki(Ba,t.__scopeScrollArea),[u,d]=_.useState(),f=_.useRef(null),p=mt(e,f,o.onScrollbarYChange);return _.useEffect(()=>{f.current&&d(getComputedStyle(f.current))},[f]),s.jsx(LS,{"data-orientation":"vertical",...i,ref:p,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Eg(n)+"px",...t.style},onThumbPointerDown:y=>t.onThumbPointerDown(y.y),onDragScroll:y=>t.onDragScroll(y.y),onWheelScroll:(y,g)=>{if(o.viewport){const b=o.viewport.scrollTop+y.deltaY;t.onWheelScroll(b),VS(b,g)&&y.preventDefault()}},onResize:()=>{f.current&&o.viewport&&u&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Pp(u.paddingTop),paddingEnd:Pp(u.paddingBottom)}})}})}),[e8,RS]=SS(Ba),LS=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:u,onThumbPointerDown:d,onThumbPositionChange:f,onDragScroll:p,onWheelScroll:y,onResize:g,...b}=t,E=ki(Ba,n),[N,S]=_.useState(null),k=mt(e,O=>S(O)),R=_.useRef(null),I=_.useRef(""),z=E.viewport,H=r.content-r.viewport,G=ls(y),Q=ls(f),F=Sg(g,10);function D(O){if(R.current){const U=O.clientX-R.current.left,$=O.clientY-R.current.top;p({x:U,y:$})}}return _.useEffect(()=>{const O=U=>{const $=U.target;N?.contains($)&&G(U,H)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[z,N,H,G]),_.useEffect(Q,[r,Q]),gd(N,F),gd(E.content,F),s.jsx(e8,{scope:n,scrollbar:N,hasThumb:i,onThumbChange:ls(o),onThumbPointerUp:ls(u),onThumbPositionChange:Q,onThumbPointerDown:ls(d),children:s.jsx(Je.div,{...b,ref:k,style:{position:"absolute",...b.style},onPointerDown:Fe(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),R.current=N.getBoundingClientRect(),I.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),D(O))}),onPointerMove:Fe(t.onPointerMove,D),onPointerUp:Fe(t.onPointerUp,O=>{const U=O.target;U.hasPointerCapture(O.pointerId)&&U.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=I.current,E.viewport&&(E.viewport.style.scrollBehavior=""),R.current=null})})})}),kp="ScrollAreaThumb",MS=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=RS(kp,t.__scopeScrollArea);return s.jsx(rr,{present:n||i.hasThumb,children:s.jsx(t8,{ref:e,...r})})}),t8=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,o=ki(kp,n),u=RS(kp,n),{onThumbPositionChange:d}=u,f=mt(e,g=>u.onThumbChange(g)),p=_.useRef(void 0),y=Sg(()=>{p.current&&(p.current(),p.current=void 0)},100);return _.useEffect(()=>{const g=o.viewport;if(g){const b=()=>{if(y(),!p.current){const E=r8(g,d);p.current=E,d()}};return d(),g.addEventListener("scroll",b),()=>g.removeEventListener("scroll",b)}},[o.viewport,y,d]),s.jsx(Je.div,{"data-state":u.hasThumb?"visible":"hidden",...i,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(t.onPointerDownCapture,g=>{const E=g.target.getBoundingClientRect(),N=g.clientX-E.left,S=g.clientY-E.top;u.onThumbPointerDown({x:N,y:S})}),onPointerUp:Fe(t.onPointerUp,u.onThumbPointerUp)})});MS.displayName=kp;var jw="ScrollAreaCorner",DS=_.forwardRef((t,e)=>{const n=ki(jw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(n8,{...t,ref:e}):null});DS.displayName=jw;var n8=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ki(jw,n),[o,u]=_.useState(0),[d,f]=_.useState(0),p=!!(o&&d);return gd(i.scrollbarX,()=>{const y=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(y),f(y)}),gd(i.scrollbarY,()=>{const y=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(y),u(y)}),p?s.jsx(Je.div,{...r,ref:e,style:{width:o,height:d,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Pp(t){return t?parseInt(t,10):0}function OS(t,e){const n=t/e;return isNaN(n)?0:n}function Eg(t){const e=OS(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function s8(t,e,n,r="ltr"){const i=Eg(n),o=i/2,u=e||o,d=i-u,f=n.scrollbar.paddingStart+u,p=n.scrollbar.size-n.scrollbar.paddingEnd-d,y=n.content-n.viewport,g=r==="ltr"?[0,y]:[y*-1,0];return FS([f,p],g)(t)}function Jj(t,e,n="ltr"){const r=Eg(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-i,u=e.content-e.viewport,d=o-r,f=n==="ltr"?[0,u]:[u*-1,0],p=Gh(t,f);return FS([0,u],[0,d])(p)}function FS(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function VS(t,e){return t>0&&t<e}var r8=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function i(){const o={left:t.scrollLeft,top:t.scrollTop},u=n.left!==o.left,d=n.top!==o.top;(u||d)&&e(),n=o,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function Sg(t,e){const n=ls(t),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function gd(t,e){const n=ls(e);Hn(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var i8=TS,a8=kS,o8=DS;function BS({className:t,children:e,...n}){return s.jsxs(i8,{"data-slot":"scroll-area",className:ft("relative",t),...n,children:[s.jsx(a8,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),s.jsx(l8,{}),s.jsx(o8,{})]})}function l8({className:t,orientation:e="vertical",...n}){return s.jsx(PS,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ft("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:s.jsx(MS,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function c8(){const[t,e]=_.useState(!1),[n,r]=_.useState([]),i=_.useRef(null),o=gt.currentUser;_.useEffect(()=>{if(!o)return;const E=Wt(lt(Te,"notifications"),Yn("userId","==",o.uid),_s("timestamp","desc")),N=Yr(E,S=>{const k=S.docs.map(R=>({id:R.id,...R.data()}));r(k)},S=>{console.error("Error fetching notifications:",S)});return()=>N()},[o]);const u=n.filter(E=>!E.read).length;_.useEffect(()=>{const E=N=>{i.current&&!i.current.contains(N.target)&&e(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const d=E=>{if(!E)return"";const N=E instanceof nn?E.toDate():new Date(E),k=Math.floor((new Date().getTime()-N.getTime())/1e3);return k<60?"Just now":k<3600?`${Math.floor(k/60)}m ago`:k<86400?`${Math.floor(k/3600)}h ago`:k<604800?`${Math.floor(k/86400)}d ago`:N.toLocaleDateString()},f=async E=>{try{const N=ht(Te,"notifications",E);await un(N,{read:!0})}catch(N){console.error("Error marking notification as read:",N),ue.error("Failed to update notification")}},p=async()=>{try{const E=Lj(Te);n.filter(S=>!S.read).forEach(S=>{const k=ht(Te,"notifications",S.id);E.update(k,{read:!0})}),await E.commit(),ue.success("All notifications marked as read")}catch(E){console.error("Error marking all as read:",E),ue.error("Failed to update notifications")}},y=async E=>{try{await Po(ht(Te,"notifications",E)),ue.success("Notification removed")}catch(N){console.error("Error deleting notification:",N),ue.error("Failed to delete notification")}},g=async()=>{try{const E=Lj(Te);n.forEach(N=>{const S=ht(Te,"notifications",N.id);E.delete(S)}),await E.commit(),ue.success("All notifications cleared")}catch(E){console.error("Error clearing notifications:",E),ue.error("Failed to clear notifications")}},b=E=>{switch(E){case"order":return"bg-green-100 text-green-600";case"message":return"bg-blue-100 text-blue-600";case"community":return"bg-purple-100 text-purple-600";case"system":return"bg-orange-100 text-orange-600";default:return"bg-gray-100 text-gray-600"}};return s.jsxs("div",{className:"relative",ref:i,children:[s.jsxs("button",{onClick:()=>e(!t),className:"relative p-2 text-[#2C3E50] hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx($l,{className:"w-6 h-6"}),u>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-pulse",children:u>9?"9+":u})]}),t&&s.jsxs("div",{className:"absolute right-0 mt-2 w-96 max-w-[calc(100vw-2rem)] bg-white rounded-lg shadow-xl border border-gray-200 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Notifications"}),u>0&&s.jsxs(Qe,{variant:"default",className:"bg-red-500",children:[u," new"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[u>0&&s.jsx("button",{onClick:p,className:"text-xs text-[#C4A672] hover:underline",children:"Mark all read"}),s.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Dt,{className:"w-5 h-5"})})]})]}),n.length>0?s.jsxs(s.Fragment,{children:[s.jsx(BS,{className:"max-h-96",children:s.jsx("div",{className:"divide-y divide-gray-100",children:n.map(E=>s.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${E.read?"":"bg-blue-50/50"}`,children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${b(E.type)}`,children:[E.type==="order"&&"",E.type==="message"&&"",E.type==="community"&&"",E.type==="system"&&""]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h4",{className:"text-[#2C3E50] text-sm",children:E.title}),!E.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:d(E.timestamp)}),s.jsxs("div",{className:"flex items-center gap-1",children:[!E.read&&s.jsx("button",{onClick:()=>f(E.id),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Mark as read",children:s.jsx(Qr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>y(E.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:s.jsx(Wl,{className:"w-4 h-4"})})]})]})]})]})},E.id))})}),s.jsxs("div",{className:"p-3 border-t border-gray-200 flex items-center justify-between",children:[s.jsxs(X,{variant:"ghost",size:"sm",onClick:g,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Clear All"]}),s.jsxs(X,{variant:"ghost",size:"sm",className:"text-[#C4A672] hover:text-[#8B7355]",children:[s.jsx(bg,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}):s.jsxs("div",{className:"p-12 text-center",children:[s.jsx($l,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-sm text-gray-400",children:"You're all caught up!"})]})]})]})}var u8=Zy[" useId ".trim().toString()]||(()=>{}),d8=0;function Ra(t){const[e,n]=_.useState(u8());return Hn(()=>{n(r=>r??String(d8++))},[t]),t||(e?`radix-${e}`:"")}var h8=Zy[" useInsertionEffect ".trim().toString()]||Hn;function Oa({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,o,u]=f8({defaultProp:e,onChange:n}),d=t!==void 0,f=d?t:i;{const y=_.useRef(t!==void 0);_.useEffect(()=>{const g=y.current;g!==d&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=d},[d,r])}const p=_.useCallback(y=>{if(d){const g=m8(y)?y(t):y;g!==t&&u.current?.(g)}else o(y)},[d,t,o,u]);return[f,p]}function f8({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),i=_.useRef(n),o=_.useRef(e);return h8(()=>{o.current=e},[e]),_.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function m8(t){return typeof t=="function"}function p8(t,e=globalThis?.document){const n=ls(t);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var g8="DismissableLayer",Py="dismissableLayer.update",x8="dismissableLayer.pointerDownOutside",v8="dismissableLayer.focusOutside",e1,zS=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tg=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:u,onDismiss:d,...f}=t,p=_.useContext(zS),[y,g]=_.useState(null),b=y?.ownerDocument??globalThis?.document,[,E]=_.useState({}),N=mt(e,F=>g(F)),S=Array.from(p.layers),[k]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),R=S.indexOf(k),I=y?S.indexOf(y):-1,z=p.layersWithOutsidePointerEventsDisabled.size>0,H=I>=R,G=_8(F=>{const D=F.target,O=[...p.branches].some(U=>U.contains(D));!H||O||(i?.(F),u?.(F),F.defaultPrevented||d?.())},b),Q=b8(F=>{const D=F.target;[...p.branches].some(U=>U.contains(D))||(o?.(F),u?.(F),F.defaultPrevented||d?.())},b);return p8(F=>{I===p.layers.size-1&&(r?.(F),!F.defaultPrevented&&d&&(F.preventDefault(),d()))},b),_.useEffect(()=>{if(y)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(e1=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),t1(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=e1)}},[y,b,n,p]),_.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),t1())},[y,p]),_.useEffect(()=>{const F=()=>E({});return document.addEventListener(Py,F),()=>document.removeEventListener(Py,F)},[]),s.jsx(Je.div,{...f,ref:N,style:{pointerEvents:z?H?"auto":"none":void 0,...t.style},onFocusCapture:Fe(t.onFocusCapture,Q.onFocusCapture),onBlurCapture:Fe(t.onBlurCapture,Q.onBlurCapture),onPointerDownCapture:Fe(t.onPointerDownCapture,G.onPointerDownCapture)})});Tg.displayName=g8;var y8="DismissableLayerBranch",w8=_.forwardRef((t,e)=>{const n=_.useContext(zS),r=_.useRef(null),i=mt(e,r);return _.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(Je.div,{...t,ref:i})});w8.displayName=y8;function _8(t,e=globalThis?.document){const n=ls(t),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const o=d=>{if(d.target&&!r.current){let f=function(){US(x8,n,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=f,e.addEventListener("click",i.current,{once:!0})):f()}else e.removeEventListener("click",i.current);r.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function b8(t,e=globalThis?.document){const n=ls(t),r=_.useRef(!1);return _.useEffect(()=>{const i=o=>{o.target&&!r.current&&US(v8,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function t1(){const t=new CustomEvent(Py);document.dispatchEvent(t)}function US(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ES(i,o):i.dispatchEvent(o)}var Ov="focusScope.autoFocusOnMount",Fv="focusScope.autoFocusOnUnmount",n1={bubbles:!1,cancelable:!0},N8="FocusScope",Ag=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...u}=t,[d,f]=_.useState(null),p=ls(i),y=ls(o),g=_.useRef(null),b=mt(e,S=>f(S)),E=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let S=function(z){if(E.paused||!d)return;const H=z.target;d.contains(H)?g.current=H:Nl(g.current,{select:!0})},k=function(z){if(E.paused||!d)return;const H=z.relatedTarget;H!==null&&(d.contains(H)||Nl(g.current,{select:!0}))},R=function(z){if(document.activeElement===document.body)for(const G of z)G.removedNodes.length>0&&Nl(d)};document.addEventListener("focusin",S),document.addEventListener("focusout",k);const I=new MutationObserver(R);return d&&I.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",k),I.disconnect()}}},[r,d,E.paused]),_.useEffect(()=>{if(d){r1.add(E);const S=document.activeElement;if(!d.contains(S)){const R=new CustomEvent(Ov,n1);d.addEventListener(Ov,p),d.dispatchEvent(R),R.defaultPrevented||(j8(A8($S(d)),{select:!0}),document.activeElement===S&&Nl(d))}return()=>{d.removeEventListener(Ov,p),setTimeout(()=>{const R=new CustomEvent(Fv,n1);d.addEventListener(Fv,y),d.dispatchEvent(R),R.defaultPrevented||Nl(S??document.body,{select:!0}),d.removeEventListener(Fv,y),r1.remove(E)},0)}}},[d,p,y,E]);const N=_.useCallback(S=>{if(!n&&!r||E.paused)return;const k=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,R=document.activeElement;if(k&&R){const I=S.currentTarget,[z,H]=C8(I);z&&H?!S.shiftKey&&R===H?(S.preventDefault(),n&&Nl(z,{select:!0})):S.shiftKey&&R===z&&(S.preventDefault(),n&&Nl(H,{select:!0})):R===I&&S.preventDefault()}},[n,r,E.paused]);return s.jsx(Je.div,{tabIndex:-1,...u,ref:b,onKeyDown:N})});Ag.displayName=N8;function j8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Nl(r,{select:e}),document.activeElement!==n)return}function C8(t){const e=$S(t),n=s1(e,t),r=s1(e.reverse(),t);return[n,r]}function $S(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function s1(t,e){for(const n of t)if(!E8(n,{upTo:e}))return n}function E8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function S8(t){return t instanceof HTMLInputElement&&"select"in t}function Nl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&S8(t)&&e&&t.select()}}var r1=T8();function T8(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=i1(t,e),t.unshift(e)},remove(e){t=i1(t,e),t[0]?.resume()}}}function i1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function A8(t){return t.filter(e=>e.tagName!=="A")}var k8="Portal",kg=_.forwardRef((t,e)=>{const{container:n,...r}=t,[i,o]=_.useState(!1);Hn(()=>o(!0),[]);const u=n||i&&globalThis?.document?.body;return u?Z1.createPortal(s.jsx(Je.div,{...r,ref:e}),u):null});kg.displayName=k8;var Vv=0;function Cw(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??a1()),document.body.insertAdjacentElement("beforeend",t[1]??a1()),Vv++,()=>{Vv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vv--}},[])}function a1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ba=function(){return ba=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ba.apply(this,arguments)};function HS(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function P8(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Jm="right-scroll-bar-position",ep="width-before-scroll-bar",I8="with-scroll-bars-hidden",R8="--removed-body-scroll-bar-size";function Bv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function L8(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var M8=typeof window<"u"?_.useLayoutEffect:_.useEffect,o1=new WeakMap;function D8(t,e){var n=L8(null,function(r){return t.forEach(function(i){return Bv(i,r)})});return M8(function(){var r=o1.get(n);if(r){var i=new Set(r),o=new Set(t),u=n.current;i.forEach(function(d){o.has(d)||Bv(d,null)}),o.forEach(function(d){i.has(d)||Bv(d,u)})}o1.set(n,t)},[t]),n}function O8(t){return t}function F8(t,e){e===void 0&&(e=O8);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var u=e(o,r);return n.push(u),function(){n=n.filter(function(d){return d!==u})}},assignSyncMedium:function(o){for(r=!0;n.length;){var u=n;n=[],u.forEach(o)}n={push:function(d){return o(d)},filter:function(){return n}}},assignMedium:function(o){r=!0;var u=[];if(n.length){var d=n;n=[],d.forEach(o),u=n}var f=function(){var y=u;u=[],y.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),n={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),n}}}};return i}function V8(t){t===void 0&&(t={});var e=F8(null);return e.options=ba({async:!0,ssr:!1},t),e}var WS=function(t){var e=t.sideCar,n=HS(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,ba({},n))};WS.isSideCarExport=!0;function B8(t,e){return t.useMedium(e),WS}var qS=V8(),zv=function(){},Pg=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:zv,onWheelCapture:zv,onTouchMoveCapture:zv}),i=r[0],o=r[1],u=t.forwardProps,d=t.children,f=t.className,p=t.removeScrollBar,y=t.enabled,g=t.shards,b=t.sideCar,E=t.noRelative,N=t.noIsolation,S=t.inert,k=t.allowPinchZoom,R=t.as,I=R===void 0?"div":R,z=t.gapMode,H=HS(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),G=b,Q=D8([n,e]),F=ba(ba({},H),i);return _.createElement(_.Fragment,null,y&&_.createElement(G,{sideCar:qS,removeScrollBar:p,shards:g,noRelative:E,noIsolation:N,inert:S,setCallbacks:o,allowPinchZoom:!!k,lockRef:n,gapMode:z}),u?_.cloneElement(_.Children.only(d),ba(ba({},F),{ref:Q})):_.createElement(I,ba({},F,{className:f,ref:Q}),d))});Pg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pg.classNames={fullWidth:ep,zeroRight:Jm};var z8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function U8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=z8();return e&&t.setAttribute("nonce",e),t}function $8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function H8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var W8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=U8())&&($8(e,n),H8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},q8=function(){var t=W8();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},GS=function(){var t=q8(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},G8={left:0,top:0,right:0,gap:0},Uv=function(t){return parseInt(t||"",10)||0},K8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Uv(n),Uv(r),Uv(i)]},Z8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return G8;var e=K8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Y8=GS(),Ju="data-scroll-locked",Q8=function(t,e,n,r){var i=t.left,o=t.top,u=t.right,d=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(I8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(d,"px ").concat(r,`;
  }
  body[`).concat(Ju,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(d,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jm,` {
    right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(ep,` {
    margin-right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(Jm," .").concat(Jm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ep," .").concat(ep,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ju,`] {
    `).concat(R8,": ").concat(d,`px;
  }
`)},l1=function(){var t=parseInt(document.body.getAttribute(Ju)||"0",10);return isFinite(t)?t:0},X8=function(){_.useEffect(function(){return document.body.setAttribute(Ju,(l1()+1).toString()),function(){var t=l1()-1;t<=0?document.body.removeAttribute(Ju):document.body.setAttribute(Ju,t.toString())}},[])},J8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;X8();var o=_.useMemo(function(){return Z8(i)},[i]);return _.createElement(Y8,{styles:Q8(o,!e,i,n?"":"!important")})},Iy=!1;if(typeof window<"u")try{var Mm=Object.defineProperty({},"passive",{get:function(){return Iy=!0,!0}});window.addEventListener("test",Mm,Mm),window.removeEventListener("test",Mm,Mm)}catch{Iy=!1}var Du=Iy?{passive:!1}:!1,ez=function(t){return t.tagName==="TEXTAREA"},KS=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ez(t)&&n[e]==="visible")},tz=function(t){return KS(t,"overflowY")},nz=function(t){return KS(t,"overflowX")},c1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ZS(t,r);if(i){var o=YS(t,r),u=o[1],d=o[2];if(u>d)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},ZS=function(t,e){return t==="v"?tz(e):nz(e)},YS=function(t,e){return t==="v"?sz(e):rz(e)},iz=function(t,e){return t==="h"&&e==="rtl"?-1:1},az=function(t,e,n,r,i){var o=iz(t,window.getComputedStyle(e).direction),u=o*r,d=n.target,f=e.contains(d),p=!1,y=u>0,g=0,b=0;do{if(!d)break;var E=YS(t,d),N=E[0],S=E[1],k=E[2],R=S-k-o*N;(N||R)&&ZS(t,d)&&(g+=R,b+=N);var I=d.parentNode;d=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!f&&d!==document.body||f&&(e.contains(d)||e===d));return(y&&Math.abs(g)<1||!y&&Math.abs(b)<1)&&(p=!0),p},Dm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},u1=function(t){return[t.deltaX,t.deltaY]},d1=function(t){return t&&"current"in t?t.current:t},oz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cz=0,Ou=[];function uz(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),i=_.useState(cz++)[0],o=_.useState(GS)[0],u=_.useRef(t);_.useEffect(function(){u.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var S=P8([t.lockRef.current],(t.shards||[]).map(d1),!0).filter(Boolean);return S.forEach(function(k){return k.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),S.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var d=_.useCallback(function(S,k){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var R=Dm(S),I=n.current,z="deltaX"in S?S.deltaX:I[0]-R[0],H="deltaY"in S?S.deltaY:I[1]-R[1],G,Q=S.target,F=Math.abs(z)>Math.abs(H)?"h":"v";if("touches"in S&&F==="h"&&Q.type==="range")return!1;var D=window.getSelection(),O=D&&D.anchorNode,U=O?O===Q||O.contains(Q):!1;if(U)return!1;var $=c1(F,Q);if(!$)return!0;if($?G=F:(G=F==="v"?"h":"v",$=c1(F,Q)),!$)return!1;if(!r.current&&"changedTouches"in S&&(z||H)&&(r.current=G),!G)return!0;var K=r.current||G;return az(K,k,S,K==="h"?z:H)},[]),f=_.useCallback(function(S){var k=S;if(!(!Ou.length||Ou[Ou.length-1]!==o)){var R="deltaY"in k?u1(k):Dm(k),I=e.current.filter(function(G){return G.name===k.type&&(G.target===k.target||k.target===G.shadowParent)&&oz(G.delta,R)})[0];if(I&&I.should){k.cancelable&&k.preventDefault();return}if(!I){var z=(u.current.shards||[]).map(d1).filter(Boolean).filter(function(G){return G.contains(k.target)}),H=z.length>0?d(k,z[0]):!u.current.noIsolation;H&&k.cancelable&&k.preventDefault()}}},[]),p=_.useCallback(function(S,k,R,I){var z={name:S,delta:k,target:R,should:I,shadowParent:dz(R)};e.current.push(z),setTimeout(function(){e.current=e.current.filter(function(H){return H!==z})},1)},[]),y=_.useCallback(function(S){n.current=Dm(S),r.current=void 0},[]),g=_.useCallback(function(S){p(S.type,u1(S),S.target,d(S,t.lockRef.current))},[]),b=_.useCallback(function(S){p(S.type,Dm(S),S.target,d(S,t.lockRef.current))},[]);_.useEffect(function(){return Ou.push(o),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:b}),document.addEventListener("wheel",f,Du),document.addEventListener("touchmove",f,Du),document.addEventListener("touchstart",y,Du),function(){Ou=Ou.filter(function(S){return S!==o}),document.removeEventListener("wheel",f,Du),document.removeEventListener("touchmove",f,Du),document.removeEventListener("touchstart",y,Du)}},[]);var E=t.removeScrollBar,N=t.inert;return _.createElement(_.Fragment,null,N?_.createElement(o,{styles:lz(i)}):null,E?_.createElement(J8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function dz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const hz=B8(qS,uz);var Ig=_.forwardRef(function(t,e){return _.createElement(Pg,ba({},t,{ref:e,sideCar:hz}))});Ig.classNames=Pg.classNames;var fz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fu=new WeakMap,Om=new WeakMap,Fm={},$v=0,QS=function(t){return t&&(t.host||QS(t.parentNode))},mz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=QS(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},pz=function(t,e,n,r){var i=mz(e,Array.isArray(t)?t:[t]);Fm[n]||(Fm[n]=new WeakMap);var o=Fm[n],u=[],d=new Set,f=new Set(i),p=function(g){!g||d.has(g)||(d.add(g),p(g.parentNode))};i.forEach(p);var y=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(b){if(d.has(b))y(b);else try{var E=b.getAttribute(r),N=E!==null&&E!=="false",S=(Fu.get(b)||0)+1,k=(o.get(b)||0)+1;Fu.set(b,S),o.set(b,k),u.push(b),S===1&&N&&Om.set(b,!0),k===1&&b.setAttribute(n,"true"),N||b.setAttribute(r,"true")}catch(R){console.error("aria-hidden: cannot operate on ",b,R)}})};return y(e),d.clear(),$v++,function(){u.forEach(function(g){var b=Fu.get(g)-1,E=o.get(g)-1;Fu.set(g,b),o.set(g,E),b||(Om.has(g)||g.removeAttribute(r),Om.delete(g)),E||g.removeAttribute(n)}),$v--,$v||(Fu=new WeakMap,Fu=new WeakMap,Om=new WeakMap,Fm={})}},Ew=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=fz(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),pz(r,i,n,"aria-hidden")):function(){return null}};function gz(t){const e=xz(t),n=_.forwardRef((r,i)=>{const{children:o,...u}=r,d=_.Children.toArray(o),f=d.find(yz);if(f){const p=f.props.children,y=d.map(g=>g===f?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:g);return s.jsx(e,{...u,ref:i,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return s.jsx(e,{...u,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function xz(t){const e=_.forwardRef((n,r)=>{const{children:i,...o}=n;if(_.isValidElement(i)){const u=_z(i),d=wz(o,i.props);return i.type!==_.Fragment&&(d.ref=r?Fo(r,u):u),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var vz=Symbol("radix.slottable");function yz(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===vz}function wz(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{const f=o(...d);return i(...d),f}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function _z(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Rg="Dialog",[XS,JS]=ir(Rg),[bz,Xi]=XS(Rg),eT=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:u=!0}=t,d=_.useRef(null),f=_.useRef(null),[p,y]=Oa({prop:r,defaultProp:i??!1,onChange:o,caller:Rg});return s.jsx(bz,{scope:e,triggerRef:d,contentRef:f,contentId:Ra(),titleId:Ra(),descriptionId:Ra(),open:p,onOpenChange:y,onOpenToggle:_.useCallback(()=>y(g=>!g),[y]),modal:u,children:n})};eT.displayName=Rg;var tT="DialogTrigger",nT=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xi(tT,n),o=mt(e,i.triggerRef);return s.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Aw(i.open),...r,ref:o,onClick:Fe(t.onClick,i.onOpenToggle)})});nT.displayName=tT;var Sw="DialogPortal",[Nz,sT]=XS(Sw,{forceMount:void 0}),rT=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=Xi(Sw,e);return s.jsx(Nz,{scope:e,forceMount:n,children:_.Children.map(r,u=>s.jsx(rr,{present:n||o.open,children:s.jsx(kg,{asChild:!0,container:i,children:u})}))})};rT.displayName=Sw;var Ip="DialogOverlay",iT=_.forwardRef((t,e)=>{const n=sT(Ip,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Xi(Ip,t.__scopeDialog);return o.modal?s.jsx(rr,{present:r||o.open,children:s.jsx(Cz,{...i,ref:e})}):null});iT.displayName=Ip;var jz=gz("DialogOverlay.RemoveScroll"),Cz=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xi(Ip,n);return s.jsx(Ig,{as:jz,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Je.div,{"data-state":Aw(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Kc="DialogContent",aT=_.forwardRef((t,e)=>{const n=sT(Kc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Xi(Kc,t.__scopeDialog);return s.jsx(rr,{present:r||o.open,children:o.modal?s.jsx(Ez,{...i,ref:e}):s.jsx(Sz,{...i,ref:e})})});aT.displayName=Kc;var Ez=_.forwardRef((t,e)=>{const n=Xi(Kc,t.__scopeDialog),r=_.useRef(null),i=mt(e,n.contentRef,r);return _.useEffect(()=>{const o=r.current;if(o)return Ew(o)},[]),s.jsx(oT,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Fe(t.onPointerDownOutside,o=>{const u=o.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&o.preventDefault()}),onFocusOutside:Fe(t.onFocusOutside,o=>o.preventDefault())})}),Sz=_.forwardRef((t,e)=>{const n=Xi(Kc,t.__scopeDialog),r=_.useRef(!1),i=_.useRef(!1);return s.jsx(oT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const u=o.target;n.triggerRef.current?.contains(u)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),oT=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...u}=t,d=Xi(Kc,n),f=_.useRef(null),p=mt(e,f);return Cw(),s.jsxs(s.Fragment,{children:[s.jsx(Ag,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:s.jsx(Tg,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Aw(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Az,{titleId:d.titleId}),s.jsx(Pz,{contentRef:f,descriptionId:d.descriptionId})]})]})}),Tw="DialogTitle",lT=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xi(Tw,n);return s.jsx(Je.h2,{id:i.titleId,...r,ref:e})});lT.displayName=Tw;var cT="DialogDescription",uT=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xi(cT,n);return s.jsx(Je.p,{id:i.descriptionId,...r,ref:e})});uT.displayName=cT;var dT="DialogClose",hT=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Xi(dT,n);return s.jsx(Je.button,{type:"button",...r,ref:e,onClick:Fe(t.onClick,()=>i.onOpenChange(!1))})});hT.displayName=dT;function Aw(t){return t?"open":"closed"}var fT="DialogTitleWarning",[Tz,mT]=WB(fT,{contentName:Kc,titleName:Tw,docsSlug:"dialog"}),Az=({titleId:t})=>{const e=mT(fT),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},kz="DialogDescriptionWarning",Pz=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${mT(kz).contentName}}.`;return _.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},kw=eT,Pw=nT,Iw=rT,Lg=iT,Mg=aT,Rw=lT,pT=uT,Dg=hT;function Iz({...t}){return s.jsx(kw,{"data-slot":"sheet",...t})}function Rz({...t}){return s.jsx(Pw,{"data-slot":"sheet-trigger",...t})}function Lz({...t}){return s.jsx(Iw,{"data-slot":"sheet-portal",...t})}function Mz({className:t,...e}){return s.jsx(Lg,{"data-slot":"sheet-overlay",className:ft("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Dz({className:t,children:e,side:n="right",...r}){return s.jsxs(Lz,{children:[s.jsx(Mz,{}),s.jsxs(Mg,{"data-slot":"sheet-content",className:ft("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,s.jsxs(Dg,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[s.jsx(Dt,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Oz({className:t,...e}){return s.jsx("div",{"data-slot":"sheet-header",className:ft("flex flex-col gap-1.5 p-4",t),...e})}function Fz({className:t,...e}){return s.jsx(Rw,{"data-slot":"sheet-title",className:ft("text-foreground font-semibold",t),...e})}var Vz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bz=Vz.reduce((t,e)=>{const n=Cg(`Primitive.${e}`),r=_.forwardRef((i,o)=>{const{asChild:u,...d}=i,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),zz="Separator",h1="horizontal",Uz=["horizontal","vertical"],gT=_.forwardRef((t,e)=>{const{decorative:n,orientation:r=h1,...i}=t,o=$z(r)?r:h1,d=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return s.jsx(Bz.div,{"data-orientation":o,...d,...i,ref:e})});gT.displayName=zz;function $z(t){return Uz.includes(t)}var Hz=gT;function qr({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return s.jsx(Hz,{"data-slot":"separator-root",decorative:n,orientation:e,className:ft("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}function Ie({className:t,type:e,...n}){return s.jsx("input",{type:e,"data-slot":"input",className:ft("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}function Kt({className:t,...e}){return s.jsx("div",{"data-slot":"card",className:ft("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}var Wz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qz=Wz.reduce((t,e)=>{const n=Cg(`Primitive.${e}`),r=_.forwardRef((i,o)=>{const{asChild:u,...d}=i,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Gz="Label",xT=_.forwardRef((t,e)=>s.jsx(qz.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));xT.displayName=Gz;var Kz=xT;function Ae({className:t,...e}){return s.jsx(Kz,{"data-slot":"label",className:ft("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function f1(t){const e=Zz(t),n=_.forwardRef((r,i)=>{const{children:o,...u}=r,d=_.Children.toArray(o),f=d.find(Qz);if(f){const p=f.props.children,y=d.map(g=>g===f?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:g);return s.jsx(e,{...u,ref:i,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return s.jsx(e,{...u,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function Zz(t){const e=_.forwardRef((n,r)=>{const{children:i,...o}=n;if(_.isValidElement(i)){const u=Jz(i),d=Xz(o,i.props);return i.type!==_.Fragment&&(d.ref=r?Fo(r,u):u),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Yz=Symbol("radix.slottable");function Qz(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Yz}function Xz(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{const f=o(...d);return i(...d),f}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function Jz(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Og(t){const e=t+"CollectionProvider",[n,r]=ir(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:k,children:R}=S,I=Re.useRef(null),z=Re.useRef(new Map).current;return s.jsx(i,{scope:k,itemMap:z,collectionRef:I,children:R})};u.displayName=e;const d=t+"CollectionSlot",f=f1(d),p=Re.forwardRef((S,k)=>{const{scope:R,children:I}=S,z=o(d,R),H=mt(k,z.collectionRef);return s.jsx(f,{ref:H,children:I})});p.displayName=d;const y=t+"CollectionItemSlot",g="data-radix-collection-item",b=f1(y),E=Re.forwardRef((S,k)=>{const{scope:R,children:I,...z}=S,H=Re.useRef(null),G=mt(k,H),Q=o(y,R);return Re.useEffect(()=>(Q.itemMap.set(H,{ref:H,...z}),()=>void Q.itemMap.delete(H))),s.jsx(b,{[g]:"",ref:G,children:I})});E.displayName=y;function N(S){const k=o(t+"CollectionConsumer",S);return Re.useCallback(()=>{const I=k.collectionRef.current;if(!I)return[];const z=Array.from(I.querySelectorAll(`[${g}]`));return Array.from(k.itemMap.values()).sort((Q,F)=>z.indexOf(Q.ref.current)-z.indexOf(F.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:u,Slot:p,ItemSlot:E},N,r]}var Hv="rovingFocusGroup.onEntryFocus",e9={bubbles:!1,cancelable:!0},xf="RovingFocusGroup",[Ry,vT,t9]=Og(xf),[n9,Ld]=ir(xf,[t9]),[s9,r9]=n9(xf),yT=_.forwardRef((t,e)=>s.jsx(Ry.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(Ry.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(i9,{...t,ref:e})})}));yT.displayName=xf;var i9=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:p,preventScrollOnEntryFocus:y=!1,...g}=t,b=_.useRef(null),E=mt(e,b),N=ru(o),[S,k]=Oa({prop:u,defaultProp:d??null,onChange:f,caller:xf}),[R,I]=_.useState(!1),z=ls(p),H=vT(n),G=_.useRef(!1),[Q,F]=_.useState(0);return _.useEffect(()=>{const D=b.current;if(D)return D.addEventListener(Hv,z),()=>D.removeEventListener(Hv,z)},[z]),s.jsx(s9,{scope:n,orientation:r,dir:N,loop:i,currentTabStopId:S,onItemFocus:_.useCallback(D=>k(D),[k]),onItemShiftTab:_.useCallback(()=>I(!0),[]),onFocusableItemAdd:_.useCallback(()=>F(D=>D+1),[]),onFocusableItemRemove:_.useCallback(()=>F(D=>D-1),[]),children:s.jsx(Je.div,{tabIndex:R||Q===0?-1:0,"data-orientation":r,...g,ref:E,style:{outline:"none",...t.style},onMouseDown:Fe(t.onMouseDown,()=>{G.current=!0}),onFocus:Fe(t.onFocus,D=>{const O=!G.current;if(D.target===D.currentTarget&&O&&!R){const U=new CustomEvent(Hv,e9);if(D.currentTarget.dispatchEvent(U),!U.defaultPrevented){const $=H().filter(ne=>ne.focusable),K=$.find(ne=>ne.active),W=$.find(ne=>ne.id===S),oe=[K,W,...$].filter(Boolean).map(ne=>ne.ref.current);bT(oe,y)}}G.current=!1}),onBlur:Fe(t.onBlur,()=>I(!1))})})}),wT="RovingFocusGroupItem",_T=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,children:u,...d}=t,f=Ra(),p=o||f,y=r9(wT,n),g=y.currentTabStopId===p,b=vT(n),{onFocusableItemAdd:E,onFocusableItemRemove:N,currentTabStopId:S}=y;return _.useEffect(()=>{if(r)return E(),()=>N()},[r,E,N]),s.jsx(Ry.ItemSlot,{scope:n,id:p,focusable:r,active:i,children:s.jsx(Je.span,{tabIndex:g?0:-1,"data-orientation":y.orientation,...d,ref:e,onMouseDown:Fe(t.onMouseDown,k=>{r?y.onItemFocus(p):k.preventDefault()}),onFocus:Fe(t.onFocus,()=>y.onItemFocus(p)),onKeyDown:Fe(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){y.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const R=l9(k,y.orientation,y.dir);if(R!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let z=b().filter(H=>H.focusable).map(H=>H.ref.current);if(R==="last")z.reverse();else if(R==="prev"||R==="next"){R==="prev"&&z.reverse();const H=z.indexOf(k.currentTarget);z=y.loop?c9(z,H+1):z.slice(H+1)}setTimeout(()=>bT(z))}}),children:typeof u=="function"?u({isCurrentTabStop:g,hasTabStop:S!=null}):u})})});_T.displayName=wT;var a9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function o9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function l9(t,e,n){const r=o9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return a9[r]}function bT(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function c9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Lw=yT,Mw=_T;function vf(t){const[e,n]=_.useState(void 0);return Hn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let u,d;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;u=p.inlineSize,d=p.blockSize}else u=t.offsetWidth,d=t.offsetHeight;n({width:u,height:d})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function yf(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Dw="Radio",[u9,NT]=ir(Dw),[d9,h9]=u9(Dw),jT=_.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:o,disabled:u,value:d="on",onCheck:f,form:p,...y}=t,[g,b]=_.useState(null),E=mt(e,k=>b(k)),N=_.useRef(!1),S=g?p||!!g.closest("form"):!0;return s.jsxs(d9,{scope:n,checked:i,disabled:u,children:[s.jsx(Je.button,{type:"button",role:"radio","aria-checked":i,"data-state":TT(i),"data-disabled":u?"":void 0,disabled:u,value:d,...y,ref:E,onClick:Fe(t.onClick,k=>{i||f?.(),S&&(N.current=k.isPropagationStopped(),N.current||k.stopPropagation())})}),S&&s.jsx(ST,{control:g,bubbles:!N.current,name:r,value:d,checked:i,required:o,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});jT.displayName=Dw;var CT="RadioIndicator",ET=_.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,o=h9(CT,n);return s.jsx(rr,{present:r||o.checked,children:s.jsx(Je.span,{"data-state":TT(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:e})})});ET.displayName=CT;var f9="RadioBubbleInput",ST=_.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...i},o)=>{const u=_.useRef(null),d=mt(u,o),f=yf(n),p=vf(e);return _.useEffect(()=>{const y=u.current;if(!y)return;const g=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(g,"checked").set;if(f!==n&&E){const N=new Event("click",{bubbles:r});E.call(y,n),y.dispatchEvent(N)}},[f,n,r]),s.jsx(Je.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:d,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ST.displayName=f9;function TT(t){return t?"checked":"unchecked"}var m9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Fg="RadioGroup",[p9]=ir(Fg,[Ld,NT]),AT=Ld(),kT=NT(),[g9,x9]=p9(Fg),PT=_.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:o,required:u=!1,disabled:d=!1,orientation:f,dir:p,loop:y=!0,onValueChange:g,...b}=t,E=AT(n),N=ru(p),[S,k]=Oa({prop:o,defaultProp:i??null,onChange:g,caller:Fg});return s.jsx(g9,{scope:n,name:r,required:u,disabled:d,value:S,onValueChange:k,children:s.jsx(Lw,{asChild:!0,...E,orientation:f,dir:N,loop:y,children:s.jsx(Je.div,{role:"radiogroup","aria-required":u,"aria-orientation":f,"data-disabled":d?"":void 0,dir:N,...b,ref:e})})})});PT.displayName=Fg;var IT="RadioGroupItem",RT=_.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,o=x9(IT,n),u=o.disabled||r,d=AT(n),f=kT(n),p=_.useRef(null),y=mt(e,p),g=o.value===i.value,b=_.useRef(!1);return _.useEffect(()=>{const E=S=>{m9.includes(S.key)&&(b.current=!0)},N=()=>b.current=!1;return document.addEventListener("keydown",E),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",E),document.removeEventListener("keyup",N)}},[]),s.jsx(Mw,{asChild:!0,...d,focusable:!u,active:g,children:s.jsx(jT,{disabled:u,required:o.required,checked:g,...f,...i,name:o.name,ref:y,onCheck:()=>o.onValueChange(i.value),onKeyDown:Fe(E=>{E.key==="Enter"&&E.preventDefault()}),onFocus:Fe(i.onFocus,()=>{b.current&&p.current?.click()})})})});RT.displayName=IT;var v9="RadioGroupIndicator",LT=_.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=kT(n);return s.jsx(ET,{...i,...r,ref:e})});LT.displayName=v9;var y9=PT,w9=RT,_9=LT;function Ly({className:t,...e}){return s.jsx(y9,{"data-slot":"radio-group",className:ft("grid gap-3",t),...e})}function Dc({className:t,...e}){return s.jsx(w9,{"data-slot":"radio-group-item",className:ft("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:s.jsx(_9,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(uV,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function b9({amount:t,type:e,itemTitle:n,onSuccess:r,onCancel:i,cartItems:o}){const[u,d]=_.useState("card"),[f,p]=_.useState(!1),[y,g]=_.useState(!1),[b,E]=_.useState(""),[N,S]=_.useState(""),[k,R]=_.useState(""),[I,z]=_.useState(""),[H,G]=_.useState(""),Q=W=>{const oe=W.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),ne=oe&&oe[0]||"",xe=[];for(let Z=0,de=ne.length;Z<de;Z+=4)xe.push(ne.substring(Z,Z+4));return xe.length?xe.join(" "):W},F=W=>{const ce=W.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return ce.length>=2?ce.slice(0,2)+"/"+ce.slice(2,4):ce},D=W=>{const ce=Q(W.target.value);ce.replace(/\s/g,"").length<=16&&S(ce)},O=W=>{const ce=F(W.target.value);ce.replace("/","").length<=4&&z(ce)},U=W=>{const ce=W.target.value.replace(/[^0-9]/gi,"");ce.length<=4&&G(ce)},$=async W=>{if(W.preventDefault(),u==="card"){if(!N||N.replace(/\s/g,"").length<16){ue.error("Please enter a valid 16-digit card number");return}if(!k.trim()){ue.error("Please enter the cardholder name");return}if(!I||!/^\d{2}\/\d{2}$/.test(I)){ue.error("Please enter a valid expiry date (MM/YY)");return}const[ce,oe]=I.split("/").map(Number),ne=new Date,xe=parseInt(ne.getFullYear().toString().slice(-2)),Z=ne.getMonth()+1;if(oe<xe||oe===xe&&ce<Z){ue.error("Card has expired");return}if(!H||H.length<3){ue.error("Please enter a valid CVV");return}}p(!0),setTimeout(async()=>{const ce="TXN"+Math.random().toString(36).substr(2,9).toUpperCase();E(ce);try{const oe=gt.currentUser;if(oe){const ne=o&&o.length>0?o:[{id:"single-item",title:n,price:t,image:"",type:e,sellerName:"Unknown",sellerId:"unknown"}];for(const xe of ne){const Z=xe.type==="rent"?"rentals":"purchases",de=await Ns(lt(Te,Z),{userId:oe.uid,bookId:xe.id||"",bookTitle:xe.title,price:xe.price,date:new Date().toISOString(),status:"completed",transactionId:ce,type:xe.type,createdAt:xn()});await Ns(lt(Te,"transactions"),{type:e==="rent"?"rent":"buy",bookTitle:xe.title,user:oe.displayName||oe.email||"Unknown User",amount:xe.price,date:new Date().toISOString(),status:"completed",relatedId:de.id,createdAt:xn()})}}}catch(oe){console.error("Error saving purchase:",oe)}p(!1),g(!0)},2e3)},K=()=>{r(b)};return y?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Kt,{className:"w-full max-w-md p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Hl,{className:"w-12 h-12 text-green-600"})}),s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:"Payment Successful!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your transaction has been completed"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Transaction ID:"}),s.jsx("span",{className:"text-[#2C3E50]",children:b})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Item:"}),s.jsx("span",{className:"text-[#2C3E50]",children:n})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Type:"}),s.jsx("span",{className:"text-[#2C3E50] capitalize",children:e})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Amount:"}),s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",t.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 mb-6",children:[s.jsx(Ty,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Secure transaction via SSL encryption"})]}),s.jsx(X,{onClick:K,className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Continue"})]})}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:s.jsxs(Kt,{className:"w-full max-w-2xl my-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white p-6 rounded-t-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl",children:"Secure Checkout"}),s.jsx("button",{onClick:i,className:"text-white/80 hover:text-white",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-white/90 text-sm",children:[s.jsx(Fs,{className:"w-4 h-4"}),s.jsx("span",{children:"256-bit SSL Encrypted Payment"})]})]}),s.jsxs("form",{onSubmit:$,className:"p-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Summary"}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600",children:n}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",t.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Processing Fee"}),s.jsx("span",{className:"text-[#2C3E50]",children:"$0.00"})]}),s.jsxs("div",{className:"border-t pt-2 mt-2 flex justify-between items-center",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total Amount"}),s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",t.toFixed(2)]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(Ae,{className:"mb-3 block",children:"Select Payment Method"}),s.jsx(Ly,{value:u,onValueChange:W=>d(W),children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${u==="card"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsx(Dc,{value:"card",id:"card",className:"sr-only"}),s.jsxs("label",{htmlFor:"card",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx(hd,{className:`w-6 h-6 ${u==="card"?"text-[#C4A672]":"text-gray-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Credit/Debit Card"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Visa, Mastercard, Amex"})]}),s.jsx("img",{src:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='25' viewBox='0 0 40 25'%3E%3Crect fill='%236772E5' width='40' height='25' rx='3'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-size='10' font-weight='bold'%3EStripe%3C/text%3E%3C/svg%3E",alt:"Stripe",className:"h-6"})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${u==="paypal"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsx(Dc,{value:"paypal",id:"paypal",className:"sr-only"}),s.jsxs("label",{htmlFor:"paypal",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("div",{className:"w-6 h-6 bg-[#0070BA] rounded flex items-center justify-center text-white text-xs",children:"P"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"PayPal"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Fast & Secure"})]})]})]})]})})]}),u==="card"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"cardNumber",children:"Card Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:N,onChange:D,className:"pr-10",required:!0}),s.jsx(hd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"cardName",children:"Cardholder Name"}),s.jsx(Ie,{id:"cardName",type:"text",placeholder:"John Doe",value:k,onChange:W=>R(W.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"expiry",children:"Expiry Date"}),s.jsx(Ie,{id:"expiry",type:"text",placeholder:"MM/YY",value:I,onChange:O,required:!0})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"cvv",children:"CVV"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"cvv",type:"password",placeholder:"123",value:H,onChange:U,maxLength:4,required:!0}),s.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]})]}),u==="paypal"&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:s.jsx("p",{className:"text-sm text-blue-800",children:"You will be redirected to PayPal to complete your payment securely."})}),s.jsxs("div",{className:"flex items-center justify-center gap-6 my-6 py-4 border-y border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ty,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{children:"SSL Secure"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Fs,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{children:"PCI Compliant"})]}),s.jsxs(Qe,{variant:"outline",className:"text-xs",children:[s.jsx(Hl,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{type:"button",onClick:i,variant:"outline",className:"flex-1",disabled:f,children:"Cancel"}),s.jsx(X,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:f,children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Pay $",t.toFixed(2)]})})]}),s.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Your payment information is encrypted and secure. We never store your card details."})]})]})})}function N9(){const{items:t,removeFromCart:e,totalAmount:n,clearCart:r}=JE(),i=Jn(),[o,u]=_.useState(!1),[d,f]=_.useState(!1),p=y=>{u(!1),f(!1),r(),i("/dashboard/purchases")};return o?s.jsx(b9,{amount:n,type:"buy",itemTitle:`Cart Checkout (${t.length} items)`,onSuccess:p,onCancel:()=>u(!1),cartItems:t}):s.jsxs(Iz,{open:d,onOpenChange:f,children:[s.jsx(Rz,{asChild:!0,children:s.jsxs(X,{variant:"ghost",size:"icon",className:"relative",children:[s.jsx(Wh,{className:"h-5 w-5 text-gray-600"}),t.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-[#C4A672] text-[10px] font-medium text-white flex items-center justify-center",children:t.length})]})}),s.jsxs(Dz,{className:"w-full sm:max-w-md flex flex-col",children:[s.jsx(Oz,{children:s.jsxs(Fz,{className:"text-[#2C3E50]",children:["Your Cart (",t.length,")"]})}),s.jsx("div",{className:"flex-1 overflow-hidden mt-4",children:t.length===0?s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[s.jsx(Wh,{className:"h-16 w-16 text-gray-300 mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Add some books to get started"}),s.jsx(X,{variant:"outline",className:"mt-6",onClick:()=>f(!1),children:"Continue Shopping"})]}):s.jsx(BS,{className:"h-full pr-4",children:s.jsx("div",{className:"space-y-4",children:t.map(y=>s.jsxs("div",{className:"flex gap-4 bg-gray-50 p-3 rounded-lg",children:[s.jsx("div",{className:"h-20 w-16 bg-white rounded overflow-hidden flex-shrink-0 border border-gray-100",children:s.jsx("img",{src:y.image,alt:y.title,className:"h-full w-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h4",{className:"font-medium text-[#2C3E50] text-sm line-clamp-2",children:y.title}),s.jsx("button",{onClick:()=>e(y.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:s.jsx(Dt,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sold by ",y.sellerName]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${y.type==="buy"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:y.type==="buy"?"Buy":"Rent"}),s.jsxs("span",{className:"font-semibold text-[#C4A672]",children:["$",y.price.toFixed(2)]})]})]})]},y.id))})})}),t.length>0&&s.jsxs("div",{className:"pt-4 mt-auto",children:[s.jsx(qr,{className:"mb-4"}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsxs("span",{className:"font-medium text-[#2C3E50]",children:["$",n.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-base font-semibold",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total"}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",n.toFixed(2)]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(X,{variant:"outline",onClick:r,children:[s.jsx(Wl,{className:"mr-2 h-4 w-4"}),"Clear Cart"]}),s.jsx(X,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",onClick:()=>u(!0),children:"Checkout"})]})]})]})]})}function j9({isLoggedIn:t,onLogout:e}){const[n,r]=_.useState(!1),i=_.useRef(null),u=Qi().pathname;_.useEffect(()=>{const y=g=>{i.current&&!i.current.contains(g.target)&&r(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const d=[{id:"home",label:"Home",icon:fd,path:"/"},{id:"buy",label:"Buy",icon:Wh,path:"/marketplace"},{id:"rent",label:"Rent",icon:Ar,path:"/rent"},{id:"sell",label:"Sell",icon:Io,path:"/sell"},{id:"communities",label:"Communities",icon:Rn,path:"/communities"}],f=[{id:"home",label:"Home",icon:fd,path:"/",showAlways:!0},{id:"search",label:"Search",icon:$n,path:"/search",showAlways:!0},{id:"wishlist",label:"Wishlist",icon:ja,path:"/wishlist",showAlways:!1,requireLogin:!0},{id:"sell",label:"Sell",icon:Io,path:"/sell",showAlways:!0},{id:"profile",label:"Profile",icon:qh,path:"/dashboard",showAlways:!0}],p=y=>y==="/"&&u!=="/"?!1:u.startsWith(y);return s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"hidden md:block fixed top-0 left-0 right-0 bg-[#C4A672] shadow-lg z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs(rn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#2C3E50] rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white",children:"BO"})}),s.jsx("span",{className:"text-[#2C3E50] text-xl",children:"BookBloom"})]}),s.jsx("div",{className:"flex items-center gap-1",children:d.map(y=>{const g=y.icon,b=p(y.path);return s.jsxs(rn,{to:y.path,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${b?"bg-[#2C3E50] text-white":"text-[#2C3E50] hover:bg-[#8B7355] hover:text-white"}`,children:[s.jsx(g,{className:"w-5 h-5"}),s.jsx("span",{children:y.label})]},y.id)})}),s.jsx("div",{className:"flex items-center gap-3",children:t?s.jsxs(s.Fragment,{children:[s.jsx(N9,{}),s.jsx(c8,{}),s.jsxs("div",{className:"relative",ref:i,children:[s.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#2C3E50] text-white hover:bg-[#1a252f] transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center",children:s.jsx(qh,{className:"w-5 h-5 text-white"})}),s.jsx("span",{className:"hidden lg:inline",children:"Profile"}),s.jsx(wg,{className:`w-4 h-4 transition-transform ${n?"rotate-180":""}`})]}),n&&s.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 py-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Signed in as"}),s.jsx("p",{className:"text-[#2C3E50]",children:"user@example.com"})]}),s.jsxs("div",{className:"py-2",children:[s.jsxs(rn,{to:"/dashboard",onClick:()=>r(!1),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(lV,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"My Profile"}),s.jsx("p",{className:"text-xs text-gray-500",children:"View & edit details"})]})]}),s.jsxs(rn,{to:"/dashboard/orders",onClick:()=>r(!1),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(AV,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"Order History"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Purchases & rentals"})]})]}),s.jsxs(rn,{to:"/wishlist",onClick:()=>r(!1),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(ja,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"Wishlist"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Saved favorites"})]})]}),s.jsxs(rn,{to:"/dashboard/settings",onClick:()=>r(!1),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(bg,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm",children:"Settings"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Security & preferences"})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-2",children:s.jsxs("button",{onClick:()=>{e(),r(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(yw,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(rn,{to:"/login",children:s.jsxs(X,{variant:"outline",className:"border-[#2C3E50] text-[#2C3E50] hover:bg-[#2C3E50] hover:text-white",children:[s.jsx(VV,{className:"w-4 h-4 mr-2"}),"Login"]})}),s.jsx(rn,{to:"/register",children:s.jsxs(X,{className:"bg-[#2C3E50] text-white hover:bg-[#1a252f]",children:[s.jsx(lS,{className:"w-4 h-4 mr-2"}),"Register"]})})]})})]})})}),s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-[#C4A672] border-t border-[#8B7355] shadow-lg z-50",children:s.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:f.map(y=>{const g=y.icon,b=p(y.path);return(y.showAlways||y.requireLogin&&t)&&s.jsxs(rn,{to:y.path,className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors ${b?"text-[#2C3E50]":"text-[#2C3E50]/60"}`,children:[s.jsx(g,{className:`w-6 h-6 ${b?"fill-[#2C3E50]":""}`}),s.jsx("span",{className:"text-xs",children:y.label})]},y.id)})})}),s.jsx("div",{className:"hidden md:block h-16"}),s.jsx("div",{className:"md:hidden h-16"})]})}function C9(){return s.jsx("footer",{className:"bg-[#2C3E50] text-white py-8 px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("nav",{className:"flex items-center justify-center gap-8 mb-4",children:[s.jsx(rn,{to:"/marketplace",className:"hover:opacity-80 transition-opacity",children:"Buy"}),s.jsx(rn,{to:"/rent",className:"hover:opacity-80 transition-opacity",children:"Rent"}),s.jsx(rn,{to:"/sell",className:"hover:opacity-80 transition-opacity",children:"Resell"}),s.jsx(rn,{to:"/announcements",className:"hover:opacity-80 transition-opacity",children:"Announcements"}),s.jsx(rn,{to:"/about",className:"hover:opacity-80 transition-opacity",children:"About"})]}),s.jsx("p",{className:"text-center text-sm mb-6",children:" 2025 BookBloom. All rights reserved."}),s.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-md mx-auto",children:[s.jsx(Ie,{type:"email",placeholder:"Subscribe to our newsletter",className:"flex-1 bg-white text-black border-none"}),s.jsx(X,{className:"bg-[#F5A623] hover:bg-[#E69610] text-white px-6",children:"Subscribe"})]})]})})}var E9=(t,e,n,r,i,o,u,d)=>{let f=document.documentElement,p=["light","dark"];function y(E){(Array.isArray(t)?t:[t]).forEach(N=>{let S=N==="class",k=S&&o?i.map(R=>o[R]||R):i;S?(f.classList.remove(...k),f.classList.add(o&&o[E]?o[E]:E)):f.setAttribute(N,E)}),g(E)}function g(E){d&&p.includes(E)&&(f.style.colorScheme=E)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)y(r);else try{let E=localStorage.getItem(e)||n,N=u&&E==="system"?b():E;y(N)}catch{}},S9=_.createContext(void 0),T9={setTheme:t=>{},themes:[]},A9=()=>{var t;return(t=_.useContext(S9))!=null?t:T9};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:u,themes:d,nonce:f,scriptProps:p})=>{let y=JSON.stringify([n,e,o,t,d,u,r,i]).slice(1,-1);return _.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${E9.toString()})(${y})`}})});const MT=({...t})=>{const{theme:e="system"}=A9();return s.jsx(PF,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function k9({isLoggedIn:t,onLogout:e}){return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(j9,{isLoggedIn:t,onLogout:e}),s.jsx("main",{className:"flex-1",children:s.jsx(_d,{})}),s.jsx(C9,{}),s.jsx(MT,{})]})}function P9(){return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx("main",{className:"flex-1",children:s.jsx(_d,{})}),s.jsx(MT,{})]})}function I9({isLoggedIn:t,redirectPath:e="/login"}){return t?s.jsx(_d,{}):s.jsx(Hp,{to:e,replace:!0})}function R9({userRole:t,redirectPath:e="/admin/login"}){return t!=="admin"?s.jsx(Hp,{to:e,replace:!0}):s.jsx(_d,{})}function L9({onViewAll:t}){const[e,n]=_.useState(0),[r,i]=_.useState(!0),[o,u]=_.useState([]);_.useEffect(()=>{(async()=>{const g=Wt(lt(Te,"announcements"),_s("date","desc"),Pd(3)),E=(await bs(g)).docs.map(N=>({id:N.id,...N.data()}));u(E)})()},[]),_.useEffect(()=>{if(!r||o.length===0)return;const y=setInterval(()=>{n(g=>(g+1)%o.length)},5e3);return()=>clearInterval(y)},[r,o.length]);const d=()=>{i(!1),n(y=>(y-1+o.length)%o.length)},f=()=>{i(!1),n(y=>(y+1)%o.length)};if(o.length===0)return s.jsx("div",{children:"Loading announcements..."});o[e];const p=y=>{switch(y){case"promo":return"from-[#C4A672] to-[#8B7355]";case"update":return"from-[#2C3E50] to-[#34495E]";default:return"from-[#3498db] to-[#2980b9]"}};return s.jsxs("div",{className:"relative w-full bg-gradient-to-r overflow-hidden",children:[s.jsx("div",{className:"relative h-64 md:h-80",children:o.map((y,g)=>s.jsxs("div",{className:`absolute inset-0 transition-opacity duration-500 ${g===e?"opacity-100":"opacity-0"}`,children:[y.image&&s.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${y.image})`},children:s.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${p(y.type)} opacity-90`})}),s.jsx("div",{className:`relative h-full ${y.image?"":`bg-gradient-to-r ${p(y.type)}`}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 h-full flex items-center",children:s.jsxs("div",{className:"text-white max-w-2xl",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx($l,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm opacity-90",children:y.date})]}),s.jsx("h2",{className:"text-3xl md:text-4xl mb-4",children:y.title}),s.jsx("p",{className:"text-lg md:text-xl opacity-95 mb-6",children:y.content}),s.jsx(X,{onClick:t,variant:"secondary",size:"lg",className:"bg-white text-[#2C3E50] hover:bg-gray-100",children:"View All Announcements "})]})})})]},y.id))}),s.jsx("button",{onClick:d,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-colors",children:s.jsx(gw,{className:"w-6 h-6"})}),s.jsx("button",{onClick:f,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-colors",children:s.jsx(Tl,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:o.map((y,g)=>s.jsx("button",{onClick:()=>{i(!1),n(g)},className:`w-2 h-2 rounded-full transition-all ${g===e?"w-8 bg-white":"bg-white/50 hover:bg-white/75"}`},g))})]})}function M9({activeTab:t,onNavigateToBook:e}){const[n,r]=_.useState([]);return _.useEffect(()=>{(async()=>{const o=Wt(lt(Te,"books"),Yn("type","==",t),Pd(4)),d=(await bs(o)).docs.map(f=>({id:f.id,...f.data()}));r(d)})()},[t]),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(i=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",onClick:()=>e(i.id),children:[s.jsxs("div",{className:"relative h-64 bg-gray-100 overflow-hidden",children:[s.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx(Qe,{className:"absolute top-3 right-3 bg-[#C4A672] text-white border-0",children:i.condition})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1 line-clamp-1 group-hover:text-[#C4A672] transition-colors",children:i.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:i.author}),s.jsxs("div",{className:"flex items-center justify-between",children:[t==="rent"&&i.rentalPrice?s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",i.rentalPrice.monthly,"/mo"]}),s.jsxs("span",{className:"text-gray-500 text-xs",children:["$",i.rentalPrice.weekly,"/wk"]})]}):s.jsxs("span",{className:"text-[#C4A672] text-2xl",children:["$",i.price]}),s.jsxs(X,{size:"sm",className:"bg-[#2C3E50] hover:bg-[#1a252f] text-white",children:[t==="buy"&&"View",t==="sell"&&"List",t==="rent"&&"Rent"]})]})]})]},i.id)),s.jsx("div",{className:"bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition-shadow cursor-pointer flex items-center justify-center min-h-[320px] group",children:s.jsxs("div",{className:"text-center text-white p-6",children:[s.jsxs("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-white/30 transition-colors",children:[t==="buy"&&s.jsx(Wr,{className:"w-8 h-8"}),t==="sell"&&s.jsx(Io,{className:"w-8 h-8"}),t==="rent"&&s.jsx(Ar,{className:"w-8 h-8"})]}),s.jsx("h3",{className:"text-xl mb-2",children:"Browse All"}),s.jsxs("p",{className:"text-white/90 mb-4",children:["Explore ",t==="buy"?"thousands of":"all"," books"]}),s.jsx("div",{className:"text-white/90 group-hover:text-white transition-colors",children:"View More "})]})})]})}function D9({onNavigateToCommunities:t,isLoggedIn:e}){const[n,r]=_.useState([]),i=gt.currentUser;_.useEffect(()=>{(async()=>{const f=Wt(lt(Te,"communities"),Pd(4)),p=await bs(f),y=await Promise.all(p.docs.map(async g=>{const b={id:g.id,...g.data()};if(i){const E=ht(Te,`communities/${g.id}/members/${i.uid}`),N=await vg(E);b.isMember=N.exists()}else b.isMember=!1;return b}));r(y)})()},[i]);const o=async(d,f)=>{if(!e||!i){ue.error("Please login to join communities");return}const p=ht(Te,"communities",d),y=ht(p,"members",i.uid);if(f==="private")await $h(y,{requested:!0,date:new Date}),ue.success("Join request sent! Waiting for admin approval.");else try{await Rj(Te,async g=>{const b=await g.get(p);if(!b.exists())throw new Error("Community not found");g.update(p,{memberCount:b.data().memberCount+1}),g.set(y,{joined:new Date})}),r(g=>g.map(b=>b.id===d?{...b,isMember:!0,memberCount:b.memberCount+1}:b)),ue.success("Successfully joined the community!")}catch{ue.error("Failed to join")}},u=async d=>{if(!i)return;const f=ht(Te,"communities",d),p=ht(f,"members",i.uid);try{await Rj(Te,async y=>{const g=await y.get(f);if(!g.exists())throw new Error("Community not found");y.update(f,{memberCount:g.data().memberCount-1}),y.delete(p)}),r(y=>y.map(g=>g.id===d?{...g,isMember:!1,memberCount:g.memberCount-1}:g)),ue.info("You left the community")}catch{ue.error("Failed to leave")}};return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(d=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow group",children:[s.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-[#C4A672] to-[#8B7355] overflow-hidden",children:[s.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-300"}),s.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:s.jsx(Qe,{variant:"secondary",className:"bg-white/90 text-gray-700 border-0",children:d.privacy==="public"?s.jsxs(s.Fragment,{children:[s.jsx(Ep,{className:"w-3 h-3 mr-1"})," Public"]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-3 h-3 mr-1"})," Private"]})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsx("h3",{className:"text-[#2C3E50] group-hover:text-[#C4A672] transition-colors line-clamp-1",children:d.name})}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2 min-h-[40px]",children:d.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{children:d.memberCount.toLocaleString()})]}),s.jsx(Qe,{variant:"outline",className:"text-xs",children:d.topic})]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Admin: ",d.admin]}),d.isMember?s.jsxs("div",{className:"space-y-2",children:[s.jsxs(X,{onClick:()=>t(),className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",size:"sm",children:[s.jsx(Tl,{className:"w-4 h-4 mr-1"}),"View Community"]}),s.jsx(X,{onClick:()=>u(d.id),variant:"outline",className:"w-full text-red-600 hover:bg-red-50 hover:text-red-700 border-red-200",size:"sm",children:"Leave"})]}):s.jsx(X,{onClick:()=>o(d.id,d.privacy),className:"w-full bg-[#2C3E50] hover:bg-[#1a252f] text-white",size:"sm",children:d.privacy==="private"?"Request to Join":"Join Community"})]})]},d.id))})}function O9({notifications:t,onDismiss:e,onMarkAsRead:n}){const[r,i]=_.useState(0);if(t.length===0)return null;const o=()=>{i(p=>p>0?p-1:t.length-1)},u=()=>{i(p=>p<t.length-1?p+1:0)},d=p=>{switch(p){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";case"order":return"bg-green-50 border-green-200";case"message":return"bg-blue-50 border-blue-200";case"community":return"bg-purple-50 border-purple-200";case"system":return"bg-orange-50 border-orange-200";default:return"bg-blue-50 border-blue-200"}};if(t.length<=3)return s.jsx("div",{className:"space-y-3 mb-6",children:t.map(p=>s.jsx("div",{className:`${d(p.type)} border rounded-lg p-4 shadow-subtle transition-smooth hover:shadow-card animate-fadeInUp`,children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx($l,{className:"w-5 h-5 mt-0.5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:p.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),s.jsx("span",{className:"text-xs text-gray-500 mt-2 inline-block",children:p.timestamp})]})]}),s.jsx(X,{variant:"ghost",size:"sm",onClick:()=>e(p.id),className:"h-6 w-6 p-0 hover:bg-gray-200",children:s.jsx(Dt,{className:"w-4 h-4"})})]})},p.id))});const f=t[r];return s.jsx("div",{className:"mb-6 animate-fadeInUp",children:s.jsxs("div",{className:`${d(f.type)} border rounded-lg p-4 shadow-card transition-smooth`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx($l,{className:"w-5 h-5 mt-0.5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:f.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.message}),s.jsx("span",{className:"text-xs text-gray-500 mt-2 inline-block",children:f.timestamp})]})]}),s.jsx(X,{variant:"ghost",size:"sm",onClick:()=>e(f.id),className:"h-6 w-6 p-0 hover:bg-gray-200",children:s.jsx(Dt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200",children:[s.jsxs(X,{variant:"ghost",size:"sm",onClick:o,className:"h-8 px-2 hover:bg-white",children:[s.jsx(gw,{className:"w-4 h-4 mr-1"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1.5",children:t.map((p,y)=>s.jsx("button",{onClick:()=>i(y),className:`h-2 rounded-full transition-all ${y===r?"w-6 bg-blue-600":"w-2 bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to notification ${y+1}`},y))}),s.jsxs(X,{variant:"ghost",size:"sm",onClick:u,className:"h-8 px-2 hover:bg-white",children:["Next",s.jsx(Tl,{className:"w-4 h-4 ml-1"})]})]}),s.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[r+1," of ",t.length]})]})})}function F9({context:t="home",onBookClick:e}){const[n,r]=_.useState([]),[i,o]=_.useState(0),u=4,[d,f]=_.useState(!0);_.useEffect(()=>{(async()=>{f(!0);try{const S=Wt(lt(Te,"books"),Pd(5)),R=(await bs(S)).docs.map(I=>({id:I.id,...I.data()}));r(R)}catch(S){ue.error("Failed to fetch recommendations"),console.error(S)}finally{f(!1)}})()},[]);const p=()=>{o(N=>Math.max(0,N-1))},y=()=>{o(N=>Math.min(n.length-u,N+1))},g=n.slice(i,i+u),b=i>0,E=i<n.length-u;return d?s.jsx("div",{children:"Loading recommendations..."}):s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 shadow-card mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-subtle",children:s.jsx($j,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-gray-900",children:"AI Recommendations"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Based on your reading history"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"outline",size:"sm",onClick:p,disabled:!b,className:"h-8 w-8 p-0 bg-white hover:bg-gray-50 disabled:opacity-30 transition-smooth",children:s.jsx(gw,{className:"w-4 h-4"})}),s.jsx(X,{variant:"outline",size:"sm",onClick:y,disabled:!E,className:"h-8 w-8 p-0 bg-white hover:bg-gray-50 disabled:opacity-30 transition-smooth",children:s.jsx(Tl,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map(N=>s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-subtle hover:shadow-card transition-smooth cursor-pointer",onClick:()=>e?.(N.id),children:[s.jsxs("div",{className:"relative mb-3",children:[s.jsx("img",{src:N.image,alt:N.title,className:"w-full h-48 object-cover rounded-lg"}),s.jsxs("div",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-subtle",children:[s.jsx($j,{className:"w-3 h-3 inline mr-1"}),"AI Pick"]})]}),s.jsx("h3",{className:"text-sm text-gray-900 mb-1 line-clamp-1",children:N.title}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-1",children:N.author}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-blue-600",children:["",N.price]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-yellow-500",children:""}),s.jsx("span",{className:"text-xs text-gray-600",children:N.rating})]})]})]},N.id))}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("p",{className:"text-xs text-gray-500",children:"Powered by AI  Updated based on your preferences and browsing patterns"})})]})}function V9({isLoggedIn:t}){const[e,n]=_.useState("buy"),[r,i]=_.useState(""),[o,u]=_.useState([]),d=gt.currentUser,f=Jn();_.useEffect(()=>{if(!t||!d)return;(async()=>{const b=Wt(lt(Te,"notifications"),Yn("userId","==",d.uid),_s("timestamp","desc")),N=(await bs(b)).docs.map(S=>{const k=S.data();return{id:S.id,...k,timestamp:k.timestamp?.toDate?k.timestamp.toDate().toLocaleDateString():k.timestamp}});u(N)})()},[t,d]);const p=async g=>{if(d)try{await Po(ht(Te,"notifications",g)),u(o.filter(b=>b.id!==g))}catch{console.error("Failed to dismiss notification")}},y=async g=>{try{await un(ht(Te,"notifications",g),{read:!0}),u(o.map(b=>b.id===g?{...b,read:!0}:b))}catch{console.error("Failed to mark as read")}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-0",children:[s.jsx(L9,{onViewAll:()=>f("/announcements")}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-4",children:s.jsx(O9,{notifications:o,onDismiss:p,onMarkAsRead:y})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"relative cursor-pointer shadow-subtle rounded-lg transition-smooth hover:shadow-card",onClick:()=>f("/search"),children:[s.jsx($n,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search books by title, author, ISBN, or topic...",value:r,onChange:g=>i(g.target.value),onFocus:()=>f("/search"),className:"pl-12 pr-4 h-14 text-lg bg-white border-2 border-blue-600/30 focus:border-blue-600 focus-glow cursor-pointer",readOnly:!0})]}),s.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[s.jsx(X,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Fiction"}),s.jsx(X,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Science"}),s.jsx(X,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Business"}),s.jsx(X,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Art"}),s.jsx(X,{variant:"outline",size:"sm",className:"rounded-full hover:bg-blue-50 transition-smooth",children:" Textbooks"})]})]}),s.jsx("div",{className:"max-w-7xl mx-auto px-4",children:s.jsx(F9,{context:"home",onBookClick:g=>f(`/book/${g}`)})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 text-3xl mb-1",children:"Book Marketplace"}),s.jsx("p",{className:"text-gray-600",children:"Buy, sell, or rent your favorite books"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(X,{variant:e==="buy"?"default":"outline",onClick:()=>n("buy"),className:e==="buy"?"bg-blue-600 hover:bg-blue-700 transition-smooth btn-scale":"hover:bg-gray-50",children:"Buy"}),s.jsx(X,{variant:e==="sell"?"default":"outline",onClick:()=>n("sell"),className:e==="sell"?"bg-blue-600 hover:bg-blue-700 transition-smooth btn-scale":"hover:bg-gray-50",children:"Sell"}),s.jsx(X,{variant:e==="rent"?"default":"outline",onClick:()=>n("rent"),className:e==="rent"?"bg-blue-600 hover:bg-blue-700 transition-smooth btn-scale":"hover:bg-gray-50",children:"Rent"})]})]}),s.jsx(M9,{activeTab:e,onNavigateToBook:g=>f(`/book/${g}`)})]}),s.jsx("div",{className:"bg-gradient-to-b from-blue-50 to-transparent py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 text-3xl mb-2",children:"Book Communities"}),s.jsx("p",{className:"text-gray-600",children:"Connect with readers who share your interests"})]}),s.jsx(X,{onClick:()=>f("/communities"),className:"bg-blue-600 hover:bg-blue-700 text-white transition-smooth btn-scale shadow-subtle",children:"Browse All "})]}),s.jsx(D9,{onNavigateToCommunities:()=>f("/communities"),isLoggedIn:t})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"15K+"}),s.jsx("div",{className:"text-gray-600",children:"Books Listed"})]}),s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"8K+"}),s.jsx("div",{className:"text-gray-600",children:"Active Users"})]}),s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"120+"}),s.jsx("div",{className:"text-gray-600",children:"Communities"})]}),s.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-card border border-gray-100 transition-smooth hover:shadow-hover",children:[s.jsx("div",{className:"text-4xl text-blue-600 mb-2",children:"5K+"}),s.jsx("div",{className:"text-gray-600",children:"Happy Readers"})]})]})})]})}var Vg="Checkbox",[B9]=ir(Vg),[z9,Ow]=B9(Vg);function U9(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:o,form:u,name:d,onCheckedChange:f,required:p,value:y="on",internal_do_not_use_render:g}=t,[b,E]=Oa({prop:n,defaultProp:i??!1,onChange:f,caller:Vg}),[N,S]=_.useState(null),[k,R]=_.useState(null),I=_.useRef(!1),z=N?!!u||!!N.closest("form"):!0,H={checked:b,disabled:o,setChecked:E,control:N,setControl:S,name:d,form:u,value:y,hasConsumerStoppedPropagationRef:I,required:p,defaultChecked:Ll(i)?!1:i,isFormControl:z,bubbleInput:k,setBubbleInput:R};return s.jsx(z9,{scope:e,...H,children:$9(g)?g(H):r})}var DT="CheckboxTrigger",OT=_.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:o,value:u,disabled:d,checked:f,required:p,setControl:y,setChecked:g,hasConsumerStoppedPropagationRef:b,isFormControl:E,bubbleInput:N}=Ow(DT,t),S=mt(i,y),k=_.useRef(f);return _.useEffect(()=>{const R=o?.form;if(R){const I=()=>g(k.current);return R.addEventListener("reset",I),()=>R.removeEventListener("reset",I)}},[o,g]),s.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Ll(f)?"mixed":f,"aria-required":p,"data-state":$T(f),"data-disabled":d?"":void 0,disabled:d,value:u,...r,ref:S,onKeyDown:Fe(e,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:Fe(n,R=>{g(I=>Ll(I)?!0:!I),N&&E&&(b.current=R.isPropagationStopped(),b.current||R.stopPropagation())})})});OT.displayName=DT;var FT=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:u,disabled:d,value:f,onCheckedChange:p,form:y,...g}=t;return s.jsx(U9,{__scopeCheckbox:n,checked:i,defaultChecked:o,disabled:d,required:u,onCheckedChange:p,name:r,form:y,value:f,internal_do_not_use_render:({isFormControl:b})=>s.jsxs(s.Fragment,{children:[s.jsx(OT,{...g,ref:e,__scopeCheckbox:n}),b&&s.jsx(UT,{__scopeCheckbox:n})]})})});FT.displayName=Vg;var VT="CheckboxIndicator",BT=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,o=Ow(VT,n);return s.jsx(rr,{present:r||Ll(o.checked)||o.checked===!0,children:s.jsx(Je.span,{"data-state":$T(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});BT.displayName=VT;var zT="CheckboxBubbleInput",UT=_.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:u,required:d,disabled:f,name:p,value:y,form:g,bubbleInput:b,setBubbleInput:E}=Ow(zT,t),N=mt(n,E),S=yf(o),k=vf(r);_.useEffect(()=>{const I=b;if(!I)return;const z=window.HTMLInputElement.prototype,G=Object.getOwnPropertyDescriptor(z,"checked").set,Q=!i.current;if(S!==o&&G){const F=new Event("click",{bubbles:Q});I.indeterminate=Ll(o),G.call(I,Ll(o)?!1:o),I.dispatchEvent(F)}},[b,S,o,i]);const R=_.useRef(Ll(o)?!1:o);return s.jsx(Je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??R.current,required:d,disabled:f,name:p,value:y,form:g,...e,tabIndex:-1,ref:N,style:{...e.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});UT.displayName=zT;function $9(t){return typeof t=="function"}function Ll(t){return t==="indeterminate"}function $T(t){return Ll(t)?"indeterminate":t?"checked":"unchecked"}function Md({className:t,...e}){return s.jsx(FT,{"data-slot":"checkbox",className:ft("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:s.jsx(BT,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(Hl,{className:"size-3.5"})})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Fw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function d(y){try{p(r.next(y))}catch(g){u(g)}}function f(y){try{p(r.throw(y))}catch(g){u(g)}}function p(y){y.done?o(y.value):i(y.value).then(d,f)}p((r=r.apply(t,[])).next())})}function Vw(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(p){return function(y){return f([p,y])}}function f(p){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wu=function(){return Wu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Wu.apply(this,arguments)},HT=function(t){return{loading:t==null,value:t}},H9=function(){return function(t,e){switch(e.type){case"error":return Wu(Wu({},t),{error:e.error,loading:!1,value:void 0});case"reset":return HT(e.defaultValue);case"value":return Wu(Wu({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},W9=(function(t){var e=t?t():void 0,n=_.useReducer(H9(),HT(e)),r=n[0],i=n[1],o=_.useCallback(function(){var f=t?t():void 0;i({type:"reset",defaultValue:f})},[t]),u=_.useCallback(function(f){i({type:"error",error:f})},[]),d=_.useCallback(function(f){i({type:"value",value:f})},[]);return _.useMemo(function(){return{error:r.error,loading:r.loading,reset:o,setError:u,setValue:d,value:r.value}},[r.error,r.loading,o,u,d,r.value])}),Bg=(function(t,e){var n=W9(function(){return t.currentUser}),r=n.error,i=n.loading,o=n.setError,u=n.setValue,d=n.value;return _.useEffect(function(){var f=g0(t,function(p){return Fw(void 0,void 0,void 0,function(){var y;return Vw(this,function(g){switch(g.label){case 0:return[3,4];case 1:return g.trys.push([1,3,,4]),[4,e.onUserChanged(p)];case 2:return g.sent(),[3,4];case 3:return y=g.sent(),o(y),[3,4];case 4:return u(p),[2]}})})},o);return function(){f()}},[t]),[d,i,r]}),q9=(function(t,e){var n=_.useState(),r=n[0],i=n[1],o=_.useState(),u=o[0],d=o[1],f=_.useState(!1),p=f[0],y=f[1],g=_.useCallback(function(b,E){return Fw(void 0,void 0,void 0,function(){var N,S;return Vw(this,function(k){switch(k.label){case 0:y(!0),i(void 0),k.label=1;case 1:return k.trys.push([1,5,6,7]),[4,V2(t,b,E)];case 2:return N=k.sent(),[3,4];case 3:k.sent(),k.label=4;case 4:return d(N),[2,N];case 5:return S=k.sent(),i(S),[3,7];case 6:return y(!1),[7];case 7:return[2]}})})},[t,e]);return[g,u,p,r]}),G9=(function(t){var e=_.useState(),n=e[0],r=e[1],i=_.useState(),o=i[0],u=i[1],d=_.useState(!1),f=d[0],p=d[1],y=_.useCallback(function(g,b){return Fw(void 0,void 0,void 0,function(){var E,N;return Vw(this,function(S){switch(S.label){case 0:p(!0),r(void 0),S.label=1;case 1:return S.trys.push([1,3,4,5]),[4,p0(t,g,b)];case 2:return E=S.sent(),u(E),[2,E];case 3:return N=S.sent(),r(N),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})},[t]);return[y,o,f,n]});function K9({onLogin:t}){const[e,n]=_.useState(!1),[r,i]=_.useState(""),[o,u]=_.useState(""),d=Jn(),[f,p,y,g]=G9(gt);_.useEffect(()=>{g&&ue.error(g.message),p&&(console.log("Login successful"),t&&t(),d("/"))},[p,g,t,d]);const b=async S=>{S.preventDefault();try{await f(r,o)}catch(k){console.error(k)}},E=async()=>{try{await dp(gt,QE),console.log("Google login successful"),t&&t(),d("/")}catch(S){ue.error(S.message||"Google login failed.")}},N=async()=>{try{await dp(gt,rF),console.log("Facebook login successful"),t&&t(),d("/")}catch(S){ue.error(S.message||"Facebook login failed.")}};return s.jsxs("div",{className:"min-h-[calc(100vh-200px)] flex",children:[s.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#C4A672] to-[#8B7355] items-center justify-center p-12",children:s.jsxs("div",{className:"max-w-md text-center space-y-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm mb-4",children:s.jsx(fd,{className:"w-12 h-12 text-white"})}),s.jsx("h2",{className:"text-white text-4xl",children:"Welcome to Book Bloom"}),s.jsx("p",{className:"text-white/90 text-lg",children:"Your trusted platform for buying, selling, and renting books. Discover your next great read today."}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-3xl mb-1",children:"50K+"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Books"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-3xl mb-1",children:"10K+"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Happy Readers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-3xl mb-1",children:"100+"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Communities"})]})]})]})}),s.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-[#F5F5F5]",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h1",{className:"text-[#2C3E50]",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-600",children:"Please login to your account"})]}),s.jsxs("form",{onSubmit:b,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm text-gray-700",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(su,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"email",type:"email",placeholder:"Enter your email",value:r,onChange:S=>i(S.target.value),className:"pl-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672]",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"password",type:e?"text":"password",placeholder:"Enter your password",value:o,onChange:S=>u(S.target.value),className:"pl-10 pr-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672]",required:!0}),s.jsx("button",{type:"button",onClick:()=>n(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e?s.jsx(Xu,{className:"w-5 h-5"}):s.jsx(Qr,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Md,{id:"remember"}),s.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-600 cursor-pointer",children:"Remember me"})]}),s.jsx("a",{href:"#",className:"text-sm text-[#C4A672] hover:text-[#8B7355] hover:underline",children:"Forgot Password?"})]}),s.jsx(X,{type:"submit",disabled:y,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:y?"Logging in...":"Login"}),g&&s.jsx("p",{className:"text-sm text-red-500",children:g.message}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(X,{type:"button",variant:"outline",className:"h-11 border-gray-200 hover:bg-gray-50",onClick:E,children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),s.jsxs(X,{type:"button",variant:"outline",className:"h-11 border-gray-200 hover:bg-gray-50",onClick:N,children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]})]}),s.jsx("div",{className:"text-center pt-4",children:s.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",s.jsx(rn,{to:"/register",className:"text-[#C4A672] hover:text-[#8B7355] hover:underline",children:"Sign up for free"})]})})]})})})]})}function Z9({onSignUp:t}){const[e,n]=_.useState(!1),[r,i]=_.useState(!1),[o,u]=_.useState(""),[d,f]=_.useState(""),[p,y]=_.useState(""),[g,b]=_.useState(!1),[E,N]=_.useState({}),S=Jn(),[k,R,I,z]=q9(gt);_.useEffect(()=>{z&&ue.error(z.message)},[z]),_.useEffect(()=>{(async()=>{if(R){const U=R.user;try{await $h(ht(Te,"users",U.uid),{email:U.email,displayName:o.split("@")[0],photoURL:"https://ui-avatars.com/api/?name="+o.split("@")[0],role:"user",createdAt:xn(),updatedAt:xn()}),console.log("Signup successful"),t&&t(),S("/")}catch($){console.error("Error creating user doc:",$),ue.error("Account created but failed to set up profile.")}}})()},[R,o,S,t]);const H=()=>{const O={};return o?/\S+@\S+\.\S+/.test(o)||(O.email="Email is invalid"):O.email="Email is required",d?d.length<8&&(O.password="Password must be at least 8 characters"):O.password="Password is required",p?d!==p&&(O.confirmPassword="Passwords do not match"):O.confirmPassword="Please confirm your password",g||(O.terms="You must agree to the terms and conditions"),N(O),Object.keys(O).length===0},G=async O=>{if(O.preventDefault(),H())try{await k(o,d)}catch(U){console.error(U)}},Q=async()=>{try{const U=(await dp(gt,QE)).user,$=ht(Te,"users",U.uid);(await vg($)).exists()||await $h($,{email:U.email,displayName:U.displayName||U.email?.split("@")[0]||"User",photoURL:U.photoURL||"https://ui-avatars.com/api/?name=User",role:"user",createdAt:xn(),updatedAt:xn()}),console.log("Google signup successful"),t&&t(),S("/")}catch(O){console.error("Google signup error:",O),ue.error(O.message||"Google signup failed.")}},D=d?d.length<6?{text:"Weak",color:"text-red-500"}:d.length<10?{text:"Medium",color:"text-yellow-500"}:{text:"Strong",color:"text-green-500"}:null;return s.jsxs("div",{className:"min-h-[calc(100vh-200px)] flex",children:[s.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#8B7355] to-[#C4A672] items-center justify-center p-12",children:s.jsxs("div",{className:"max-w-md text-center space-y-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm mb-4",children:s.jsx(fd,{className:"w-12 h-12 text-white"})}),s.jsx("h2",{className:"text-white text-4xl",children:"Join BookBloom Today"}),s.jsx("p",{className:"text-white/90 text-lg",children:"Create your account and start your journey to finding the perfect property."}),s.jsxs("div",{className:"space-y-4 pt-8 text-left",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Xm,{className:"w-6 h-6 text-white flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white",children:"Access Thousands of Properties"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Browse our extensive real estate listings"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Xm,{className:"w-6 h-6 text-white flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white",children:"Save Your Favorites"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Keep track of properties you love"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Xm,{className:"w-6 h-6 text-white flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white",children:"Connect with Agents"}),s.jsx("div",{className:"text-white/80 text-sm",children:"Get expert guidance from professionals"})]})]})]})]})}),s.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-[#F5F5F5]",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h1",{className:"text-[#2C3E50]",children:"Create Account"}),s.jsx("p",{className:"text-gray-600",children:"Sign up to get started"})]}),s.jsxs("form",{onSubmit:G,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm text-gray-700",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(su,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"email",type:"email",placeholder:"Enter your email",value:o,onChange:O=>{u(O.target.value),N({...E,email:""})},className:`pl-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672] ${E.email?"border-red-500":""}`})]}),E.email&&s.jsx("p",{className:"text-sm text-red-500",children:E.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"password",type:e?"text":"password",placeholder:"Enter your password",value:d,onChange:O=>{f(O.target.value),N({...E,password:""})},className:`pl-10 pr-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672] ${E.password?"border-red-500":""}`}),s.jsx("button",{type:"button",onClick:()=>n(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e?s.jsx(Xu,{className:"w-5 h-5"}):s.jsx(Qr,{className:"w-5 h-5"})})]}),D&&s.jsxs("p",{className:`text-sm ${D.color}`,children:["Password strength: ",D.text]}),E.password&&s.jsx("p",{className:"text-sm text-red-500",children:E.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"text-sm text-gray-700",children:"Re-enter Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"confirmPassword",type:r?"text":"password",placeholder:"Re-enter your password",value:p,onChange:O=>{y(O.target.value),N({...E,confirmPassword:""})},className:`pl-10 pr-10 h-12 bg-gray-50 border-gray-200 focus:border-[#C4A672] focus:ring-[#C4A672] ${E.confirmPassword?"border-red-500":""}`}),s.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?s.jsx(Xu,{className:"w-5 h-5"}):s.jsx(Qr,{className:"w-5 h-5"})})]}),E.confirmPassword&&s.jsx("p",{className:"text-sm text-red-500",children:E.confirmPassword})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Md,{id:"terms",checked:g,onCheckedChange:O=>{b(O===!0),N({...E,terms:""})},className:E.terms?"border-red-500":""}),s.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600 cursor-pointer leading-tight",children:["I agree to the"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Terms and Conditions"})," ","and"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Privacy Policy"})]})]}),E.terms&&s.jsx("p",{className:"text-sm text-red-500 pl-6",children:E.terms})]}),s.jsx(X,{type:"submit",disabled:I,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:I?"Creating Account...":"Create Account"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or sign up with"})})]}),s.jsxs(X,{type:"button",variant:"outline",onClick:Q,className:"w-full h-12 border-gray-200 hover:bg-gray-50",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign up with Google"]})]}),s.jsx("div",{className:"text-center pt-4",children:s.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",s.jsx(rn,{to:"/login",className:"text-[#C4A672] hover:text-[#8B7355] hover:underline",children:"Login here"})]})})]})})})]})}const Y9="modulepreload",Q9=function(t){return"/"+t},m1={},X9=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");i=u(n.map(p=>{if(p=Q9(p),p in m1)return;m1[p]=!0;const y=p.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Y9,y||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),y)return new Promise((E,N)=>{b.addEventListener("load",E),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function J9({onLogin:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),[o,u]=_.useState(""),[d,f]=_.useState(!1),[p,y]=_.useState(!1),[g,b]=_.useState({}),[E,N]=_.useState(!1),[S,k]=_.useState(""),R=Jn(),I=async H=>{H.preventDefault();const G={};if(e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(G.email="Invalid email format"):G.email="Email is required",r?r.length<8&&(G.password="Password must be at least 8 characters"):G.password="Password is required",b(G),Object.keys(G).length===0){N(!0);try{if(e!=="aashish.maheshwari65@gmail.com"||r!=="(BloomBook)$%(*Rocking*)")throw new Error("Invalid admin credentials");try{await p0(gt,e,r)}catch(O){if(O.code==="auth/user-not-found"||O.code==="auth/invalid-credential")try{const{createUserWithEmailAndPassword:U}=await X9(async()=>{const{createUserWithEmailAndPassword:$}=await Promise.resolve().then(()=>E3);return{createUserWithEmailAndPassword:$}},[]);await U(gt,e,r)}catch{throw O}else throw O}const D=Math.floor(1e5+Math.random()*9e5).toString();k(D),f(!0),N(!1),ue.success("Please verify your identity")}catch(Q){N(!1),ue.error(Q.message),b({...G,form:Q.message})}}},z=async H=>{H.preventDefault();const G={};o?o.length!==6?G.twoFactorCode="Code must be 6 digits":o!==S&&(G.twoFactorCode="Invalid OTP code"):G.twoFactorCode="2FA code is required",b(G),Object.keys(G).length===0&&(N(!0),setTimeout(()=>{N(!1),t&&t(),ue.success("Admin login successful"),R("/admin/dashboard")},1e3))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2C3E50] to-[#34495E] flex items-center justify-center p-4",children:[s.jsxs(rn,{to:"/",className:"fixed top-6 left-6 flex items-center gap-2 text-white/80 hover:text-white transition-colors group",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 group-hover:bg-white/20 flex items-center justify-center transition-colors",children:s.jsx(zs,{className:"w-5 h-5"})}),s.jsx("span",{className:"hidden sm:inline",children:"Back to Home"})]}),s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#C4A672] rounded-full mb-4",children:s.jsx(Lo,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-white text-3xl mb-2",children:"Admin Portal"}),s.jsx("p",{className:"text-white/80",children:"Secure access for BookBloom administrators"})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:d?s.jsxs("form",{onSubmit:z,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Enter the 6-digit code sent to your email"}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6 text-center",children:[s.jsx("p",{className:"text-xs text-yellow-800 uppercase font-bold mb-1",children:"Demo Mode: Your OTP Code"}),s.jsx("p",{className:"text-3xl font-mono tracking-widest text-[#2C3E50]",children:S})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"twoFactorCode",children:"Authentication Code"}),s.jsx(Ie,{id:"twoFactorCode",type:"text",placeholder:"000000",maxLength:6,value:o,onChange:H=>{u(H.target.value.replace(/\D/g,"")),b({...g,twoFactorCode:""})},className:`text-center text-2xl tracking-widest ${g.twoFactorCode?"border-red-500":""}`}),g.twoFactorCode&&s.jsx("p",{className:"text-sm text-red-500",children:g.twoFactorCode})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(X,{type:"submit",disabled:E,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:E?"Verifying...":"Verify & Sign In"}),s.jsx(X,{type:"button",variant:"outline",onClick:()=>f(!1),className:"w-full",children:"Back"})]}),s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Don't have access to your authenticator?"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Use backup codes"})]})]}):s.jsxs("form",{onSubmit:I,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:"Sign In"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your administrator credentials"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"admin-email",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(su,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"admin-email",type:"email",placeholder:"admin@bookbloom.com",value:e,onChange:H=>{n(H.target.value),b({...g,email:""})},className:`pl-10 ${g.email?"border-red-500":""}`})]}),g.email&&s.jsx("p",{className:"text-sm text-red-500",children:g.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"admin-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"admin-password",type:"password",placeholder:"",value:r,onChange:H=>{i(H.target.value),b({...g,password:""})},className:`pl-10 ${g.password?"border-red-500":""}`})]}),g.password&&s.jsx("p",{className:"text-sm text-red-500",children:g.password})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Md,{id:"remember",checked:p,onCheckedChange:H=>y(H===!0)}),s.jsx(Ae,{htmlFor:"remember",className:"text-sm cursor-pointer",children:"Remember me for 30 days"})]}),s.jsx(X,{type:"submit",disabled:E,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:E?"Verifying...":"Continue to 2FA"}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(xw,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-blue-900",children:"This is a secure admin area. All login attempts are monitored and logged."})]})]})})]})]})}function eU({onLogout:t}){const n=Qi().pathname,r=[{id:"users",label:"User Management",icon:Rn,path:"/admin/dashboard"},{id:"books",label:"Book Inventory",icon:Wr,path:"/admin/dashboard/books"},{id:"rentals",label:"Rental Management",icon:Ar,path:"/admin/dashboard/rentals"},{id:"transactions",label:"Transaction History",icon:Io,path:"/admin/dashboard/transactions"},{id:"communities",label:"Communities",icon:sr,path:"/admin/dashboard/communities"},{id:"announcements",label:"Announcements",icon:$l,path:"/admin/dashboard/announcements"},{id:"settings",label:"System Settings",icon:bg,path:"/admin/dashboard/settings"}],i=r.find(o=>o.path===n||o.path==="/admin/dashboard"&&n==="/admin/dashboard")||r[0];return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsxs("aside",{className:"w-64 bg-[#2C3E50] text-white flex flex-col",children:[s.jsx("div",{className:"p-6 border-b border-white/10",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-lg flex items-center justify-center",children:s.jsx(Lo,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl",children:"BookBloom"}),s.jsx("p",{className:"text-xs text-white/70",children:"Admin Portal"})]})]})}),s.jsx("nav",{className:"flex-1 p-4 space-y-2",children:r.map(o=>{const u=o.icon;return s.jsxs(s0,{to:o.path,end:o.path==="/admin/dashboard",className:({isActive:d})=>`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${d?"bg-[#C4A672] text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:[s.jsx(u,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:o.label})]},o.id)})}),s.jsxs("div",{className:"p-4 border-t border-white/10 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 px-2",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center",children:s.jsx("span",{children:"AD"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Admin User"}),s.jsx("p",{className:"text-xs text-white/70",children:"admin@bookbloom.com"})]})]}),s.jsxs(X,{onClick:t,variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[s.jsx(yw,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]}),s.jsxs("main",{className:"flex-1 overflow-auto",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-1",children:i.label}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Manage and monitor your BookBloom platform"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-xl text-[#C4A672]",children:"$12,450"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"}),s.jsx("p",{className:"text-xl text-[#2C3E50]",children:"1,234"})]})]})]})}),s.jsx("div",{className:"p-8",children:s.jsx(_d,{})})]})]})}function tU({onReturnToProfile:t}){return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fadeInUp",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-hover max-w-md w-full p-8 text-center transition-smooth",children:[s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ni,{className:"w-12 h-12 text-green-600"})})}),s.jsx("h2",{className:"text-2xl mb-3 text-gray-900",children:"Password Updated!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been changed successfully. You can now use your new password to log in."}),s.jsx(X,{onClick:t,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg transition-smooth btn-scale shadow-subtle",children:"Return to Profile"}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Make sure to remember your new password"})]})})}function nU({onLogout:t}){const[e,n]=_.useState(!1);Jn();const[r,i,o]=Bg(gt),u=[{id:"profile",label:"Profile",icon:qh,path:"/dashboard"},{id:"purchases",label:"Purchases",icon:Wh,path:"/dashboard/purchases"},{id:"sales",label:"Sales",icon:Io,path:"/dashboard/sales"},{id:"rentals",label:"Rentals",icon:Ar,path:"/dashboard/rentals"},{id:"wishlist",label:"Wishlist",icon:ja,path:"/dashboard/wishlist"},{id:"communities",label:"Communities",icon:Rn,path:"/dashboard/communities"},{id:"chats",label:"Chats",icon:sr,path:"/dashboard/chats"},{id:"exchanges",label:"Exchanges",icon:pw,path:"/dashboard/exchanges"}];return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading dashboard..."}):o?s.jsxs("div",{className:"min-h-screen flex items-center justify-center text-red-500",children:["Error: ",o.message]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-lg flex items-center justify-center text-white",children:s.jsx("span",{children:"BB"})}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Book Bloom"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rn,{to:"/marketplace",children:s.jsxs(X,{variant:"outline",children:[s.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Browse Books"]})}),s.jsxs(X,{variant:"outline",onClick:t,children:[s.jsx(yw,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] rounded-2xl p-8 text-white mb-8",children:[s.jsxs("h2",{className:"text-3xl mb-2",children:["Welcome back, ",r?.displayName||r?.email?.split("@")[0]||"User","!"]}),s.jsx("p",{className:"text-white/90 mb-6",children:"Manage your books, view history, and explore new titles"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(rn,{to:"/marketplace",children:s.jsxs(X,{className:"bg-white text-[#C4A672] hover:bg-white/90",children:[s.jsx(Wh,{className:"w-4 h-4 mr-2"}),"Buy Books"]})}),s.jsx(rn,{to:"/rent",children:s.jsxs(X,{className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[s.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Rent Books"]})}),s.jsx(rn,{to:"/sell",children:s.jsxs(X,{className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[s.jsx(Io,{className:"w-4 h-4 mr-2"}),"Sell Books"]})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("div",{className:"flex gap-2 p-2 overflow-x-auto",children:u.map(d=>{const f=d.icon;return s.jsxs(s0,{to:d.path,end:d.path==="/dashboard",className:({isActive:p})=>`flex items-center gap-2 px-4 py-3 rounded-lg transition-colors whitespace-nowrap ${p?"bg-[#C4A672] text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(f,{className:"w-5 h-5"}),s.jsx("span",{children:d.label})]},d.id)})})})}),s.jsx("div",{children:s.jsx(_d,{context:{onPasswordChangeSuccess:()=>n(!0)}})})]}),e&&s.jsx(tU,{onContinue:()=>n(!1)})]})}const sU="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function zc(t){const[e,n]=_.useState(!1),r=()=>{n(!0)},{src:i,alt:o,style:u,className:d,...f}=t;return e?s.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${d??""}`,style:u,children:s.jsx("div",{className:"flex items-center justify-center w-full h-full",children:s.jsx("img",{src:sU,alt:"Error loading image",...f,"data-original-url":i})})}):s.jsx("img",{src:i,alt:o,className:d,style:u,...f,onError:r})}function rU({book:t,onClick:e}){const{addToCart:n}=JE(),r=u=>{u.stopPropagation(),n({id:t.id,title:t.title,price:t.price,image:t.images?.[0]||"",type:t.type==="rent"?"rent":"buy",sellerName:t.seller?.name||"Unknown",sellerId:"unknown"})},i=u=>{switch(u){case"New":case"Like New":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=u=>{switch(u){case"sell":return s.jsx(Qe,{className:"bg-blue-100 text-blue-800",children:"For Sale"});case"rent":return s.jsx(Qe,{className:"bg-purple-100 text-purple-800",children:"For Rent"});case"exchange":return s.jsx(Qe,{className:"bg-orange-100 text-orange-800",children:"Exchange"});case"both":return s.jsx(Qe,{className:"bg-teal-100 text-teal-800",children:"Sale & Rent"});default:return null}};return s.jsxs("div",{onClick:e,className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all cursor-pointer overflow-hidden group",children:[s.jsxs("div",{className:"aspect-[3/4] overflow-hidden bg-gray-100 relative",children:[s.jsx(zc,{src:t.images&&t.images.length>0?t.images[0]:"",alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx("div",{className:"absolute top-2 right-2",children:o(t.type)})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] line-clamp-1",children:t.title}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:t.author})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:i(t.condition),children:t.condition}),s.jsx("span",{className:"text-xs text-gray-500",children:t.category})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"text-[#C4A672] text-xl",children:t.type==="exchange"?"Exchange":`$${t.price.toFixed(2)}`})}),t.type!=="exchange"&&s.jsx(X,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 rounded-full",onClick:r,children:s.jsx(Ng,{className:"h-4 w-4 text-[#C4A672]"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-[#C4A672] flex items-center justify-center text-white text-xs",children:t.seller?.avatar||"U"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-xs text-gray-600 truncate",children:t.seller?.name||"Unknown Seller"})}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gc,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"text-xs text-gray-600",children:t.seller?.rating||"N/A"})]})]})]})]})]})}const iU=["top","right","bottom","left"],ql=Math.min,$r=Math.max,Rp=Math.round,Vm=Math.floor,La=t=>({x:t,y:t}),aU={left:"right",right:"left",bottom:"top",top:"bottom"},oU={start:"end",end:"start"};function My(t,e,n){return $r(t,ql(e,n))}function Mo(t,e){return typeof t=="function"?t(e):t}function Do(t){return t.split("-")[0]}function Dd(t){return t.split("-")[1]}function Bw(t){return t==="x"?"y":"x"}function zw(t){return t==="y"?"height":"width"}const lU=new Set(["top","bottom"]);function Ca(t){return lU.has(Do(t))?"y":"x"}function Uw(t){return Bw(Ca(t))}function cU(t,e,n){n===void 0&&(n=!1);const r=Dd(t),i=Uw(t),o=zw(i);let u=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(u=Lp(u)),[u,Lp(u)]}function uU(t){const e=Lp(t);return[Dy(t),e,Dy(e)]}function Dy(t){return t.replace(/start|end/g,e=>oU[e])}const p1=["left","right"],g1=["right","left"],dU=["top","bottom"],hU=["bottom","top"];function fU(t,e,n){switch(t){case"top":case"bottom":return n?e?g1:p1:e?p1:g1;case"left":case"right":return e?dU:hU;default:return[]}}function mU(t,e,n,r){const i=Dd(t);let o=fU(Do(t),n==="start",r);return i&&(o=o.map(u=>u+"-"+i),e&&(o=o.concat(o.map(Dy)))),o}function Lp(t){return t.replace(/left|right|bottom|top/g,e=>aU[e])}function pU(t){return{top:0,right:0,bottom:0,left:0,...t}}function WT(t){return typeof t!="number"?pU(t):{top:t,right:t,bottom:t,left:t}}function Mp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function x1(t,e,n){let{reference:r,floating:i}=t;const o=Ca(e),u=Uw(e),d=zw(u),f=Do(e),p=o==="y",y=r.x+r.width/2-i.width/2,g=r.y+r.height/2-i.height/2,b=r[d]/2-i[d]/2;let E;switch(f){case"top":E={x:y,y:r.y-i.height};break;case"bottom":E={x:y,y:r.y+r.height};break;case"right":E={x:r.x+r.width,y:g};break;case"left":E={x:r.x-i.width,y:g};break;default:E={x:r.x,y:r.y}}switch(Dd(e)){case"start":E[u]-=b*(n&&p?-1:1);break;case"end":E[u]+=b*(n&&p?-1:1);break}return E}const gU=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:u}=n,d=o.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(e));let p=await u.getElementRects({reference:t,floating:e,strategy:i}),{x:y,y:g}=x1(p,r,f),b=r,E={},N=0;for(let S=0;S<d.length;S++){const{name:k,fn:R}=d[S],{x:I,y:z,data:H,reset:G}=await R({x:y,y:g,initialPlacement:r,placement:b,strategy:i,middlewareData:E,rects:p,platform:u,elements:{reference:t,floating:e}});y=I??y,g=z??g,E={...E,[k]:{...E[k],...H}},G&&N<=50&&(N++,typeof G=="object"&&(G.placement&&(b=G.placement),G.rects&&(p=G.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:i}):G.rects),{x:y,y:g}=x1(p,b,f)),S=-1)}return{x:y,y:g,placement:b,strategy:i,middlewareData:E}};async function Kh(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:u,elements:d,strategy:f}=t,{boundary:p="clippingAncestors",rootBoundary:y="viewport",elementContext:g="floating",altBoundary:b=!1,padding:E=0}=Mo(e,t),N=WT(E),k=d[b?g==="floating"?"reference":"floating":g],R=Mp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(d.floating)),boundary:p,rootBoundary:y,strategy:f})),I=g==="floating"?{x:r,y:i,width:u.floating.width,height:u.floating.height}:u.reference,z=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d.floating)),H=await(o.isElement==null?void 0:o.isElement(z))?await(o.getScale==null?void 0:o.getScale(z))||{x:1,y:1}:{x:1,y:1},G=Mp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:I,offsetParent:z,strategy:f}):I);return{top:(R.top-G.top+N.top)/H.y,bottom:(G.bottom-R.bottom+N.bottom)/H.y,left:(R.left-G.left+N.left)/H.x,right:(G.right-R.right+N.right)/H.x}}const xU=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:u,elements:d,middlewareData:f}=e,{element:p,padding:y=0}=Mo(t,e)||{};if(p==null)return{};const g=WT(y),b={x:n,y:r},E=Uw(i),N=zw(E),S=await u.getDimensions(p),k=E==="y",R=k?"top":"left",I=k?"bottom":"right",z=k?"clientHeight":"clientWidth",H=o.reference[N]+o.reference[E]-b[E]-o.floating[N],G=b[E]-o.reference[E],Q=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let F=Q?Q[z]:0;(!F||!await(u.isElement==null?void 0:u.isElement(Q)))&&(F=d.floating[z]||o.floating[N]);const D=H/2-G/2,O=F/2-S[N]/2-1,U=ql(g[R],O),$=ql(g[I],O),K=U,W=F-S[N]-$,ce=F/2-S[N]/2+D,oe=My(K,ce,W),ne=!f.arrow&&Dd(i)!=null&&ce!==oe&&o.reference[N]/2-(ce<K?U:$)-S[N]/2<0,xe=ne?ce<K?ce-K:ce-W:0;return{[E]:b[E]+xe,data:{[E]:oe,centerOffset:ce-oe-xe,...ne&&{alignmentOffset:xe}},reset:ne}}}),vU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:u,initialPlacement:d,platform:f,elements:p}=e,{mainAxis:y=!0,crossAxis:g=!0,fallbackPlacements:b,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:S=!0,...k}=Mo(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const R=Do(i),I=Ca(d),z=Do(d)===d,H=await(f.isRTL==null?void 0:f.isRTL(p.floating)),G=b||(z||!S?[Lp(d)]:uU(d)),Q=N!=="none";!b&&Q&&G.push(...mU(d,S,N,H));const F=[d,...G],D=await Kh(e,k),O=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(y&&O.push(D[R]),g){const ce=cU(i,u,H);O.push(D[ce[0]],D[ce[1]])}if(U=[...U,{placement:i,overflows:O}],!O.every(ce=>ce<=0)){var $,K;const ce=((($=o.flip)==null?void 0:$.index)||0)+1,oe=F[ce];if(oe&&(!(g==="alignment"?I!==Ca(oe):!1)||U.every(Z=>Ca(Z.placement)===I?Z.overflows[0]>0:!0)))return{data:{index:ce,overflows:U},reset:{placement:oe}};let ne=(K=U.filter(xe=>xe.overflows[0]<=0).sort((xe,Z)=>xe.overflows[1]-Z.overflows[1])[0])==null?void 0:K.placement;if(!ne)switch(E){case"bestFit":{var W;const xe=(W=U.filter(Z=>{if(Q){const de=Ca(Z.placement);return de===I||de==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(de=>de>0).reduce((de,ie)=>de+ie,0)]).sort((Z,de)=>Z[1]-de[1])[0])==null?void 0:W[0];xe&&(ne=xe);break}case"initialPlacement":ne=d;break}if(i!==ne)return{reset:{placement:ne}}}return{}}}};function v1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function y1(t){return iU.some(e=>t[e]>=0)}const yU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Mo(t,e);switch(r){case"referenceHidden":{const o=await Kh(e,{...i,elementContext:"reference"}),u=v1(o,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:y1(u)}}}case"escaped":{const o=await Kh(e,{...i,altBoundary:!0}),u=v1(o,n.floating);return{data:{escapedOffsets:u,escaped:y1(u)}}}default:return{}}}}},qT=new Set(["left","top"]);async function wU(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),u=Do(n),d=Dd(n),f=Ca(n)==="y",p=qT.has(u)?-1:1,y=o&&f?-1:1,g=Mo(e,t);let{mainAxis:b,crossAxis:E,alignmentAxis:N}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return d&&typeof N=="number"&&(E=d==="end"?N*-1:N),f?{x:E*y,y:b*p}:{x:b*p,y:E*y}}const _U=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:u,middlewareData:d}=e,f=await wU(e,t);return u===((n=d.offset)==null?void 0:n.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:u}}}}},bU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:u=!1,limiter:d={fn:k=>{let{x:R,y:I}=k;return{x:R,y:I}}},...f}=Mo(t,e),p={x:n,y:r},y=await Kh(e,f),g=Ca(Do(i)),b=Bw(g);let E=p[b],N=p[g];if(o){const k=b==="y"?"top":"left",R=b==="y"?"bottom":"right",I=E+y[k],z=E-y[R];E=My(I,E,z)}if(u){const k=g==="y"?"top":"left",R=g==="y"?"bottom":"right",I=N+y[k],z=N-y[R];N=My(I,N,z)}const S=d.fn({...e,[b]:E,[g]:N});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[b]:o,[g]:u}}}}}},NU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:u}=e,{offset:d=0,mainAxis:f=!0,crossAxis:p=!0}=Mo(t,e),y={x:n,y:r},g=Ca(i),b=Bw(g);let E=y[b],N=y[g];const S=Mo(d,e),k=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){const z=b==="y"?"height":"width",H=o.reference[b]-o.floating[z]+k.mainAxis,G=o.reference[b]+o.reference[z]-k.mainAxis;E<H?E=H:E>G&&(E=G)}if(p){var R,I;const z=b==="y"?"width":"height",H=qT.has(Do(i)),G=o.reference[g]-o.floating[z]+(H&&((R=u.offset)==null?void 0:R[g])||0)+(H?0:k.crossAxis),Q=o.reference[g]+o.reference[z]+(H?0:((I=u.offset)==null?void 0:I[g])||0)-(H?k.crossAxis:0);N<G?N=G:N>Q&&(N=Q)}return{[b]:E,[g]:N}}}},jU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:u,elements:d}=e,{apply:f=()=>{},...p}=Mo(t,e),y=await Kh(e,p),g=Do(i),b=Dd(i),E=Ca(i)==="y",{width:N,height:S}=o.floating;let k,R;g==="top"||g==="bottom"?(k=g,R=b===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(R=g,k=b==="end"?"top":"bottom");const I=S-y.top-y.bottom,z=N-y.left-y.right,H=ql(S-y[k],I),G=ql(N-y[R],z),Q=!e.middlewareData.shift;let F=H,D=G;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(D=z),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=I),Q&&!b){const U=$r(y.left,0),$=$r(y.right,0),K=$r(y.top,0),W=$r(y.bottom,0);E?D=N-2*(U!==0||$!==0?U+$:$r(y.left,y.right)):F=S-2*(K!==0||W!==0?K+W:$r(y.top,y.bottom))}await f({...e,availableWidth:D,availableHeight:F});const O=await u.getDimensions(d.floating);return N!==O.width||S!==O.height?{reset:{rects:!0}}:{}}}};function zg(){return typeof window<"u"}function Od(t){return GT(t)?(t.nodeName||"").toLowerCase():"#document"}function Xr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function za(t){var e;return(e=(GT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function GT(t){return zg()?t instanceof Node||t instanceof Xr(t).Node:!1}function Zi(t){return zg()?t instanceof Element||t instanceof Xr(t).Element:!1}function Fa(t){return zg()?t instanceof HTMLElement||t instanceof Xr(t).HTMLElement:!1}function w1(t){return!zg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xr(t).ShadowRoot}const CU=new Set(["inline","contents"]);function wf(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Yi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!CU.has(i)}const EU=new Set(["table","td","th"]);function SU(t){return EU.has(Od(t))}const TU=[":popover-open",":modal"];function Ug(t){return TU.some(e=>{try{return t.matches(e)}catch{return!1}})}const AU=["transform","translate","scale","rotate","perspective"],kU=["transform","translate","scale","rotate","perspective","filter"],PU=["paint","layout","strict","content"];function $w(t){const e=Hw(),n=Zi(t)?Yi(t):t;return AU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||kU.some(r=>(n.willChange||"").includes(r))||PU.some(r=>(n.contain||"").includes(r))}function IU(t){let e=Gl(t);for(;Fa(e)&&!xd(e);){if($w(e))return e;if(Ug(e))return null;e=Gl(e)}return null}function Hw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const RU=new Set(["html","body","#document"]);function xd(t){return RU.has(Od(t))}function Yi(t){return Xr(t).getComputedStyle(t)}function $g(t){return Zi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gl(t){if(Od(t)==="html")return t;const e=t.assignedSlot||t.parentNode||w1(t)&&t.host||za(t);return w1(e)?e.host:e}function KT(t){const e=Gl(t);return xd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fa(e)&&wf(e)?e:KT(e)}function Zh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=KT(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),u=Xr(i);if(o){const d=Oy(u);return e.concat(u,u.visualViewport||[],wf(i)?i:[],d&&n?Zh(d):[])}return e.concat(i,Zh(i,[],n))}function Oy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ZT(t){const e=Yi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Fa(t),o=i?t.offsetWidth:n,u=i?t.offsetHeight:r,d=Rp(n)!==o||Rp(r)!==u;return d&&(n=o,r=u),{width:n,height:r,$:d}}function Ww(t){return Zi(t)?t:t.contextElement}function ed(t){const e=Ww(t);if(!Fa(e))return La(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=ZT(e);let u=(o?Rp(n.width):n.width)/r,d=(o?Rp(n.height):n.height)/i;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const LU=La(0);function YT(t){const e=Xr(t);return!Hw()||!e.visualViewport?LU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function MU(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Xr(t)?!1:e}function Zc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=Ww(t);let u=La(1);e&&(r?Zi(r)&&(u=ed(r)):u=ed(t));const d=MU(o,n,r)?YT(o):La(0);let f=(i.left+d.x)/u.x,p=(i.top+d.y)/u.y,y=i.width/u.x,g=i.height/u.y;if(o){const b=Xr(o),E=r&&Zi(r)?Xr(r):r;let N=b,S=Oy(N);for(;S&&r&&E!==N;){const k=ed(S),R=S.getBoundingClientRect(),I=Yi(S),z=R.left+(S.clientLeft+parseFloat(I.paddingLeft))*k.x,H=R.top+(S.clientTop+parseFloat(I.paddingTop))*k.y;f*=k.x,p*=k.y,y*=k.x,g*=k.y,f+=z,p+=H,N=Xr(S),S=Oy(N)}}return Mp({width:y,height:g,x:f,y:p})}function Hg(t,e){const n=$g(t).scrollLeft;return e?e.left+n:Zc(za(t)).left+n}function QT(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Hg(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function DU(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",u=za(r),d=e?Ug(e.floating):!1;if(r===u||d&&o)return n;let f={scrollLeft:0,scrollTop:0},p=La(1);const y=La(0),g=Fa(r);if((g||!g&&!o)&&((Od(r)!=="body"||wf(u))&&(f=$g(r)),Fa(r))){const E=Zc(r);p=ed(r),y.x=E.x+r.clientLeft,y.y=E.y+r.clientTop}const b=u&&!g&&!o?QT(u,f):La(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+y.x+b.x,y:n.y*p.y-f.scrollTop*p.y+y.y+b.y}}function OU(t){return Array.from(t.getClientRects())}function FU(t){const e=za(t),n=$g(t),r=t.ownerDocument.body,i=$r(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=$r(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+Hg(t);const d=-n.scrollTop;return Yi(r).direction==="rtl"&&(u+=$r(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:u,y:d}}const _1=25;function VU(t,e){const n=Xr(t),r=za(t),i=n.visualViewport;let o=r.clientWidth,u=r.clientHeight,d=0,f=0;if(i){o=i.width,u=i.height;const y=Hw();(!y||y&&e==="fixed")&&(d=i.offsetLeft,f=i.offsetTop)}const p=Hg(r);if(p<=0){const y=r.ownerDocument,g=y.body,b=getComputedStyle(g),E=y.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,N=Math.abs(r.clientWidth-g.clientWidth-E);N<=_1&&(o-=N)}else p<=_1&&(o+=p);return{width:o,height:u,x:d,y:f}}const BU=new Set(["absolute","fixed"]);function zU(t,e){const n=Zc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Fa(t)?ed(t):La(1),u=t.clientWidth*o.x,d=t.clientHeight*o.y,f=i*o.x,p=r*o.y;return{width:u,height:d,x:f,y:p}}function b1(t,e,n){let r;if(e==="viewport")r=VU(t,n);else if(e==="document")r=FU(za(t));else if(Zi(e))r=zU(e,n);else{const i=YT(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Mp(r)}function XT(t,e){const n=Gl(t);return n===e||!Zi(n)||xd(n)?!1:Yi(n).position==="fixed"||XT(n,e)}function UU(t,e){const n=e.get(t);if(n)return n;let r=Zh(t,[],!1).filter(d=>Zi(d)&&Od(d)!=="body"),i=null;const o=Yi(t).position==="fixed";let u=o?Gl(t):t;for(;Zi(u)&&!xd(u);){const d=Yi(u),f=$w(u);!f&&d.position==="fixed"&&(i=null),(o?!f&&!i:!f&&d.position==="static"&&!!i&&BU.has(i.position)||wf(u)&&!f&&XT(t,u))?r=r.filter(y=>y!==u):i=d,u=Gl(u)}return e.set(t,r),r}function $U(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const u=[...n==="clippingAncestors"?Ug(e)?[]:UU(e,this._c):[].concat(n),r],d=u[0],f=u.reduce((p,y)=>{const g=b1(e,y,i);return p.top=$r(g.top,p.top),p.right=ql(g.right,p.right),p.bottom=ql(g.bottom,p.bottom),p.left=$r(g.left,p.left),p},b1(e,d,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function HU(t){const{width:e,height:n}=ZT(t);return{width:e,height:n}}function WU(t,e,n){const r=Fa(e),i=za(e),o=n==="fixed",u=Zc(t,!0,o,e);let d={scrollLeft:0,scrollTop:0};const f=La(0);function p(){f.x=Hg(i)}if(r||!r&&!o)if((Od(e)!=="body"||wf(i))&&(d=$g(e)),r){const E=Zc(e,!0,o,e);f.x=E.x+e.clientLeft,f.y=E.y+e.clientTop}else i&&p();o&&!r&&i&&p();const y=i&&!r&&!o?QT(i,d):La(0),g=u.left+d.scrollLeft-f.x-y.x,b=u.top+d.scrollTop-f.y-y.y;return{x:g,y:b,width:u.width,height:u.height}}function Wv(t){return Yi(t).position==="static"}function N1(t,e){if(!Fa(t)||Yi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return za(t)===n&&(n=n.ownerDocument.body),n}function JT(t,e){const n=Xr(t);if(Ug(t))return n;if(!Fa(t)){let i=Gl(t);for(;i&&!xd(i);){if(Zi(i)&&!Wv(i))return i;i=Gl(i)}return n}let r=N1(t,e);for(;r&&SU(r)&&Wv(r);)r=N1(r,e);return r&&xd(r)&&Wv(r)&&!$w(r)?n:r||IU(t)||n}const qU=async function(t){const e=this.getOffsetParent||JT,n=this.getDimensions,r=await n(t.floating);return{reference:WU(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function GU(t){return Yi(t).direction==="rtl"}const KU={convertOffsetParentRelativeRectToViewportRelativeRect:DU,getDocumentElement:za,getClippingRect:$U,getOffsetParent:JT,getElementRects:qU,getClientRects:OU,getDimensions:HU,getScale:ed,isElement:Zi,isRTL:GU};function eA(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function ZU(t,e){let n=null,r;const i=za(t);function o(){var d;clearTimeout(r),(d=n)==null||d.disconnect(),n=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),o();const p=t.getBoundingClientRect(),{left:y,top:g,width:b,height:E}=p;if(d||e(),!b||!E)return;const N=Vm(g),S=Vm(i.clientWidth-(y+b)),k=Vm(i.clientHeight-(g+E)),R=Vm(y),z={rootMargin:-N+"px "+-S+"px "+-k+"px "+-R+"px",threshold:$r(0,ql(1,f))||1};let H=!0;function G(Q){const F=Q[0].intersectionRatio;if(F!==f){if(!H)return u();F?u(!1,F):r=setTimeout(()=>{u(!1,1e-7)},1e3)}F===1&&!eA(p,t.getBoundingClientRect())&&u(),H=!1}try{n=new IntersectionObserver(G,{...z,root:i.ownerDocument})}catch{n=new IntersectionObserver(G,z)}n.observe(t)}return u(!0),o}function YU(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,p=Ww(t),y=i||o?[...p?Zh(p):[],...Zh(e)]:[];y.forEach(R=>{i&&R.addEventListener("scroll",n,{passive:!0}),o&&R.addEventListener("resize",n)});const g=p&&d?ZU(p,n):null;let b=-1,E=null;u&&(E=new ResizeObserver(R=>{let[I]=R;I&&I.target===p&&E&&(E.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var z;(z=E)==null||z.observe(e)})),n()}),p&&!f&&E.observe(p),E.observe(e));let N,S=f?Zc(t):null;f&&k();function k(){const R=Zc(t);S&&!eA(S,R)&&n(),S=R,N=requestAnimationFrame(k)}return n(),()=>{var R;y.forEach(I=>{i&&I.removeEventListener("scroll",n),o&&I.removeEventListener("resize",n)}),g?.(),(R=E)==null||R.disconnect(),E=null,f&&cancelAnimationFrame(N)}}const QU=_U,XU=bU,JU=vU,e$=jU,t$=yU,j1=xU,n$=NU,s$=(t,e,n)=>{const r=new Map,i={platform:KU,...n},o={...i.platform,_c:r};return gU(t,e,{...i,platform:o})};var r$=typeof document<"u",i$=function(){},tp=r$?_.useLayoutEffect:i$;function Dp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Dp(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!Dp(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function tA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function C1(t,e){const n=tA(t);return Math.round(e*n)/n}function qv(t){const e=_.useRef(t);return tp(()=>{e.current=t}),e}function a$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:u}={},transform:d=!0,whileElementsMounted:f,open:p}=t,[y,g]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,E]=_.useState(r);Dp(b,r)||E(r);const[N,S]=_.useState(null),[k,R]=_.useState(null),I=_.useCallback(Z=>{Z!==Q.current&&(Q.current=Z,S(Z))},[]),z=_.useCallback(Z=>{Z!==F.current&&(F.current=Z,R(Z))},[]),H=o||N,G=u||k,Q=_.useRef(null),F=_.useRef(null),D=_.useRef(y),O=f!=null,U=qv(f),$=qv(i),K=qv(p),W=_.useCallback(()=>{if(!Q.current||!F.current)return;const Z={placement:e,strategy:n,middleware:b};$.current&&(Z.platform=$.current),s$(Q.current,F.current,Z).then(de=>{const ie={...de,isPositioned:K.current!==!1};ce.current&&!Dp(D.current,ie)&&(D.current=ie,bd.flushSync(()=>{g(ie)}))})},[b,e,n,$,K]);tp(()=>{p===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,g(Z=>({...Z,isPositioned:!1})))},[p]);const ce=_.useRef(!1);tp(()=>(ce.current=!0,()=>{ce.current=!1}),[]),tp(()=>{if(H&&(Q.current=H),G&&(F.current=G),H&&G){if(U.current)return U.current(H,G,W);W()}},[H,G,W,U,O]);const oe=_.useMemo(()=>({reference:Q,floating:F,setReference:I,setFloating:z}),[I,z]),ne=_.useMemo(()=>({reference:H,floating:G}),[H,G]),xe=_.useMemo(()=>{const Z={position:n,left:0,top:0};if(!ne.floating)return Z;const de=C1(ne.floating,y.x),ie=C1(ne.floating,y.y);return d?{...Z,transform:"translate("+de+"px, "+ie+"px)",...tA(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:de,top:ie}},[n,d,ne.floating,y.x,y.y]);return _.useMemo(()=>({...y,update:W,refs:oe,elements:ne,floatingStyles:xe}),[y,W,oe,ne,xe])}const o$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?j1({element:r.current,padding:i}).fn(n):{}:r?j1({element:r,padding:i}).fn(n):{}}}},l$=(t,e)=>({...QU(t),options:[t,e]}),c$=(t,e)=>({...XU(t),options:[t,e]}),u$=(t,e)=>({...n$(t),options:[t,e]}),d$=(t,e)=>({...JU(t),options:[t,e]}),h$=(t,e)=>({...e$(t),options:[t,e]}),f$=(t,e)=>({...t$(t),options:[t,e]}),m$=(t,e)=>({...o$(t),options:[t,e]});var p$="Arrow",nA=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return s.jsx(Je.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});nA.displayName=p$;var g$=nA,qw="Popper",[sA,Wg]=ir(qw),[x$,rA]=sA(qw),iA=t=>{const{__scopePopper:e,children:n}=t,[r,i]=_.useState(null);return s.jsx(x$,{scope:e,anchor:r,onAnchorChange:i,children:n})};iA.displayName=qw;var aA="PopperAnchor",oA=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=rA(aA,n),u=_.useRef(null),d=mt(e,u),f=_.useRef(null);return _.useEffect(()=>{const p=f.current;f.current=r?.current||u.current,p!==f.current&&o.onAnchorChange(f.current)}),r?null:s.jsx(Je.div,{...i,ref:d})});oA.displayName=aA;var Gw="PopperContent",[v$,y$]=sA(Gw),lA=_.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:u=0,arrowPadding:d=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:y=0,sticky:g="partial",hideWhenDetached:b=!1,updatePositionStrategy:E="optimized",onPlaced:N,...S}=t,k=rA(Gw,n),[R,I]=_.useState(null),z=mt(e,ve=>I(ve)),[H,G]=_.useState(null),Q=vf(H),F=Q?.width??0,D=Q?.height??0,O=r+(o!=="center"?"-"+o:""),U=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},$=Array.isArray(p)?p:[p],K=$.length>0,W={padding:U,boundary:$.filter(_$),altBoundary:K},{refs:ce,floatingStyles:oe,placement:ne,isPositioned:xe,middlewareData:Z}=a$({strategy:"fixed",placement:O,whileElementsMounted:(...ve)=>YU(...ve,{animationFrame:E==="always"}),elements:{reference:k.anchor},middleware:[l$({mainAxis:i+D,alignmentAxis:u}),f&&c$({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?u$():void 0,...W}),f&&d$({...W}),h$({...W,apply:({elements:ve,rects:ke,availableWidth:Xe,availableHeight:tt})=>{const{width:yt,height:wt}=ke.reference,Yt=ve.floating.style;Yt.setProperty("--radix-popper-available-width",`${Xe}px`),Yt.setProperty("--radix-popper-available-height",`${tt}px`),Yt.setProperty("--radix-popper-anchor-width",`${yt}px`),Yt.setProperty("--radix-popper-anchor-height",`${wt}px`)}}),H&&m$({element:H,padding:d}),b$({arrowWidth:F,arrowHeight:D}),b&&f$({strategy:"referenceHidden",...W})]}),[de,ie]=dA(ne),J=ls(N);Hn(()=>{xe&&J?.()},[xe,J]);const me=Z.arrow?.x,we=Z.arrow?.y,_e=Z.arrow?.centerOffset!==0,[je,Ee]=_.useState();return Hn(()=>{R&&Ee(window.getComputedStyle(R).zIndex)},[R]),s.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:xe?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(v$,{scope:n,placedSide:de,onArrowChange:G,arrowX:me,arrowY:we,shouldHideArrow:_e,children:s.jsx(Je.div,{"data-side":de,"data-align":ie,...S,ref:z,style:{...S.style,animation:xe?void 0:"none"}})})})});lA.displayName=Gw;var cA="PopperArrow",w$={top:"bottom",right:"left",bottom:"top",left:"right"},uA=_.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=y$(cA,r),u=w$[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(g$,{...i,ref:n,style:{...i.style,display:"block"}})})});uA.displayName=cA;function _$(t){return t!==null}var b$=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,u=i.arrow?.centerOffset!==0,d=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[p,y]=dA(n),g={start:"0%",center:"50%",end:"100%"}[y],b=(i.arrow?.x??0)+d/2,E=(i.arrow?.y??0)+f/2;let N="",S="";return p==="bottom"?(N=u?g:`${b}px`,S=`${-f}px`):p==="top"?(N=u?g:`${b}px`,S=`${r.floating.height+f}px`):p==="right"?(N=`${-f}px`,S=u?g:`${E}px`):p==="left"&&(N=`${r.floating.width+f}px`,S=u?g:`${E}px`),{data:{x:N,y:S}}}});function dA(t){const[e,n="center"]=t.split("-");return[e,n]}var hA=iA,fA=oA,mA=lA,pA=uA;function N$(t){const e=j$(t),n=_.forwardRef((r,i)=>{const{children:o,...u}=r,d=_.Children.toArray(o),f=d.find(E$);if(f){const p=f.props.children,y=d.map(g=>g===f?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:g);return s.jsx(e,{...u,ref:i,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return s.jsx(e,{...u,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function j$(t){const e=_.forwardRef((n,r)=>{const{children:i,...o}=n;if(_.isValidElement(i)){const u=T$(i),d=S$(o,i.props);return i.type!==_.Fragment&&(d.ref=r?Fo(r,u):u),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var C$=Symbol("radix.slottable");function E$(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===C$}function S$(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{const f=o(...d);return i(...d),f}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function T$(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var gA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),A$="VisuallyHidden",k$=_.forwardRef((t,e)=>s.jsx(Je.span,{...t,ref:e,style:{...gA,...t.style}}));k$.displayName=A$;var P$=[" ","Enter","ArrowUp","ArrowDown"],I$=[" ","Enter"],Yc="Select",[qg,Gg,R$]=Og(Yc),[Fd]=ir(Yc,[R$,Wg]),Kg=Wg(),[L$,rc]=Fd(Yc),[M$,D$]=Fd(Yc),xA=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:u,defaultValue:d,onValueChange:f,dir:p,name:y,autoComplete:g,disabled:b,required:E,form:N}=t,S=Kg(e),[k,R]=_.useState(null),[I,z]=_.useState(null),[H,G]=_.useState(!1),Q=ru(p),[F,D]=Oa({prop:r,defaultProp:i??!1,onChange:o,caller:Yc}),[O,U]=Oa({prop:u,defaultProp:d,onChange:f,caller:Yc}),$=_.useRef(null),K=k?N||!!k.closest("form"):!0,[W,ce]=_.useState(new Set),oe=Array.from(W).map(ne=>ne.props.value).join(";");return s.jsx(hA,{...S,children:s.jsxs(L$,{required:E,scope:e,trigger:k,onTriggerChange:R,valueNode:I,onValueNodeChange:z,valueNodeHasChildren:H,onValueNodeHasChildrenChange:G,contentId:Ra(),value:O,onValueChange:U,open:F,onOpenChange:D,dir:Q,triggerPointerDownPosRef:$,disabled:b,children:[s.jsx(qg.Provider,{scope:e,children:s.jsx(M$,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(ne=>{ce(xe=>new Set(xe).add(ne))},[]),onNativeOptionRemove:_.useCallback(ne=>{ce(xe=>{const Z=new Set(xe);return Z.delete(ne),Z})},[]),children:n})}),K?s.jsxs(VA,{"aria-hidden":!0,required:E,tabIndex:-1,name:y,autoComplete:g,value:O,onChange:ne=>U(ne.target.value),disabled:b,form:N,children:[O===void 0?s.jsx("option",{value:""}):null,Array.from(W)]},oe):null]})})};xA.displayName=Yc;var vA="SelectTrigger",yA=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=Kg(n),u=rc(vA,n),d=u.disabled||r,f=mt(e,u.onTriggerChange),p=Gg(n),y=_.useRef("touch"),[g,b,E]=zA(S=>{const k=p().filter(z=>!z.disabled),R=k.find(z=>z.value===u.value),I=UA(k,S,R);I!==void 0&&u.onValueChange(I.value)}),N=S=>{d||(u.onOpenChange(!0),E()),S&&(u.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return s.jsx(fA,{asChild:!0,...o,children:s.jsx(Je.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":BA(u.value)?"":void 0,...i,ref:f,onClick:Fe(i.onClick,S=>{S.currentTarget.focus(),y.current!=="mouse"&&N(S)}),onPointerDown:Fe(i.onPointerDown,S=>{y.current=S.pointerType;const k=S.target;k.hasPointerCapture(S.pointerId)&&k.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(N(S),S.preventDefault())}),onKeyDown:Fe(i.onKeyDown,S=>{const k=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&b(S.key),!(k&&S.key===" ")&&P$.includes(S.key)&&(N(),S.preventDefault())})})})});yA.displayName=vA;var wA="SelectValue",_A=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:u="",...d}=t,f=rc(wA,n),{onValueNodeHasChildrenChange:p}=f,y=o!==void 0,g=mt(e,f.onValueNodeChange);return Hn(()=>{p(y)},[p,y]),s.jsx(Je.span,{...d,ref:g,style:{pointerEvents:"none"},children:BA(f.value)?s.jsx(s.Fragment,{children:u}):o})});_A.displayName=wA;var O$="SelectIcon",bA=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(Je.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});bA.displayName=O$;var F$="SelectPortal",NA=t=>s.jsx(kg,{asChild:!0,...t});NA.displayName=F$;var Qc="SelectContent",jA=_.forwardRef((t,e)=>{const n=rc(Qc,t.__scopeSelect),[r,i]=_.useState();if(Hn(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?bd.createPortal(s.jsx(CA,{scope:t.__scopeSelect,children:s.jsx(qg.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),o):null}return s.jsx(EA,{...t,ref:e})});jA.displayName=Qc;var $i=10,[CA,ic]=Fd(Qc),V$="SelectContentImpl",B$=N$("SelectContent.RemoveScroll"),EA=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:u,side:d,sideOffset:f,align:p,alignOffset:y,arrowPadding:g,collisionBoundary:b,collisionPadding:E,sticky:N,hideWhenDetached:S,avoidCollisions:k,...R}=t,I=rc(Qc,n),[z,H]=_.useState(null),[G,Q]=_.useState(null),F=mt(e,ve=>H(ve)),[D,O]=_.useState(null),[U,$]=_.useState(null),K=Gg(n),[W,ce]=_.useState(!1),oe=_.useRef(!1);_.useEffect(()=>{if(z)return Ew(z)},[z]),Cw();const ne=_.useCallback(ve=>{const[ke,...Xe]=K().map(wt=>wt.ref.current),[tt]=Xe.slice(-1),yt=document.activeElement;for(const wt of ve)if(wt===yt||(wt?.scrollIntoView({block:"nearest"}),wt===ke&&G&&(G.scrollTop=0),wt===tt&&G&&(G.scrollTop=G.scrollHeight),wt?.focus(),document.activeElement!==yt))return},[K,G]),xe=_.useCallback(()=>ne([D,z]),[ne,D,z]);_.useEffect(()=>{W&&xe()},[W,xe]);const{onOpenChange:Z,triggerPointerDownPosRef:de}=I;_.useEffect(()=>{if(z){let ve={x:0,y:0};const ke=tt=>{ve={x:Math.abs(Math.round(tt.pageX)-(de.current?.x??0)),y:Math.abs(Math.round(tt.pageY)-(de.current?.y??0))}},Xe=tt=>{ve.x<=10&&ve.y<=10?tt.preventDefault():z.contains(tt.target)||Z(!1),document.removeEventListener("pointermove",ke),de.current=null};return de.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",Xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",Xe,{capture:!0})}}},[z,Z,de]),_.useEffect(()=>{const ve=()=>Z(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[Z]);const[ie,J]=zA(ve=>{const ke=K().filter(yt=>!yt.disabled),Xe=ke.find(yt=>yt.ref.current===document.activeElement),tt=UA(ke,ve,Xe);tt&&setTimeout(()=>tt.ref.current.focus())}),me=_.useCallback((ve,ke,Xe)=>{const tt=!oe.current&&!Xe;(I.value!==void 0&&I.value===ke||tt)&&(O(ve),tt&&(oe.current=!0))},[I.value]),we=_.useCallback(()=>z?.focus(),[z]),_e=_.useCallback((ve,ke,Xe)=>{const tt=!oe.current&&!Xe;(I.value!==void 0&&I.value===ke||tt)&&$(ve)},[I.value]),je=r==="popper"?Fy:SA,Ee=je===Fy?{side:d,sideOffset:f,align:p,alignOffset:y,arrowPadding:g,collisionBoundary:b,collisionPadding:E,sticky:N,hideWhenDetached:S,avoidCollisions:k}:{};return s.jsx(CA,{scope:n,content:z,viewport:G,onViewportChange:Q,itemRefCallback:me,selectedItem:D,onItemLeave:we,itemTextRefCallback:_e,focusSelectedItem:xe,selectedItemText:U,position:r,isPositioned:W,searchRef:ie,children:s.jsx(Ig,{as:B$,allowPinchZoom:!0,children:s.jsx(Ag,{asChild:!0,trapped:I.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:Fe(i,ve=>{I.trigger?.focus({preventScroll:!0}),ve.preventDefault()}),children:s.jsx(Tg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:s.jsx(je,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:ve=>ve.preventDefault(),...R,...Ee,onPlaced:()=>ce(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:Fe(R.onKeyDown,ve=>{const ke=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!ke&&ve.key.length===1&&J(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let tt=K().filter(yt=>!yt.disabled).map(yt=>yt.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(tt=tt.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const yt=ve.target,wt=tt.indexOf(yt);tt=tt.slice(wt+1)}setTimeout(()=>ne(tt)),ve.preventDefault()}})})})})})})});EA.displayName=V$;var z$="SelectItemAlignedPosition",SA=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=rc(Qc,n),u=ic(Qc,n),[d,f]=_.useState(null),[p,y]=_.useState(null),g=mt(e,F=>y(F)),b=Gg(n),E=_.useRef(!1),N=_.useRef(!0),{viewport:S,selectedItem:k,selectedItemText:R,focusSelectedItem:I}=u,z=_.useCallback(()=>{if(o.trigger&&o.valueNode&&d&&p&&S&&k&&R){const F=o.trigger.getBoundingClientRect(),D=p.getBoundingClientRect(),O=o.valueNode.getBoundingClientRect(),U=R.getBoundingClientRect();if(o.dir!=="rtl"){const yt=U.left-D.left,wt=O.left-yt,Yt=F.left-wt,Ln=F.width+Yt,kr=Math.max(Ln,D.width),js=window.innerWidth-$i,An=Gh(wt,[$i,Math.max($i,js-kr)]);d.style.minWidth=Ln+"px",d.style.left=An+"px"}else{const yt=D.right-U.right,wt=window.innerWidth-O.right-yt,Yt=window.innerWidth-F.right-wt,Ln=F.width+Yt,kr=Math.max(Ln,D.width),js=window.innerWidth-$i,An=Gh(wt,[$i,Math.max($i,js-kr)]);d.style.minWidth=Ln+"px",d.style.right=An+"px"}const $=b(),K=window.innerHeight-$i*2,W=S.scrollHeight,ce=window.getComputedStyle(p),oe=parseInt(ce.borderTopWidth,10),ne=parseInt(ce.paddingTop,10),xe=parseInt(ce.borderBottomWidth,10),Z=parseInt(ce.paddingBottom,10),de=oe+ne+W+Z+xe,ie=Math.min(k.offsetHeight*5,de),J=window.getComputedStyle(S),me=parseInt(J.paddingTop,10),we=parseInt(J.paddingBottom,10),_e=F.top+F.height/2-$i,je=K-_e,Ee=k.offsetHeight/2,ve=k.offsetTop+Ee,ke=oe+ne+ve,Xe=de-ke;if(ke<=_e){const yt=$.length>0&&k===$[$.length-1].ref.current;d.style.bottom="0px";const wt=p.clientHeight-S.offsetTop-S.offsetHeight,Yt=Math.max(je,Ee+(yt?we:0)+wt+xe),Ln=ke+Yt;d.style.height=Ln+"px"}else{const yt=$.length>0&&k===$[0].ref.current;d.style.top="0px";const Yt=Math.max(_e,oe+S.offsetTop+(yt?me:0)+Ee)+Xe;d.style.height=Yt+"px",S.scrollTop=ke-_e+S.offsetTop}d.style.margin=`${$i}px 0`,d.style.minHeight=ie+"px",d.style.maxHeight=K+"px",r?.(),requestAnimationFrame(()=>E.current=!0)}},[b,o.trigger,o.valueNode,d,p,S,k,R,o.dir,r]);Hn(()=>z(),[z]);const[H,G]=_.useState();Hn(()=>{p&&G(window.getComputedStyle(p).zIndex)},[p]);const Q=_.useCallback(F=>{F&&N.current===!0&&(z(),I?.(),N.current=!1)},[z,I]);return s.jsx($$,{scope:n,contentWrapper:d,shouldExpandOnScrollRef:E,onScrollButtonChange:Q,children:s.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:H},children:s.jsx(Je.div,{...i,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});SA.displayName=z$;var U$="SelectPopperPosition",Fy=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=$i,...o}=t,u=Kg(n);return s.jsx(mA,{...u,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Fy.displayName=U$;var[$$,Kw]=Fd(Qc,{}),Vy="SelectViewport",TA=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=ic(Vy,n),u=Kw(Vy,n),d=mt(e,o.onViewportChange),f=_.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(qg.Slot,{scope:n,children:s.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Fe(i.onScroll,p=>{const y=p.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:b}=u;if(b?.current&&g){const E=Math.abs(f.current-y.scrollTop);if(E>0){const N=window.innerHeight-$i*2,S=parseFloat(g.style.minHeight),k=parseFloat(g.style.height),R=Math.max(S,k);if(R<N){const I=R+E,z=Math.min(N,I),H=I-z;g.style.height=z+"px",g.style.bottom==="0px"&&(y.scrollTop=H>0?H:0,g.style.justifyContent="flex-end")}}}f.current=y.scrollTop})})})]})});TA.displayName=Vy;var AA="SelectGroup",[H$,W$]=Fd(AA),q$=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ra();return s.jsx(H$,{scope:n,id:i,children:s.jsx(Je.div,{role:"group","aria-labelledby":i,...r,ref:e})})});q$.displayName=AA;var kA="SelectLabel",G$=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=W$(kA,n);return s.jsx(Je.div,{id:i.id,...r,ref:e})});G$.displayName=kA;var Op="SelectItem",[K$,PA]=Fd(Op),IA=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...u}=t,d=rc(Op,n),f=ic(Op,n),p=d.value===r,[y,g]=_.useState(o??""),[b,E]=_.useState(!1),N=mt(e,I=>f.itemRefCallback?.(I,r,i)),S=Ra(),k=_.useRef("touch"),R=()=>{i||(d.onValueChange(r),d.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(K$,{scope:n,value:r,disabled:i,textId:S,isSelected:p,onItemTextChange:_.useCallback(I=>{g(z=>z||(I?.textContent??"").trim())},[]),children:s.jsx(qg.ItemSlot,{scope:n,value:r,disabled:i,textValue:y,children:s.jsx(Je.div,{role:"option","aria-labelledby":S,"data-highlighted":b?"":void 0,"aria-selected":p&&b,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...u,ref:N,onFocus:Fe(u.onFocus,()=>E(!0)),onBlur:Fe(u.onBlur,()=>E(!1)),onClick:Fe(u.onClick,()=>{k.current!=="mouse"&&R()}),onPointerUp:Fe(u.onPointerUp,()=>{k.current==="mouse"&&R()}),onPointerDown:Fe(u.onPointerDown,I=>{k.current=I.pointerType}),onPointerMove:Fe(u.onPointerMove,I=>{k.current=I.pointerType,i?f.onItemLeave?.():k.current==="mouse"&&I.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(u.onPointerLeave,I=>{I.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:Fe(u.onKeyDown,I=>{f.searchRef?.current!==""&&I.key===" "||(I$.includes(I.key)&&R(),I.key===" "&&I.preventDefault())})})})})});IA.displayName=Op;var Nh="SelectItemText",RA=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,u=rc(Nh,n),d=ic(Nh,n),f=PA(Nh,n),p=D$(Nh,n),[y,g]=_.useState(null),b=mt(e,R=>g(R),f.onItemTextChange,R=>d.itemTextRefCallback?.(R,f.value,f.disabled)),E=y?.textContent,N=_.useMemo(()=>s.jsx("option",{value:f.value,disabled:f.disabled,children:E},f.value),[f.disabled,f.value,E]),{onNativeOptionAdd:S,onNativeOptionRemove:k}=p;return Hn(()=>(S(N),()=>k(N)),[S,k,N]),s.jsxs(s.Fragment,{children:[s.jsx(Je.span,{id:f.textId,...o,ref:b}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?bd.createPortal(o.children,u.valueNode):null]})});RA.displayName=Nh;var LA="SelectItemIndicator",MA=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return PA(LA,n).isSelected?s.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});MA.displayName=LA;var By="SelectScrollUpButton",DA=_.forwardRef((t,e)=>{const n=ic(By,t.__scopeSelect),r=Kw(By,t.__scopeSelect),[i,o]=_.useState(!1),u=mt(e,r.onScrollButtonChange);return Hn(()=>{if(n.viewport&&n.isPositioned){let d=function(){const p=f.scrollTop>0;o(p)};const f=n.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),i?s.jsx(FA,{...t,ref:u,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=n;d&&f&&(d.scrollTop=d.scrollTop-f.offsetHeight)}}):null});DA.displayName=By;var zy="SelectScrollDownButton",OA=_.forwardRef((t,e)=>{const n=ic(zy,t.__scopeSelect),r=Kw(zy,t.__scopeSelect),[i,o]=_.useState(!1),u=mt(e,r.onScrollButtonChange);return Hn(()=>{if(n.viewport&&n.isPositioned){let d=function(){const p=f.scrollHeight-f.clientHeight,y=Math.ceil(f.scrollTop)<p;o(y)};const f=n.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),i?s.jsx(FA,{...t,ref:u,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=n;d&&f&&(d.scrollTop=d.scrollTop+f.offsetHeight)}}):null});OA.displayName=zy;var FA=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=ic("SelectScrollButton",n),u=_.useRef(null),d=Gg(n),f=_.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return _.useEffect(()=>()=>f(),[f]),Hn(()=>{d().find(y=>y.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),s.jsx(Je.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Fe(i.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:Fe(i.onPointerMove,()=>{o.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:Fe(i.onPointerLeave,()=>{f()})})}),Z$="SelectSeparator",Y$=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});Y$.displayName=Z$;var Uy="SelectArrow",Q$=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Kg(n),o=rc(Uy,n),u=ic(Uy,n);return o.open&&u.position==="popper"?s.jsx(pA,{...i,...r,ref:e}):null});Q$.displayName=Uy;var X$="SelectBubbleInput",VA=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=_.useRef(null),o=mt(r,i),u=yf(e);return _.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==e&&y){const g=new Event("change",{bubbles:!0});y.call(d,e),d.dispatchEvent(g)}},[u,e]),s.jsx(Je.select,{...n,style:{...gA,...n.style},ref:o,defaultValue:e})});VA.displayName=X$;function BA(t){return t===""||t===void 0}function zA(t){const e=ls(t),n=_.useRef(""),r=_.useRef(0),i=_.useCallback(u=>{const d=n.current+u;e(d),(function f(p){n.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(d)},[e]),o=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function UA(t,e,n){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let u=J$(t,Math.max(o,0));i.length===1&&(u=u.filter(p=>p!==n));const f=u.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return f!==n?f:void 0}function J$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var eH=xA,tH=yA,nH=_A,sH=bA,rH=NA,iH=jA,aH=TA,oH=IA,lH=RA,cH=MA,uH=DA,dH=OA;function vn({...t}){return s.jsx(eH,{"data-slot":"select",...t})}function yn({...t}){return s.jsx(nH,{"data-slot":"select-value",...t})}function wn({className:t,size:e="default",children:n,...r}){return s.jsxs(tH,{"data-slot":"select-trigger","data-size":e,className:ft("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,s.jsx(sH,{asChild:!0,children:s.jsx(wg,{className:"size-4 opacity-50"})})]})}function _n({className:t,children:e,position:n="popper",...r}){return s.jsx(rH,{children:s.jsxs(iH,{"data-slot":"select-content",className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(hH,{}),s.jsx(aH,{className:ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),s.jsx(fH,{})]})})}function Ve({className:t,children:e,...n}){return s.jsxs(oH,{"data-slot":"select-item",className:ft("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(cH,{children:s.jsx(Hl,{className:"size-4"})})}),s.jsx(lH,{children:e})]})}function hH({className:t,...e}){return s.jsx(uH,{"data-slot":"select-scroll-up-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(sV,{className:"size-4"})})}function fH({className:t,...e}){return s.jsx(dH,{"data-slot":"select-scroll-down-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(wg,{className:"size-4"})})}var $A=["PageUp","PageDown"],HA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],WA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Vd="Slider",[$y,mH,pH]=Og(Vd),[qA]=ir(Vd,[pH]),[gH,Zg]=qA(Vd),GA=_.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:o=1,orientation:u="horizontal",disabled:d=!1,minStepsBetweenThumbs:f=0,defaultValue:p=[r],value:y,onValueChange:g=()=>{},onValueCommit:b=()=>{},inverted:E=!1,form:N,...S}=t,k=_.useRef(new Set),R=_.useRef(0),z=u==="horizontal"?xH:vH,[H=[],G]=Oa({prop:y,defaultProp:p,onChange:$=>{[...k.current][R.current]?.focus(),g($)}}),Q=_.useRef(H);function F($){const K=NH(H,$);U($,K)}function D($){U($,R.current)}function O(){const $=Q.current[R.current];H[R.current]!==$&&b(H)}function U($,K,{commit:W}={commit:!1}){const ce=SH(o),oe=TH(Math.round(($-r)/o)*o+r,ce),ne=Gh(oe,[r,i]);G((xe=[])=>{const Z=_H(xe,ne,K);if(EH(Z,f*o)){R.current=Z.indexOf(ne);const de=String(Z)!==String(xe);return de&&W&&b(Z),de?Z:xe}else return xe})}return s.jsx(gH,{scope:t.__scopeSlider,name:n,disabled:d,min:r,max:i,valueIndexToChangeRef:R,thumbs:k.current,values:H,orientation:u,form:N,children:s.jsx($y.Provider,{scope:t.__scopeSlider,children:s.jsx($y.Slot,{scope:t.__scopeSlider,children:s.jsx(z,{"aria-disabled":d,"data-disabled":d?"":void 0,...S,ref:e,onPointerDown:Fe(S.onPointerDown,()=>{d||(Q.current=H)}),min:r,max:i,inverted:E,onSlideStart:d?void 0:F,onSlideMove:d?void 0:D,onSlideEnd:d?void 0:O,onHomeKeyDown:()=>!d&&U(r,0,{commit:!0}),onEndKeyDown:()=>!d&&U(i,H.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:K})=>{if(!d){const oe=$A.includes($.key)||$.shiftKey&&HA.includes($.key)?10:1,ne=R.current,xe=H[ne],Z=o*oe*K;U(xe+Z,ne,{commit:!0})}}})})})})});GA.displayName=Vd;var[KA,ZA]=qA(Vd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xH=_.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:o,onSlideStart:u,onSlideMove:d,onSlideEnd:f,onStepKeyDown:p,...y}=t,[g,b]=_.useState(null),E=mt(e,z=>b(z)),N=_.useRef(void 0),S=ru(i),k=S==="ltr",R=k&&!o||!k&&o;function I(z){const H=N.current||g.getBoundingClientRect(),G=[0,H.width],F=Zw(G,R?[n,r]:[r,n]);return N.current=H,F(z-H.left)}return s.jsx(KA,{scope:t.__scopeSlider,startEdge:R?"left":"right",endEdge:R?"right":"left",direction:R?1:-1,size:"width",children:s.jsx(YA,{dir:S,"data-orientation":"horizontal",...y,ref:E,style:{...y.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:z=>{const H=I(z.clientX);u?.(H)},onSlideMove:z=>{const H=I(z.clientX);d?.(H)},onSlideEnd:()=>{N.current=void 0,f?.()},onStepKeyDown:z=>{const G=WA[R?"from-left":"from-right"].includes(z.key);p?.({event:z,direction:G?-1:1})}})})}),vH=_.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:u,onSlideEnd:d,onStepKeyDown:f,...p}=t,y=_.useRef(null),g=mt(e,y),b=_.useRef(void 0),E=!i;function N(S){const k=b.current||y.current.getBoundingClientRect(),R=[0,k.height],z=Zw(R,E?[r,n]:[n,r]);return b.current=k,z(S-k.top)}return s.jsx(KA,{scope:t.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:s.jsx(YA,{"data-orientation":"vertical",...p,ref:g,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const k=N(S.clientY);o?.(k)},onSlideMove:S=>{const k=N(S.clientY);u?.(k)},onSlideEnd:()=>{b.current=void 0,d?.()},onStepKeyDown:S=>{const R=WA[E?"from-bottom":"from-top"].includes(S.key);f?.({event:S,direction:R?-1:1})}})})}),YA=_.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:u,onEndKeyDown:d,onStepKeyDown:f,...p}=t,y=Zg(Vd,n);return s.jsx(Je.span,{...p,ref:e,onKeyDown:Fe(t.onKeyDown,g=>{g.key==="Home"?(u(g),g.preventDefault()):g.key==="End"?(d(g),g.preventDefault()):$A.concat(HA).includes(g.key)&&(f(g),g.preventDefault())}),onPointerDown:Fe(t.onPointerDown,g=>{const b=g.target;b.setPointerCapture(g.pointerId),g.preventDefault(),y.thumbs.has(b)?b.focus():r(g)}),onPointerMove:Fe(t.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&i(g)}),onPointerUp:Fe(t.onPointerUp,g=>{const b=g.target;b.hasPointerCapture(g.pointerId)&&(b.releasePointerCapture(g.pointerId),o(g))})})}),QA="SliderTrack",XA=_.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Zg(QA,n);return s.jsx(Je.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});XA.displayName=QA;var Hy="SliderRange",JA=_.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Zg(Hy,n),o=ZA(Hy,n),u=_.useRef(null),d=mt(e,u),f=i.values.length,p=i.values.map(b=>nk(b,i.min,i.max)),y=f>1?Math.min(...p):0,g=100-Math.max(...p);return s.jsx(Je.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:d,style:{...t.style,[o.startEdge]:y+"%",[o.endEdge]:g+"%"}})});JA.displayName=Hy;var Wy="SliderThumb",ek=_.forwardRef((t,e)=>{const n=mH(t.__scopeSlider),[r,i]=_.useState(null),o=mt(e,d=>i(d)),u=_.useMemo(()=>r?n().findIndex(d=>d.ref.current===r):-1,[n,r]);return s.jsx(yH,{...t,ref:o,index:u})}),yH=_.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...o}=t,u=Zg(Wy,n),d=ZA(Wy,n),[f,p]=_.useState(null),y=mt(e,I=>p(I)),g=f?u.form||!!f.closest("form"):!0,b=vf(f),E=u.values[r],N=E===void 0?0:nk(E,u.min,u.max),S=bH(r,u.values.length),k=b?.[d.size],R=k?jH(k,N,d.direction):0;return _.useEffect(()=>{if(f)return u.thumbs.add(f),()=>{u.thumbs.delete(f)}},[f,u.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${N}% + ${R}px)`},children:[s.jsx($y.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(Je.span,{role:"slider","aria-label":t["aria-label"]||S,"aria-valuemin":u.min,"aria-valuenow":E,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...o,ref:y,style:E===void 0?{display:"none"}:t.style,onFocus:Fe(t.onFocus,()=>{u.valueIndexToChangeRef.current=r})})}),g&&s.jsx(tk,{name:i??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:E},r)]})});ek.displayName=Wy;var wH="RadioBubbleInput",tk=_.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=_.useRef(null),o=mt(i,r),u=yf(e);return _.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==e&&y){const g=new Event("input",{bubbles:!0});y.call(d,e),d.dispatchEvent(g)}},[u,e]),s.jsx(Je.input,{style:{display:"none"},...n,ref:o,defaultValue:e})});tk.displayName=wH;function _H(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,o)=>i-o)}function nk(t,e,n){const o=100/(n-e)*(t-e);return Gh(o,[0,100])}function bH(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function NH(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function jH(t,e,n){const r=t/2,o=Zw([0,50],[0,r]);return(r-o(e)*n)*n}function CH(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function EH(t,e){if(e>0){const n=CH(t);return Math.min(...n)>=e}return!0}function Zw(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function SH(t){return(String(t).split(".")[1]||"").length}function TH(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var AH=GA,kH=XA,PH=JA,IH=ek;function Yw({className:t,defaultValue:e,value:n,min:r=0,max:i=100,...o}){const u=_.useMemo(()=>Array.isArray(n)?n:Array.isArray(e)?e:[r,i],[n,e,r,i]);return s.jsxs(AH,{"data-slot":"slider",defaultValue:e,value:n,min:r,max:i,className:ft("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...o,children:[s.jsx(kH,{"data-slot":"slider-track",className:ft("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:s.jsx(PH,{"data-slot":"slider-range",className:ft("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:u.length},(d,f)=>s.jsx(IH,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},f))]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qu=function(){return qu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qu.apply(this,arguments)},sk=function(t){return{loading:t==null,value:t}},RH=function(){return function(t,e){switch(e.type){case"error":return qu(qu({},t),{error:e.error,loading:!1,value:void 0});case"reset":return sk(e.defaultValue);case"value":return qu(qu({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},rk=(function(t){var e=void 0,n=_.useReducer(RH(),sk(e)),r=n[0],i=n[1],o=_.useCallback(function(){var f=void 0;i({type:"reset",defaultValue:f})},[t]),u=_.useCallback(function(f){i({type:"error",error:f})},[]),d=_.useCallback(function(f){i({type:"value",value:f})},[]);return _.useMemo(function(){return{error:r.error,loading:r.loading,reset:o,setError:u,setValue:d,value:r.value}},[r.error,r.loading,o,u,d,r.value])}),ik=function(t,e,n){var r=_.useRef(t);return _.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},LH=function(t,e){var n=!t&&!e,r=!!t&&!!e&&ED(t,e);return n||r},MH=function(t,e){return ik(t,LH,e)},DH=function(t,e){var n=!t&&!e,r=!!t&&!!e&&SD(t,e);return n||r},OH=function(t,e){return ik(t,DH,e)},Kl=function(t,e){var n=rk(),r=n.error,i=n.loading,o=n.reset,u=n.setError,d=n.setValue,f=n.value,p=OH(t,o);return _.useEffect(function(){if(!p.current){d(void 0);return}var y=e?.snapshotListenOptions?Yr(p.current,e.snapshotListenOptions,d,u):Yr(p.current,d,u);return function(){y()}},[p.current]),[f,i,r]},ak=function(t,e){var n=rk(),r=n.error,i=n.loading,o=n.reset,u=n.setError,d=n.setValue,f=n.value,p=MH(t,o);return _.useEffect(function(){if(!p.current){d(void 0);return}var y=e?.snapshotListenOptions?Yr(p.current,e.snapshotListenOptions,d,u):Yr(p.current,d,u);return function(){y()}},[p.current]),[f,i,r]};function FH({onBack:t}){const[e,n]=_.useState(""),[r,i]=_.useState("all"),[o,u]=_.useState("all"),[d,f]=_.useState(!1),[p,y]=_.useState(""),[g,b]=_.useState(""),[E,N]=_.useState([0,50]),[S,k]=_.useState("recent"),[R,I]=_.useState("all"),z=Jn(),[H,G,Q]=Kl(lt(Te,"books"),{snapshotListenOptions:{includeMetadataChanges:!0}}),F=["all","Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Biography","History","Self-Help","Business","Science","Philosophy","Classic Literature","Textbooks","Other"],D=["all","New","Like New","Good","Fair","Poor"],$=[...(H?.docs.map(ce=>{const oe=ce.data();return{id:ce.id,...oe}})||[]).filter(ce=>{const oe=ce.title?.toLowerCase().includes(e.toLowerCase())||ce.author?.toLowerCase().includes(e.toLowerCase()),ne=r==="all"||ce.category===r,xe=o==="all"||ce.condition===o,Z=!p||ce.isbn?.includes(p),de=ce.price>=E[0]&&ce.price<=E[1],ie=R==="all"||ce.type===R||ce.type==="both"||R==="exchange"&&ce.type==="exchange";return oe&&ne&&xe&&Z&&de&&ie})].sort((ce,oe)=>{switch(S){case"price-low":return ce.price-oe.price;case"price-high":return oe.price-ce.price;case"rating":return(oe.seller?.rating||0)-(ce.seller?.rating||0);case"recent":default:return(oe.createdAt?.toMillis?.()||0)-(ce.createdAt?.toMillis?.()||0)}}),K=[r!=="all",o!=="all",p!=="",g!=="",E[0]>0||E[1]<50].filter(Boolean).length,W=()=>{i("all"),u("all"),y(""),b(""),N([0,50]),n(""),I("all")};return G?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading books..."}):Q?s.jsxs("div",{className:"min-h-screen flex items-center justify-center text-red-500",children:["Error loading books: ",Q.message]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[s.jsx(X,{variant:"ghost",size:"icon",onClick:()=>z("/"),className:"-ml-2",children:s.jsx(zs,{className:"w-6 h-6"})}),s.jsx("h1",{className:"text-3xl font-bold text-[#2C3E50]",children:"Book Marketplace"})]}),s.jsx("p",{className:"text-gray-600",children:"Buy and sell textbooks and literature within your community"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(rn,{to:"/sell",children:s.jsxs(X,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Sell"]})}),s.jsx(rn,{to:"/exchange",children:s.jsxs(X,{variant:"outline",className:"border-[#C4A672] text-[#C4A672] hover:bg-[#C4A672] hover:text-white",children:[s.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Exchange"]})})]})]}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"bg-white p-1 rounded-lg border border-gray-200 inline-flex",children:[s.jsx("button",{onClick:()=>I("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${R==="all"?"bg-[#C4A672] text-white":"text-gray-600 hover:bg-gray-50"}`,children:"All Books"}),s.jsx("button",{onClick:()=>I("sell"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${R==="sell"?"bg-[#C4A672] text-white":"text-gray-600 hover:bg-gray-50"}`,children:"For Sale"}),s.jsx("button",{onClick:()=>I("rent"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${R==="rent"?"bg-[#C4A672] text-white":"text-gray-600 hover:bg-gray-50"}`,children:"For Rent"}),s.jsx("button",{onClick:()=>I("exchange"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${R==="exchange"?"bg-[#C4A672] text-white":"text-gray-600 hover:bg-gray-50"}`,children:"Exchange"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by title or author...",value:e,onChange:ce=>n(ce.target.value),className:"pl-10 h-11 bg-gray-50 border-gray-200"})]})}),s.jsxs(vn,{value:r,onValueChange:i,children:[s.jsx(wn,{className:"h-11 bg-gray-50 border-gray-200",children:s.jsx(yn,{placeholder:"Category"})}),s.jsx(_n,{children:F.map(ce=>s.jsx(Ve,{value:ce,children:ce==="all"?"All Categories":ce},ce))})]}),s.jsxs(vn,{value:o,onValueChange:u,children:[s.jsx(wn,{className:"h-11 bg-gray-50 border-gray-200",children:s.jsx(yn,{placeholder:"Condition"})}),s.jsx(_n,{children:D.map(ce=>s.jsx(Ve,{value:ce,children:ce==="all"?"All Conditions":ce},ce))})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs(X,{variant:"outline",size:"sm",onClick:()=>f(!d),className:"text-[#C4A672]",children:[s.jsx(rS,{className:"w-4 h-4 mr-2"}),"Advanced Filters",K>0&&s.jsx("span",{className:"ml-2 bg-[#C4A672] text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:K})]}),K>0&&s.jsx(X,{variant:"ghost",size:"sm",onClick:W,className:"text-gray-600",children:"Clear All"})]}),d&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"ISBN Number"}),s.jsx(Ie,{type:"text",placeholder:"Enter ISBN...",value:p,onChange:ce=>y(ce.target.value),className:"bg-gray-50 border-gray-200"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"Location / Seller"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by location or seller...",value:g,onChange:ce=>b(ce.target.value),className:"pl-9 bg-gray-50 border-gray-200"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm text-gray-700",children:["Price Range: $",E[0]," - $",E[1]]}),s.jsx(Yw,{value:E,onValueChange:ce=>N(ce),min:0,max:50,step:1,className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"$0"}),s.jsx("span",{children:"$50+"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("p",{className:"text-gray-600",children:[$.length," ",$.length===1?"book":"books"," found"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),s.jsxs(vn,{value:S,onValueChange:k,children:[s.jsx(wn,{className:"w-40 h-9 bg-gray-50 border-gray-200",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"recent",children:"Most Recent"}),s.jsx(Ve,{value:"price-low",children:"Price: Low to High"}),s.jsx(Ve,{value:"price-high",children:"Price: High to Low"}),s.jsx(Ve,{value:"rating",children:"Seller Rating"})]})]})]})]})]}),$.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:$.map(ce=>s.jsx("div",{onClick:()=>z(`/book/${ce.id}`),className:"cursor-pointer",children:s.jsx(rU,{book:ce,onClick:()=>z(`/book/${ce.id}`)})},ce.id))}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[s.jsx("p",{className:"text-gray-500",children:"No books found matching your criteria"}),s.jsx(X,{onClick:()=>{n(""),i("all"),u("all"),I("all")},variant:"outline",className:"mt-4",children:"Clear Filters"})]})]})})}function VH(t,e=[]){let n=[];function r(o,u){const d=_.createContext(u);d.displayName=o+"Context";const f=n.length;n=[...n,u];const p=g=>{const{scope:b,children:E,...N}=g,S=b?.[t]?.[f]||d,k=_.useMemo(()=>N,Object.values(N));return s.jsx(S.Provider,{value:k,children:E})};p.displayName=o+"Provider";function y(g,b){const E=b?.[t]?.[f]||d,N=_.useContext(E);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[p,y]}const i=()=>{const o=n.map(u=>_.createContext(u));return function(d){const f=d?.[t]||o;return _.useMemo(()=>({[`__scope${t}`]:{...d,[t]:f}}),[d,f])}};return i.scopeName=t,[r,BH(i,...e)]}function BH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const u=r.reduce((d,{useScope:f,scopeName:p})=>{const g=f(o)[`__scope${p}`];return{...d,...g}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}var zH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qw=zH.reduce((t,e)=>{const n=Cg(`Primitive.${e}`),r=_.forwardRef((i,o)=>{const{asChild:u,...d}=i,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Gv={exports:{}},Kv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1;function UH(){if(E1)return Kv;E1=1;var t=Up();function e(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function d(g,b){var E=b(),N=r({inst:{value:E,getSnapshot:b}}),S=N[0].inst,k=N[1];return o(function(){S.value=E,S.getSnapshot=b,f(S)&&k({inst:S})},[g,E,b]),i(function(){return f(S)&&k({inst:S}),g(function(){f(S)&&k({inst:S})})},[g]),u(E),E}function f(g){var b=g.getSnapshot;g=g.value;try{var E=b();return!n(g,E)}catch{return!0}}function p(g,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return Kv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,Kv}var S1;function $H(){return S1||(S1=1,Gv.exports=UH()),Gv.exports}var HH=$H();function WH(){return HH.useSyncExternalStore(qH,()=>!0,()=>!1)}function qH(){return()=>{}}var Xw="Avatar",[GH]=VH(Xw),[KH,ok]=GH(Xw),lk=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,o]=_.useState("idle");return s.jsx(KH,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:s.jsx(Qw.span,{...r,ref:e})})});lk.displayName=Xw;var ck="AvatarImage",ZH=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...o}=t,u=ok(ck,n),d=YH(r,o),f=ls(p=>{i(p),u.onImageLoadingStatusChange(p)});return Hn(()=>{d!=="idle"&&f(d)},[d,f]),d==="loaded"?s.jsx(Qw.img,{...o,ref:e,src:r}):null});ZH.displayName=ck;var uk="AvatarFallback",dk=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,o=ok(uk,n),[u,d]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(f)}},[r]),u&&o.imageLoadingStatus!=="loaded"?s.jsx(Qw.span,{...i,ref:e}):null});dk.displayName=uk;function T1(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function YH(t,{referrerPolicy:e,crossOrigin:n}){const r=WH(),i=_.useRef(null),o=r?(i.current||(i.current=new window.Image),i.current):null,[u,d]=_.useState(()=>T1(o,t));return Hn(()=>{d(T1(o,t))},[o,t]),Hn(()=>{const f=g=>()=>{d(g)};if(!o)return;const p=f("loaded"),y=f("error");return o.addEventListener("load",p),o.addEventListener("error",y),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",p),o.removeEventListener("error",y)}},[o,n,e]),u}var QH=lk,XH=dk;function JH({className:t,...e}){return s.jsx(QH,{"data-slot":"avatar",className:ft("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function eW({className:t,...e}){return s.jsx(XH,{"data-slot":"avatar-fallback",className:ft("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}function tW({src:t,alt:e,className:n,fallbackSrc:r,...i}){const[o,u]=_.useState(!1);return o||!t?s.jsx("div",{className:`flex items-center justify-center bg-gray-100 text-gray-400 ${n}`,children:s.jsx(md,{className:"w-8 h-8"})}):s.jsx("img",{src:t,alt:e,className:n,onError:()=>u(!0),...i})}function jo({...t}){return s.jsx(kw,{"data-slot":"dialog",...t})}function hk({...t}){return s.jsx(Pw,{"data-slot":"dialog-trigger",...t})}function nW({...t}){return s.jsx(Iw,{"data-slot":"dialog-portal",...t})}const fk=_.forwardRef(({className:t,...e},n)=>s.jsx(Lg,{ref:n,"data-slot":"dialog-overlay",className:ft("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));fk.displayName=Lg.displayName;const Ma=_.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(nW,{"data-slot":"dialog-portal",children:[s.jsx(fk,{}),s.jsxs(Mg,{ref:r,"data-slot":"dialog-content",className:ft("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,s.jsxs(Dg,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(Dt,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ma.displayName=Mg.displayName;function Zl({className:t,...e}){return s.jsx("div",{"data-slot":"dialog-header",className:ft("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Yl({className:t,...e}){return s.jsx(Rw,{"data-slot":"dialog-title",className:ft("text-lg leading-none font-semibold",t),...e})}function Al({className:t,...e}){return s.jsx(pT,{"data-slot":"dialog-description",className:ft("text-muted-foreground text-sm",t),...e})}function sW({book:t,onClose:e,onBack:n}){const[r,i]=_.useState("details"),[o,u]=_.useState("shipping"),[d,f]=_.useState("card"),[p,y]=_.useState(!1),[g,b]=_.useState(!1),E=o==="shipping"?4.99:0,N=(t.price+E)*.08,S=t.price+E+N,k=()=>{if(!p){alert("Please agree to the terms and conditions");return}b(!0),setTimeout(()=>{b(!1),i("success")},2e3)};return r==="success"?s.jsx(jo,{open:!0,onOpenChange:e,children:s.jsxs(Ma,{className:"max-w-md",children:[s.jsxs(Al,{className:"sr-only",children:["Purchase confirmation for ",t.title]}),s.jsxs(Al,{className:"sr-only",children:["Purchase confirmation for ",t.title]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 mx-auto flex items-center justify-center mb-6",children:s.jsx(Xm,{className:"w-12 h-12 text-green-600"})}),s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-3",children:"Purchase Successful!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your order has been confirmed and the seller has been notified."}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["#BO-",Date.now().toString().slice(-6)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book:"}),s.jsx("span",{className:"text-[#2C3E50]",children:t.title})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",S.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(X,{onClick:e,className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Back to Marketplace"}),s.jsx(X,{variant:"outline",onClick:()=>alert("Order tracking feature coming soon!"),className:"w-full",children:"Track Order"})]})]})]})}):r==="payment"?s.jsx(jo,{open:!0,onOpenChange:e,children:s.jsxs(Ma,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Zl,{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>i("details"),className:"hover:bg-gray-100 rounded-full p-1",children:s.jsx(zs,{className:"w-5 h-5"})}),s.jsx(Yl,{className:"text-2xl text-[#2C3E50]",children:"Payment Method"})]}),s.jsxs(Al,{className:"sr-only",children:["Select payment method for purchasing ",t.title]}),s.jsxs(Al,{className:"sr-only",children:["Select payment method for purchasing ",t.title]})]}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 flex items-center gap-3",children:[s.jsx(Ty,{className:"w-5 h-5 text-green-600"}),s.jsx("p",{className:"text-sm text-green-900",children:"Your payment information is secure and encrypted"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ae,{children:"Select Payment Method"}),s.jsxs(Ly,{value:d,onValueChange:R=>f(R),children:[s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="card"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Dc,{value:"card",id:"card"}),s.jsxs(Ae,{htmlFor:"card",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(hd,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("span",{children:"Credit / Debit Card"})]})]}),d==="card"&&s.jsxs("div",{className:"mt-4 space-y-3 pl-7",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"cardNumber",children:"Card Number"}),s.jsx(Ie,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"expiry",children:"Expiry Date"}),s.jsx(Ie,{id:"expiry",type:"text",placeholder:"MM/YY",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"cvv",children:"CVV"}),s.jsx(Ie,{id:"cvv",type:"text",placeholder:"123",className:"mt-1"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"cardName",children:"Cardholder Name"}),s.jsx(Ie,{id:"cardName",type:"text",placeholder:"John Doe",className:"mt-1"})]})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="paypal"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Dc,{value:"paypal",id:"paypal"}),s.jsxs(Ae,{htmlFor:"paypal",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(R7,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("span",{children:"PayPal"})]})]}),d==="paypal"&&s.jsx("p",{className:"text-sm text-gray-600 mt-2 pl-7",children:"You will be redirected to PayPal to complete your purchase"})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="bank"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Dc,{value:"bank",id:"bank"}),s.jsxs(Ae,{htmlFor:"bank",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(YF,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("span",{children:"Bank Transfer"})]})]}),d==="bank"&&s.jsx("p",{className:"text-sm text-gray-600 mt-2 pl-7",children:"Bank transfer instructions will be sent to your email"})]})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Md,{id:"terms",checked:p,onCheckedChange:R=>y(R===!0)}),s.jsxs(Ae,{htmlFor:"terms",className:"text-sm text-gray-600 cursor-pointer",children:["I agree to the"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Terms and Conditions"})," ","and"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Refund Policy"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book Price:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",t.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping:"}),s.jsx("span",{className:"text-[#2C3E50]",children:o==="pickup"?"FREE":`$${E.toFixed(2)}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax (8%):"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",N.toFixed(2)]})]}),s.jsx(qr,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total:"}),s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",S.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{variant:"outline",onClick:()=>i("details"),className:"flex-1",children:"Back"}),s.jsxs(X,{onClick:k,disabled:g,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Fs,{className:"w-4 h-4 mr-2"}),g?"Processing...":`Pay $${S.toFixed(2)}`]})]})]})]})}):s.jsx(jo,{open:!0,onOpenChange:e,children:s.jsxs(Ma,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Zl,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:n,className:"hover:bg-gray-100 rounded-full p-1",children:s.jsx(zs,{className:"w-5 h-5"})}),s.jsx(Yl,{className:"text-2xl text-[#2C3E50]",children:"Purchase Confirmation"})]})}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Book Details"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-20 h-28 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:t.images[0],alt:t.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50]",children:t.title}),s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["by ",t.author]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Qe,{className:"bg-blue-100 text-blue-800",children:t.condition}),s.jsxs("span",{className:"text-sm text-gray-600",children:["ISBN: ",t.isbn]})]}),s.jsxs("p",{className:"text-[#C4A672] text-xl mt-2",children:["$",t.price.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Seller Information"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#C4A672] text-white flex items-center justify-center",children:t.seller.avatar}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:t.seller.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[t.seller.rating,"   ",t.seller.totalSales," sales"]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ae,{children:"Delivery Method"}),s.jsxs(Ly,{value:o,onValueChange:R=>u(R),children:[s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o==="shipping"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Dc,{value:"shipping",id:"shipping"}),s.jsxs(Ae,{htmlFor:"shipping",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(pd,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{children:[s.jsx("div",{children:"Shipping"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Delivery in 3-5 business days"})]})]}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",E.toFixed(2)]})]}),o==="shipping"&&s.jsxs("div",{className:"mt-3 pl-7 space-y-2",children:[s.jsx(Ie,{placeholder:"Street Address"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Ie,{placeholder:"City"}),s.jsx(Ie,{placeholder:"State"})]}),s.jsx(Ie,{placeholder:"ZIP Code"})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o==="pickup"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Dc,{value:"pickup",id:"pickup"}),s.jsxs(Ae,{htmlFor:"pickup",className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx(ji,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{children:[s.jsx("div",{children:"Local Pickup"}),s.jsx("div",{className:"text-xs text-gray-600",children:"San Francisco, CA"})]})]}),s.jsx("span",{className:"text-green-600",children:"FREE"})]}),o==="pickup"&&s.jsx("div",{className:"mt-3 pl-7",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-900",children:[s.jsx(Qn,{className:"w-4 h-4 inline mr-1"}),"Pickup location and details will be shared after purchase"]})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672]/10 to-[#8B7355]/10 rounded-lg p-4 border-2 border-[#C4A672]/20",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book Price:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",t.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping:"}),s.jsx("span",{className:"text-[#2C3E50]",children:o==="pickup"?"FREE":`$${E.toFixed(2)}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax (8%):"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",N.toFixed(2)]})]}),s.jsx(qr,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total:"}),s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",S.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{variant:"outline",onClick:n,className:"flex-1",children:"Back to Book"}),s.jsx(X,{onClick:()=>i("payment"),className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Continue to Payment"})]})]})]})})}function rW(){const{id:t}=z1(),e=Jn(),[n,r,i]=ak(t?ht(Te,"books",t):null,{snapshotListenOptions:{includeMetadataChanges:!0}}),[o,u]=_.useState(!1),[d,f]=_.useState(!1);if(r)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading book details..."});if(i)return s.jsxs("div",{className:"min-h-screen flex items-center justify-center text-red-500",children:["Error: ",i.message]});if(!n||!n.exists())return s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Book not found"}),s.jsx(X,{onClick:()=>e("/marketplace"),className:"mt-4",children:"Back to Marketplace"})]});const p={id:n.id,...n.data()},y=N=>{switch(N){case"New":case"Like New":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=()=>{console.log("Buying book:",p.id),u(!0)},b=()=>{if(!gt.currentUser){ue.error("Please log in to contact the seller"),e("/login");return}if(gt.currentUser.uid===p.seller.id){ue.error("You cannot chat with yourself");return}e("/chat",{state:{otherUser:{id:p.userId,name:p.seller.name,avatar:p.seller.avatar||"S",online:!1},bookContext:{id:p.id,title:p.title,price:p.price,image:p.images?.[0]}}})},E=()=>{f(!0)};return o?s.jsx(sW,{book:p,onClose:()=>u(!1),onBack:()=>u(!1)}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-sm p-6 sm:p-8",children:[s.jsxs(X,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-2 text-gray-600",children:[s.jsx(zs,{className:"w-4 h-4 mr-2"}),"Back"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"aspect-[3/4] overflow-hidden rounded-lg bg-gray-100",children:s.jsx(tW,{src:p.images&&p.images.length>0?p.images[0]:"",alt:p.title,className:"w-full h-full object-cover"})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-[#2C3E50] mb-2",children:p.title}),s.jsxs("p",{className:"text-gray-600 text-lg",children:["by ",p.author]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-4xl text-[#C4A672]",children:["$",p.price.toFixed(2)]}),s.jsx(Qe,{className:`${y(p.condition)} text-sm px-3 py-1`,children:p.condition})]}),s.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(GF,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Category:"}),s.jsx("span",{className:"text-[#2C3E50]",children:p.category})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Ar,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Published:"}),s.jsx("span",{className:"text-[#2C3E50]",children:p.publishedYear})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Cp,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Pages:"}),s.jsx("span",{className:"text-[#2C3E50]",children:p.pages})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(RV,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"Language:"}),s.jsx("span",{className:"text-[#2C3E50]",children:p.language})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(ji,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:"ISBN:"}),s.jsx("span",{className:"text-[#2C3E50] text-xs",children:p.isbn})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] font-semibold mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:p.description})]}),s.jsx(qr,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] font-semibold mb-3",children:"Seller Information"}),s.jsxs("div",{className:"flex items-start gap-4 bg-gray-50 rounded-lg p-4",children:[s.jsx(JH,{className:"w-12 h-12 bg-[#C4A672] text-white",children:s.jsx(eW,{children:p.seller.name?p.seller.name.charAt(0):"S"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-[#2C3E50] font-medium",children:p.seller.name}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gc,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[p.seller.rating," rating"]})]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[p.seller.totalSales," sales"]})]}),s.jsxs("div",{className:"flex items-start gap-2 mt-2 text-sm text-gray-600",children:[s.jsx(Qn,{className:"w-4 h-4 text-gray-400 mt-0.5"}),s.jsx("span",{children:"San Francisco, CA (15 miles away)"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] font-semibold mb-3",children:"Location & Delivery"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ji,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-gray-700",children:"Available for local pickup and shipping"})]}),s.jsx("div",{className:"bg-gray-200 rounded-lg h-48 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(Qn,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm",children:"Map View"}),s.jsx("p",{className:"text-xs mt-1",children:"San Francisco, CA"})]})}),s.jsxs(X,{variant:"outline",size:"sm",className:"w-full",onClick:()=>alert("This would open directions to the pickup location"),children:[s.jsx(ZV,{className:"w-4 h-4 mr-2"}),"Get Directions"]})]})]}),s.jsxs("div",{className:"space-y-3 pt-4",children:[s.jsxs(X,{onClick:g,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ng,{className:"w-5 h-5 mr-2"}),"Buy Now"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(X,{onClick:E,variant:"outline",className:"h-11 border-[#C4A672] text-[#C4A672] hover:bg-[#C4A672] hover:text-white",children:"Negotiate Price"}),s.jsxs(X,{onClick:b,variant:"outline",className:"h-11 border-gray-300 hover:bg-gray-50",children:[s.jsx(sr,{className:"w-4 h-4 mr-2"}),"Contact"]})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ji,{className:"w-4 h-4"}),s.jsx("span",{children:"Secure Shipping"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gc,{className:"w-4 h-4"}),s.jsx("span",{children:"Verified Sellers"})]})]})]})]}),d&&s.jsx(iW,{book:p,onClose:()=>f(!1)})]})})}function iW({book:t,onClose:e}){const[n,r]=_.useState(""),[i,o]=_.useState(""),[u,d]=_.useState(!1),f=async()=>{if(n){d(!0);try{const p=gt.currentUser;if(!p){ue.error("Please log in to negotiate");return}await Ns(lt(Te,"negotiations"),{buyerId:p.uid,buyerName:p.displayName||"Anonymous",bookId:t.id,bookTitle:t.title,sellerName:t.seller.name,offerPrice:parseFloat(n),message:i,status:"pending",createdAt:xn()}),ue.success("Offer sent to seller!"),e()}catch(p){console.error("Error sending offer:",p),ue.error("Failed to send offer")}finally{d(!1)}}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Negotiate Price"}),s.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Current asking price: $",t.price.toFixed(2)]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 block mb-2",children:"Your Offer"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),s.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:n,onChange:p=>r(p.target.value),className:"w-full pl-7 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C4A672] focus:border-[#C4A672]"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 block mb-2",children:"Message (Optional)"}),s.jsx("textarea",{rows:3,placeholder:"Add a message to the seller...",value:i,onChange:p=>o(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C4A672] focus:border-[#C4A672]"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{variant:"outline",onClick:e,className:"flex-1",disabled:u,children:"Cancel"}),s.jsx(X,{onClick:f,disabled:!n||u,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:u?"Sending...":"Send Offer"})]})]})]})})}const aW=[{id:"1",isbn:"978-3-16-148410-0",title:"To Kill a Mockingbird",author:"Harper Lee",condition:"Good",category:"Classic Literature",images:["https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400","https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400"],description:"A classic American novel about justice and racial inequality in the Deep South.",seller:{name:"John Doe",rating:4.8,location:"San Francisco, CA"},rentalOptions:{weekly:2.99,monthly:5.99,yearly:49.99},deliveryMethods:["pickup","shipping"]},{id:"2",isbn:"978-0-06-112008-4",title:"1984",author:"George Orwell",condition:"New",category:"Fiction",images:["https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400","https://images.unsplash.com/photo-1524578271613-d550eacf6090?w=400"],description:"A dystopian social science fiction novel and cautionary tale.",seller:{name:"Jane Smith",rating:4.9,location:"San Francisco, CA"},rentalOptions:{weekly:3.99,monthly:7.99,yearly:59.99},deliveryMethods:["pickup","shipping"]},{id:"3",isbn:"978-0-7432-7356-5",title:"The Great Gatsby",author:"F. Scott Fitzgerald",condition:"Fair",category:"Classic Literature",images:["https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400"],description:"The story of the mysteriously wealthy Jay Gatsby and his love for Daisy Buchanan.",seller:{name:"Mike Johnson",rating:4.5,location:"Oakland, CA"},rentalOptions:{weekly:1.99,monthly:3.99,yearly:29.99},deliveryMethods:["pickup"]},{id:"4",isbn:"978-0-452-28423-4",title:"Pride and Prejudice",author:"Jane Austen",condition:"Good",category:"Romance",images:["https://images.unsplash.com/photo-1589998059171-988d887df646?w=400","https://images.unsplash.com/photo-1491841573634-28140fc7ced7?w=400"],description:"A romantic novel of manners set in Georgian England.",seller:{name:"Sarah Williams",rating:5,location:"San Jose, CA"},rentalOptions:{weekly:2.49,monthly:4.99,yearly:39.99},deliveryMethods:["pickup","shipping"]}];function oW({onSelectBook:t,onClose:e}){const[n,r]=_.useState(""),[i,o]=_.useState(""),[u,d]=_.useState("all"),[f,p]=_.useState("all"),[y,g]=_.useState("monthly"),[b,E]=_.useState([0,20]),[N,S]=_.useState(""),[k,R]=_.useState(!1),[I,z]=_.useState(!0),H=aW.filter(Q=>{const F=n.toLowerCase(),D=n===""||Q.title.toLowerCase().includes(F)||Q.author.toLowerCase().includes(F)||Q.isbn.toLowerCase().includes(F),O=i===""||Q.isbn.includes(i),U=u==="all"||Q.category===u,$=f==="all"||Q.condition===f,K=Q.rentalOptions[y],W=K>=b[0]&&K<=b[1],ce=N===""||Q.seller.location.toLowerCase().includes(N.toLowerCase());return D&&O&&U&&$&&W&&ce}),G=()=>{r(""),o(""),d("all"),p("all"),g("monthly"),E([0,20]),S("")};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6 sticky top-0 z-10 shadow-sm",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[#2C3E50] text-2xl mb-1",children:"Rent Books"}),s.jsx("p",{className:"text-gray-600",children:"Borrow books for as long as you need"})]}),s.jsxs(X,{variant:"outline",onClick:e,children:[s.jsx(Dt,{className:"w-5 h-5 mr-2"}),"Close"]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Search Books"}),s.jsxs("div",{className:"relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by title, author, or ISBN...",value:n,onChange:Q=>r(Q.target.value),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"ISBN"}),s.jsx(Ie,{type:"text",placeholder:"978-3-16-148410-0",value:i,onChange:Q=>o(Q.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Category"}),s.jsxs(vn,{value:u,onValueChange:d,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Category"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All Categories"}),s.jsx(Ve,{value:"Fiction",children:"Fiction"}),s.jsx(Ve,{value:"Classic Literature",children:"Classic Literature"}),s.jsx(Ve,{value:"Romance",children:"Romance"}),s.jsx(Ve,{value:"Mystery",children:"Mystery"}),s.jsx(Ve,{value:"Science Fiction",children:"Science Fiction"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Condition"}),s.jsxs(vn,{value:f,onValueChange:p,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Condition"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All Conditions"}),s.jsx(Ve,{value:"New",children:"New"}),s.jsx(Ve,{value:"Good",children:"Good"}),s.jsx(Ve,{value:"Fair",children:"Fair"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Rental Period"}),s.jsxs(vn,{value:y,onValueChange:Q=>g(Q),children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Period"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"weekly",children:"Weekly"}),s.jsx(Ve,{value:"monthly",children:"Monthly"}),s.jsx(Ve,{value:"yearly",children:"Yearly"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"City or ZIP code",value:N,onChange:Q=>S(Q.target.value),className:"pl-10"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(X,{variant:"outline",onClick:G,className:"w-full",children:"Clear Filters"})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[s.jsxs(X,{variant:"outline",size:"sm",onClick:()=>R(!k),children:[s.jsx(rS,{className:"w-4 h-4 mr-2"}),k?"Hide":"Show"," Advanced Filters"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:I,onChange:Q=>z(Q.target.checked),className:"w-4 h-4"}),s.jsx(md,{className:"w-4 h-4"}),"Show Photo Previews"]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[H.length," book",H.length!==1?"s":""," found"]})]})]}),k&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-700 mb-3 block",children:[y.charAt(0).toUpperCase()+y.slice(1)," Price Range:",s.jsxs("span",{className:"text-[#C4A672] ml-2",children:["$",b[0]," - $",b[1]]})]}),s.jsx(Yw,{value:b,onValueChange:Q=>E(Q),min:0,max:20,step:.5,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"$0"}),s.jsx("span",{children:"$20"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-700 mb-3 block",children:"Location Proximity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-sm text-gray-600",children:N||"All locations"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter a city or ZIP code above to filter by location"})]})]})]}),s.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm text-blue-900 mb-2",children:"Active Filters:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[n&&s.jsxs(Qe,{variant:"secondary",children:["Search: ",n]}),i&&s.jsxs(Qe,{variant:"secondary",children:["ISBN: ",i]}),u!=="all"&&s.jsxs(Qe,{variant:"secondary",children:["Category: ",u]}),f!=="all"&&s.jsxs(Qe,{variant:"secondary",children:["Condition: ",f]}),N&&s.jsxs(Qe,{variant:"secondary",children:["Location: ",N]}),s.jsxs(Qe,{variant:"secondary",children:["Period: ",y]}),s.jsxs(Qe,{variant:"secondary",children:["Price: $",b[0],"-$",b[1]]})]})]})]})]}),s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-[#2C3E50] text-xl",children:["Available for Rent (",H.length,")"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",y," rates"]})]}),H.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(Q=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[I&&s.jsxs("div",{className:"h-48 bg-gray-200 overflow-hidden relative",children:[s.jsx("img",{src:Q.images[0],alt:Q.title,className:"w-full h-full object-cover"}),Q.images.length>1&&s.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded flex items-center gap-1",children:[s.jsx(md,{className:"w-3 h-3"}),Q.images.length," photos"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1 line-clamp-1",children:Q.title}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",Q.author]})]}),s.jsx(Qe,{className:Q.condition==="New"?"bg-green-100 text-green-800":Q.condition==="Good"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800",children:Q.condition})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["ISBN: ",Q.isbn]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[s.jsx(Qn,{className:"w-4 h-4"}),s.jsx("span",{children:Q.seller.location})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(Ar,{className:"w-3 h-3"}),"Rental Options"]})}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Weekly:"}),s.jsxs("span",{className:y==="weekly"?"text-[#C4A672] font-medium":"text-gray-800",children:["$",Q.rentalOptions.weekly,"/wk"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Monthly:"}),s.jsxs("span",{className:y==="monthly"?"text-[#C4A672] font-medium":"text-gray-800",children:["$",Q.rentalOptions.monthly,"/mo"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Yearly:"}),s.jsxs("span",{className:y==="yearly"?"text-[#C4A672] font-medium":"text-gray-800",children:["$",Q.rentalOptions.yearly,"/yr"]})]})]})]}),s.jsx(X,{onClick:()=>t(Q),className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"View Details & Rent"})]})]},Q.id))}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[s.jsx($n,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:"No books found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or search criteria"}),s.jsx(X,{onClick:G,variant:"outline",children:"Clear All Filters"})]})]})]})}function lW({book:t,onBack:e,onRent:n}){const[r,i]=_.useState("monthly"),[o,u]=_.useState("pickup"),d=()=>t.rentalOptions[r],f=()=>{let p=d();return o==="shipping"&&(p+=5.99),p.toFixed(2)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(X,{variant:"ghost",onClick:e,className:"mb-4",children:[s.jsx(zs,{className:"w-5 h-5 mr-2"}),"Back to Search"]}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Book Details"})]})}),s.jsx("div",{className:"max-w-7xl mx-auto p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden sticky top-8",children:[s.jsx("div",{className:"h-96 bg-gray-200",children:s.jsx("img",{src:t.images[0],alt:t.title,className:"w-full h-full object-cover"})}),t.images.length>1&&s.jsx("div",{className:"p-4 grid grid-cols-3 gap-2",children:t.images.slice(1).map((p,y)=>s.jsx("div",{className:"h-20 bg-gray-200 rounded overflow-hidden",children:s.jsx("img",{src:p,alt:`${t.title} ${y+2}`,className:"w-full h-full object-cover"})},y))})]})}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-2",children:t.title}),s.jsxs("p",{className:"text-gray-600 text-lg",children:["by ",t.author]})]}),s.jsx(Qe,{className:"bg-blue-100 text-blue-800",children:t.condition})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(Wr,{className:"w-4 h-4"}),s.jsxs("span",{children:["ISBN: ",t.isbn]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(ji,{className:"w-4 h-4"}),s.jsxs("span",{children:["Category: ",t.category]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.description})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-4 flex items-center gap-2",children:[s.jsx(qh,{className:"w-5 h-5"}),"Seller Information"]}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:t.seller.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:t.seller.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gc,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:t.seller.rating})]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-gray-600",children:"Verified Seller"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Qn,{className:"w-4 h-4"}),s.jsx("span",{children:t.seller.location})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Delivery Method"}),s.jsxs("div",{className:"space-y-3",children:[t.deliveryMethods.includes("pickup")&&s.jsxs("button",{onClick:()=>u("pickup"),className:`w-full border-2 rounded-lg p-4 flex items-center gap-3 transition-colors ${o==="pickup"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(ji,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Local Pickup"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Free - Pick up from seller"})]}),o==="pickup"&&s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#C4A672] flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),t.deliveryMethods.includes("shipping")&&s.jsxs("button",{onClick:()=>u("shipping"),className:`w-full border-2 rounded-lg p-4 flex items-center gap-3 transition-colors ${o==="shipping"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(pd,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Shipping"}),s.jsx("p",{className:"text-sm text-gray-600",children:"$5.99 - Delivered to your door"})]}),o==="shipping"&&s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#C4A672] flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-8",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-6",children:"Rental Options"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"Select Rental Period"}),s.jsxs(vn,{value:r,onValueChange:p=>i(p),children:[s.jsx(wn,{children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsxs(Ve,{value:"weekly",children:["Weekly - $",t.rentalOptions.weekly,"/week"]}),s.jsxs(Ve,{value:"monthly",children:["Monthly - $",t.rentalOptions.monthly,"/month"]}),s.jsxs(Ve,{value:"yearly",children:["Yearly - $",t.rentalOptions.yearly,"/year"]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Rental (",r,")"]}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",d().toFixed(2)]})]}),o==="shipping"&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping"}),s.jsx("span",{className:"text-[#2C3E50]",children:"$5.99"})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-200 flex items-center justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total"}),s.jsxs("span",{className:"text-[#C4A672] text-2xl",children:["$",f()]})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ar,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-900",children:[s.jsx("p",{className:"mb-1",children:"Book must be returned by the end of the rental period"}),s.jsx("p",{className:"text-blue-700",children:"Late fees: $2/day"})]})]})}),s.jsx(X,{onClick:()=>n(r),className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white mb-3",children:"Continue to Checkout"}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By continuing, you agree to our rental terms and conditions"})]})})]})})]})}function cW({book:t,rentalPeriod:e,onBack:n,onConfirm:r}){const[i,o]=_.useState(!1),[u,d]=_.useState("card"),[f,p]=_.useState(!1),y=t.rentalOptions[e],g=5.99,b=y+g,E=()=>{switch(e){case"weekly":return"7 days";case"monthly":return"30 days";case"yearly":return"365 days"}},N=()=>{const k=e==="weekly"?7:e==="monthly"?30:365,R=new Date;return R.setDate(R.getDate()+k),R.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},S=()=>{if(!i){alert("Please agree to the rental terms and conditions");return}p(!0),setTimeout(()=>{p(!1),r()},2e3)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(X,{variant:"ghost",onClick:n,className:"mb-4",children:[s.jsx(zs,{className:"w-5 h-5 mr-2"}),"Back"]}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Confirm Your Rental"})]})}),s.jsx("div",{className:"max-w-4xl mx-auto p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Rental Summary"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-24 h-32 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:t.images[0],alt:t.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:t.title}),s.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["by ",t.author]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ISBN: ",t.isbn]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Condition: ",t.condition]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Rental Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ar,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Rental Period"}),s.jsxs("p",{className:"text-gray-600 text-sm capitalize",children:[e," (",E(),")"]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ni,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Return By"}),s.jsx("p",{className:"text-gray-600 text-sm",children:N()})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ji,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Delivery Method"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Shipping to your address"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-[#C4A672] mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Seller Location"}),s.jsx("p",{className:"text-gray-600 text-sm",children:t.seller.location})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Payment Method"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>d("card"),className:`w-full border-2 rounded-lg p-4 flex items-center gap-3 transition-colors ${u==="card"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200"}`,children:[s.jsx(hd,{className:"w-5 h-5 text-[#C4A672]"}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Credit/Debit Card"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Visa ending in 1234"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"cvv",children:"CVV"}),s.jsx(Ie,{id:"cvv",placeholder:"123",maxLength:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"zip",children:"ZIP Code"}),s.jsx(Ie,{id:"zip",placeholder:"94102"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-4",children:"Rental Agreement"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto text-sm text-gray-600",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-2",children:"Terms and Conditions:"}),s.jsxs("ul",{className:"space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"The book must be returned by the due date to avoid late fees"}),s.jsx("li",{children:"Late fees are $2 per day after the due date"}),s.jsx("li",{children:"The book must be returned in the same condition as received"}),s.jsx("li",{children:"Any damage to the book will result in additional charges"}),s.jsx("li",{children:"Lost books must be paid for at full replacement value"}),s.jsx("li",{children:"Rental can be extended before the due date for an additional fee"}),s.jsx("li",{children:"Refunds are not available once the book has been shipped"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Md,{id:"terms",checked:i,onCheckedChange:k=>o(k===!0)}),s.jsx("label",{htmlFor:"terms",className:"text-sm text-gray-600 cursor-pointer",children:"I have read and agree to the rental terms and conditions, including the return policy and late fee structure"})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-8",children:[s.jsx("h2",{className:"text-[#2C3E50] text-xl mb-6",children:"Order Summary"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Rental Fee (",e,")"]}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",y.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",g.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tax"}),s.jsx("span",{className:"text-[#2C3E50]",children:"$0.00"})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 flex items-center justify-between",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Total"}),s.jsxs("span",{className:"text-[#C4A672] text-2xl",children:["$",b.toFixed(2)]})]})]}),s.jsx(X,{onClick:S,disabled:!i||f,className:"w-full h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white mb-3",children:f?"Processing...":"Confirm & Pay"}),s.jsx(X,{variant:"outline",onClick:n,className:"w-full",children:"Cancel"}),s.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ni,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-green-900",children:[s.jsx("p",{className:"mb-1",children:"Secure Payment"}),s.jsx("p",{className:"text-green-700 text-xs",children:"Your payment information is encrypted and secure"})]})]})})]})})]})})]})}function uW({book:t,onClose:e}){const n="RNT-"+Math.random().toString(36).substr(2,9).toUpperCase();return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-2xl w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4",children:s.jsx(Ni,{className:"w-12 h-12 text-green-600"})}),s.jsx("h1",{className:"text-[#2C3E50] text-3xl mb-2",children:"Rental Confirmed!"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Your book rental has been successfully processed"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-6",children:[s.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Rental ID"}),s.jsx("span",{className:"text-[#2C3E50]",children:n})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Confirmation Email"}),s.jsx("span",{className:"text-[#2C3E50]",children:"Sent to your inbox"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-20 h-28 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:t.images[0],alt:t.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:t.title}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["by ",t.author]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["ISBN: ",t.isbn]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-blue-900 mb-3 flex items-center gap-2",children:[s.jsx(su,{className:"w-5 h-5"}),"What Happens Next?"]}),s.jsxs("ol",{className:"space-y-2 text-sm text-blue-800",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"1"}),s.jsx("span",{children:"You'll receive a confirmation email with all rental details"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"2"}),s.jsx("span",{children:"The book will be shipped to your address within 2-3 business days"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"3"}),s.jsx("span",{children:"You'll receive tracking information once shipped"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs",children:"4"}),s.jsx("span",{children:"Enjoy your book and return it before the due date"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx(Ar,{className:"w-6 h-6 text-[#C4A672] mb-2"}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Due Date"}),s.jsx("p",{className:"text-[#2C3E50]",children:new Date(Date.now()+720*60*60*1e3).toLocaleDateString()})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx(ji,{className:"w-6 h-6 text-[#C4A672] mb-2"}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Shipping Status"}),s.jsx("p",{className:"text-[#2C3E50]",children:"Processing"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-2",children:"Return Instructions"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"A prepaid return label will be included with your shipment. Simply place the book back in the original packaging and drop it off at any USPS location before the due date."}),s.jsx("p",{className:"text-sm text-yellow-700",children:" Late returns are subject to a $2/day late fee"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(X,{onClick:e,className:"flex-1 h-12 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(fd,{className:"w-5 h-5 mr-2"}),"Back to Home"]}),s.jsx(X,{variant:"outline",className:"flex-1 h-12",onClick:()=>alert("Navigating to rental history..."),children:"View My Rentals"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-gray-600 text-sm",children:["Need help?"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"Contact Support"})," ","or"," ",s.jsx("a",{href:"#",className:"text-[#C4A672] hover:underline",children:"View FAQs"})]})})]})})}function dW({onClose:t}){const[e,n]=_.useState("browse"),[r,i]=_.useState(null),[o,u]=_.useState("monthly"),d=y=>{i(y),n("details")},f=y=>{u(y),n("confirm")},p=async()=>{if(!(!r||!gt.currentUser))try{const y=new Date,g=new Date;o==="weekly"&&g.setDate(y.getDate()+7),o==="monthly"&&g.setDate(y.getDate()+30),o==="yearly"&&g.setDate(y.getDate()+365);const b=await Ns(lt(Te,"rentals"),{renterId:gt.currentUser.uid,bookId:r.id,bookTitle:r.title,author:r.author,startDate:y.toISOString(),dueDate:g.toISOString(),status:"active",price:r.rentalOptions[o],rentalPeriod:o,createdAt:xn()});await Ns(lt(Te,"transactions"),{type:"rent",bookTitle:r.title,user:gt.currentUser.displayName||gt.currentUser.email||"Unknown User",amount:r.rentalOptions[o],date:new Date().toISOString(),status:"completed",relatedId:b.id,createdAt:xn()}),n("success")}catch(y){console.error("Error saving rental:",y),ue.error("Failed to process rental. Please try again.")}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e==="browse"&&s.jsx(oW,{onSelectBook:d,onClose:t}),e==="details"&&r&&s.jsx(lW,{book:r,onBack:()=>n("browse"),onRent:f}),e==="confirm"&&r&&s.jsx(cW,{book:r,rentalPeriod:o,onBack:()=>n("details"),onConfirm:p}),e==="success"&&r&&s.jsx(uW,{book:r,onClose:t})]})}function Ql({className:t,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:ft("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function mk({initialData:t,onNext:e,onCancel:n,isExchange:r=!1}){const[i,o]=_.useState(t),[u,d]=_.useState({}),[f,p]=_.useState(!1),y=["Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Biography","History","Self-Help","Business","Science","Philosophy","Classic Literature","Other"],g=["New","Like New","Good","Fair","Poor"],b=I=>{const z=I.replace(/[-\s]/g,"");return z.length===10||z.length===13?/^[0-9X]+$/.test(z):!1},E=async()=>{if(!i.isbn){d({...u,isbn:"Please enter an ISBN number first"});return}if(!b(i.isbn)){d({...u,isbn:"Invalid ISBN format"});return}p(!0);const I=i.isbn.replace(/[-\s]/g,"");try{const H=await(await fetch(`https://www.googleapis.com/books/v1/volumes?q=isbn:${I}`)).json();if(H.totalItems>0){const G=H.items[0].volumeInfo;o({...i,bookName:G.title||"",author:G.authors?.[0]||"",publishedYear:G.publishedDate?.split("-")[0]||"",pages:G.pageCount?.toString()||"",language:G.language?.toUpperCase()||"English",description:G.description||i.description})}else d({...u,isbn:"No book found with this ISBN"})}catch{d({...u,isbn:"Failed to lookup ISBN. Please enter details manually."})}finally{p(!1)}},N=I=>{if(I.target.files){const z=Array.from(I.target.files),H=z.map(G=>URL.createObjectURL(G));o(G=>({...G,images:[...G.images,...H],imageFiles:[...G.imageFiles||[],...z]}))}},S=I=>{o(z=>{const H=[...z.images],G=[...z.imageFiles||[]];return H.splice(I,1),G.length>I&&G.splice(I,1),{...z,images:H,imageFiles:G}})},k=()=>{const I={};return i.isbn.trim()?b(i.isbn)||(I.isbn="Please enter a valid ISBN-10 or ISBN-13 number"):I.isbn="ISBN is required",i.bookName.trim()||(I.bookName="Book name is required"),i.author.trim()||(I.author="Author name is required"),r?i.exchangePreferences?.trim()||(I.exchangePreferences="Please specify what you want in exchange"):i.price?parseFloat(i.price)<=0?I.price="Price must be greater than 0":parseFloat(i.price)>1e4&&(I.price="Price seems unreasonably high"):I.price="Price is required",i.publishedYear&&(parseInt(i.publishedYear)<1e3||parseInt(i.publishedYear)>new Date().getFullYear())&&(I.publishedYear="Please enter a valid year"),i.pages&&parseInt(i.pages)<=0&&(I.pages="Pages must be greater than 0"),d(I),Object.keys(I).length===0},R=I=>{I.preventDefault(),k()&&e(i)};return s.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(Wr,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Book Information"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Enter the details of the book you want to ",r?"exchange":"sell"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{htmlFor:"isbn",children:"ISBN Number *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{id:"isbn",type:"text",placeholder:"978-3-16-148410-0 or 0-306-40615-2",value:i.isbn,onChange:I=>{o({...i,isbn:I.target.value}),d({...u,isbn:""})},className:u.isbn?"border-red-500":""}),u.isbn&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.isbn})]}),s.jsxs(X,{type:"button",onClick:E,disabled:f,variant:"outline",className:"px-4",children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),f?"Looking up...":"Auto-fill"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"The ISBN can be found on the back cover or copyright page of the book"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{htmlFor:"bookName",children:"Book Title *"}),s.jsx(Ie,{id:"bookName",type:"text",placeholder:"Enter the book title",value:i.bookName,onChange:I=>{o({...i,bookName:I.target.value}),d({...u,bookName:""})},className:u.bookName?"border-red-500":""}),u.bookName&&s.jsx("p",{className:"text-sm text-red-500",children:u.bookName})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{htmlFor:"author",children:"Author Name *"}),s.jsx(Ie,{id:"author",type:"text",placeholder:"Enter the author's name",value:i.author,onChange:I=>{o({...i,author:I.target.value}),d({...u,author:""})},className:u.author?"border-red-500":""}),u.author&&s.jsx("p",{className:"text-sm text-red-500",children:u.author})]}),r?s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{htmlFor:"exchangePreferences",children:"Exchange Preferences *"}),s.jsx(Ie,{id:"exchangePreferences",placeholder:"What are you looking for? e.g. 'Sci-Fi books', 'Specific Title'",value:i.exchangePreferences||"",onChange:I=>{o({...i,exchangePreferences:I.target.value}),d({...u,exchangePreferences:""})},className:u.exchangePreferences?"border-red-500":""}),u.exchangePreferences&&s.jsx("p",{className:"text-sm text-red-500",children:u.exchangePreferences})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"price",children:"Resale Price (USD) *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),s.jsx(Ie,{id:"price",type:"number",step:"0.01",placeholder:"0.00",value:i.price,onChange:I=>{o({...i,price:I.target.value}),d({...u,price:""})},className:`pl-7 ${u.price?"border-red-500":""}`})]}),u.price&&s.jsx("p",{className:"text-sm text-red-500",children:u.price})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"condition",children:"Condition *"}),s.jsxs(vn,{value:i.condition,onValueChange:I=>o({...i,condition:I}),children:[s.jsx(wn,{id:"condition",children:s.jsx(yn,{})}),s.jsx(_n,{children:g.map(I=>s.jsx(Ve,{value:I,children:I},I))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"category",children:"Category *"}),s.jsxs(vn,{value:i.category,onValueChange:I=>o({...i,category:I}),children:[s.jsx(wn,{id:"category",children:s.jsx(yn,{})}),s.jsx(_n,{children:y.map(I=>s.jsx(Ve,{value:I,children:I},I))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"publishedYear",children:"Published Year"}),s.jsx(Ie,{id:"publishedYear",type:"number",placeholder:"2020",value:i.publishedYear,onChange:I=>{o({...i,publishedYear:I.target.value}),d({...u,publishedYear:""})},className:u.publishedYear?"border-red-500":""}),u.publishedYear&&s.jsx("p",{className:"text-sm text-red-500",children:u.publishedYear})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"language",children:"Language"}),s.jsx(Ie,{id:"language",type:"text",placeholder:"English",value:i.language,onChange:I=>o({...i,language:I.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"pages",children:"Number of Pages"}),s.jsx(Ie,{id:"pages",type:"number",placeholder:"350",value:i.pages,onChange:I=>{o({...i,pages:I.target.value}),d({...u,pages:""})},className:u.pages?"border-red-500":""}),u.pages&&s.jsx("p",{className:"text-sm text-red-500",children:u.pages})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{htmlFor:"description",children:"Description"}),s.jsx(Ql,{id:"description",placeholder:"Describe the book's condition, any highlighting, notes, or other details...",value:i.description,onChange:I=>o({...i,description:I.target.value}),rows:4}),s.jsxs("p",{className:"text-xs text-gray-500",children:[i.description.length,"/500 characters"]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{children:"Book Images"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.images.map((I,z)=>s.jsxs("div",{className:"relative aspect-[3/4] rounded-lg overflow-hidden border border-gray-200 group",children:[s.jsx("img",{src:I,alt:`Preview ${z+1}`,className:"w-full h-full object-cover"}),s.jsx("button",{type:"button",onClick:()=>S(z),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Dt,{className:"w-4 h-4"})})]},z)),s.jsxs("label",{className:"aspect-[3/4] rounded-lg border-2 border-dashed border-gray-300 flex flex-col items-center justify-center cursor-pointer hover:border-[#C4A672] hover:bg-[#C4A672]/5 transition-colors",children:[s.jsx(jg,{className:"w-8 h-8 text-gray-400 mb-2"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Add Image"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:N})]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Upload clear photos of the front cover, back cover, and any damage."})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(X,{type:"button",variant:"outline",onClick:n,className:"px-6",children:"Cancel"}),s.jsx(X,{type:"submit",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:"Next: Location & Delivery"})]})]})}function pk(t,e){const n=_.useRef(e);_.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const hW=1;function fW(t){return Object.freeze({__version:hW,map:t})}function mW(t,e){return Object.freeze({...t,...e})}const gk=_.createContext(null),xk=gk.Provider;function Jw(){const t=_.useContext(gk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function pW(t){function e(n,r){const{instance:i,context:o}=t(n).current;return _.useImperativeHandle(r,()=>i),n.children==null?null:Re.createElement(xk,{value:o},n.children)}return _.forwardRef(e)}function gW(t){function e(n,r){const[i,o]=_.useState(!1),{instance:u}=t(n,o).current;_.useImperativeHandle(r,()=>u),_.useEffect(function(){i&&u.update()},[u,i,n.children]);const d=u._contentNode;return d?bd.createPortal(n.children,d):null}return _.forwardRef(e)}function xW(t){function e(n,r){const{instance:i}=t(n).current;return _.useImperativeHandle(r,()=>i),null}return _.forwardRef(e)}function vk(t,e){const n=_.useRef();_.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function e_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function vW(t,e){return function(r,i){const o=Jw(),u=t(e_(r,o),o);return pk(o.map,r.attribution),vk(u.current,r.eventHandlers),e(u.current,o,r,i),u}}var jh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var yW=jh.exports,A1;function wW(){return A1||(A1=1,(function(t,e){(function(n,r){r(e)})(yW,(function(n){var r="1.9.4";function i(l){var h,v,j,P;for(v=1,j=arguments.length;v<j;v++){P=arguments[v];for(h in P)l[h]=P[h]}return l}var o=Object.create||(function(){function l(){}return function(h){return l.prototype=h,new l}})();function u(l,h){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var j=v.call(arguments,2);return function(){return l.apply(h,j.length?j.concat(v.call(arguments)):arguments)}}var d=0;function f(l){return"_leaflet_id"in l||(l._leaflet_id=++d),l._leaflet_id}function p(l,h,v){var j,P,B,ee;return ee=function(){j=!1,P&&(B.apply(v,P),P=!1)},B=function(){j?P=arguments:(l.apply(v,arguments),setTimeout(ee,h),j=!0)},B}function y(l,h,v){var j=h[1],P=h[0],B=j-P;return l===j&&v?l:((l-P)%B+B)%B+P}function g(){return!1}function b(l,h){if(h===!1)return l;var v=Math.pow(10,h===void 0?6:h);return Math.round(l*v)/v}function E(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function N(l){return E(l).split(/\s+/)}function S(l,h){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?o(l.options):{});for(var v in h)l.options[v]=h[v];return l.options}function k(l,h,v){var j=[];for(var P in l)j.push(encodeURIComponent(v?P.toUpperCase():P)+"="+encodeURIComponent(l[P]));return(!h||h.indexOf("?")===-1?"?":"&")+j.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function I(l,h){return l.replace(R,function(v,j){var P=h[j];if(P===void 0)throw new Error("No value provided for variable "+v);return typeof P=="function"&&(P=P(h)),P})}var z=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function H(l,h){for(var v=0;v<l.length;v++)if(l[v]===h)return v;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Q(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var F=0;function D(l){var h=+new Date,v=Math.max(0,16-(h-F));return F=h+v,window.setTimeout(l,v)}var O=window.requestAnimationFrame||Q("RequestAnimationFrame")||D,U=window.cancelAnimationFrame||Q("CancelAnimationFrame")||Q("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function $(l,h,v){if(v&&O===D)l.call(h);else return O.call(window,u(l,h))}function K(l){l&&U.call(window,l)}var W={__proto__:null,extend:i,create:o,bind:u,get lastId(){return d},stamp:f,throttle:p,wrapNum:y,falseFn:g,formatNum:b,trim:E,splitWords:N,setOptions:S,getParamString:k,template:I,isArray:z,indexOf:H,emptyImageUrl:G,requestFn:O,cancelFn:U,requestAnimFrame:$,cancelAnimFrame:K};function ce(){}ce.extend=function(l){var h=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,j=o(v);j.constructor=h,h.prototype=j;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(h[P]=this[P]);return l.statics&&i(h,l.statics),l.includes&&(oe(l.includes),i.apply(null,[j].concat(l.includes))),i(j,l),delete j.statics,delete j.includes,j.options&&(j.options=v.options?o(v.options):{},i(j.options,l.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,ee=j._initHooks.length;B<ee;B++)j._initHooks[B].call(this)}},h},ce.include=function(l){var h=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=h,this.mergeOptions(l.options)),this},ce.mergeOptions=function(l){return i(this.prototype.options,l),this},ce.addInitHook=function(l){var h=Array.prototype.slice.call(arguments,1),v=typeof l=="function"?l:function(){this[l].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function oe(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=z(l)?l:[l];for(var h=0;h<l.length;h++)l[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(l,h,v){if(typeof l=="object")for(var j in l)this._on(j,l[j],h);else{l=N(l);for(var P=0,B=l.length;P<B;P++)this._on(l[P],h,v)}return this},off:function(l,h,v){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var j in l)this._off(j,l[j],h);else{l=N(l);for(var P=arguments.length===1,B=0,ee=l.length;B<ee;B++)P?this._off(l[B]):this._off(l[B],h,v)}return this},_on:function(l,h,v,j){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(l,h,v)===!1){v===this&&(v=void 0);var P={fn:h,ctx:v};j&&(P.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(P)}},_off:function(l,h,v){var j,P,B;if(this._events&&(j=this._events[l],!!j)){if(arguments.length===1){if(this._firingCount)for(P=0,B=j.length;P<B;P++)j[P].fn=g;delete this._events[l];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var ee=this._listens(l,h,v);if(ee!==!1){var ae=j[ee];this._firingCount&&(ae.fn=g,this._events[l]=j=j.slice()),j.splice(ee,1)}}},fire:function(l,h,v){if(!this.listens(l,v))return this;var j=i({},h,{type:l,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var P=this._events[l];if(P){this._firingCount=this._firingCount+1||1;for(var B=0,ee=P.length;B<ee;B++){var ae=P[B],pe=ae.fn;ae.once&&this.off(l,pe,ae.ctx),pe.call(ae.ctx||this,j)}this._firingCount--}}return v&&this._propagateEvent(j),this},listens:function(l,h,v,j){typeof l!="string"&&console.warn('"string" type argument expected');var P=h;typeof h!="function"&&(j=!!h,P=void 0,v=void 0);var B=this._events&&this._events[l];if(B&&B.length&&this._listens(l,P,v)!==!1)return!0;if(j){for(var ee in this._eventParents)if(this._eventParents[ee].listens(l,h,v,j))return!0}return!1},_listens:function(l,h,v){if(!this._events)return!1;var j=this._events[l]||[];if(!h)return!!j.length;v===this&&(v=void 0);for(var P=0,B=j.length;P<B;P++)if(j[P].fn===h&&j[P].ctx===v)return P;return!1},once:function(l,h,v){if(typeof l=="object")for(var j in l)this._on(j,l[j],h,!0);else{l=N(l);for(var P=0,B=l.length;P<B;P++)this._on(l[P],h,v,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[f(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[f(l)],this},_propagateEvent:function(l){for(var h in this._eventParents)this._eventParents[h].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};ne.addEventListener=ne.on,ne.removeEventListener=ne.clearAllEventListeners=ne.off,ne.addOneTimeEventListener=ne.once,ne.fireEvent=ne.fire,ne.hasEventListeners=ne.listens;var xe=ce.extend(ne);function Z(l,h,v){this.x=v?Math.round(l):l,this.y=v?Math.round(h):h}var de=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(l){return this.clone()._add(ie(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(ie(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new Z(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new Z(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(l){l=ie(l);var h=l.x-this.x,v=l.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(l){return l=ie(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=ie(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function ie(l,h,v){return l instanceof Z?l:z(l)?new Z(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new Z(l.x,l.y):new Z(l,h,v)}function J(l,h){if(l)for(var v=h?[l,h]:l,j=0,P=v.length;j<P;j++)this.extend(v[j])}J.prototype={extend:function(l){var h,v;if(!l)return this;if(l instanceof Z||typeof l[0]=="number"||"x"in l)h=v=ie(l);else if(l=me(l),h=l.min,v=l.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(l){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var h,v;return typeof l[0]=="number"||l instanceof Z?l=ie(l):l=me(l),l instanceof J?(h=l.min,v=l.max):h=v=l,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=me(l);var h=this.min,v=this.max,j=l.min,P=l.max,B=P.x>=h.x&&j.x<=v.x,ee=P.y>=h.y&&j.y<=v.y;return B&&ee},overlaps:function(l){l=me(l);var h=this.min,v=this.max,j=l.min,P=l.max,B=P.x>h.x&&j.x<v.x,ee=P.y>h.y&&j.y<v.y;return B&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var h=this.min,v=this.max,j=Math.abs(h.x-v.x)*l,P=Math.abs(h.y-v.y)*l;return me(ie(h.x-j,h.y-P),ie(v.x+j,v.y+P))},equals:function(l){return l?(l=me(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function me(l,h){return!l||l instanceof J?l:new J(l,h)}function we(l,h){if(l)for(var v=h?[l,h]:l,j=0,P=v.length;j<P;j++)this.extend(v[j])}we.prototype={extend:function(l){var h=this._southWest,v=this._northEast,j,P;if(l instanceof je)j=l,P=l;else if(l instanceof we){if(j=l._southWest,P=l._northEast,!j||!P)return this}else return l?this.extend(Ee(l)||_e(l)):this;return!h&&!v?(this._southWest=new je(j.lat,j.lng),this._northEast=new je(P.lat,P.lng)):(h.lat=Math.min(j.lat,h.lat),h.lng=Math.min(j.lng,h.lng),v.lat=Math.max(P.lat,v.lat),v.lng=Math.max(P.lng,v.lng)),this},pad:function(l){var h=this._southWest,v=this._northEast,j=Math.abs(h.lat-v.lat)*l,P=Math.abs(h.lng-v.lng)*l;return new we(new je(h.lat-j,h.lng-P),new je(v.lat+j,v.lng+P))},getCenter:function(){return new je((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new je(this.getNorth(),this.getWest())},getSouthEast:function(){return new je(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof je||"lat"in l?l=Ee(l):l=_e(l);var h=this._southWest,v=this._northEast,j,P;return l instanceof we?(j=l.getSouthWest(),P=l.getNorthEast()):j=P=l,j.lat>=h.lat&&P.lat<=v.lat&&j.lng>=h.lng&&P.lng<=v.lng},intersects:function(l){l=_e(l);var h=this._southWest,v=this._northEast,j=l.getSouthWest(),P=l.getNorthEast(),B=P.lat>=h.lat&&j.lat<=v.lat,ee=P.lng>=h.lng&&j.lng<=v.lng;return B&&ee},overlaps:function(l){l=_e(l);var h=this._southWest,v=this._northEast,j=l.getSouthWest(),P=l.getNorthEast(),B=P.lat>h.lat&&j.lat<v.lat,ee=P.lng>h.lng&&j.lng<v.lng;return B&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,h){return l?(l=_e(l),this._southWest.equals(l.getSouthWest(),h)&&this._northEast.equals(l.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _e(l,h){return l instanceof we?l:new we(l,h)}function je(l,h,v){if(isNaN(l)||isNaN(h))throw new Error("Invalid LatLng object: ("+l+", "+h+")");this.lat=+l,this.lng=+h,v!==void 0&&(this.alt=+v)}je.prototype={equals:function(l,h){if(!l)return!1;l=Ee(l);var v=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return v<=(h===void 0?1e-9:h)},toString:function(l){return"LatLng("+b(this.lat,l)+", "+b(this.lng,l)+")"},distanceTo:function(l){return ke.distance(this,Ee(l))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(l){var h=180*l/40075017,v=h/Math.cos(Math.PI/180*this.lat);return _e([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new je(this.lat,this.lng,this.alt)}};function Ee(l,h,v){return l instanceof je?l:z(l)&&typeof l[0]!="object"?l.length===3?new je(l[0],l[1],l[2]):l.length===2?new je(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new je(l.lat,"lng"in l?l.lng:l.lon,l.alt):h===void 0?null:new je(l,h,v)}var ve={latLngToPoint:function(l,h){var v=this.projection.project(l),j=this.scale(h);return this.transformation._transform(v,j)},pointToLatLng:function(l,h){var v=this.scale(h),j=this.transformation.untransform(l,v);return this.projection.unproject(j)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(l),j=this.transformation.transform(h.min,v),P=this.transformation.transform(h.max,v);return new J(j,P)},infinite:!1,wrapLatLng:function(l){var h=this.wrapLng?y(l.lng,this.wrapLng,!0):l.lng,v=this.wrapLat?y(l.lat,this.wrapLat,!0):l.lat,j=l.alt;return new je(v,h,j)},wrapLatLngBounds:function(l){var h=l.getCenter(),v=this.wrapLatLng(h),j=h.lat-v.lat,P=h.lng-v.lng;if(j===0&&P===0)return l;var B=l.getSouthWest(),ee=l.getNorthEast(),ae=new je(B.lat-j,B.lng-P),pe=new je(ee.lat-j,ee.lng-P);return new we(ae,pe)}},ke=i({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(l,h){var v=Math.PI/180,j=l.lat*v,P=h.lat*v,B=Math.sin((h.lat-l.lat)*v/2),ee=Math.sin((h.lng-l.lng)*v/2),ae=B*B+Math.cos(j)*Math.cos(P)*ee*ee,pe=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return this.R*pe}}),Xe=6378137,tt={R:Xe,MAX_LATITUDE:85.0511287798,project:function(l){var h=Math.PI/180,v=this.MAX_LATITUDE,j=Math.max(Math.min(v,l.lat),-v),P=Math.sin(j*h);return new Z(this.R*l.lng*h,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(l){var h=180/Math.PI;return new je((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*h,l.x*h/this.R)},bounds:(function(){var l=Xe*Math.PI;return new J([-l,-l],[l,l])})()};function yt(l,h,v,j){if(z(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=h,this._c=v,this._d=j}yt.prototype={transform:function(l,h){return this._transform(l.clone(),h)},_transform:function(l,h){return h=h||1,l.x=h*(this._a*l.x+this._b),l.y=h*(this._c*l.y+this._d),l},untransform:function(l,h){return h=h||1,new Z((l.x/h-this._b)/this._a,(l.y/h-this._d)/this._c)}};function wt(l,h,v,j){return new yt(l,h,v,j)}var Yt=i({},ke,{code:"EPSG:3857",projection:tt,transformation:(function(){var l=.5/(Math.PI*tt.R);return wt(l,.5,-l,.5)})()}),Ln=i({},Yt,{code:"EPSG:900913"});function kr(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function js(l,h){var v="",j,P,B,ee,ae,pe;for(j=0,B=l.length;j<B;j++){for(ae=l[j],P=0,ee=ae.length;P<ee;P++)pe=ae[P],v+=(P?"L":"M")+pe.x+" "+pe.y;v+=h?Be.svg?"z":"x":""}return v||"M0 0"}var An=document.documentElement.style,Pr="ActiveXObject"in window,Ot=Pr&&!document.addEventListener,Xt="msLaunchUri"in navigator&&!("documentMode"in document),cs=fn("webkit"),Nn=fn("android"),Us=fn("android 2")||fn("android 3"),Bo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Jr=Nn&&fn("Google")&&Bo<537&&!("AudioNode"in window),or=!!window.opera,Pi=!Xt&&fn("chrome"),lr=fn("gecko")&&!cs&&!or&&!Pr,Ji=!Pi&&fn("safari"),us=fn("phantom"),cr="OTransition"in An,Ir=navigator.platform.indexOf("Win")===0,Rr=Pr&&"transition"in An,ei="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Us,Ii="MozPerspective"in An,Cs=!window.L_DISABLE_3D&&(Rr||ei||Ii)&&!cr&&!us,ur=typeof orientation<"u"||fn("mobile"),dr=ur&&cs,ds=ur&&ei,hr=!window.PointerEvent&&window.MSPointerEvent,fr=!!(window.PointerEvent||hr),qt="ontouchstart"in window||!!window.TouchEvent,ea=!window.L_NO_TOUCH&&(qt||fr),rt=ur&&or,Ht=ur&&lr,hn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mn=(function(){var l=!1;try{var h=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",g,h),window.removeEventListener("testPassiveEventSupport",g,h)}catch{}return l})(),hs=(function(){return!!document.createElement("canvas").getContext})(),Jt=!!(document.createElementNS&&kr("svg").createSVGRect),jn=!!Jt&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),$s=!Jt&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var h=l.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}})(),Cn=navigator.platform.indexOf("Mac")===0,es=navigator.platform.indexOf("Linux")===0;function fn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Be={ie:Pr,ielt9:Ot,edge:Xt,webkit:cs,android:Nn,android23:Us,androidStock:Jr,opera:or,chrome:Pi,gecko:lr,safari:Ji,phantom:us,opera12:cr,win:Ir,ie3d:Rr,webkit3d:ei,gecko3d:Ii,any3d:Cs,mobile:ur,mobileWebkit:dr,mobileWebkit3d:ds,msPointer:hr,pointer:fr,touch:ea,touchNative:qt,mobileOpera:rt,mobileGecko:Ht,retina:hn,passiveEvents:Mn,canvas:hs,svg:Jt,vml:$s,inlineSvg:jn,mac:Cn,linux:es},ta=Be.msPointer?"MSPointerDown":"pointerdown",Hs=Be.msPointer?"MSPointerMove":"pointermove",ac=Be.msPointer?"MSPointerUp":"pointerup",oc=Be.msPointer?"MSPointerCancel":"pointercancel",Ua={touchstart:ta,touchmove:Hs,touchend:ac,touchcancel:oc},mr={touchstart:Qt,touchmove:pr,touchend:pr,touchcancel:pr},ti={},lc=!1;function ou(l,h,v){return h==="touchstart"&&Wa(),mr[h]?(v=mr[h].bind(this,v),l.addEventListener(Ua[h],v,!1),v):(console.warn("wrong event specified:",h),g)}function lu(l,h,v){if(!Ua[h]){console.warn("wrong event specified:",h);return}l.removeEventListener(Ua[h],v,!1)}function $a(l){ti[l.pointerId]=l}function cc(l){ti[l.pointerId]&&(ti[l.pointerId]=l)}function Ha(l){delete ti[l.pointerId]}function Wa(){lc||(document.addEventListener(ta,$a,!0),document.addEventListener(Hs,cc,!0),document.addEventListener(ac,Ha,!0),document.addEventListener(oc,Ha,!0),lc=!0)}function pr(l,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in ti)h.touches.push(ti[v]);h.changedTouches=[h],l(h)}}function Qt(l,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&en(h),pr(l,h)}function Bd(l){var h={},v,j;for(j in l)v=l[j],h[j]=v&&v.bind?v.bind(l):v;return l=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var zo=200;function uc(l,h){l.addEventListener("dblclick",h);var v=0,j;function P(B){if(B.detail!==1){j=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var ee=ai(B);if(!(ee.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!ee.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var ae=Date.now();ae-v<=zo?(j++,j===2&&h(Bd(B))):j=1,v=ae}}}return l.addEventListener("click",P),{dblclick:h,simDblclick:P}}function qa(l,h){l.removeEventListener("dblclick",h.dblclick),l.removeEventListener("click",h.simDblclick)}var Ga=ra(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ni=ra(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),na=ni==="webkitTransition"||ni==="OTransition"?ni+"End":"transitionend";function Es(l){return typeof l=="string"?document.getElementById(l):l}function sa(l,h){var v=l.style[h]||l.currentStyle&&l.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(l,null);v=j?j[h]:null}return v==="auto"?null:v}function xt(l,h,v){var j=document.createElement(l);return j.className=h||"",v&&v.appendChild(j),j}function Pt(l){var h=l.parentNode;h&&h.removeChild(l)}function fs(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function gr(l){var h=l.parentNode;h&&h.lastChild!==l&&h.appendChild(l)}function ms(l){var h=l.parentNode;h&&h.firstChild!==l&&h.insertBefore(l,h.firstChild)}function si(l,h){if(l.classList!==void 0)return l.classList.contains(h);var v=ri(l);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function Ue(l,h){if(l.classList!==void 0)for(var v=N(h),j=0,P=v.length;j<P;j++)l.classList.add(v[j]);else if(!si(l,h)){var B=ri(l);Ri(l,(B?B+" ":"")+h)}}function zt(l,h){l.classList!==void 0?l.classList.remove(h):Ri(l,E((" "+ri(l)+" ").replace(" "+h+" "," ")))}function Ri(l,h){l.className.baseVal===void 0?l.className=h:l.className.baseVal=h}function ri(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function ts(l,h){"opacity"in l.style?l.style.opacity=h:"filter"in l.style&&dc(l,h)}function dc(l,h){var v=!1,j="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(j)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):l.style.filter+=" progid:"+j+"(opacity="+h+")"}function ra(l){for(var h=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in h)return l[v];return!1}function Ws(l,h,v){var j=h||new Z(0,0);l.style[Ga]=(Be.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(v?" scale("+v+")":"")}function on(l,h){l._leaflet_pos=h,Be.any3d?Ws(l,h):(l.style.left=h.x+"px",l.style.top=h.y+"px")}function Lr(l){return l._leaflet_pos||new Z(0,0)}var Nt,Ss,Ka;if("onselectstart"in document)Nt=function(){it(window,"selectstart",en)},Ss=function(){Ut(window,"selectstart",en)};else{var ii=ra(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nt=function(){if(ii){var l=document.documentElement.style;Ka=l[ii],l[ii]="none"}},Ss=function(){ii&&(document.documentElement.style[ii]=Ka,Ka=void 0)}}function Za(){it(window,"dragstart",en)}function Ya(){Ut(window,"dragstart",en)}var ia,xr;function aa(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(qs(),ia=l,xr=l.style.outlineStyle,l.style.outlineStyle="none",it(window,"keydown",qs))}function qs(){ia&&(ia.style.outlineStyle=xr,ia=void 0,xr=void 0,Ut(window,"keydown",qs))}function Mr(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function kn(l){var h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}var Qa={__proto__:null,TRANSFORM:Ga,TRANSITION:ni,TRANSITION_END:na,get:Es,getStyle:sa,create:xt,remove:Pt,empty:fs,toFront:gr,toBack:ms,hasClass:si,addClass:Ue,removeClass:zt,setClass:Ri,getClass:ri,setOpacity:ts,testProp:ra,setTransform:Ws,setPosition:on,getPosition:Lr,get disableTextSelection(){return Nt},get enableTextSelection(){return Ss},disableImageDrag:Za,enableImageDrag:Ya,preventOutline:aa,restoreOutline:qs,getSizedParentNode:Mr,getScale:kn};function it(l,h,v,j){if(h&&typeof h=="object")for(var P in h)Uo(l,P,h[P],v);else{h=N(h);for(var B=0,ee=h.length;B<ee;B++)Uo(l,h[B],v,j)}return this}var ln="_leaflet_events";function Ut(l,h,v,j){if(arguments.length===1)Li(l),delete l[ln];else if(h&&typeof h=="object")for(var P in h)oa(l,P,h[P],v);else if(h=N(h),arguments.length===2)Li(l,function(ae){return H(h,ae)!==-1});else for(var B=0,ee=h.length;B<ee;B++)oa(l,h[B],v,j);return this}function Li(l,h){for(var v in l[ln]){var j=v.split(/\d/)[0];(!h||h(j))&&oa(l,j,null,null,v)}}var Gs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Uo(l,h,v,j){var P=h+f(v)+(j?"_"+f(j):"");if(l[ln]&&l[ln][P])return this;var B=function(ae){return v.call(j||l,ae||window.event)},ee=B;!Be.touchNative&&Be.pointer&&h.indexOf("touch")===0?B=ou(l,h,B):Be.touch&&h==="dblclick"?B=uc(l,B):"addEventListener"in l?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?l.addEventListener(Gs[h]||h,B,Be.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(B=function(ae){ae=ae||window.event,Ja(l,ae)&&ee(ae)},l.addEventListener(Gs[h],B,!1)):l.addEventListener(h,ee,!1):l.attachEvent("on"+h,B),l[ln]=l[ln]||{},l[ln][P]=B}function oa(l,h,v,j,P){P=P||h+f(v)+(j?"_"+f(j):"");var B=l[ln]&&l[ln][P];if(!B)return this;!Be.touchNative&&Be.pointer&&h.indexOf("touch")===0?lu(l,h,B):Be.touch&&h==="dblclick"?qa(l,B):"removeEventListener"in l?l.removeEventListener(Gs[h]||h,B,!1):l.detachEvent("on"+h,B),l[ln][P]=null}function kt(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function $o(l){return Uo(l,"wheel",kt),this}function Xa(l){return it(l,"mousedown touchstart dblclick contextmenu",kt),l._leaflet_disable_click=!0,this}function en(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Ts(l){return en(l),kt(l),this}function ai(l){if(l.composedPath)return l.composedPath();for(var h=[],v=l.target;v;)h.push(v),v=v.parentNode;return h}function oi(l,h){if(!h)return new Z(l.clientX,l.clientY);var v=kn(h),j=v.boundingClientRect;return new Z((l.clientX-j.left)/v.x-h.clientLeft,(l.clientY-j.top)/v.y-h.clientTop)}var li=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function hc(l){return Be.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/li:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Ja(l,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch{return!1}return v!==l}var ci={__proto__:null,on:it,off:Ut,stopPropagation:kt,disableScrollPropagation:$o,disableClickPropagation:Xa,preventDefault:en,stop:Ts,getPropagationPath:ai,getMousePosition:oi,getWheelDelta:hc,isExternalTarget:Ja,addListener:it,removeListener:Ut},eo=xe.extend({run:function(l,h,v,j){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=Lr(l),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(l){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,h){var v=this._startPos.add(this._offset.multiplyBy(l));h&&v._round(),on(this._el,v),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),jt=xe.extend({options:{crs:Yt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,h){h=S(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Ee(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ni&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,na,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),l=this._limitCenter(Ee(l),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=i({animate:v.animate},v.zoom),v.pan=i({animate:v.animate,duration:v.duration},v.pan));var j=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,h,v.zoom):this._tryAnimatedPan(l,v.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(l,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(l,h){return this._loaded?this.setView(this.getCenter(),l,{zoom:h}):(this._zoom=l,this)},zoomIn:function(l,h){return l=l||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,h)},zoomOut:function(l,h){return l=l||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,h)},setZoomAround:function(l,h,v){var j=this.getZoomScale(h),P=this.getSize().divideBy(2),B=l instanceof Z?l:this.latLngToContainerPoint(l),ee=B.subtract(P).multiplyBy(1-1/j),ae=this.containerPointToLatLng(P.add(ee));return this.setView(ae,h,{zoom:v})},_getBoundsCenterZoom:function(l,h){h=h||{},l=l.getBounds?l.getBounds():_e(l);var v=ie(h.paddingTopLeft||h.padding||[0,0]),j=ie(h.paddingBottomRight||h.padding||[0,0]),P=this.getBoundsZoom(l,!1,v.add(j));if(P=typeof h.maxZoom=="number"?Math.min(h.maxZoom,P):P,P===1/0)return{center:l.getCenter(),zoom:P};var B=j.subtract(v).divideBy(2),ee=this.project(l.getSouthWest(),P),ae=this.project(l.getNorthEast(),P),pe=this.unproject(ee.add(ae).divideBy(2).add(B),P);return{center:pe,zoom:P}},fitBounds:function(l,h){if(l=_e(l),!l.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,h){return this.setView(l,this._zoom,{pan:h})},panBy:function(l,h){if(l=ie(l).round(),h=h||{},!l.x&&!l.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new eo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ue(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,h,v){if(v=v||{},v.animate===!1||!Be.any3d)return this.setView(l,h,v);this._stop();var j=this.project(this.getCenter()),P=this.project(l),B=this.getSize(),ee=this._zoom;l=Ee(l),h=h===void 0?ee:h;var ae=Math.max(B.x,B.y),pe=ae*this.getZoomScale(ee,h),Ne=P.distanceTo(j)||1,ze=1.42,nt=ze*ze;function bt($t){var ll=$t?-1:1,ax=$t?pe:ae,ox=pe*pe-ae*ae+ll*nt*nt*Ne*Ne,ao=2*ax*nt*Ne,oo=ox/ao,lo=Math.sqrt(oo*oo+1)-oo,wu=lo<1e-9?-18:Math.log(lo);return wu}function qn($t){return(Math.exp($t)-Math.exp(-$t))/2}function On($t){return(Math.exp($t)+Math.exp(-$t))/2}function Xs($t){return qn($t)/On($t)}var Ps=bt(0);function al($t){return ae*(On(Ps)/On(Ps+ze*$t))}function Xd($t){return ae*(On(Ps)*Xs(Ps+ze*$t)-qn(Ps))/nt}function ma($t){return 1-Math.pow(1-$t,1.5)}var Df=Date.now(),io=(bt(1)-Ps)/ze,gi=v.duration?1e3*v.duration:1e3*io*.8;function ol(){var $t=(Date.now()-Df)/gi,ll=ma($t)*io;$t<=1?(this._flyToFrame=$(ol,this),this._move(this.unproject(j.add(P.subtract(j).multiplyBy(Xd(ll)/Ne)),ee),this.getScaleZoom(ae/al(ll),ee),{flyTo:!0})):this._move(l,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),ol.call(this),this},flyToBounds:function(l,h){var v=this._getBoundsCenterZoom(l,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(l){return l=_e(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var h=this.options.minZoom;return this.options.minZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var h=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,h){this._enforcingBounds=!0;var v=this.getCenter(),j=this._limitCenter(v,this._zoom,_e(l));return v.equals(j)||this.panTo(j,h),this._enforcingBounds=!1,this},panInside:function(l,h){h=h||{};var v=ie(h.paddingTopLeft||h.padding||[0,0]),j=ie(h.paddingBottomRight||h.padding||[0,0]),P=this.project(this.getCenter()),B=this.project(l),ee=this.getPixelBounds(),ae=me([ee.min.add(v),ee.max.subtract(j)]),pe=ae.getSize();if(!ae.contains(B)){this._enforcingBounds=!0;var Ne=B.subtract(ae.getCenter()),ze=ae.extend(B).getSize().subtract(pe);P.x+=Ne.x<0?-ze.x:ze.x,P.y+=Ne.y<0?-ze.y:ze.y,this.panTo(this.unproject(P),h),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),j=h.divideBy(2).round(),P=v.divideBy(2).round(),B=j.subtract(P);return!B.x&&!B.y?this:(l.animate&&l.pan?this.panBy(B):(l.pan&&this._rawPanBy(B),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=u(this._handleGeolocationResponse,this),v=u(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,l):navigator.geolocation.getCurrentPosition(h,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var h=l.code,v=l.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var h=l.coords.latitude,v=l.coords.longitude,j=new je(h,v),P=j.toBounds(l.coords.accuracy*2),B=this._locateOptions;if(B.setView){var ee=this.getBoundsZoom(P);this.setView(j,B.maxZoom?Math.min(ee,B.maxZoom):ee)}var ae={latlng:j,bounds:P,timestamp:l.timestamp};for(var pe in l.coords)typeof l.coords[pe]=="number"&&(ae[pe]=l.coords[pe]);this.fire("locationfound",ae)}},addHandler:function(l,h){if(!h)return this;var v=this[l]=new h(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Pt(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,h){var v="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),j=xt("div",v,h||this._mapPane);return l&&(this._panes[l]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),h=this.unproject(l.getBottomLeft()),v=this.unproject(l.getTopRight());return new we(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,h,v){l=_e(l),v=ie(v||[0,0]);var j=this.getZoom()||0,P=this.getMinZoom(),B=this.getMaxZoom(),ee=l.getNorthWest(),ae=l.getSouthEast(),pe=this.getSize().subtract(v),Ne=me(this.project(ae,j),this.project(ee,j)).getSize(),ze=Be.any3d?this.options.zoomSnap:1,nt=pe.x/Ne.x,bt=pe.y/Ne.y,qn=h?Math.max(nt,bt):Math.min(nt,bt);return j=this.getScaleZoom(qn,j),ze&&(j=Math.round(j/(ze/100))*(ze/100),j=h?Math.ceil(j/ze)*ze:Math.floor(j/ze)*ze),Math.max(P,Math.min(B,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,h){var v=this._getTopLeftPoint(l,h);return new J(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(l)/v.scale(h)},getScaleZoom:function(l,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var j=v.zoom(l*v.scale(h));return isNaN(j)?1/0:j},project:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Ee(l),h)},unproject:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(ie(l),h)},layerPointToLatLng:function(l){var h=ie(l).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(l){var h=this.project(Ee(l))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(Ee(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(_e(l))},distance:function(l,h){return this.options.crs.distance(Ee(l),Ee(h))},containerPointToLayerPoint:function(l){return ie(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return ie(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var h=this.containerPointToLayerPoint(ie(l));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(l)))},mouseEventToContainerPoint:function(l){return oi(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var h=this._container=Es(l);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(h,"scroll",this._onScroll,this),this._containerId=f(h)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,Ue(l,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=sa(l,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),on(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ue(l.markerPane,"leaflet-zoom-hide"),Ue(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,h,v){on(this._mapPane,new Z(0,0));var j=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var P=this._zoom!==h;this._moveStart(P,v)._move(l,h)._moveEnd(P),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(l,h){return l&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(l,h,v,j){h===void 0&&(h=this._zoom);var P=this._zoom!==h;return this._zoom=h,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),j?v&&v.pinch&&this.fire("zoom",v):((P||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){on(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[f(this._container)]=this;var h=l?Ut:it;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,h){for(var v=[],j,P=h==="mouseout"||h==="mouseover",B=l.target||l.srcElement,ee=!1;B;){if(j=this._targets[f(B)],j&&(h==="click"||h==="preclick")&&this._draggableMoved(j)){ee=!0;break}if(j&&j.listens(h,!0)&&(P&&!Ja(B,l)||(v.push(j),P))||B===this._container)break;B=B.parentNode}return!v.length&&!ee&&!P&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var h=l.target||l.srcElement;if(!(!this._loaded||h._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(h))){var v=l.type;v==="mousedown"&&aa(h),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,h,v){if(l.type==="click"){var j=i({},l);j.type="preclick",this._fireDOMEvent(j,j.type,v)}var P=this._findEventTargets(l,h);if(v){for(var B=[],ee=0;ee<v.length;ee++)v[ee].listens(h,!0)&&B.push(v[ee]);P=B.concat(P)}if(P.length){h==="contextmenu"&&en(l);var ae=P[0],pe={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ne=ae.getLatLng&&(!ae._radius||ae._radius<=10);pe.containerPoint=Ne?this.latLngToContainerPoint(ae.getLatLng()):this.mouseEventToContainerPoint(l),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Ne?ae.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for(ee=0;ee<P.length;ee++)if(P[ee].fire(h,pe,!0),pe.originalEvent._stopped||P[ee].options.bubblingMouseEvents===!1&&H(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,h=this._handlers.length;l<h;l++)this._handlers[l].disable()},whenReady:function(l,h){return this._loaded?l.call(h||this,{target:this}):this.on("load",l,h),this},_getMapPanePos:function(){return Lr(this._mapPane)||new Z(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,h){var v=l&&h!==void 0?this._getNewPixelOrigin(l,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,h){var v=this.getSize()._divideBy(2);return this.project(l,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,h,v){var j=this._getNewPixelOrigin(v,h);return this.project(l,h)._subtract(j)},_latLngBoundsToNewLayerBounds:function(l,h,v){var j=this._getNewPixelOrigin(v,h);return me([this.project(l.getSouthWest(),h)._subtract(j),this.project(l.getNorthWest(),h)._subtract(j),this.project(l.getSouthEast(),h)._subtract(j),this.project(l.getNorthEast(),h)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,h,v){if(!v)return l;var j=this.project(l,h),P=this.getSize().divideBy(2),B=new J(j.subtract(P),j.add(P)),ee=this._getBoundsOffset(B,v,h);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?l:this.unproject(j.add(ee),h)},_limitOffset:function(l,h){if(!h)return l;var v=this.getPixelBounds(),j=new J(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(j,h))},_getBoundsOffset:function(l,h,v){var j=me(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),P=j.min.subtract(l.min),B=j.max.subtract(l.max),ee=this._rebound(P.x,-B.x),ae=this._rebound(P.y,-B.y);return new Z(ee,ae)},_rebound:function(l,h){return l+h>0?Math.round(l-h)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(h))},_limitZoom:function(l){var h=this.getMinZoom(),v=this.getMaxZoom(),j=Be.any3d?this.options.zoomSnap:1;return j&&(l=Math.round(l/j)*j),Math.max(h,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,h){var v=this._getCenterOffset(l)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var l=this._proxy=xt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(h){var v=Ga,j=this._proxy.style[v];Ws(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),j===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),h=this.getZoom();Ws(this._proxy,this.project(l,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(h),P=this._getCenterOffset(l)._divideBy(1-1/j);return v.animate!==!0&&!this.getSize().contains(P)?!1:($(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(l,h,!0)},this),!0)},_animateZoom:function(l,h,v,j){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=h,Ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:h,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ks(l,h){return new jt(l,h)}var ns=ce.extend({options:{position:"topright"},initialize:function(l){S(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var h=this._map;return h&&h.removeControl(this),this.options.position=l,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var h=this._container=this.onAdd(l),v=this.getPosition(),j=l._controlCorners[v];return Ue(h,"leaflet-control"),v.indexOf("bottom")!==-1?j.insertBefore(h,j.firstChild):j.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Zs=function(l){return new ns(l)};jt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},h="leaflet-",v=this._controlContainer=xt("div",h+"control-container",this._container);function j(P,B){var ee=h+P+" "+h+B;l[P+B]=xt("div",ee,v)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Pt(this._controlCorners[l]);Pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fc=ns.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,h,v,j){return v<j?-1:j<v?1:0}},initialize:function(l,h,v){S(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in l)this._addLayer(l[j],j);for(j in h)this._addLayer(h[j],j,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return ns.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,h){return this._addLayer(l,h),this._map?this._update():this},addOverlay:function(l,h){return this._addLayer(l,h,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var h=this._getLayer(f(l));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",h=this._container=xt("div",l),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Xa(h),$o(h);var j=this._section=xt("section",l+"-list");v&&(this._map.on("click",this.collapse,this),it(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=xt("a",l+"-toggle",h);P.href="#",P.title="Layers",P.setAttribute("role","button"),it(P,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){en(B),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=xt("div",l+"-base",j),this._separator=xt("div",l+"-separator",j),this._overlaysList=xt("div",l+"-overlays",j),h.appendChild(j)},_getLayer:function(l){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&f(this._layers[h].layer)===l)return this._layers[h]},_addLayer:function(l,h,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(u(function(j,P){return this.options.sortFunction(j.layer,P.layer,j.name,P.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fs(this._baseLayersList),fs(this._overlaysList),this._layerControlInputs=[];var l,h,v,j,P=0;for(v=0;v<this._layers.length;v++)j=this._layers[v],this._addItem(j),h=h||j.overlay,l=l||!j.overlay,P+=j.overlay?0:1;return this.options.hideSingleBase&&(l=l&&P>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=h&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var h=this._getLayer(f(l.target)),v=h.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(l,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(h?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=v,j.firstChild},_addItem:function(l){var h=document.createElement("label"),v=this._map.hasLayer(l.layer),j;l.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=v):j=this._createRadioElement("leaflet-base-layers_"+f(this),v),this._layerControlInputs.push(j),j.layerId=f(l.layer),it(j,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+l.name;var B=document.createElement("span");h.appendChild(B),B.appendChild(j),B.appendChild(P);var ee=l.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,h,v,j=[],P=[];this._handlingClick=!0;for(var B=l.length-1;B>=0;B--)h=l[B],v=this._getLayer(h.layerId).layer,h.checked?j.push(v):h.checked||P.push(v);for(B=0;B<P.length;B++)this._map.hasLayer(P[B])&&this._map.removeLayer(P[B]);for(B=0;B<j.length;B++)this._map.hasLayer(j[B])||this._map.addLayer(j[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,h,v,j=this._map.getZoom(),P=l.length-1;P>=0;P--)h=l[P],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&j<v.options.minZoom||v.options.maxZoom!==void 0&&j>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,it(l,"click",en),this.expand();var h=this;setTimeout(function(){Ut(l,"click",en),h._preventClick=!1})}}),to=function(l,h,v){return new fc(l,h,v)},vr=ns.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var h="leaflet-control-zoom",v=xt("div",h+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,h,v,j,P){var B=xt("a",v,j);return B.innerHTML=l,B.href="#",B.title=h,B.setAttribute("role","button"),B.setAttribute("aria-label",h),Xa(B),it(B,"click",Ts),it(B,"click",P,this),it(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var l=this._map,h="leaflet-disabled";zt(this._zoomInButton,h),zt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Ue(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Ue(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});jt.mergeOptions({zoomControl:!0}),jt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vr,this.addControl(this.zoomControl))});var mc=function(l){return new vr(l)},Wn=ns.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var h="leaflet-control-scale",v=xt("div",h),j=this.options;return this._addScales(j,h+"-line",v),l.on(j.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,h,v){l.metric&&(this._mScale=xt("div",h,v)),l.imperial&&(this._iScale=xt("div",h,v))},_update:function(){var l=this._map,h=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,h]),l.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var h=this._getRoundNum(l),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/l)},_updateImperial:function(l){var h=l*3.2808399,v,j,P;h>5280?(v=h/5280,j=this._getRoundNum(v),this._updateScale(this._iScale,j+" mi",j/v)):(P=this._getRoundNum(h),this._updateScale(this._iScale,P+" ft",P/h))},_updateScale:function(l,h,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=h},_getRoundNum:function(l){var h=Math.pow(10,(Math.floor(l)+"").length-1),v=l/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),ui=function(l){return new Wn(l)},no='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',di=ns.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?no+" ":"")+"Leaflet</a>"},initialize:function(l){S(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=xt("div","leaflet-control-attribution"),Xa(this._container);for(var h in l._layers)l._layers[h].getAttribution&&this.addAttribution(l._layers[h].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var h in this._attributions)this._attributions[h]&&l.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});jt.mergeOptions({attributionControl:!0}),jt.addInitHook(function(){this.options.attributionControl&&new di().addTo(this)});var Ho=function(l){return new di(l)};ns.Layers=fc,ns.Zoom=vr,ns.Scale=Wn,ns.Attribution=di,Zs.layers=to,Zs.zoom=mc,Zs.scale=ui,Zs.attribution=Ho;var ps=ce.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ps.addTo=function(l,h){return l.addHandler(h,this),this};var Wo={Events:ne},As=Be.touch?"touchstart mousedown":"mousedown",ks=xe.extend({options:{clickTolerance:3},initialize:function(l,h,v,j){S(this,j),this._element=l,this._dragStartTarget=h||l,this._preventOutline=v},enable:function(){this._enabled||(it(this._dragStartTarget,As,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ks._dragging===this&&this.finishDrag(!0),Ut(this._dragStartTarget,As,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!si(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){ks._dragging===this&&this.finishDrag();return}if(!(ks._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(ks._dragging=this,this._preventOutline&&aa(this._element),Za(),Nt(),!this._moving)){this.fire("down");var h=l.touches?l.touches[0]:l,v=Mr(this._element);this._startPoint=new Z(h.clientX,h.clientY),this._startPos=Lr(this._element),this._parentScale=kn(v);var j=l.type==="mousedown";it(document,j?"mousemove":"touchmove",this._onMove,this),it(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var h=l.touches&&l.touches.length===1?l.touches[0]:l,v=new Z(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,en(l),this._moved||(this.fire("dragstart"),this._moved=!0,Ue(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),on(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ut(document,"mousemove touchmove",this._onMove,this),Ut(document,"mouseup touchend touchcancel",this._onUp,this),Ya(),Ss();var h=this._moved&&this._moving;this._moving=!1,ks._dragging=!1,h&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function qo(l,h,v){var j,P=[1,4,2,8],B,ee,ae,pe,Ne,ze,nt,bt;for(B=0,ze=l.length;B<ze;B++)l[B]._code=fe(l[B],h);for(ae=0;ae<4;ae++){for(nt=P[ae],j=[],B=0,ze=l.length,ee=ze-1;B<ze;ee=B++)pe=l[B],Ne=l[ee],pe._code&nt?Ne._code&nt||(bt=re(Ne,pe,nt,h,v),bt._code=fe(bt,h),j.push(bt)):(Ne._code&nt&&(bt=re(Ne,pe,nt,h,v),bt._code=fe(bt,h),j.push(bt)),j.push(pe));l=j}return l}function pc(l,h){var v,j,P,B,ee,ae,pe,Ne,ze;if(!l||l.length===0)throw new Error("latlngs not passed");It(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var nt=Ee([0,0]),bt=_e(l),qn=bt.getNorthWest().distanceTo(bt.getSouthWest())*bt.getNorthEast().distanceTo(bt.getNorthWest());qn<1700&&(nt=Go(l));var On=l.length,Xs=[];for(v=0;v<On;v++){var Ps=Ee(l[v]);Xs.push(h.project(Ee([Ps.lat-nt.lat,Ps.lng-nt.lng])))}for(ae=pe=Ne=0,v=0,j=On-1;v<On;j=v++)P=Xs[v],B=Xs[j],ee=P.y*B.x-B.y*P.x,pe+=(P.x+B.x)*ee,Ne+=(P.y+B.y)*ee,ae+=ee*3;ae===0?ze=Xs[0]:ze=[pe/ae,Ne/ae];var al=h.unproject(ie(ze));return Ee([al.lat+nt.lat,al.lng+nt.lng])}function Go(l){for(var h=0,v=0,j=0,P=0;P<l.length;P++){var B=Ee(l[P]);h+=B.lat,v+=B.lng,j++}return Ee([h/j,v/j])}var Ko={__proto__:null,clipPolygon:qo,polygonCenter:pc,centroid:Go};function Dn(l,h){if(!h||!l.length)return l.slice();var v=h*h;return l=A(l,v),l=la(l,v),l}function gc(l,h,v){return Math.sqrt(ct(l,h,v,!0))}function cu(l,h,v){return ct(l,h,v)}function la(l,h){var v=l.length,j=typeof Uint8Array<"u"?Uint8Array:Array,P=new j(v);P[0]=P[v-1]=1,x(l,P,h,0,v-1);var B,ee=[];for(B=0;B<v;B++)P[B]&&ee.push(l[B]);return ee}function x(l,h,v,j,P){var B=0,ee,ae,pe;for(ae=j+1;ae<=P-1;ae++)pe=ct(l[ae],l[j],l[P],!0),pe>B&&(ee=ae,B=pe);B>v&&(h[ee]=1,x(l,h,v,j,ee),x(l,h,v,ee,P))}function A(l,h){for(var v=[l[0]],j=1,P=0,B=l.length;j<B;j++)De(l[j],l[P])>h&&(v.push(l[j]),P=j);return P<B-1&&v.push(l[B-1]),v}var M;function q(l,h,v,j,P){var B=j?M:fe(l,v),ee=fe(h,v),ae,pe,Ne;for(M=ee;;){if(!(B|ee))return[l,h];if(B&ee)return!1;ae=B||ee,pe=re(l,h,ae,v,P),Ne=fe(pe,v),ae===B?(l=pe,B=Ne):(h=pe,ee=Ne)}}function re(l,h,v,j,P){var B=h.x-l.x,ee=h.y-l.y,ae=j.min,pe=j.max,Ne,ze;return v&8?(Ne=l.x+B*(pe.y-l.y)/ee,ze=pe.y):v&4?(Ne=l.x+B*(ae.y-l.y)/ee,ze=ae.y):v&2?(Ne=pe.x,ze=l.y+ee*(pe.x-l.x)/B):v&1&&(Ne=ae.x,ze=l.y+ee*(ae.x-l.x)/B),new Z(Ne,ze,P)}function fe(l,h){var v=0;return l.x<h.min.x?v|=1:l.x>h.max.x&&(v|=2),l.y<h.min.y?v|=4:l.y>h.max.y&&(v|=8),v}function De(l,h){var v=h.x-l.x,j=h.y-l.y;return v*v+j*j}function ct(l,h,v,j){var P=h.x,B=h.y,ee=v.x-P,ae=v.y-B,pe=ee*ee+ae*ae,Ne;return pe>0&&(Ne=((l.x-P)*ee+(l.y-B)*ae)/pe,Ne>1?(P=v.x,B=v.y):Ne>0&&(P+=ee*Ne,B+=ae*Ne)),ee=l.x-P,ae=l.y-B,j?ee*ee+ae*ae:new Z(P,B)}function It(l){return!z(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Ft(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),It(l)}function mn(l,h){var v,j,P,B,ee,ae,pe,Ne;if(!l||l.length===0)throw new Error("latlngs not passed");It(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ze=Ee([0,0]),nt=_e(l),bt=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());bt<1700&&(ze=Go(l));var qn=l.length,On=[];for(v=0;v<qn;v++){var Xs=Ee(l[v]);On.push(h.project(Ee([Xs.lat-ze.lat,Xs.lng-ze.lng])))}for(v=0,j=0;v<qn-1;v++)j+=On[v].distanceTo(On[v+1])/2;if(j===0)Ne=On[0];else for(v=0,B=0;v<qn-1;v++)if(ee=On[v],ae=On[v+1],P=ee.distanceTo(ae),B+=P,B>j){pe=(B-j)/P,Ne=[ae.x-pe*(ae.x-ee.x),ae.y-pe*(ae.y-ee.y)];break}var Ps=h.unproject(ie(Ne));return Ee([Ps.lat+ze.lat,Ps.lng+ze.lng])}var Ys={__proto__:null,simplify:Dn,pointToSegmentDistance:gc,closestPointOnSegment:cu,clipSegment:q,_getEdgeIntersection:re,_getBitCode:fe,_sqClosestPointOnSegment:ct,isFlat:It,_flat:Ft,polylineCenter:mn},Dr={project:function(l){return new Z(l.lng,l.lat)},unproject:function(l){return new je(l.y,l.x)},bounds:new J([-180,-90],[180,90])},yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var h=Math.PI/180,v=this.R,j=l.lat*h,P=this.R_MINOR/v,B=Math.sqrt(1-P*P),ee=B*Math.sin(j),ae=Math.tan(Math.PI/4-j/2)/Math.pow((1-ee)/(1+ee),B/2);return j=-v*Math.log(Math.max(ae,1e-10)),new Z(l.lng*h*v,j)},unproject:function(l){for(var h=180/Math.PI,v=this.R,j=this.R_MINOR/v,P=Math.sqrt(1-j*j),B=Math.exp(-l.y/v),ee=Math.PI/2-2*Math.atan(B),ae=0,pe=.1,Ne;ae<15&&Math.abs(pe)>1e-7;ae++)Ne=P*Math.sin(ee),Ne=Math.pow((1-Ne)/(1+Ne),P/2),pe=Math.PI/2-2*Math.atan(B*Ne)-ee,ee+=pe;return new je(ee*h,l.x*h/v)}},hi={__proto__:null,LonLat:Dr,Mercator:yr,SphericalMercator:tt},Zo=i({},ke,{code:"EPSG:3395",projection:yr,transformation:(function(){var l=.5/(Math.PI*yr.R);return wt(l,.5,-l,.5)})()}),Yo=i({},ke,{code:"EPSG:4326",projection:Dr,transformation:wt(1/180,1,-1/180,.5)}),tx=i({},ve,{projection:Dr,transformation:wt(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,h){var v=h.lng-l.lng,j=h.lat-l.lat;return Math.sqrt(v*v+j*j)},infinite:!0});ve.Earth=ke,ve.EPSG3395=Zo,ve.EPSG3857=Yt,ve.EPSG900913=Ln,ve.EPSG4326=Yo,ve.Simple=tx;var Or=xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[f(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[f(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var h=l.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});jt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var h=f(l);return this._layers[h]?this:(this._layers[h]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var h=f(l);return this._layers[h]?(this._loaded&&l.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return f(l)in this._layers},eachLayer:function(l,h){for(var v in this._layers)l.call(h,this._layers[v]);return this},_addLayers:function(l){l=l?z(l)?l:[l]:[];for(var h=0,v=l.length;h<v;h++)this.addLayer(l[h])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[f(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var h=f(l);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,h=-1/0,v=this._getZoomSpan();for(var j in this._zoomBoundLayers){var P=this._zoomBoundLayers[j].options;l=P.minZoom===void 0?l:Math.min(l,P.minZoom),h=P.maxZoom===void 0?h:Math.max(h,P.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ca=Or.extend({initialize:function(l,h){S(this,h),this._layers={};var v,j;if(l)for(v=0,j=l.length;v<j;v++)this.addLayer(l[v])},addLayer:function(l){var h=this.getLayerId(l);return this._layers[h]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var h=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(l){var h=typeof l=="number"?l:this.getLayerId(l);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var h=Array.prototype.slice.call(arguments,1),v,j;for(v in this._layers)j=this._layers[v],j[l]&&j[l].apply(j,h);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,h){for(var v in this._layers)l.call(h,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return f(l)}}),xc=function(l,h){return new ca(l,h)},Mi=ca.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),ca.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),ca.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new we;for(var h in this._layers){var v=this._layers[h];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),jf=function(l,h){return new Mi(l,h)},so=ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){S(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,h){var v=this._getIconUrl(l);if(!v){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(j,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(l,h){var v=this.options,j=v[h+"Size"];typeof j=="number"&&(j=[j,j]);var P=ie(j),B=ie(h==="shadow"&&v.shadowAnchor||v.iconAnchor||P&&P.divideBy(2,!0));l.className="leaflet-marker-"+h+" "+(v.className||""),B&&(l.style.marginLeft=-B.x+"px",l.style.marginTop=-B.y+"px"),P&&(l.style.width=P.x+"px",l.style.height=P.y+"px")},_createImg:function(l,h){return h=h||document.createElement("img"),h.src=l,h},_getIconUrl:function(l){return Be.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Cf(l){return new so(l)}var Qo=so.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Qo.imagePath!="string"&&(Qo.imagePath=this._detectIconPath()),(this.options.imagePath||Qo.imagePath)+so.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var h=function(v,j,P){var B=j.exec(v);return B&&B[P]};return l=h(l,/^url\((['"])?(.+)\1\)$/,2),l&&h(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=xt("div","leaflet-default-icon-path",document.body),h=sa(l,"background-image")||sa(l,"backgroundImage");if(document.body.removeChild(l),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),zd=ps.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new ks(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ue(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var h=this._marker,v=h._map,j=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,B=Lr(h._icon),ee=v.getPixelBounds(),ae=v.getPixelOrigin(),pe=me(ee.min._subtract(ae).add(P),ee.max._subtract(ae).subtract(P));if(!pe.contains(B)){var Ne=ie((Math.max(pe.max.x,B.x)-pe.max.x)/(ee.max.x-pe.max.x)-(Math.min(pe.min.x,B.x)-pe.min.x)/(ee.min.x-pe.min.x),(Math.max(pe.max.y,B.y)-pe.max.y)/(ee.max.y-pe.max.y)-(Math.min(pe.min.y,B.y)-pe.min.y)/(ee.min.y-pe.min.y)).multiplyBy(j);v.panBy(Ne,{animate:!1}),this._draggable._newPos._add(Ne),this._draggable._startPos._add(Ne),on(h._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=$(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,l)))},_onDrag:function(l){var h=this._marker,v=h._shadow,j=Lr(h._icon),P=h._map.layerPointToLatLng(j);v&&on(v,j),h._latlng=P,l.latlng=P,l.oldLatLng=this._oldLatLng,h.fire("move",l).fire("drag",l)},_onDragEnd:function(l){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Di=Or.extend({options:{icon:new Qo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,h){S(this,h),this._latlng=Ee(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var h=this._latlng;return this._latlng=Ee(l),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),j=!1;v!==this._icon&&(this._icon&&this._removeIcon(),j=!0,l.title&&(v.title=l.title),v.tagName==="IMG"&&(v.alt=l.alt||"")),Ue(v,h),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(v,"focus",this._panOnFocus,this);var P=l.icon.createShadow(this._shadow),B=!1;P!==this._shadow&&(this._removeShadow(),B=!0),P&&(Ue(P,h),P.alt=""),this._shadow=P,l.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&B&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ut(this._icon,"focus",this._panOnFocus,this),Pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pt(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&on(this._icon,l),this._shadow&&on(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zd)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zd(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&ts(this._icon,l),this._shadow&&ts(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var h=this.options.icon.options,v=h.iconSize?ie(h.iconSize):ie(0,0),j=h.iconAnchor?ie(h.iconAnchor):ie(0,0);l.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:v.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nx(l,h){return new Di(l,h)}var ua=Or.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return S(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),uu=ua.extend({options:{fill:!0,radius:10},initialize:function(l,h){S(this,h),this._latlng=Ee(l),this._radius=this.options.radius},setLatLng:function(l){var h=this._latlng;return this._latlng=Ee(l),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var h=l&&l.radius||this._radius;return ua.prototype.setStyle.call(this,l),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,h=this._radiusY||l,v=this._clickTolerance(),j=[l+v,h+v];this._pxBounds=new J(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ef(l,h){return new uu(l,h)}var du=uu.extend({initialize:function(l,h,v){if(typeof h=="number"&&(h=i({},v,{radius:h})),S(this,h),this._latlng=Ee(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new we(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:ua.prototype.setStyle,_project:function(){var l=this._latlng.lng,h=this._latlng.lat,v=this._map,j=v.options.crs;if(j.distance===ke.distance){var P=Math.PI/180,B=this._mRadius/ke.R/P,ee=v.project([h+B,l]),ae=v.project([h-B,l]),pe=ee.add(ae).divideBy(2),Ne=v.unproject(pe).lat,ze=Math.acos((Math.cos(B*P)-Math.sin(h*P)*Math.sin(Ne*P))/(Math.cos(h*P)*Math.cos(Ne*P)))/P;(isNaN(ze)||ze===0)&&(ze=B/Math.cos(Math.PI/180*h)),this._point=pe.subtract(v.getPixelOrigin()),this._radius=isNaN(ze)?0:pe.x-v.project([Ne,l-ze]).x,this._radiusY=pe.y-ee.y}else{var nt=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(nt).x}this._updateBounds()}});function vc(l,h,v){return new du(l,h,v)}var Qs=ua.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,h){S(this,h),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var h=1/0,v=null,j=ct,P,B,ee=0,ae=this._parts.length;ee<ae;ee++)for(var pe=this._parts[ee],Ne=1,ze=pe.length;Ne<ze;Ne++){P=pe[Ne-1],B=pe[Ne];var nt=j(l,P,B,!0);nt<h&&(h=nt,v=j(l,P,B))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,h){return h=h||this._defaultShape(),l=Ee(l),h.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new we,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return It(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var h=[],v=It(l),j=0,P=l.length;j<P;j++)v?(h[j]=Ee(l[j]),this._bounds.extend(h[j])):h[j]=this._convertLatLngs(l[j]);return h},_project:function(){var l=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),h=new Z(l,l);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(l,h,v){var j=l[0]instanceof je,P=l.length,B,ee;if(j){for(ee=[],B=0;B<P;B++)ee[B]=this._map.latLngToLayerPoint(l[B]),v.extend(ee[B]);h.push(ee)}else for(B=0;B<P;B++)this._projectLatlngs(l[B],h,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,j,P,B,ee,ae,pe;for(v=0,P=0,B=this._rings.length;v<B;v++)for(pe=this._rings[v],j=0,ee=pe.length;j<ee-1;j++)ae=q(pe[j],pe[j+1],l,j,!0),ae&&(h[P]=h[P]||[],h[P].push(ae[0]),(ae[1]!==pe[j+1]||j===ee-2)&&(h[P].push(ae[1]),P++))}},_simplifyPoints:function(){for(var l=this._parts,h=this.options.smoothFactor,v=0,j=l.length;v<j;v++)l[v]=Dn(l[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,h){var v,j,P,B,ee,ae,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,B=this._parts.length;v<B;v++)for(ae=this._parts[v],j=0,ee=ae.length,P=ee-1;j<ee;P=j++)if(!(!h&&j===0)&&gc(l,ae[P],ae[j])<=pe)return!0;return!1}});function sx(l,h){return new Qs(l,h)}Qs._flat=Ft;var Oi=Qs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var h=Qs.prototype._convertLatLngs.call(this,l),v=h.length;return v>=2&&h[0]instanceof je&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(l){Qs.prototype._setLatLngs.call(this,l),It(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return It(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,h=this.options.weight,v=new Z(h,h);if(l=new J(l.min.subtract(v),l.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,P=this._rings.length,B;j<P;j++)B=qo(this._rings[j],l,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var h=!1,v,j,P,B,ee,ae,pe,Ne;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(B=0,pe=this._parts.length;B<pe;B++)for(v=this._parts[B],ee=0,Ne=v.length,ae=Ne-1;ee<Ne;ae=ee++)j=v[ee],P=v[ae],j.y>l.y!=P.y>l.y&&l.x<(P.x-j.x)*(l.y-j.y)/(P.y-j.y)+j.x&&(h=!h);return h||Qs.prototype._containsPoint.call(this,l,!0)}});function rx(l,h){return new Oi(l,h)}var fi=Mi.extend({initialize:function(l,h){S(this,h),this._layers={},l&&this.addData(l)},addData:function(l){var h=z(l)?l:l.features,v,j,P;if(h){for(v=0,j=h.length;v<j;v++)P=h[v],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var B=this.options;if(B.filter&&!B.filter(l))return this;var ee=Xo(l,B);return ee?(ee.feature=gu(l),ee.defaultOptions=ee.options,this.resetStyle(ee),B.onEachFeature&&B.onEachFeature(l,ee),this.addLayer(ee)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(h){this._setLayerStyle(h,l)},this)},_setLayerStyle:function(l,h){l.setStyle&&(typeof h=="function"&&(h=h(l.feature)),l.setStyle(h))}});function Xo(l,h){var v=l.type==="Feature"?l.geometry:l,j=v?v.coordinates:null,P=[],B=h&&h.pointToLayer,ee=h&&h.coordsToLatLng||fu,ae,pe,Ne,ze;if(!j&&!v)return null;switch(v.type){case"Point":return ae=ee(j),hu(B,l,ae,h);case"MultiPoint":for(Ne=0,ze=j.length;Ne<ze;Ne++)ae=ee(j[Ne]),P.push(hu(B,l,ae,h));return new Mi(P);case"LineString":case"MultiLineString":return pe=yc(j,v.type==="LineString"?0:1,ee),new Qs(pe,h);case"Polygon":case"MultiPolygon":return pe=yc(j,v.type==="Polygon"?1:2,ee),new Oi(pe,h);case"GeometryCollection":for(Ne=0,ze=v.geometries.length;Ne<ze;Ne++){var nt=Xo({geometry:v.geometries[Ne],type:"Feature",properties:l.properties},h);nt&&P.push(nt)}return new Mi(P);case"FeatureCollection":for(Ne=0,ze=v.features.length;Ne<ze;Ne++){var bt=Xo(v.features[Ne],h);bt&&P.push(bt)}return new Mi(P);default:throw new Error("Invalid GeoJSON object.")}}function hu(l,h,v,j){return l?l(h,v):new Di(v,j&&j.markersInheritOptions&&j)}function fu(l){return new je(l[1],l[0],l[2])}function yc(l,h,v){for(var j=[],P=0,B=l.length,ee;P<B;P++)ee=h?yc(l[P],h-1,v):(v||fu)(l[P]),j.push(ee);return j}function mu(l,h){return l=Ee(l),l.alt!==void 0?[b(l.lng,h),b(l.lat,h),b(l.alt,h)]:[b(l.lng,h),b(l.lat,h)]}function pu(l,h,v,j){for(var P=[],B=0,ee=l.length;B<ee;B++)P.push(h?pu(l[B],It(l[B])?0:h-1,v,j):mu(l[B],j));return!h&&v&&P.length>0&&P.push(P[0].slice()),P}function Jo(l,h){return l.feature?i({},l.feature,{geometry:h}):gu(h)}function gu(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Ud={toGeoJSON:function(l){return Jo(this,{type:"Point",coordinates:mu(this.getLatLng(),l)})}};Di.include(Ud),du.include(Ud),uu.include(Ud),Qs.include({toGeoJSON:function(l){var h=!It(this._latlngs),v=pu(this._latlngs,h?1:0,!1,l);return Jo(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),Oi.include({toGeoJSON:function(l){var h=!It(this._latlngs),v=h&&!It(this._latlngs[0]),j=pu(this._latlngs,v?2:h?1:0,!0,l);return h||(j=[j]),Jo(this,{type:(v?"Multi":"")+"Polygon",coordinates:j})}}),ca.include({toMultiPoint:function(l){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(l).geometry.coordinates)}),Jo(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(l){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(l);var v=h==="GeometryCollection",j=[];return this.eachLayer(function(P){if(P.toGeoJSON){var B=P.toGeoJSON(l);if(v)j.push(B.geometry);else{var ee=gu(B);ee.type==="FeatureCollection"?j.push.apply(j,ee.features):j.push(ee)}}}),v?Jo(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function Sf(l,h){return new fi(l,h)}var Fr=Sf,da=Or.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,h,v){this._url=l,this._bounds=_e(h),S(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&gr(this._image),this},bringToBack:function(){return this._map&&ms(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=_e(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",h=this._image=l?this._url:xt("img");if(Ue(h,"leaflet-image-layer"),this._zoomAnimated&&Ue(h,"leaflet-zoom-animated"),this.options.className&&Ue(h,this.options.className),h.onselectstart=g,h.onmousemove=g,h.onload=u(this.fire,this,"load"),h.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(l){var h=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Ws(this._image,v,h)},_reset:function(){var l=this._image,h=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();on(l,h.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){ts(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),Tf=function(l,h,v){return new da(l,h,v)},$d=da.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",h=this._image=l?this._url:xt("video");if(Ue(h,"leaflet-image-layer"),this._zoomAnimated&&Ue(h,"leaflet-zoom-animated"),this.options.className&&Ue(h,this.options.className),h.onselectstart=g,h.onmousemove=g,h.onloadeddata=u(this.fire,this,"load"),l){for(var v=h.getElementsByTagName("source"),j=[],P=0;P<v.length;P++)j.push(v[P].src);this._url=v.length>0?j:[h.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var ee=xt("source");ee.src=this._url[B],h.appendChild(ee)}}});function Af(l,h,v){return new $d(l,h,v)}var Hd=da.extend({_initImage:function(){var l=this._image=this._url;Ue(l,"leaflet-image-layer"),this._zoomAnimated&&Ue(l,"leaflet-zoom-animated"),this.options.className&&Ue(l,this.options.className),l.onselectstart=g,l.onmousemove=g}});function Wd(l,h,v){return new Hd(l,h,v)}var mi=Or.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,h){l&&(l instanceof je||z(l))?(this._latlng=Ee(l),S(this,h)):(S(this,l),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&ts(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&ts(this._container,1),this.bringToFront(),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(ts(this._container,0),this._removeTimeout=setTimeout(u(Pt,void 0,this._container),200)):Pt(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=Ee(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gr(this._container),this},bringToBack:function(){return this._map&&ms(this._container),this},_prepareOpen:function(l){var h=this._source;if(!h._map)return!1;if(h instanceof Mi){h=null;var v=this._source._layers;for(var j in v)if(v[j]._map){h=v[j];break}if(!h)return!1;this._source=h}if(!l)if(h.getCenter)l=h.getCenter();else if(h.getLatLng)l=h.getLatLng();else if(h.getBounds)l=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")l.innerHTML=h;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),h=ie(this.options.offset),v=this._getAnchor();this._zoomAnimated?on(this._container,l.add(v)):h=h.add(l).add(v);var j=this._containerBottom=-h.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=j+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});jt.include({_initOverlay:function(l,h,v,j){var P=h;return P instanceof l||(P=new l(j).setContent(h)),v&&P.setLatLng(v),P}}),Or.include({_initOverlay:function(l,h,v,j){var P=v;return P instanceof l?(S(P,j),P._source=this):(P=h&&!j?h:new l(j,this),P.setContent(v)),P}});var xu=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,mi.prototype.openOn.call(this,l)},onAdd:function(l){mi.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ua||this._source.on("preclick",kt))},onRemove:function(l){mi.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ua||this._source.off("preclick",kt))},getEvents:function(){var l=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",h=this._container=xt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=xt("div",l+"-content-wrapper",h);if(this._contentNode=xt("div",l+"-content",v),Xa(h),$o(this._contentNode),it(h,"contextmenu",kt),this._tipContainer=xt("div",l+"-tip-container",h),this._tip=xt("div",l+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=xt("a",l+"-close-button",h);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',it(j,"click",function(P){en(P),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,h=l.style;h.width="",h.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var j=l.offsetHeight,P=this.options.maxHeight,B="leaflet-popup-scrolled";P&&j>P?(h.height=P+"px",Ue(l,B)):zt(l,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();on(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,h=parseInt(sa(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,j=this._containerWidth,P=new Z(this._containerLeft,-v-this._containerBottom);P._add(Lr(this._container));var B=l.layerPointToContainerPoint(P),ee=ie(this.options.autoPanPadding),ae=ie(this.options.autoPanPaddingTopLeft||ee),pe=ie(this.options.autoPanPaddingBottomRight||ee),Ne=l.getSize(),ze=0,nt=0;B.x+j+pe.x>Ne.x&&(ze=B.x+j-Ne.x+pe.x),B.x-ze-ae.x<0&&(ze=B.x-ae.x),B.y+v+pe.y>Ne.y&&(nt=B.y+v-Ne.y+pe.y),B.y-nt-ae.y<0&&(nt=B.y-ae.y),(ze||nt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([ze,nt]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),el=function(l,h){return new xu(l,h)};jt.mergeOptions({closePopupOnClick:!0}),jt.include({openPopup:function(l,h,v){return this._initOverlay(xu,l,h,v).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Or.include({bindPopup:function(l,h){return this._popup=this._initOverlay(xu,this._popup,l,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Mi||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){Ts(l);var h=l.layer||l.target;if(this._popup._source===h&&!(h instanceof ua)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=h,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var tl=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){mi.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){mi.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=mi.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",h=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var h,v,j=this._map,P=this._container,B=j.latLngToContainerPoint(j.getCenter()),ee=j.layerPointToContainerPoint(l),ae=this.options.direction,pe=P.offsetWidth,Ne=P.offsetHeight,ze=ie(this.options.offset),nt=this._getAnchor();ae==="top"?(h=pe/2,v=Ne):ae==="bottom"?(h=pe/2,v=0):ae==="center"?(h=pe/2,v=Ne/2):ae==="right"?(h=0,v=Ne/2):ae==="left"?(h=pe,v=Ne/2):ee.x<B.x?(ae="right",h=0,v=Ne/2):(ae="left",h=pe+(ze.x+nt.x)*2,v=Ne/2),l=l.subtract(ie(h,v,!0)).add(ze).add(nt),zt(P,"leaflet-tooltip-right"),zt(P,"leaflet-tooltip-left"),zt(P,"leaflet-tooltip-top"),zt(P,"leaflet-tooltip-bottom"),Ue(P,"leaflet-tooltip-"+ae),on(P,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&ts(this._container,l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(h)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wc=function(l,h){return new tl(l,h)};jt.include({openTooltip:function(l,h,v){return this._initOverlay(tl,l,h,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Or.include({bindTooltip:function(l,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tl,this._tooltip,l,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var h=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Mi||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&(it(h,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),it(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var h=l.latlng,v,j;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),j=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(h)}});var vu=so.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var h=l&&l.tagName==="DIV"?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(fs(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var j=ie(v.bgPos);h.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function kf(l){return new vu(l)}so.Default=Qo;var ha=Or.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){S(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Pt(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ms(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof Z?l:new Z(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var h=this.getPane().children,v=-l(-1/0,1/0),j=0,P=h.length,B;j<P;j++)B=h[j].style.zIndex,h[j]!==this._container&&B&&(v=l(v,+B));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){ts(this._container,this.options.opacity);var l=+new Date,h=!1,v=!1;for(var j in this._tiles){var P=this._tiles[j];if(!(!P.current||!P.loaded)){var B=Math.min(1,(l-P.loaded)/200);ts(P.el,B),B<1?h=!0:(P.active?v=!0:this._onOpaqueTile(P),P.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(K(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=xt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,h=this.options.maxZoom;if(l!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=h-Math.abs(l-v),this._onUpdateLevel(v)):(Pt(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var j=this._levels[l],P=this._map;return j||(j=this._levels[l]={},j.el=xt("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=h,j.origin=P.project(P.unproject(P.getPixelOrigin()),l).round(),j.zoom=l,this._setZoomTransform(j,P.getCenter(),P.getZoom()),g(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var l,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)h=this._tiles[l],h.retain=h.current;for(l in this._tiles)if(h=this._tiles[l],h.current&&!h.active){var j=h.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var h in this._tiles)this._tiles[h].coords.z===l&&this._removeTile(h)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Pt(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,h,v,j){var P=Math.floor(l/2),B=Math.floor(h/2),ee=v-1,ae=new Z(+P,+B);ae.z=+ee;var pe=this._tileCoordsToKey(ae),Ne=this._tiles[pe];return Ne&&Ne.active?(Ne.retain=!0,!0):(Ne&&Ne.loaded&&(Ne.retain=!0),ee>j?this._retainParent(P,B,ee,j):!1)},_retainChildren:function(l,h,v,j){for(var P=2*l;P<2*l+2;P++)for(var B=2*h;B<2*h+2;B++){var ee=new Z(P,B);ee.z=v+1;var ae=this._tileCoordsToKey(ee),pe=this._tiles[ae];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);v+1<j&&this._retainChildren(P,B,v+1,j)}},_resetView:function(l){var h=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var h=this.options;return h.minNativeZoom!==void 0&&l<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<l?h.maxNativeZoom:l},_setView:function(l,h,v,j){var P=Math.round(h);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var B=this.options.updateWhenZooming&&P!==this._tileZoom;(!j||B)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,h)},_setZoomTransforms:function(l,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,h)},_setZoomTransform:function(l,h,v){var j=this._map.getZoomScale(v,l.zoom),P=l.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(h,v)).round();Be.any3d?Ws(l.el,P,j):on(l.el,P)},_resetGrid:function(){var l=this._map,h=l.options.crs,v=this._tileSize=this.getTileSize(),j=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,h.wrapLng[0]],j).x/v.x),Math.ceil(l.project([0,h.wrapLng[1]],j).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([h.wrapLat[0],0],j).y/v.x),Math.ceil(l.project([h.wrapLat[1],0],j).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),j=h.getZoomScale(v,this._tileZoom),P=h.project(l,this._tileZoom).floor(),B=h.getSize().divideBy(j*2);return new J(P.subtract(B),P.add(B))},_update:function(l){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(l===void 0&&(l=h.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(l),P=this._pxBoundsToTileRange(j),B=P.getCenter(),ee=[],ae=this.options.keepBuffer,pe=new J(P.getBottomLeft().subtract([ae,-ae]),P.getTopRight().add([ae,-ae]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ne in this._tiles){var ze=this._tiles[Ne].coords;(ze.z!==this._tileZoom||!pe.contains(new Z(ze.x,ze.y)))&&(this._tiles[Ne].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(l,v);return}for(var nt=P.min.y;nt<=P.max.y;nt++)for(var bt=P.min.x;bt<=P.max.x;bt++){var qn=new Z(bt,nt);if(qn.z=this._tileZoom,!!this._isValidTile(qn)){var On=this._tiles[this._tileCoordsToKey(qn)];On?On.current=!0:ee.push(qn)}}if(ee.sort(function(Ps,al){return Ps.distanceTo(B)-al.distanceTo(B)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xs=document.createDocumentFragment();for(bt=0;bt<ee.length;bt++)this._addTile(ee[bt],Xs);this._level.el.appendChild(Xs)}}}},_isValidTile:function(l){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!h.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(l);return _e(this.options.bounds).overlaps(j)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var h=this._map,v=this.getTileSize(),j=l.scaleBy(v),P=j.add(v),B=h.unproject(j,l.z),ee=h.unproject(P,l.z);return[B,ee]},_tileCoordsToBounds:function(l){var h=this._tileCoordsToNwSe(l),v=new we(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var h=l.split(":"),v=new Z(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(l){var h=this._tiles[l];h&&(Pt(h.el),delete this._tiles[l],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Ue(l,"leaflet-tile");var h=this.getTileSize();l.style.width=h.x+"px",l.style.height=h.y+"px",l.onselectstart=g,l.onmousemove=g,Be.ielt9&&this.options.opacity<1&&ts(l,this.options.opacity)},_addTile:function(l,h){var v=this._getTilePos(l),j=this._tileCoordsToKey(l),P=this.createTile(this._wrapCoords(l),u(this._tileReady,this,l));this._initTile(P),this.createTile.length<2&&$(u(this._tileReady,this,l,null,P)),on(P,v),this._tiles[j]={el:P,coords:l,current:!0},h.appendChild(P),this.fire("tileloadstart",{tile:P,coords:l})},_tileReady:function(l,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:l});var j=this._tileCoordsToKey(l);v=this._tiles[j],v&&(v.loaded=+new Date,this._map._fadeAnimated?(ts(v.el,0),K(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(Ue(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var h=new Z(this._wrapX?y(l.x,this._wrapX):l.x,this._wrapY?y(l.y,this._wrapY):l.y);return h.z=l.z,h},_pxBoundsToTileRange:function(l){var h=this.getTileSize();return new J(l.min.unscaleBy(h).floor(),l.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function nl(l){return new ha(l)}var fa=ha.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,h){this._url=l,h=S(this,h),h.detectRetina&&Be.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,h){return this._url===l&&h===void 0&&(h=!0),this._url=l,h||this.redraw(),this},createTile:function(l,h){var v=document.createElement("img");return it(v,"load",u(this._tileOnLoad,this,h,v)),it(v,"error",u(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(l),v},getTileUrl:function(l){var h={r:Be.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(h.y=v),h["-y"]=v}return I(this._url,i(h,this.options))},_tileOnLoad:function(l,h){Be.ielt9?setTimeout(u(l,this,null,h),0):l(null,h)},_tileOnError:function(l,h,v){var j=this.options.errorTileUrl;j&&h.getAttribute("src")!==j&&(h.src=j),l(v,h)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,j=this.options.zoomOffset;return v&&(l=h-l),l+j},_getSubdomain:function(l){var h=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var l,h;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(h=this._tiles[l].el,h.onload=g,h.onerror=g,!h.complete)){h.src=G;var v=this._tiles[l].coords;Pt(h),delete this._tiles[l],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(l){var h=this._tiles[l];if(h)return h.el.setAttribute("src",G),ha.prototype._removeTile.call(this,l)},_tileReady:function(l,h,v){if(!(!this._map||v&&v.getAttribute("src")===G))return ha.prototype._tileReady.call(this,l,h,v)}});function qd(l,h){return new fa(l,h)}var _c=fa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,h){this._url=l;var v=i({},this.defaultWmsParams);for(var j in h)j in this.options||(v[j]=h[j]);h=S(this,h);var P=h.detectRetina&&Be.retina?2:1,B=this.getTileSize();v.width=B.x*P,v.height=B.y*P,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,fa.prototype.onAdd.call(this,l)},getTileUrl:function(l){var h=this._tileCoordsToNwSe(l),v=this._crs,j=me(v.project(h[0]),v.project(h[1])),P=j.min,B=j.max,ee=(this._wmsVersion>=1.3&&this._crs===Yo?[P.y,P.x,B.y,B.x]:[P.x,P.y,B.x,B.y]).join(","),ae=fa.prototype.getTileUrl.call(this,l);return ae+k(this.wmsParams,ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(l,h){return i(this.wmsParams,l),h||this.redraw(),this}});function Pf(l,h){return new _c(l,h)}fa.WMS=_c,qd.wms=Pf;var pi=Or.extend({options:{padding:.1},initialize:function(l){S(this,l),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,h){var v=this._map.getZoomScale(h,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,h),B=j.multiplyBy(-v).add(P).subtract(this._map._getNewPixelOrigin(l,h));Be.any3d?Ws(this._container,B,v):on(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-l)).round();this._bounds=new J(v,v.add(h.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gd=pi.extend({options:{tolerance:0},getEvents:function(){var l=pi.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");it(l,"mousemove",this._onMouseMove,this),it(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,Pt(this._container),Ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var h in this._layers)l=this._layers[h],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var l=this._bounds,h=this._container,v=l.getSize(),j=Be.retina?2:1;on(h,l.min),h.width=j*v.x,h.height=j*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[f(l)]=l;var h=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var h=l._order,v=h.next,j=h.prev;v?v.prev=j:this._drawLast=j,j?j.next=v:this._drawFirst=v,delete l._order,delete this._layers[f(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var h=l.options.dashArray.split(/[, ]+/),v=[],j,P;for(P=0;P<h.length;P++){if(j=Number(h[P]),isNaN(j))return;v.push(j)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var h=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(l._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(l._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var h=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)l=j.layer,(!h||l._pxBounds&&l._pxBounds.intersects(h))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,h){if(this._drawing){var v,j,P,B,ee=l._parts,ae=ee.length,pe=this._ctx;if(ae){for(pe.beginPath(),v=0;v<ae;v++){for(j=0,P=ee[v].length;j<P;j++)B=ee[v][j],pe[j?"lineTo":"moveTo"](B.x,B.y);h&&pe.closePath()}this._fillStroke(pe,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var h=l._point,v=this._ctx,j=Math.max(Math.round(l._radius),1),P=(Math.max(Math.round(l._radiusY),1)||j)/j;P!==1&&(v.save(),v.scale(1,P)),v.beginPath(),v.arc(h.x,h.y/P,j,0,Math.PI*2,!1),P!==1&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,h){var v=h.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(l.setLineDash&&l.setLineDash(h.options&&h.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var h=this._map.mouseEventToLayerPoint(l),v,j,P=this._drawFirst;P;P=P.next)v=P.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(j=v);this._fireEvent(j?[j]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,h)}},_handleMouseOut:function(l){var h=this._hoveredLayer;h&&(zt(this._container,"leaflet-interactive"),this._fireEvent([h],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,h){if(!this._mouseHoverThrottled){for(var v,j,P=this._drawFirst;P;P=P.next)v=P.layer,v.options.interactive&&v._containsPoint(h)&&(j=v);j!==this._hoveredLayer&&(this._handleMouseOut(l),j&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([j],l,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,h,v){this._map._fireDOMEvent(h,v||h.type,l)},_bringToFront:function(l){var h=l._order;if(h){var v=h.next,j=h.prev;if(v)v.prev=j;else return;j?j.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(l)}},_bringToBack:function(l){var h=l._order;if(h){var v=h.next,j=h.prev;if(j)j.next=v;else return;v?v.prev=j:j&&(this._drawLast=j),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(l)}}});function Kd(l){return Be.canvas?new Gd(l):null}var sl=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),If={_initContainer:function(){this._container=xt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var h=l._container=sl("shape");Ue(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",l._path=sl("path"),h.appendChild(l._path),this._updateStyle(l),this._layers[f(l)]=l},_addPath:function(l){var h=l._container;this._container.appendChild(h),l.options.interactive&&l.addInteractiveTarget(h)},_removePath:function(l){var h=l._container;Pt(h),l.removeInteractiveTarget(h),delete this._layers[f(l)]},_updateStyle:function(l){var h=l._stroke,v=l._fill,j=l.options,P=l._container;P.stroked=!!j.stroke,P.filled=!!j.fill,j.stroke?(h||(h=l._stroke=sl("stroke")),P.appendChild(h),h.weight=j.weight+"px",h.color=j.color,h.opacity=j.opacity,j.dashArray?h.dashStyle=z(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=j.lineCap.replace("butt","flat"),h.joinstyle=j.lineJoin):h&&(P.removeChild(h),l._stroke=null),j.fill?(v||(v=l._fill=sl("fill")),P.appendChild(v),v.color=j.fillColor||j.color,v.opacity=j.fillOpacity):v&&(P.removeChild(v),l._fill=null)},_updateCircle:function(l){var h=l._point.round(),v=Math.round(l._radius),j=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+j+" 0,"+65535*360)},_setPath:function(l,h){l._path.v=h},_bringToFront:function(l){gr(l._container)},_bringToBack:function(l){ms(l._container)}},Vr=Be.vml?sl:kr,ro=pi.extend({_initContainer:function(){this._container=Vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pt(this._container),Ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var l=this._bounds,h=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),on(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(l){var h=l._path=Vr("path");l.options.className&&Ue(h,l.options.className),l.options.interactive&&Ue(h,"leaflet-interactive"),this._updateStyle(l),this._layers[f(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Pt(l._path),l.removeInteractiveTarget(l._path),delete this._layers[f(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var h=l._path,v=l.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(l,h){this._setPath(l,js(l._parts,h))},_updateCircle:function(l){var h=l._point,v=Math.max(Math.round(l._radius),1),j=Math.max(Math.round(l._radiusY),1)||v,P="a"+v+","+j+" 0 1,0 ",B=l._empty()?"M0 0":"M"+(h.x-v)+","+h.y+P+v*2+",0 "+P+-v*2+",0 ";this._setPath(l,B)},_setPath:function(l,h){l._path.setAttribute("d",h)},_bringToFront:function(l){gr(l._path)},_bringToBack:function(l){ms(l._path)}});Be.vml&&ro.include(If);function yu(l){return Be.svg||Be.vml?new ro(l):null}jt.include({getRenderer:function(l){var h=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var h=this._paneRenderers[l];return h===void 0&&(h=this._createRenderer({pane:l}),this._paneRenderers[l]=h),h},_createRenderer:function(l){return this.options.preferCanvas&&Kd(l)||yu(l)}});var Rf=Oi.extend({initialize:function(l,h){Oi.prototype.initialize.call(this,this._boundsToLatLngs(l),h)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=_e(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function ix(l,h){return new Rf(l,h)}ro.create=Vr,ro.pointsToPath=js,fi.geometryToLayer=Xo,fi.coordsToLatLng=fu,fi.coordsToLatLngs=yc,fi.latLngToCoords=mu,fi.latLngsToCoords=pu,fi.getFeature=Jo,fi.asFeature=gu,jt.mergeOptions({boxZoom:!0});var rl=ps.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nt(),Za(),this._startPoint=this._map.mouseEventToContainerPoint(l),it(document,{contextmenu:Ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=xt("div","leaflet-zoom-box",this._container),Ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var h=new J(this._point,this._startPoint),v=h.getSize();on(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(Pt(this._box),zt(this._container,"leaflet-crosshair")),Ss(),Ya(),Ut(document,{contextmenu:Ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var h=new we(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});jt.addInitHook("addHandler","boxZoom",rl),jt.mergeOptions({doubleClickZoom:!0});var Lf=ps.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var h=this._map,v=h.getZoom(),j=h.options.zoomDelta,P=l.originalEvent.shiftKey?v-j:v+j;h.options.doubleClickZoom==="center"?h.setZoom(P):h.setZoomAround(l.containerPoint,P)}});jt.addInitHook("addHandler","doubleClickZoom",Lf),jt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zd=ps.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new ks(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=_e(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,h){return l-(l-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;l.x<h.min.x&&(l.x=this._viscousLimit(l.x,h.min.x)),l.y<h.min.y&&(l.y=this._viscousLimit(l.y,h.min.y)),l.x>h.max.x&&(l.x=this._viscousLimit(l.x,h.max.x)),l.y>h.max.y&&(l.y=this._viscousLimit(l.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,h=Math.round(l/2),v=this._initialWorldOffset,j=this._draggable._newPos.x,P=(j-h+v)%l+h-v,B=(j+h+v)%l-h-v,ee=Math.abs(P+v)<Math.abs(B+v)?P:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(l){var h=this._map,v=h.options,j=!v.inertia||l.noInertia||this._times.length<2;if(h.fire("dragend",l),j)h.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,ee=v.easeLinearity,ae=P.multiplyBy(ee/B),pe=ae.distanceTo([0,0]),Ne=Math.min(v.inertiaMaxSpeed,pe),ze=ae.multiplyBy(Ne/pe),nt=Ne/(v.inertiaDeceleration*ee),bt=ze.multiplyBy(-nt/2).round();!bt.x&&!bt.y?h.fire("moveend"):(bt=h._limitOffset(bt,h.options.maxBounds),$(function(){h.panBy(bt,{duration:nt,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});jt.addInitHook("addHandler","dragging",Zd),jt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yd=ps.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),it(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,h=document.documentElement,v=l.scrollTop||h.scrollTop,j=l.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(j,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var h=this._panKeys={},v=this.keyCodes,j,P;for(j=0,P=v.left.length;j<P;j++)h[v.left[j]]=[-1*l,0];for(j=0,P=v.right.length;j<P;j++)h[v.right[j]]=[l,0];for(j=0,P=v.down.length;j<P;j++)h[v.down[j]]=[0,l];for(j=0,P=v.up.length;j<P;j++)h[v.up[j]]=[0,-1*l]},_setZoomDelta:function(l){var h=this._zoomKeys={},v=this.keyCodes,j,P;for(j=0,P=v.zoomIn.length;j<P;j++)h[v.zoomIn[j]]=l;for(j=0,P=v.zoomOut.length;j<P;j++)h[v.zoomOut[j]]=-l},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var h=l.keyCode,v=this._map,j;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(j=this._panKeys[h],l.shiftKey&&(j=ie(j).multiplyBy(3)),v.options.maxBounds&&(j=v._limitOffset(ie(j),v.options.maxBounds)),v.options.worldCopyJump){var P=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(j)));v.panTo(P)}else v.panBy(j)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;Ts(l)}}});jt.addInitHook("addHandler","keyboard",Yd),jt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gt=ps.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var h=hc(l),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var j=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),j),Ts(l)},_performZoom:function(){var l=this._map,h=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,B=v?Math.ceil(P/v)*v:P,ee=l._limitZoom(h+(this._delta>0?B:-B))-h;this._delta=0,this._startTime=null,ee&&(l.options.scrollWheelZoom==="center"?l.setZoom(h+ee):l.setZoomAround(this._lastMousePos,h+ee))}});jt.addInitHook("addHandler","scrollWheelZoom",Gt);var Qd=600;jt.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var bc=ps.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var h=l.touches[0];this._startPos=this._newPos=new Z(h.clientX,h.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",en),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Qd),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Ut(document,"touchend",en),Ut(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Ut(document,"touchend touchcancel contextmenu",this._cancel,this),Ut(document,"touchmove",this._onMove,this)},_onMove:function(l){var h=l.touches[0];this._newPos=new Z(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,h){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});jt.addInitHook("addHandler","tapHold",bc),jt.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var il=ps.extend({addHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),Ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var h=this._map;if(!(!l.touches||l.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(l.touches[0]),j=h.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(j)._divideBy(2))),this._startDist=v.distanceTo(j),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),en(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(l.touches[0]),j=h.mouseEventToContainerPoint(l.touches[1]),P=v.distanceTo(j)/this._startDist;if(this._zoom=h.getScaleZoom(P,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&P<1||this._zoom>h.getMaxZoom()&&P>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var B=v._add(j)._divideBy(2)._subtract(this._centerPoint);if(P===1&&B.x===0&&B.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var ee=u(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(ee,this,!0),en(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),Ut(document,"touchmove",this._onTouchMove,this),Ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});jt.addInitHook("addHandler","touchZoom",il),jt.BoxZoom=rl,jt.DoubleClickZoom=Lf,jt.Drag=Zd,jt.Keyboard=Yd,jt.ScrollWheelZoom=Gt,jt.TapHold=bc,jt.TouchZoom=il,n.Bounds=J,n.Browser=Be,n.CRS=ve,n.Canvas=Gd,n.Circle=du,n.CircleMarker=uu,n.Class=ce,n.Control=ns,n.DivIcon=vu,n.DivOverlay=mi,n.DomEvent=ci,n.DomUtil=Qa,n.Draggable=ks,n.Evented=xe,n.FeatureGroup=Mi,n.GeoJSON=fi,n.GridLayer=ha,n.Handler=ps,n.Icon=so,n.ImageOverlay=da,n.LatLng=je,n.LatLngBounds=we,n.Layer=Or,n.LayerGroup=ca,n.LineUtil=Ys,n.Map=jt,n.Marker=Di,n.Mixin=Wo,n.Path=ua,n.Point=Z,n.PolyUtil=Ko,n.Polygon=Oi,n.Polyline=Qs,n.Popup=xu,n.PosAnimation=eo,n.Projection=hi,n.Rectangle=Rf,n.Renderer=pi,n.SVG=ro,n.SVGOverlay=Hd,n.TileLayer=fa,n.Tooltip=tl,n.Transformation=yt,n.Util=W,n.VideoOverlay=$d,n.bind=u,n.bounds=me,n.canvas=Kd,n.circle=vc,n.circleMarker=Ef,n.control=Zs,n.divIcon=kf,n.extend=i,n.featureGroup=jf,n.geoJSON=Sf,n.geoJson=Fr,n.gridLayer=nl,n.icon=Cf,n.imageOverlay=Tf,n.latLng=Ee,n.latLngBounds=_e,n.layerGroup=xc,n.map=Ks,n.marker=nx,n.point=ie,n.polygon=rx,n.polyline=sx,n.popup=el,n.rectangle=ix,n.setOptions=S,n.stamp=f,n.svg=yu,n.svgOverlay=Wd,n.tileLayer=qd,n.tooltip=wc,n.transformation=wt,n.version=r,n.videoOverlay=Af;var Mf=window.L;n.noConflict=function(){return window.L=Mf,this},window.L=n}))})(jh,jh.exports)),jh.exports}var _f=wW();const yk=Ky(_f);function t_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function n_(t,e){return e==null?function(r,i){const o=_.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=_.useRef();o.current||(o.current=t(r,i));const u=_.useRef(r),{instance:d}=o.current;return _.useEffect(function(){u.current!==r&&(e(d,r,u.current),u.current=r)},[d,r,i]),o}}function _W(t,e){_.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function wk(t){return function(n){const r=Jw(),i=t(e_(n,r),r);return pk(r.map,n.attribution),vk(i.current,n.eventHandlers),_W(i.current,r),i}}function bW(t,e){const n=n_(t,e),r=wk(n);return pW(r)}function NW(t,e){const n=n_(t),r=vW(n,e);return gW(r)}function jW(t,e){const n=n_(t,e),r=wk(n);return xW(r)}function CW(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function EW(){return Jw().map}function qy(){return qy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qy.apply(this,arguments)}function SW({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:u,style:d,whenReady:f,zoom:p,...y},g){const[b]=_.useState({className:i,id:o,style:d}),[E,N]=_.useState(null);_.useImperativeHandle(g,()=>E?.map??null,[E]);const S=_.useCallback(R=>{if(R!==null&&E===null){const I=new _f.Map(R,y);n!=null&&p!=null?I.setView(n,p):t!=null&&I.fitBounds(t,e),f!=null&&I.whenReady(f),N(fW(I))}},[]);_.useEffect(()=>()=>{E?.map.remove()},[E]);const k=E?Re.createElement(xk,{value:E},r):u??null;return Re.createElement("div",qy({},b,{ref:S}),k)}const TW=_.forwardRef(SW),AW=bW(function({position:e,...n},r){const i=new _f.Marker(e,n);return t_(i,mW(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),kW=NW(function(e,n){const r=new _f.Popup(e,n.overlayContainer);return t_(r,n)},function(e,n,{position:r},i){_.useEffect(function(){const{instance:u}=e;function d(p){p.popup===u&&(u.update(),i(!0))}function f(p){p.popup===u&&i(!1)}return n.map.on({popupopen:d,popupclose:f}),n.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){n.map.off({popupopen:d,popupclose:f}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(u)}},[e,n,i,r])}),PW=jW(function({url:e,...n},r){const i=new _f.TileLayer(e,e_(n,r));return t_(i,r)},function(e,n,r){CW(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),IW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",RW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let LW=yk.icon({iconUrl:IW,shadowUrl:RW,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});yk.Marker.prototype.options.icon=LW;function MW({center:t}){const e=EW();return _.useEffect(()=>{e.setView(t,13)},[t,e]),null}function _k({initialData:t,onNext:e,onBack:n}){const[r,i]=_.useState(t),[o,u]=_.useState({}),[d,f]=_.useState(!1),p=[37.7749,-122.4194],y=r.coordinates?[r.coordinates.lat,r.coordinates.lng]:p,g=()=>{const N={};return r.address.trim()||(N.address="Address is required"),r.city.trim()||(N.city="City is required"),r.state.trim()||(N.state="State is required"),r.zipCode.trim()?/^\d{5}(-\d{4})?$/.test(r.zipCode)||(N.zipCode="Please enter a valid ZIP code"):N.zipCode="ZIP code is required",u(N),Object.keys(N).length===0},b=()=>{f(!0),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async N=>{const{latitude:S,longitude:k}=N.coords;try{const z=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${S}&lon=${k}`)).json()).address||{},H=[z.house_number,z.road].filter(Boolean).join(" "),G=z.city||z.town||z.village||z.hamlet||"";i({...r,address:H||"Detected Location",city:G,state:z.state||"",zipCode:z.postcode||"",coordinates:{lat:S,lng:k}}),u({})}catch(R){console.error("Reverse geocoding failed",R),i(I=>({...I,coordinates:{lat:S,lng:k}})),alert("Location found, but could not retrieve address details automatically.")}finally{f(!1)}},N=>{console.error("Error getting location:",N.message);let S="Unable to get your location.";N.code===N.PERMISSION_DENIED&&(S="Location permission denied. Please enable it in your browser settings."),alert(S),f(!1)},{enableHighAccuracy:!0}):(alert("Geolocation is not supported by your browser."),f(!1))},E=N=>{N.preventDefault(),g()&&e(r)};return s.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(Qn,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Location & Delivery Options"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Help buyers find your book by sharing your location"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ae,{children:"Delivery Method *"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>i({...r,method:"pickup"}),className:`p-4 border-2 rounded-lg transition-all ${r.method==="pickup"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(ji,{className:`w-6 h-6 mx-auto mb-2 ${r.method==="pickup"?"text-[#C4A672]":"text-gray-400"}`}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm",children:"Local Pickup"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Meet in person"})]})]}),s.jsxs("button",{type:"button",onClick:()=>i({...r,method:"shipping"}),className:`p-4 border-2 rounded-lg transition-all ${r.method==="shipping"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(pd,{className:`w-6 h-6 mx-auto mb-2 ${r.method==="shipping"?"text-[#C4A672]":"text-gray-400"}`}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm",children:"Shipping Only"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ship to buyer"})]})]}),s.jsxs("button",{type:"button",onClick:()=>i({...r,method:"both"}),className:`p-4 border-2 rounded-lg transition-all ${r.method==="both"?"border-[#C4A672] bg-[#C4A672]/5":"border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex justify-center gap-1 mb-2",children:[s.jsx(ji,{className:`w-5 h-5 ${r.method==="both"?"text-[#C4A672]":"text-gray-400"}`}),s.jsx(pd,{className:`w-5 h-5 ${r.method==="both"?"text-[#C4A672]":"text-gray-400"}`})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm",children:"Both Options"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Most flexible"})]})]})]})]}),s.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ae,{children:"Your Location *"}),s.jsxs(X,{type:"button",variant:"outline",size:"sm",onClick:b,disabled:d,children:[s.jsx(HV,{className:"w-4 h-4 mr-2"}),d?"Locating...":"Use Current Location"]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"address",children:"Street Address *"}),s.jsx(Ie,{id:"address",value:r.address,onChange:N=>i({...r,address:N.target.value}),className:o.address?"border-red-500 bg-white":"bg-white",placeholder:"Enter street address"}),o.address&&s.jsx("p",{className:"text-sm text-red-500",children:o.address})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"city",children:"City *"}),s.jsx(Ie,{id:"city",value:r.city,onChange:N=>i({...r,city:N.target.value}),className:o.city?"border-red-500 bg-white":"bg-white"}),o.city&&s.jsx("p",{className:"text-sm text-red-500",children:o.city})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"state",children:"State *"}),s.jsx(Ie,{id:"state",value:r.state,onChange:N=>i({...r,state:N.target.value}),className:o.state?"border-red-500 bg-white":"bg-white"}),o.state&&s.jsx("p",{className:"text-sm text-red-500",children:o.state})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"zipCode",children:"ZIP Code *"}),s.jsx(Ie,{id:"zipCode",value:r.zipCode,onChange:N=>i({...r,zipCode:N.target.value}),className:o.zipCode?"border-red-500 bg-white":"bg-white"}),o.zipCode&&s.jsx("p",{className:"text-sm text-red-500",children:o.zipCode})]})]})]}),s.jsx("div",{className:"h-64 rounded-lg overflow-hidden border border-gray-300 z-0 relative",children:s.jsxs(TW,{center:y,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(PW,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(MW,{center:y}),r.coordinates&&s.jsx(AW,{position:[r.coordinates.lat,r.coordinates.lng],children:s.jsx(kW,{children:r.address||"Your Location"})})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:"Privacy Note:"})," Your exact address will only be shared with buyers after purchase."]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[s.jsx(X,{type:"button",variant:"outline",onClick:n,className:"px-6",children:"Back"}),s.jsx(X,{type:"submit",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:"Next: Review"})]})]})}function bk({bookData:t,locationData:e,onSubmit:n,onBack:r,onEdit:i,isSubmitting:o}){const u=f=>{switch(f){case"New":case"Like New":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Fair":return"bg-yellow-100 text-yellow-800";case"Poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=f=>{switch(f){case"pickup":return"Local Pickup Only";case"shipping":return"Shipping Only";case"both":return"Both Pickup & Shipping";default:return f}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(Ni,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Review Your Listing"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Please review all details before submitting"})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("h4",{className:"text-[#2C3E50]",children:"Book Details"})]}),s.jsxs(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(1),disabled:o,className:"text-[#C4A672] hover:text-[#8B7355]",children:[s.jsx(Sy,{className:"w-4 h-4 mr-1"}),"Edit"]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"ISBN"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.isbn})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Condition"}),s.jsx(Qe,{className:u(t.condition),children:t.condition})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Book Title"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.bookName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Author"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.author})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Category"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.category})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),s.jsxs("p",{className:"text-2xl text-[#C4A672]",children:["$",parseFloat(t.price).toFixed(2)]})]})]}),t.publishedYear&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Published Year"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.publishedYear})]}),t.pages&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Pages"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.pages})]})]}),t.language&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Language"}),s.jsx("p",{className:"text-[#2C3E50]",children:t.language})]}),t.description&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),s.jsx("p",{className:"text-[#2C3E50] text-sm",children:t.description})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-[#C4A672]"}),s.jsx("h4",{className:"text-[#2C3E50]",children:"Location & Delivery"})]}),s.jsxs(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(2),disabled:o,className:"text-[#C4A672] hover:text-[#8B7355]",children:[s.jsx(Sy,{className:"w-4 h-4 mr-1"}),"Edit"]})]}),s.jsx(qr,{}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery Method"}),s.jsx("p",{className:"text-[#2C3E50]",children:d(e.method)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),s.jsxs("p",{className:"text-[#2C3E50]",children:[e.address,s.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672]/10 to-[#8B7355]/10 rounded-lg p-6 border-2 border-[#C4A672]/20",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Listing Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Book:"}),s.jsx("span",{className:"text-[#2C3E50]",children:t.bookName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Price:"}),s.jsxs("span",{className:"text-[#2C3E50]",children:["$",parseFloat(t.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Condition:"}),s.jsx("span",{className:"text-[#2C3E50]",children:t.condition})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery:"}),s.jsx("span",{className:"text-[#2C3E50]",children:d(e.method)})]})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-yellow-900",children:[s.jsx("strong",{children:"Important:"})," By submitting this listing, you agree to our Terms of Service and confirm that all information provided is accurate. You will be responsible for fulfilling any orders placed for this book."]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[s.jsx(X,{type:"button",variant:"outline",onClick:r,className:"px-6",disabled:o,children:"Back"}),s.jsx(X,{type:"button",onClick:n,disabled:o,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8 min-w-[150px]",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Cy,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Listing"})]})]})}function Nk({onClose:t,onAddAnother:e}){return s.jsxs("div",{className:"p-12 text-center space-y-6",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 mx-auto flex items-center justify-center",children:s.jsx(Ni,{className:"w-12 h-12 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-3xl mb-3",children:"Listing Created Successfully!"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Your book is now available in the marketplace"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672]/10 to-[#8B7355]/10 rounded-lg p-6 max-w-md mx-auto",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"What happens next?"}),s.jsxs("ul",{className:"text-left space-y-2 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Ni,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"Your listing is now visible to buyers"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Ni,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"You'll receive notifications when someone is interested"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Ni,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"You can manage your listings from your dashboard"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-6",children:[s.jsxs(X,{onClick:e,variant:"outline",className:"px-6 border-[#C4A672] text-[#C4A672] hover:bg-[#C4A672] hover:text-white",children:[s.jsx(Ro,{className:"w-5 h-5 mr-2"}),"List Another Book"]}),s.jsxs(X,{onClick:t,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:[s.jsx(fd,{className:"w-5 h-5 mr-2"}),"Back to Marketplace"]})]})]})}function DW({onClose:t}){const[e,n]=_.useState(1),[r,i]=_.useState(!1),[o,u]=_.useState({isbn:"",bookName:"",author:"",price:"",condition:"Good",category:"Fiction",description:"",publishedYear:"",language:"English",pages:"",images:[]}),[d,f]=_.useState({method:"both",address:"",city:"",state:"",zipCode:""}),p=N=>{u(N),n(2)},y=N=>{f(N),n(3)},g=()=>{n(e-1)},b=async()=>{const N=gt.currentUser;if(!N){ue.error("Please login to submit listing");return}i(!0);try{const S=Object.fromEntries(Object.entries(d).filter(([G,Q])=>Q!==void 0));d.coordinates&&(S.coordinates={lat:Number(d.coordinates.lat),lng:Number(d.coordinates.lng)});const k=parseFloat(o.price);if(isNaN(k)||k<=0)throw new Error("Invalid price. Please enter a valid number greater than 0.");const R=parseInt(o.pages),I=parseInt(o.publishedYear),z=[];if(o.imageFiles&&o.imageFiles.length>0){console.error("Cloudinary credentials missing"),ue.error("Configuration error: Cloudinary credentials missing");return}const H={...o,price:k,pages:isNaN(R)?0:R,publishedYear:isNaN(I)?0:I,location:S,userId:N.uid,seller:{name:N.displayName||"Anonymous",rating:0,totalSales:0,avatar:N.photoURL||""},images:z.length>0?z:o.images,type:"sell",status:"active",createdAt:xn(),updatedAt:xn()};delete H.imageFiles,await Ns(lt(Te,"books"),H),ue.success("Listing created successfully!"),n(4)}catch(S){console.error("Failed to submit listing:",S),ue.error(S.message||"Failed to create listing. Please try again.")}finally{i(!1)}},E=N=>{n(N)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl",children:"Sell Your Book"}),s.jsxs("p",{className:"text-white/90 text-sm mt-1",children:[e===1&&"Step 1 of 3: Book Details",e===2&&"Step 2 of 3: Location & Delivery",e===3&&"Step 3 of 3: Review & Confirm",e===4&&"Listing Created!"]})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),e<4&&s.jsx("div",{className:"px-6 py-4 bg-gray-50",children:s.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(N=>s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:`h-2 rounded-full transition-colors ${N<=e?"bg-[#C4A672]":"bg-gray-200"}`})},N))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e===1&&s.jsx(mk,{initialData:o,onNext:p,onCancel:t}),e===2&&s.jsx(_k,{initialData:d,onNext:y,onBack:g}),e===3&&s.jsx(bk,{bookData:o,locationData:d,onSubmit:b,onBack:g,onEdit:E,isSubmitting:r}),e===4&&s.jsx(Nk,{onClose:t,onAddAnother:()=>{n(1),u({isbn:"",bookName:"",author:"",price:"",condition:"Good",category:"Fiction",description:"",publishedYear:"",language:"English",pages:"",images:[]}),f({method:"both",address:"",city:"",state:"",zipCode:""})}})]})]})})}function OW({onClose:t}){const[e,n]=_.useState(1),[r,i]=_.useState(!1),[o,u]=_.useState({isbn:"",bookName:"",author:"",price:"0",condition:"Good",category:"Fiction",description:"",publishedYear:"",language:"English",pages:"",images:[],exchangePreferences:""}),[d,f]=_.useState({method:"both",address:"",city:"",state:"",zipCode:""}),p=N=>{u(N),n(2)},y=N=>{f(N),n(3)},g=()=>{n(e-1)},b=async()=>{const N=gt.currentUser;if(!N){ue.error("Please login to submit listing");return}i(!0);try{const S=Object.fromEntries(Object.entries(d).filter(([H,G])=>G!==void 0));d.coordinates&&(S.coordinates={lat:Number(d.coordinates.lat),lng:Number(d.coordinates.lng)});const k=parseInt(o.pages),R=parseInt(o.publishedYear),I=[];if(o.imageFiles&&o.imageFiles.length>0){console.error("Cloudinary credentials missing"),ue.error("Configuration error: Cloudinary credentials missing");return}const z={...o,price:0,pages:isNaN(k)?0:k,publishedYear:isNaN(R)?0:R,location:S,userId:N.uid,seller:{name:N.displayName||"Anonymous",rating:0,totalSales:0,avatar:N.photoURL||""},images:I.length>0?I:o.images,type:"exchange",status:"active",createdAt:xn(),updatedAt:xn()};delete z.imageFiles,await Ns(lt(Te,"books"),z),ue.success("Exchange listing created successfully!"),n(4)}catch(S){console.error("Failed to submit listing:",S),ue.error(S.message||"Failed to create listing. Please try again.")}finally{i(!1)}},E=N=>{n(N)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl",children:"Exchange Your Book"}),s.jsxs("p",{className:"text-white/90 text-sm mt-1",children:[e===1&&"Step 1 of 3: Book Details",e===2&&"Step 2 of 3: Location & Delivery",e===3&&"Step 3 of 3: Review & Confirm",e===4&&"Listing Created!"]})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),e<4&&s.jsx("div",{className:"px-6 py-4 bg-gray-50",children:s.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(N=>s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:`h-2 rounded-full transition-colors ${N<=e?"bg-[#C4A672]":"bg-gray-200"}`})},N))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e===1&&s.jsx(mk,{initialData:o,onNext:p,onCancel:t,isExchange:!0}),e===2&&s.jsx(_k,{initialData:d,onNext:y,onBack:g}),e===3&&s.jsx(bk,{bookData:o,locationData:d,onSubmit:b,onBack:g,onEdit:E,isSubmitting:r}),e===4&&s.jsx(Nk,{onClose:t,onAddAnother:()=>{n(1),u({isbn:"",bookName:"",author:"",price:"0",condition:"Good",category:"Fiction",description:"",publishedYear:"",language:"English",pages:"",images:[],exchangePreferences:""}),f({method:"both",address:"",city:"",state:"",zipCode:""})}})]})]})})}function FW({onNavigateToDetail:t,onNavigateToCreate:e,isLoggedIn:n,onBack:r}){const[i,o]=_.useState([]),[u,d]=_.useState(""),[f,p]=_.useState("grid"),[y,g]=_.useState("all"),[b,E]=_.useState("all"),[N,S]=_.useState("members"),[k,R]=_.useState(!1),[I,z]=_.useState(!0),H=gt.currentUser;_.useEffect(()=>{const O=Yr(lt(Te,"communities"),async U=>{const $=await Promise.all(U.docs.map(async K=>{const W={id:K.id,...K.data()},ce=Wt(lt(Te,"communities",K.id,"posts"),_s("timestamp","desc"),Pd(2)),oe=await bs(ce);return W.recentPosts=oe.docs.map(ne=>({id:ne.id,...ne.data()})),W.postsCount=oe.size,W}));o($),z(!1)});return()=>O()},[]);const G=async(O,U,$)=>{if($.stopPropagation(),!n||!H){ue.error("Please login to join communities");return}const K=ht(Te,"communities",O);try{U==="private"?(await un(K,{pending:Qu({userId:H.uid,name:H.displayName||"User",timestamp:new Date})}),ue.success("Join request sent! Waiting for admin approval.")):(await un(K,{members:Qu({userId:H.uid,name:H.displayName||"User",timestamp:new Date}),memberCount:jl(1)}),ue.success("Successfully joined the community!"))}catch(W){ue.error("Failed to join"),console.error(W)}},Q=async(O,U)=>{if(U.stopPropagation(),!H)return;const $=ht(Te,"communities",O);try{await un($,{members:bh({userId:H.uid}),memberCount:jl(-1)}),ue.info("You left the community")}catch(K){ue.error("Failed to leave"),console.error(K)}},F=i.filter(O=>{const U=O.name.toLowerCase().includes(u.toLowerCase())||O.description.toLowerCase().includes(u.toLowerCase()),$=y==="all"||O.topic===y,K=b==="all"||O.privacy===b;return U&&$&&K}).sort((O,U)=>N==="members"?U.memberCount-O.memberCount:N==="posts"?U.postsCount-O.postsCount:N==="name"?O.name.localeCompare(U.name):0),D=["Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Thriller","Horror","Biography","History","Science","Technology","Business","Self-Help","Art","Poetry","Drama","Education","Religion","Philosophy"];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#2C3E50] to-[#34495E] text-white py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[r&&s.jsxs(X,{variant:"ghost",onClick:r,className:"text-white hover:bg-white/10 mb-4 -ml-2",children:[s.jsx(zs,{className:"w-5 h-5 mr-2"}),"Back to Home"]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl mb-2",children:"Book Communities"}),s.jsx("p",{className:"text-white/90",children:"Connect with readers who share your interests"})]}),n&&s.jsxs(X,{onClick:e,size:"lg",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ro,{className:"w-5 h-5 mr-2"}),"Create Community"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx($n,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search communities by name or description...",value:u,onChange:O=>d(O.target.value),className:"pl-12 pr-4 h-14 text-lg bg-white text-gray-900"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(X,{variant:"outline",size:"sm",onClick:()=>R(!k),children:[s.jsx(vw,{className:"w-4 h-4 mr-2"}),"Filters"]}),s.jsxs(vn,{value:N,onValueChange:S,children:[s.jsx(wn,{className:"w-48",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"members",children:"Most Members"}),s.jsx(Ve,{value:"posts",children:"Most Active"}),s.jsx(Ve,{value:"name",children:"Name A-Z"})]})]}),s.jsxs("div",{className:"text-gray-600",children:[F.length," communities"]})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-1",children:[s.jsx(X,{variant:f==="grid"?"default":"ghost",size:"sm",onClick:()=>p("grid"),className:f==="grid"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:s.jsx(jV,{className:"w-4 h-4"})}),s.jsx(X,{variant:f==="list"?"default":"ghost",size:"sm",onClick:()=>p("list"),className:f==="list"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:s.jsx(MV,{className:"w-4 h-4"})})]})]}),k&&s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Topic"}),s.jsxs(vn,{value:y,onValueChange:g,children:[s.jsx(wn,{children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All Topics"}),D.map(O=>s.jsx(Ve,{value:O,children:O},O))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Privacy"}),s.jsxs(vn,{value:b,onValueChange:E,children:[s.jsx(wn,{children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All"}),s.jsx(Ve,{value:"public",children:"Public Only"}),s.jsx(Ve,{value:"private",children:"Private Only"})]})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(X,{variant:"outline",onClick:()=>{g("all"),E("all"),d("")},className:"w-full",children:"Clear Filters"})})]})}),f==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(O=>s.jsxs("div",{onClick:()=>t(O.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",children:[s.jsxs("div",{className:"relative h-40 bg-gradient-to-br from-[#C4A672] to-[#8B7355] overflow-hidden",children:[s.jsx("img",{src:O.image,alt:O.name,className:"w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-300"}),s.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:s.jsx(Qe,{variant:"secondary",className:"bg-white/90 text-gray-700 border-0",children:O.privacy==="public"?s.jsxs(s.Fragment,{children:[s.jsx(Ep,{className:"w-3 h-3 mr-1"})," Public"]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-3 h-3 mr-1"})," Private"]})})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2 group-hover:text-[#C4A672] transition-colors",children:O.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:O.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{children:O.memberCount.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"w-4 h-4"}),s.jsx("span",{children:O.postsCount})]}),s.jsx(Qe,{variant:"outline",className:"text-xs",children:O.topic})]}),O.recentPosts.length>0&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Recent Activity:"}),O.recentPosts.slice(0,2).map(U=>s.jsxs("div",{className:"text-sm text-gray-700 mb-1 truncate",children:[s.jsxs("span",{className:"text-[#C4A672]",children:[U.authorName,":"]})," ",U.content]},U.id))]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Admin: ",O.admin,O.location&&`  ${O.location}`]}),O.isPending?s.jsx(X,{disabled:!0,className:"w-full bg-gray-300 text-gray-600 cursor-not-allowed",size:"sm",children:"Pending Approval"}):O.isMember?s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(X,{onClick:U=>{U.stopPropagation(),t(O.id)},className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",size:"sm",children:"View"}),s.jsx(X,{onClick:U=>Q(O.id,U),variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",size:"sm",children:"Leave"})]}):s.jsx(X,{onClick:U=>G(O.id,O.privacy,U),className:"w-full bg-[#2C3E50] hover:bg-[#1a252f] text-white",size:"sm",children:O.privacy==="private"?"Request to Join":"Join Community"})]})]},O.id))}):s.jsx("div",{className:"space-y-4",children:F.map(O=>s.jsx("div",{onClick:()=>t(O.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow cursor-pointer group",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsx("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:O.image,alt:O.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-1 group-hover:text-[#C4A672] transition-colors",children:O.name}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mb-2",children:[s.jsx(Qe,{variant:"secondary",className:"bg-gray-100",children:O.privacy==="public"?s.jsxs(s.Fragment,{children:[s.jsx(Ep,{className:"w-3 h-3 mr-1"})," Public"]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-3 h-3 mr-1"})," Private"]})}),s.jsx(Qe,{variant:"outline",children:O.topic}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),O.memberCount.toLocaleString()," members"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"w-4 h-4"}),O.postsCount," posts"]})]})]}),s.jsx("div",{className:"ml-4",children:O.isPending?s.jsx(X,{disabled:!0,className:"bg-gray-300 text-gray-600 cursor-not-allowed",size:"sm",children:"Pending"}):O.isMember?s.jsx(X,{onClick:U=>Q(O.id,U),variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",size:"sm",children:"Leave"}):s.jsx(X,{onClick:U=>G(O.id,O.privacy,U),className:"bg-[#2C3E50] hover:bg-[#1a252f] text-white",size:"sm",children:"Join"})})]}),s.jsx("p",{className:"text-gray-600 mb-3",children:O.description}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Admin: ",O.admin,O.location&&`  ${O.location}`]})]})]})},O.id))}),F.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Rn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No communities found"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your filters or search query"}),s.jsx(X,{onClick:()=>{d(""),g("all"),E("all")},children:"Clear All Filters"})]})]})]})}function VW({onBack:t,onSuccess:e,userId:n,userName:r}){const i=Jn();if(!n)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#FAF8F3]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-[#2C3E50] mb-4",children:"Please Log In"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to create a community."}),s.jsx(X,{onClick:()=>i("/login"),className:"bg-[#C4A672] text-white",children:"Go to Login"})]})});const[o,u]=_.useState({name:"",description:"",privacy:"public",topic:"",location:"",image:null,imageFile:null}),[d,f]=_.useState({}),[p,y]=_.useState(!1),[g,b]=_.useState([]),E=["Fiction","Non-Fiction","Science Fiction","Fantasy","Mystery","Romance","Thriller","Horror","Biography","History","Science","Technology","Business","Self-Help","Art","Poetry","Drama","Education","Religion","Philosophy"],N=()=>{const I={};return o.name?o.name.length<3?I.name="Name must be at least 3 characters":o.name.length>50&&(I.name="Name must be less than 50 characters"):I.name="Community name is required",o.description?o.description.length<10?I.description="Description must be at least 10 characters":o.description.length>500&&(I.description="Description must be less than 500 characters"):I.description="Description is required",g.length===0&&(I.topics="Please select at least one topic"),f(I),Object.keys(I).length===0},S=I=>{const z=I.target.files?.[0];if(z){if(z.size>5*1024*1024){ue.error("Image size must be less than 5MB");return}const H=new FileReader;H.onloadend=()=>{u(G=>({...G,image:H.result,imageFile:z}))},H.readAsDataURL(z)}},k=I=>{b(z=>z.includes(I)?z.filter(H=>H!==I):[...z,I]),f(z=>({...z,topics:""}))},R=async I=>{if(I.preventDefault(),!N()){ue.error("Please fix the errors before submitting");return}y(!0);try{let z=o.image;if(o.imageFile)throw new Error("Cloudinary configuration missing");const H=await Ns(lt(Te,"communities"),{name:o.name,description:o.description,privacy:o.privacy,topics:g,location:o.location,image:z||"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&q=80",adminId:n,adminName:r,memberCount:1,postsCount:0,createdAt:xn()});await un(ht(Te,"communities",H.id),{members:Qu({userId:n,name:r,timestamp:new Date})}),ue.success("Community created successfully! You are now the admin."),e(H.id)}catch(z){ue.error(z.message||"Failed to create community"),console.error(z)}finally{y(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#2C3E50] to-[#34495E] text-white py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[s.jsx(zs,{className:"w-5 h-5"}),"Back to Communities"]}),s.jsx("h1",{className:"text-4xl mb-2",children:"Create a Community"}),s.jsx("p",{className:"text-white/90",children:"Build a space for readers to connect and discuss"})]})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:s.jsxs("form",{onSubmit:R,className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(Ae,{htmlFor:"name",className:"text-[#2C3E50] mb-2",children:"Community Name *"}),s.jsx(Ie,{id:"name",type:"text",value:o.name,onChange:I=>{u(z=>({...z,name:I.target.value})),f(z=>({...z,name:""}))},placeholder:"e.g., Science Fiction Lovers",className:d.name?"border-red-500":""}),d.name&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.name}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[o.name.length,"/50 characters"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(Ae,{htmlFor:"description",className:"text-[#2C3E50] mb-2",children:"Description *"}),s.jsx(Ql,{id:"description",value:o.description,onChange:I=>{u(z=>({...z,description:I.target.value})),f(z=>({...z,description:""}))},placeholder:"Describe what your community is about, what members can expect, and any rules...",rows:4,className:d.description?"border-red-500":""}),d.description&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.description}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[o.description.length,"/500 characters"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(Ae,{className:"text-[#2C3E50] mb-3",children:"Privacy Settings *"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("button",{type:"button",onClick:()=>u(I=>({...I,privacy:"public"})),className:`p-4 rounded-lg border-2 transition-all ${o.privacy==="public"?"border-[#C4A672] bg-[#C4A672]/10":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ep,{className:"w-6 h-6 text-[#C4A672] flex-shrink-0 mt-1"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Public"}),o.privacy==="public"&&s.jsx(Hl,{className:"w-4 h-4 text-[#C4A672]"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Anyone can join immediately. Community is visible to everyone."})]})]})}),s.jsx("button",{type:"button",onClick:()=>u(I=>({...I,privacy:"private"})),className:`p-4 rounded-lg border-2 transition-all ${o.privacy==="private"?"border-[#C4A672] bg-[#C4A672]/10":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Fs,{className:"w-6 h-6 text-[#C4A672] flex-shrink-0 mt-1"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[#2C3E50]",children:"Private"}),o.privacy==="private"&&s.jsx(Hl,{className:"w-4 h-4 text-[#C4A672]"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Admin approval required to join. More control over membership."})]})]})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(Ae,{className:"text-[#2C3E50] mb-3",children:"Topic Tags * (Select all that apply)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(I=>s.jsxs("button",{type:"button",onClick:()=>k(I),className:`px-4 py-2 rounded-full text-sm transition-all ${g.includes(I)?"bg-[#C4A672] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[I,g.includes(I)&&s.jsx(Dt,{className:"w-3 h-3 ml-2 inline"})]},I))}),d.topics&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:d.topics}),g.length>0&&s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",g.join(", ")]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(Ae,{htmlFor:"location",className:"text-[#2C3E50] mb-2",children:"Location (Optional)"}),s.jsx(Ie,{id:"location",type:"text",value:o.location,onChange:I=>u(z=>({...z,location:I.target.value})),placeholder:"e.g., San Francisco, CA or 'Online'"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Specify a location if your community has local meetups"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(Ae,{className:"text-[#2C3E50] mb-2",children:"Community Image (Optional)"}),o.image?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:o.image,alt:"Community preview",className:"w-full h-48 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>u(I=>({...I,image:null,imageFile:null})),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:s.jsx(Dt,{className:"w-5 h-5"})})]}):s.jsxs("label",{className:"block w-full h-48 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#C4A672] transition-colors cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden"}),s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[s.jsx(jg,{className:"w-12 h-12 mb-3"}),s.jsx("p",{className:"text-sm",children:"Click to upload an image"}),s.jsx("p",{className:"text-xs mt-1",children:"Max size: 5MB"})]})]})]}),s.jsxs("div",{className:"bg-[#C4A672]/10 border border-[#C4A672]/30 rounded-lg p-4 mb-6",children:[s.jsxs("p",{className:"text-sm text-[#2C3E50]",children:[s.jsx("strong",{children:"You will be assigned as the admin"})," of this community. As admin, you can:"]}),s.jsxs("ul",{className:"text-sm text-gray-700 mt-2 ml-4 list-disc space-y-1",children:[s.jsx("li",{children:"Approve or reject join requests (for private communities)"}),s.jsx("li",{children:"Manage members (remove members if needed)"}),s.jsx("li",{children:"Moderate posts and comments"}),s.jsx("li",{children:"Edit community details"}),s.jsx("li",{children:"Delete the community"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(X,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:p,children:"Cancel"}),s.jsx(X,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:p,children:p?"Creating...":"Create Community"})]})]})})]})}var Yg="Tabs",[BW]=ir(Yg,[Ld]),jk=Ld(),[zW,s_]=BW(Yg),Ck=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:u="horizontal",dir:d,activationMode:f="automatic",...p}=t,y=ru(d),[g,b]=Oa({prop:r,onChange:i,defaultProp:o??"",caller:Yg});return s.jsx(zW,{scope:n,baseId:Ra(),value:g,onValueChange:b,orientation:u,dir:y,activationMode:f,children:s.jsx(Je.div,{dir:y,"data-orientation":u,...p,ref:e})})});Ck.displayName=Yg;var Ek="TabsList",Sk=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,o=s_(Ek,n),u=jk(n);return s.jsx(Lw,{asChild:!0,...u,orientation:o.orientation,dir:o.dir,loop:r,children:s.jsx(Je.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});Sk.displayName=Ek;var Tk="TabsTrigger",Ak=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=t,u=s_(Tk,n),d=jk(n),f=Ik(u.baseId,r),p=Rk(u.baseId,r),y=r===u.value;return s.jsx(Mw,{asChild:!0,...d,focusable:!i,active:y,children:s.jsx(Je.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":p,"data-state":y?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:f,...o,ref:e,onMouseDown:Fe(t.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?u.onValueChange(r):g.preventDefault()}),onKeyDown:Fe(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&u.onValueChange(r)}),onFocus:Fe(t.onFocus,()=>{const g=u.activationMode!=="manual";!y&&!i&&g&&u.onValueChange(r)})})})});Ak.displayName=Tk;var kk="TabsContent",Pk=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...u}=t,d=s_(kk,n),f=Ik(d.baseId,r),p=Rk(d.baseId,r),y=r===d.value,g=_.useRef(y);return _.useEffect(()=>{const b=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(b)},[]),s.jsx(rr,{present:i||y,children:({present:b})=>s.jsx(Je.div,{"data-state":y?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":f,hidden:!b,id:p,tabIndex:0,...u,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:b&&o})})});Pk.displayName=kk;function Ik(t,e){return`${t}-trigger-${e}`}function Rk(t,e){return`${t}-content-${e}`}var UW=Ck,$W=Sk,HW=Ak,WW=Pk;function Lk({className:t,...e}){return s.jsx(UW,{"data-slot":"tabs",className:ft("flex flex-col gap-2",t),...e})}function Mk({className:t,...e}){return s.jsx($W,{"data-slot":"tabs-list",className:ft("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function Fp({className:t,...e}){return s.jsx(HW,{"data-slot":"tabs-trigger",className:ft("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Vp({className:t,...e}){return s.jsx(WW,{"data-slot":"tabs-content",className:ft("flex-1 outline-none",t),...e})}function qW({onClose:t,onSubmit:e}){const[n,r]=_.useState(""),[i,o]=_.useState([]),[u,d]=_.useState(!1),f=5e3,p=4,y=E=>{const N=Array.from(E.target.files||[]);if(i.length+N.length>p){ue.error(`Maximum ${p} images allowed`);return}N.forEach(S=>{if(S.size>5*1024*1024){ue.error("Image size must be less than 5MB");return}const k=new FileReader;k.onloadend=()=>{o(R=>[...R,k.result])},k.readAsDataURL(S)})},g=E=>{o(N=>N.filter((S,k)=>k!==E))},b=()=>{if(!n.trim()){ue.error("Post content cannot be empty");return}if(n.length>f){ue.error(`Post is too long (max ${f} characters)`);return}d(!0),setTimeout(()=>{e(n,i),d(!1)},500)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50]",children:"Create Post"}),s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(Ql,{value:n,onChange:E=>r(E.target.value),placeholder:"Share your thoughts, questions, or recommendations...",rows:8,className:"resize-none",autoFocus:!0}),s.jsx("div",{className:"flex items-center justify-between mt-2",children:s.jsxs("span",{className:`text-sm ${n.length>f?"text-red-500":"text-gray-500"}`,children:[n.length,"/",f]})})]}),i.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:i.map((E,N)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:E,alt:`Upload ${N+1}`,className:"w-full h-48 object-cover rounded-lg"}),s.jsx("button",{onClick:()=>g(N),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Dt,{className:"w-5 h-5"})})]},N))}),i.length<p&&s.jsxs("label",{className:"block w-full border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-[#C4A672] transition-colors cursor-pointer mb-4",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:y,className:"hidden"}),s.jsx(md,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"Add images to your post"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[i.length,"/",p," images  Max 5MB each"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[s.jsx(X,{variant:"outline",onClick:t,disabled:u,children:"Cancel"}),s.jsx(X,{onClick:b,disabled:!n.trim()||n.length>f||u,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:u?"Posting...":"Post"})]})]})})}function GW({post:t,onClose:e,isAdmin:n,userId:r}){const[i,o]=_.useState([]),[u,d]=_.useState(""),[f,p]=_.useState(null),[y,g]=_.useState("");_.useEffect(()=>{const R=Wt(lt(Te,"posts",t.id,"comments"),_s("createdAt","asc")),I=Yr(R,z=>{const H=z.docs.map(G=>({id:G.id,...G.data()}));o(H)});return()=>I()},[t.id]);const b=async()=>{if(u.trim())try{await Ns(lt(Te,"posts",t.id,"comments"),{authorId:r,authorName:"Current User",authorAvatar:"CU",content:u,createdAt:xn(),likes:0,userLiked:!1,replies:[]}),d(""),ue.success("Comment added")}catch{ue.error("Failed to add comment")}},E=async R=>{if(y.trim())try{await Ns(lt(Te,"posts",t.id,"comments",R,"replies"),{authorId:r,authorName:"Current User",authorAvatar:"CU",content:y,createdAt:xn(),likes:0,userLiked:!1,replies:[]}),g(""),p(null),ue.success("Reply added")}catch{ue.error("Failed to add reply")}},N=async(R,I=!1,z)=>{try{const H=I&&z?ht(Te,"posts",t.id,"comments",z,"replies",R):ht(Te,"posts",t.id,"comments",R);await un(H,{likes:jl(1),userLiked:!0})}catch{ue.error("Failed to like")}},S=async R=>{if(confirm("Are you sure?"))try{await Po(ht(Te,"posts",t.id,"comments",R)),ue.success("Comment deleted")}catch{ue.error("Failed to delete")}},k=(R,I=!1,z)=>s.jsx("div",{className:`${I?"ml-12":""}`,children:s.jsxs("div",{className:"flex gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white flex-shrink-0",children:R.authorAvatar}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[#2C3E50]",children:R.authorName}),s.jsx("span",{className:"text-xs text-gray-500",children:R.createdAt})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:R.content})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[s.jsxs("button",{onClick:()=>N(R.id,I,z),className:`flex items-center gap-1 ${R.userLiked?"text-[#C4A672]":"text-gray-500 hover:text-[#C4A672]"} transition-colors`,children:[s.jsx(_7,{className:"w-4 h-4"}),R.likes>0&&R.likes]}),!I&&s.jsx("button",{onClick:()=>p(R.id),className:"text-gray-500 hover:text-[#C4A672] transition-colors",children:"Reply"}),(n||R.authorId===r)&&s.jsx("button",{onClick:()=>S(R.id),className:"text-red-500 hover:text-red-700 transition-colors",children:"Delete"})]}),f===R.id&&s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx(Ql,{value:y,onChange:H=>g(H.target.value),placeholder:"Write a reply...",rows:2,className:"flex-1"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(X,{size:"sm",onClick:()=>E(R.id),disabled:!y.trim(),className:"bg-[#C4A672] hover:bg-[#8B7355]",children:s.jsx(Sp,{className:"w-4 h-4"})}),s.jsx(X,{size:"sm",variant:"outline",onClick:()=>{p(null),g("")},children:s.jsx(Dt,{className:"w-4 h-4"})})]})]}),R.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-4",children:R.replies.map(H=>k(H,!0,R.id))})]})]})},R.id);return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50]",children:"Post & Comments"}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:t.authorAvatar}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#2C3E50]",children:t.authorName}),s.jsx("div",{className:"text-sm text-gray-500",children:t.createdAt})]})]}),s.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:t.content}),t.images.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:t.images.map((R,I)=>s.jsx("img",{src:R,alt:"Post",className:"w-full h-48 object-cover rounded-lg"},I))}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[" ",t.reactions.like]}),s.jsxs("span",{className:"flex items-center gap-1",children:[" ",t.reactions.love]}),s.jsxs("span",{className:"flex items-center gap-1",children:[" ",t.reactions.insightful]}),s.jsxs("span",{className:"flex items-center gap-1 ml-auto",children:[s.jsx(Ey,{className:"w-4 h-4"}),i.length+i.reduce((R,I)=>R+I.replies.length,0)," comments"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-[#2C3E50] text-lg",children:"Comments"}),i.map(R=>k(R)),i.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Ey,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No comments yet. Be the first to comment!"})]})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white flex-shrink-0",children:"CU"}),s.jsxs("div",{className:"flex-1 flex gap-2",children:[s.jsx(Ql,{value:u,onChange:R=>d(R.target.value),placeholder:"Write a comment...",rows:2,className:"flex-1"}),s.jsx(X,{onClick:b,disabled:!u.trim(),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:s.jsx(Sp,{className:"w-4 h-4"})})]})]})})]})})}function KW({userId:t}){const{id:e}=z1(),n=Jn(),[r,i]=_.useState("posts"),[o,u]=_.useState(!1),[d,f]=_.useState(null),[p,y]=_.useState(!1),[g,b]=_.useState(!1),[E,N]=_.useState(null),[S,k]=_.useState([]),[R,I]=_.useState([]),[z,H]=_.useState(!0),G=()=>n("/communities"),Q=oe=>n(`/communities/${oe}/chat`);_.useEffect(()=>{(async()=>{H(!0);try{if(!e)return;const ne=await vg(ht(Te,"communities",e));if(ne.exists()){const ie=ne.data();N({id:ne.id,...ie}),t&&(b(ie.adminId===t),y(ie.members?.includes(t)||!1))}const xe=Yr(Wt(lt(Te,"communities",e,"posts"),_s("createdAt","desc")),ie=>{k(ie.docs.map(J=>({id:J.id,...J.data()})))}),Z=Yr(lt(Te,"communities",e,"members"),ie=>{const J=ie.docs.map(me=>({id:me.id,...me.data()}));I(J)}),de=Yr(lt(Te,"communities",e,"pending"),ie=>{const J=ie.docs.map(me=>({id:me.id,...me.data(),status:"pending"}));I(me=>[...me.filter(we=>!we.status),...J])});return()=>{xe(),Z(),de()}}catch(ne){ue.error("Failed to load community"),console.error(ne)}finally{H(!1)}})()},[e]);const F=async()=>{if(!(!e||!gt.currentUser?.uid))try{const oe=ht(Te,"communities",e);E.privacy==="private"?(await un(oe,{pending:Qu(gt.currentUser.uid)}),ue.success("Join request sent! Waiting for admin approval.")):(await un(oe,{members:Qu(gt.currentUser?.uid),memberCount:jl(1)}),y(!0),ue.success("Successfully joined the community!"))}catch{ue.error("Failed to join")}},D=async()=>{if(!(!e||!gt.currentUser?.uid))try{const oe=ht(Te,"communities",e);await un(oe,{members:bh(gt.currentUser.uid),memberCount:jl(-1)}),y(!1),ue.info("You left the community")}catch{ue.error("Failed to leave")}},O=async(oe,ne)=>{if(e)try{const xe=ht(Te,"communities",e,"posts",oe);await un(xe,{[`reactions.${ne}`]:jl(1),userReaction:ne}),k(Z=>Z.map(de=>{if(de.id!==oe)return de;const ie=de.userReaction,J={...de.reactions};return ie&&J[ie]--,ie===ne?{...de,reactions:J,userReaction:void 0}:(J[ne]++,{...de,reactions:J,userReaction:ne})}))}catch{ue.error("Failed to react")}},U=async oe=>{if(e&&confirm("Are you sure you want to delete this post?"))try{await Po(ht(Te,"communities",e,"posts",oe)),k(ne=>ne.filter(xe=>xe.id!==oe)),ue.success("Post deleted")}catch{ue.error("Failed to delete")}},$=async oe=>{if(e)try{const ne=ht(Te,"communities",e);await un(ne,{pending:bh(oe),members:Qu(oe),memberCount:jl(1)}),I(xe=>xe.map(Z=>Z.id===oe?{...Z,status:void 0}:Z)),ue.success("Member approved")}catch{ue.error("Failed to approve")}},K=async oe=>{if(e)try{const ne=ht(Te,"communities",e);await un(ne,{pending:bh(oe)}),I(xe=>xe.filter(Z=>Z.id!==oe)),ue.info("Join request rejected")}catch{ue.error("Failed to reject")}},W=async oe=>{if(e&&confirm("Are you sure you want to remove this member?"))try{const ne=ht(Te,"communities",e);await un(ne,{members:bh(oe),memberCount:jl(-1)}),I(xe=>xe.filter(Z=>Z.id!==oe)),ue.success("Member removed")}catch{ue.error("Failed to remove")}},ce=async(oe,ne)=>{if(!(!e||!t))try{const xe={authorId:t,authorName:"Current User",authorAvatar:"CU",content:oe,images:ne,createdAt:new Date().toISOString(),reactions:{like:0,love:0,insightful:0},commentCount:0},de={id:(await Ns(lt(Te,"communities",e,"posts"),{...xe,createdAt:xn()})).id,...xe,createdAt:new Date().toISOString()};k(ie=>[de,...ie]),u(!1),ue.success("Post published!")}catch{ue.error("Failed to post")}};return z?s.jsx("div",{children:"Loading..."}):E?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-0",children:[s.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-[#2C3E50] to-[#34495E]",children:[s.jsx("img",{src:E.coverImage,alt:E.name,className:"w-full h-full object-cover opacity-50"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsx("button",{onClick:G,className:"absolute top-4 left-4 flex items-center gap-2 text-white hover:text-white/80 transition-colors",children:s.jsx("div",{className:"w-10 h-10 bg-black/30 rounded-full flex items-center justify-center backdrop-blur-sm",children:s.jsx(zs,{className:"w-5 h-5"})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-4xl mb-2",children:E.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),E.memberCount.toLocaleString()," members"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"w-4 h-4"}),E.postsCount," posts"]}),s.jsxs("span",{children:["Admin: ",E.admin]})]})]})})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 -mt-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4 mb-6 flex items-center justify-between",children:[s.jsx("div",{className:"flex gap-3",children:p?s.jsxs(s.Fragment,{children:[s.jsxs(X,{onClick:()=>e&&Q(e),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(sr,{className:"w-4 h-4 mr-2"}),"Group Chat"]}),s.jsxs(X,{onClick:D,variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",children:[s.jsx(S7,{className:"w-4 h-4 mr-2"}),"Leave"]})]}):s.jsxs(X,{onClick:F,className:"bg-[#2C3E50] hover:bg-[#1a252f] text-white",children:[s.jsx(lS,{className:"w-4 h-4 mr-2"}),"Join Community"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[E.topics?.map(oe=>s.jsx(Qe,{variant:"outline",children:oe},oe)),g&&s.jsx(X,{variant:"ghost",size:"sm",children:s.jsx(bg,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"About"}),s.jsx("p",{className:"text-gray-600",children:E.description})]}),s.jsxs(Lk,{value:r,onValueChange:i,className:"space-y-6",children:[s.jsxs(Mk,{className:"bg-white border border-gray-200 p-1",children:[s.jsx(Fp,{value:"posts",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:"Posts"}),s.jsxs(Fp,{value:"members",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:["Members (",R.length,")"]})]}),s.jsxs(Vp,{value:"posts",className:"space-y-4",children:[p&&s.jsxs(X,{onClick:()=>u(!0),className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Create Post"]}),S.map(oe=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:oe.authorAvatar}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#2C3E50]",children:oe.authorName}),s.jsx("div",{className:"text-sm text-gray-500",children:oe.createdAt})]})]}),(g||oe.authorId===t)&&s.jsx(X,{variant:"ghost",size:"sm",onClick:()=>U(oe.id),children:s.jsx(Wl,{className:"w-4 h-4 text-red-600"})})]}),s.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:oe.content}),oe.images.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:oe.images.map((ne,xe)=>s.jsx("img",{src:ne,alt:"Post",className:"w-full h-48 object-cover rounded-lg"},xe))}),s.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>O(oe.id,"like"),className:`flex items-center gap-2 text-sm transition-colors ${oe.userReaction==="like"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[" ",oe.reactions.like]}),s.jsxs("button",{onClick:()=>O(oe.id,"love"),className:`flex items-center gap-2 text-sm transition-colors ${oe.userReaction==="love"?"text-red-600":"text-gray-600 hover:text-red-600"}`,children:[" ",oe.reactions.love]}),s.jsxs("button",{onClick:()=>O(oe.id,"insightful"),className:`flex items-center gap-2 text-sm transition-colors ${oe.userReaction==="insightful"?"text-yellow-600":"text-gray-600 hover:text-yellow-600"}`,children:[" ",oe.reactions.insightful]}),s.jsxs("button",{onClick:()=>f(oe),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#C4A672] transition-colors ml-auto",children:[s.jsx(Ey,{className:"w-4 h-4"}),oe.commentCount," comments"]})]})]},oe.id)),S.length===0&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[s.jsx(sr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No posts yet"}),s.jsx("p",{className:"text-gray-500",children:"Be the first to start a discussion!"})]})]}),s.jsxs(Vp,{value:"members",className:"space-y-4",children:[g&&R.some(oe=>oe.status==="pending")&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-3",children:"Pending Join Requests"}),R.filter(oe=>oe.status==="pending").map(oe=>s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:oe.avatar}),s.jsx("span",{className:"text-[#2C3E50]",children:oe.name})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(X,{size:"sm",onClick:()=>$(oe.id),className:"bg-green-600 hover:bg-green-700 text-white",children:"Approve"}),s.jsx(X,{size:"sm",variant:"outline",onClick:()=>K(oe.id),className:"text-red-600 border-red-200",children:"Reject"})]})]},oe.id))]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 divide-y",children:R.filter(oe=>!oe.status).map(oe=>s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-lg",children:oe.avatar}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-[#2C3E50] flex items-center gap-2",children:[oe.name,oe.role==="admin"&&s.jsx(Qe,{className:"bg-[#C4A672] text-white",children:"Admin"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Joined ",new Date(oe.joinedAt).toLocaleDateString()]})]})]}),g&&oe.role!=="admin"&&s.jsx(X,{variant:"ghost",size:"sm",onClick:()=>W(oe.id),className:"text-red-600 hover:bg-red-50",children:"Remove"})]},oe.id))})]})]})]}),o&&s.jsx(qW,{onClose:()=>u(!1),onSubmit:ce}),d&&s.jsx(GW,{post:d,onClose:()=>f(null),isAdmin:g,userId:t||""})]}):s.jsx("div",{children:"Community not found"})}function ZW({message:t,showAvatar:e=!0}){const n=i=>{const u=new Date().getTime()-i.getTime(),d=Math.floor(u/36e5);if(d<1){const f=Math.floor(u/6e4);return f<1?"Just now":`${f}m ago`}else{if(d<24)return`${d}h ago`;{const f=Math.floor(d/24);return f===1?"Yesterday":f<7?`${f}d ago`:i.toLocaleDateString()}}},r=i=>{if(!i)return null;switch(i){case"sending":return s.jsx("span",{className:"text-gray-400",children:""});case"sent":return s.jsx("span",{className:"text-gray-400",children:""});case"delivered":return s.jsx("span",{className:"text-gray-400",children:""});case"read":return s.jsx("span",{className:"text-blue-500",children:""});default:return null}};return s.jsx("div",{className:`flex ${t.isOwn?"justify-end":"justify-start"} mb-4`,children:s.jsxs("div",{className:`flex gap-2 max-w-[70%] ${t.isOwn?"flex-row-reverse":"flex-row"}`,children:[e&&!t.isOwn&&s.jsx("div",{className:"w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-sm flex-shrink-0",children:t.senderAvatar}),s.jsxs("div",{className:"flex flex-col",children:[!t.isOwn&&e&&s.jsx("span",{className:"text-xs text-gray-500 mb-1 ml-1",children:t.senderName}),s.jsxs("div",{className:`rounded-2xl p-3 ${t.isOwn?"bg-[#2C3E50] text-white rounded-br-none":"bg-white border border-gray-200 text-gray-900 rounded-bl-none"}`,children:[t.content&&s.jsx("p",{className:"whitespace-pre-wrap break-words text-sm",children:t.content}),t.images&&t.images.length>0&&s.jsx("div",{className:`grid gap-2 ${t.images.length===1?"grid-cols-1":(t.images.length===2,"grid-cols-2")} ${t.content?"mt-2":""}`,children:t.images.map((i,o)=>s.jsx("img",{src:i,alt:`Attachment ${o+1}`,className:"rounded-lg max-w-full h-auto cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(i,"_blank")},o))}),t.files&&t.files.length>0&&s.jsx("div",{className:`space-y-2 ${t.content?"mt-2":""}`,children:t.files.map((i,o)=>s.jsxs("a",{href:i.url,download:i.name,className:`flex items-center gap-2 p-2 rounded-lg transition-colors ${t.isOwn?"bg-white/10 hover:bg-white/20":"bg-gray-100 hover:bg-gray-200"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded flex items-center justify-center ${t.isOwn?"bg-white/20":"bg-gray-300"}`,children:s.jsx("span",{className:"text-xs",children:i.type.split("/")[1]?.toUpperCase().slice(0,3)||"FILE"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-center",children:i.name}),s.jsx("div",{className:"text-xs opacity-70",children:i.type})]})}),s.jsx(gf,{className:"w-4 h-4 flex-shrink-0"})]},o))})]}),s.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-gray-500 ${t.isOwn?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:n(t.timestamp)}),t.isOwn&&t.status&&s.jsx("span",{className:"flex items-center",children:r(t.status)})]})]})]})})}function YW({communityId:t,communityName:e,onBack:n,currentUserId:r}){const[i,o]=_.useState([]),[u,d]=_.useState([]),[f,p]=_.useState(""),[y,g]=_.useState([]),[b,E]=_.useState(!1),[N,S]=_.useState([]),k=_.useRef(null),R=_.useRef(null);_.useEffect(()=>{const D=Wt(lt(Te,"communities",t,"messages"),_s("timestamp","asc")),O=Yr(D,$=>{const K=$.docs.map(W=>{const ce=W.data();return{id:W.id,...ce,timestamp:ce.timestamp.toDate(),isOwn:ce.senderId===r}});o(K)}),U=Yr(lt(Te,"communities",t,"members"),$=>{const K=$.docs.map(W=>({id:W.id,...W.data()}));d(K)});return()=>{O(),U()}},[t,r]),_.useEffect(()=>{I()},[i]);const I=()=>{k.current?.scrollIntoView({behavior:"smooth"})},z=u.filter(D=>D.online).length,H=async()=>{if(!(!f.trim()&&y.length===0))try{const D=[];for(const O of y)throw new Error("Cloudinary configuration missing");await Ns(lt(Te,"communities",t,"messages"),{senderId:r,senderName:"You",senderAvatar:"ME",content:f,images:D.length>0?D:void 0,timestamp:xn()}),p(""),g([]),ue.success("Message sent")}catch{ue.error("Failed to send message")}},G=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),H())},Q=D=>{Array.from(D.target.files||[]).forEach(U=>{if(U.size>5*1024*1024){ue.error("Image size must be less than 5MB");return}const $=URL.createObjectURL(U);g(K=>[...K,{file:U,preview:$}])})},F=D=>{g(O=>O.filter((U,$)=>$!==D))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#2C3E50] to-[#34495E] text-white p-4 flex items-center justify-between shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx(zs,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-lg truncate",children:e}),s.jsxs("div",{className:"text-sm text-white/80",children:[z," online  ",u.length," members"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",onClick:()=>E(!b),children:s.jsx(Rn,{className:"w-5 h-5"})}),s.jsx(X,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:s.jsx(nS,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-[#FAF8F3] to-white",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center my-4",children:s.jsx("div",{className:"bg-gray-200 text-gray-600 text-xs px-3 py-1 rounded-full",children:"Today"})}),i.map(D=>s.jsx(ZW,{message:D,showAvatar:!0},D.id)),N.length>0&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-sm",children:"JD"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm",children:s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),s.jsx("div",{ref:k})]})}),y.length>0&&s.jsx("div",{className:"border-t border-gray-200 p-4 bg-white",children:s.jsx("div",{className:"max-w-3xl mx-auto flex gap-2 overflow-x-auto",children:y.map((D,O)=>s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("img",{src:D.preview,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg"}),s.jsx("button",{onClick:()=>F(O),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:s.jsx(Dt,{className:"w-4 h-4"})})]},O))})}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-white",children:s.jsxs("div",{className:"max-w-3xl mx-auto flex items-end gap-3",children:[s.jsx("input",{ref:R,type:"file",accept:"image/*",multiple:!0,onChange:Q,className:"hidden"}),s.jsx(X,{variant:"outline",size:"sm",onClick:()=>R.current?.click(),className:"flex-shrink-0",children:s.jsx(md,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ie,{value:f,onChange:D=>p(D.target.value),onKeyPress:G,placeholder:`Message ${e}...`,className:"pr-12 min-h-[44px]"}),s.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(iS,{className:"w-5 h-5"})})]}),s.jsx(X,{onClick:H,disabled:!f.trim()&&y.length===0,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white flex-shrink-0",size:"lg",children:s.jsx(Sp,{className:"w-5 h-5"})})]})})]}),b&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:block w-80 border-l border-gray-200 bg-white overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-[#2C3E50] text-lg",children:"Members"}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[z," online  ",u.length," total"]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:u.map(D=>s.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:D.avatar}),D.online&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[#2C3E50] truncate",children:D.name}),s.jsx("div",{className:"text-xs text-gray-500",children:D.role==="admin"?" Admin":D.online?"Online":"Offline"})]})]})},D.id))})]}),s.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-50 flex items-end",children:s.jsxs("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-[#2C3E50] text-lg",children:"Members"}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[z," online  ",u.length," total"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-100",children:u.map(D=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:D.avatar}),D.online&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[#2C3E50] truncate",children:D.name}),s.jsx("div",{className:"text-xs text-gray-500",children:D.role==="admin"?" Admin":D.online?"Online":"Offline"})]})]})},D.id))})]})})]})]})]})}function QW(t){const e=XW(t),n=_.forwardRef((r,i)=>{const{children:o,...u}=r,d=_.Children.toArray(o),f=d.find(eq);if(f){const p=f.props.children,y=d.map(g=>g===f?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:g);return s.jsx(e,{...u,ref:i,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return s.jsx(e,{...u,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function XW(t){const e=_.forwardRef((n,r)=>{const{children:i,...o}=n;if(_.isValidElement(i)){const u=nq(i),d=tq(o,i.props);return i.type!==_.Fragment&&(d.ref=r?Fo(r,u):u),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var JW=Symbol("radix.slottable");function eq(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===JW}function tq(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{const f=o(...d);return i(...d),f}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function nq(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Gy=["Enter"," "],sq=["ArrowDown","PageUp","Home"],Dk=["ArrowUp","PageDown","End"],rq=[...sq,...Dk],iq={ltr:[...Gy,"ArrowRight"],rtl:[...Gy,"ArrowLeft"]},aq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bf="Menu",[Yh,oq,lq]=Og(bf),[iu,Ok]=ir(bf,[lq,Wg,Ld]),Qg=Wg(),Fk=Ld(),[cq,au]=iu(bf),[uq,Nf]=iu(bf),Vk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:o,modal:u=!0}=t,d=Qg(e),[f,p]=_.useState(null),y=_.useRef(!1),g=ls(o),b=ru(i);return _.useEffect(()=>{const E=()=>{y.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>y.current=!1;return document.addEventListener("keydown",E,{capture:!0}),()=>{document.removeEventListener("keydown",E,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),s.jsx(hA,{...d,children:s.jsx(cq,{scope:e,open:n,onOpenChange:g,content:f,onContentChange:p,children:s.jsx(uq,{scope:e,onClose:_.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:y,dir:b,modal:u,children:r})})})};Vk.displayName=bf;var dq="MenuAnchor",r_=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Qg(n);return s.jsx(fA,{...i,...r,ref:e})});r_.displayName=dq;var i_="MenuPortal",[hq,Bk]=iu(i_,{forceMount:void 0}),zk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,o=au(i_,e);return s.jsx(hq,{scope:e,forceMount:n,children:s.jsx(rr,{present:n||o.open,children:s.jsx(kg,{asChild:!0,container:i,children:r})})})};zk.displayName=i_;var Ci="MenuContent",[fq,a_]=iu(Ci),Uk=_.forwardRef((t,e)=>{const n=Bk(Ci,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=au(Ci,t.__scopeMenu),u=Nf(Ci,t.__scopeMenu);return s.jsx(Yh.Provider,{scope:t.__scopeMenu,children:s.jsx(rr,{present:r||o.open,children:s.jsx(Yh.Slot,{scope:t.__scopeMenu,children:u.modal?s.jsx(mq,{...i,ref:e}):s.jsx(pq,{...i,ref:e})})})})}),mq=_.forwardRef((t,e)=>{const n=au(Ci,t.__scopeMenu),r=_.useRef(null),i=mt(e,r);return _.useEffect(()=>{const o=r.current;if(o)return Ew(o)},[]),s.jsx(o_,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Fe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pq=_.forwardRef((t,e)=>{const n=au(Ci,t.__scopeMenu);return s.jsx(o_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),gq=QW("MenuContent.ScrollLock"),o_=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEntryFocus:f,onEscapeKeyDown:p,onPointerDownOutside:y,onFocusOutside:g,onInteractOutside:b,onDismiss:E,disableOutsideScroll:N,...S}=t,k=au(Ci,n),R=Nf(Ci,n),I=Qg(n),z=Fk(n),H=oq(n),[G,Q]=_.useState(null),F=_.useRef(null),D=mt(e,F,k.onContentChange),O=_.useRef(0),U=_.useRef(""),$=_.useRef(0),K=_.useRef(null),W=_.useRef("right"),ce=_.useRef(0),oe=N?Ig:_.Fragment,ne=N?{as:gq,allowPinchZoom:!0}:void 0,xe=de=>{const ie=U.current+de,J=H().filter(ve=>!ve.disabled),me=document.activeElement,we=J.find(ve=>ve.ref.current===me)?.textValue,_e=J.map(ve=>ve.textValue),je=Tq(_e,ie,we),Ee=J.find(ve=>ve.textValue===je)?.ref.current;(function ve(ke){U.current=ke,window.clearTimeout(O.current),ke!==""&&(O.current=window.setTimeout(()=>ve(""),1e3))})(ie),Ee&&setTimeout(()=>Ee.focus())};_.useEffect(()=>()=>window.clearTimeout(O.current),[]),Cw();const Z=_.useCallback(de=>W.current===K.current?.side&&kq(de,K.current?.area),[]);return s.jsx(fq,{scope:n,searchRef:U,onItemEnter:_.useCallback(de=>{Z(de)&&de.preventDefault()},[Z]),onItemLeave:_.useCallback(de=>{Z(de)||(F.current?.focus(),Q(null))},[Z]),onTriggerLeave:_.useCallback(de=>{Z(de)&&de.preventDefault()},[Z]),pointerGraceTimerRef:$,onPointerGraceIntentChange:_.useCallback(de=>{K.current=de},[]),children:s.jsx(oe,{...ne,children:s.jsx(Ag,{asChild:!0,trapped:i,onMountAutoFocus:Fe(o,de=>{de.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:s.jsx(Tg,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:y,onFocusOutside:g,onInteractOutside:b,onDismiss:E,children:s.jsx(Lw,{asChild:!0,...z,dir:R.dir,orientation:"vertical",loop:r,currentTabStopId:G,onCurrentTabStopIdChange:Q,onEntryFocus:Fe(f,de=>{R.isUsingKeyboardRef.current||de.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(mA,{role:"menu","aria-orientation":"vertical","data-state":rP(k.open),"data-radix-menu-content":"",dir:R.dir,...I,...S,ref:D,style:{outline:"none",...S.style},onKeyDown:Fe(S.onKeyDown,de=>{const J=de.target.closest("[data-radix-menu-content]")===de.currentTarget,me=de.ctrlKey||de.altKey||de.metaKey,we=de.key.length===1;J&&(de.key==="Tab"&&de.preventDefault(),!me&&we&&xe(de.key));const _e=F.current;if(de.target!==_e||!rq.includes(de.key))return;de.preventDefault();const Ee=H().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);Dk.includes(de.key)&&Ee.reverse(),Eq(Ee)}),onBlur:Fe(t.onBlur,de=>{de.currentTarget.contains(de.target)||(window.clearTimeout(O.current),U.current="")}),onPointerMove:Fe(t.onPointerMove,Qh(de=>{const ie=de.target,J=ce.current!==de.clientX;if(de.currentTarget.contains(ie)&&J){const me=de.clientX>ce.current?"right":"left";W.current=me,ce.current=de.clientX}}))})})})})})})});Uk.displayName=Ci;var xq="MenuGroup",l_=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Je.div,{role:"group",...r,ref:e})});l_.displayName=xq;var vq="MenuLabel",$k=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Je.div,{...r,ref:e})});$k.displayName=vq;var Bp="MenuItem",k1="menu.itemSelect",Xg=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,o=_.useRef(null),u=Nf(Bp,t.__scopeMenu),d=a_(Bp,t.__scopeMenu),f=mt(e,o),p=_.useRef(!1),y=()=>{const g=o.current;if(!n&&g){const b=new CustomEvent(k1,{bubbles:!0,cancelable:!0});g.addEventListener(k1,E=>r?.(E),{once:!0}),ES(g,b),b.defaultPrevented?p.current=!1:u.onClose()}};return s.jsx(Hk,{...i,ref:f,disabled:n,onClick:Fe(t.onClick,y),onPointerDown:g=>{t.onPointerDown?.(g),p.current=!0},onPointerUp:Fe(t.onPointerUp,g=>{p.current||g.currentTarget?.click()}),onKeyDown:Fe(t.onKeyDown,g=>{const b=d.searchRef.current!=="";n||b&&g.key===" "||Gy.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Xg.displayName=Bp;var Hk=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=t,u=a_(Bp,n),d=Fk(n),f=_.useRef(null),p=mt(e,f),[y,g]=_.useState(!1),[b,E]=_.useState("");return _.useEffect(()=>{const N=f.current;N&&E((N.textContent??"").trim())},[o.children]),s.jsx(Yh.ItemSlot,{scope:n,disabled:r,textValue:i??b,children:s.jsx(Mw,{asChild:!0,...d,focusable:!r,children:s.jsx(Je.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:p,onPointerMove:Fe(t.onPointerMove,Qh(N=>{r?u.onItemLeave(N):(u.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(t.onPointerLeave,Qh(N=>u.onItemLeave(N))),onFocus:Fe(t.onFocus,()=>g(!0)),onBlur:Fe(t.onBlur,()=>g(!1))})})})}),yq="MenuCheckboxItem",Wk=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(Yk,{scope:t.__scopeMenu,checked:n,children:s.jsx(Xg,{role:"menuitemcheckbox","aria-checked":zp(n)?"mixed":n,...i,ref:e,"data-state":u_(n),onSelect:Fe(i.onSelect,()=>r?.(zp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Wk.displayName=yq;var qk="MenuRadioGroup",[wq,_q]=iu(qk,{value:void 0,onValueChange:()=>{}}),Gk=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,o=ls(r);return s.jsx(wq,{scope:t.__scopeMenu,value:n,onValueChange:o,children:s.jsx(l_,{...i,ref:e})})});Gk.displayName=qk;var Kk="MenuRadioItem",Zk=_.forwardRef((t,e)=>{const{value:n,...r}=t,i=_q(Kk,t.__scopeMenu),o=n===i.value;return s.jsx(Yk,{scope:t.__scopeMenu,checked:o,children:s.jsx(Xg,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":u_(o),onSelect:Fe(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Zk.displayName=Kk;var c_="MenuItemIndicator",[Yk,bq]=iu(c_,{checked:!1}),Qk=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,o=bq(c_,n);return s.jsx(rr,{present:r||zp(o.checked)||o.checked===!0,children:s.jsx(Je.span,{...i,ref:e,"data-state":u_(o.checked)})})});Qk.displayName=c_;var Nq="MenuSeparator",Xk=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Xk.displayName=Nq;var jq="MenuArrow",Jk=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Qg(n);return s.jsx(pA,{...i,...r,ref:e})});Jk.displayName=jq;var Cq="MenuSub",[ZK,eP]=iu(Cq),Ch="MenuSubTrigger",tP=_.forwardRef((t,e)=>{const n=au(Ch,t.__scopeMenu),r=Nf(Ch,t.__scopeMenu),i=eP(Ch,t.__scopeMenu),o=a_(Ch,t.__scopeMenu),u=_.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:f}=o,p={__scopeMenu:t.__scopeMenu},y=_.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return _.useEffect(()=>y,[y]),_.useEffect(()=>{const g=d.current;return()=>{window.clearTimeout(g),f(null)}},[d,f]),s.jsx(r_,{asChild:!0,...p,children:s.jsx(Hk,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":rP(n.open),...t,ref:Fo(e,i.onTriggerChange),onClick:g=>{t.onClick?.(g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Fe(t.onPointerMove,Qh(g=>{o.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!n.open&&!u.current&&(o.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),y()},100))})),onPointerLeave:Fe(t.onPointerLeave,Qh(g=>{y();const b=n.content?.getBoundingClientRect();if(b){const E=n.content?.dataset.side,N=E==="right",S=N?-5:5,k=b[N?"left":"right"],R=b[N?"right":"left"];o.onPointerGraceIntentChange({area:[{x:g.clientX+S,y:g.clientY},{x:k,y:b.top},{x:R,y:b.top},{x:R,y:b.bottom},{x:k,y:b.bottom}],side:E}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(g),g.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(t.onKeyDown,g=>{const b=o.searchRef.current!=="";t.disabled||b&&g.key===" "||iq[r.dir].includes(g.key)&&(n.onOpenChange(!0),n.content?.focus(),g.preventDefault())})})})});tP.displayName=Ch;var nP="MenuSubContent",sP=_.forwardRef((t,e)=>{const n=Bk(Ci,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=au(Ci,t.__scopeMenu),u=Nf(Ci,t.__scopeMenu),d=eP(nP,t.__scopeMenu),f=_.useRef(null),p=mt(e,f);return s.jsx(Yh.Provider,{scope:t.__scopeMenu,children:s.jsx(rr,{present:r||o.open,children:s.jsx(Yh.Slot,{scope:t.__scopeMenu,children:s.jsx(o_,{id:d.contentId,"aria-labelledby":d.triggerId,...i,ref:p,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{u.isUsingKeyboardRef.current&&f.current?.focus(),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:Fe(t.onFocusOutside,y=>{y.target!==d.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Fe(t.onEscapeKeyDown,y=>{u.onClose(),y.preventDefault()}),onKeyDown:Fe(t.onKeyDown,y=>{const g=y.currentTarget.contains(y.target),b=aq[u.dir].includes(y.key);g&&b&&(o.onOpenChange(!1),d.trigger?.focus(),y.preventDefault())})})})})})});sP.displayName=nP;function rP(t){return t?"open":"closed"}function zp(t){return t==="indeterminate"}function u_(t){return zp(t)?"indeterminate":t?"checked":"unchecked"}function Eq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Sq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Tq(t,e,n){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let u=Sq(t,Math.max(o,0));i.length===1&&(u=u.filter(p=>p!==n));const f=u.find(p=>p.toLowerCase().startsWith(i.toLowerCase()));return f!==n?f:void 0}function Aq(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,u=e.length-1;o<e.length;u=o++){const d=e[o],f=e[u],p=d.x,y=d.y,g=f.x,b=f.y;y>r!=b>r&&n<(g-p)*(r-y)/(b-y)+p&&(i=!i)}return i}function kq(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Aq(n,e)}function Qh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Pq=Vk,Iq=r_,Rq=zk,Lq=Uk,Mq=l_,Dq=$k,Oq=Xg,Fq=Wk,Vq=Gk,Bq=Zk,zq=Qk,Uq=Xk,$q=Jk,Hq=tP,Wq=sP,Jg="DropdownMenu",[qq]=ir(Jg,[Ok]),ar=Ok(),[Gq,iP]=qq(Jg),aP=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:u,modal:d=!0}=t,f=ar(e),p=_.useRef(null),[y,g]=Oa({prop:i,defaultProp:o??!1,onChange:u,caller:Jg});return s.jsx(Gq,{scope:e,triggerId:Ra(),triggerRef:p,contentId:Ra(),open:y,onOpenChange:g,onOpenToggle:_.useCallback(()=>g(b=>!b),[g]),modal:d,children:s.jsx(Pq,{...f,open:y,onOpenChange:g,dir:r,modal:d,children:n})})};aP.displayName=Jg;var oP="DropdownMenuTrigger",lP=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,o=iP(oP,n),u=ar(n);return s.jsx(Iq,{asChild:!0,...u,children:s.jsx(Je.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Fo(e,o.triggerRef),onPointerDown:Fe(t.onPointerDown,d=>{!r&&d.button===0&&d.ctrlKey===!1&&(o.onOpenToggle(),o.open||d.preventDefault())}),onKeyDown:Fe(t.onKeyDown,d=>{r||(["Enter"," "].includes(d.key)&&o.onOpenToggle(),d.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});lP.displayName=oP;var Kq="DropdownMenuPortal",cP=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ar(e);return s.jsx(Rq,{...r,...n})};cP.displayName=Kq;var uP="DropdownMenuContent",dP=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=iP(uP,n),o=ar(n),u=_.useRef(!1);return s.jsx(Lq,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:Fe(t.onCloseAutoFocus,d=>{u.current||i.triggerRef.current?.focus(),u.current=!1,d.preventDefault()}),onInteractOutside:Fe(t.onInteractOutside,d=>{const f=d.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,y=f.button===2||p;(!i.modal||y)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dP.displayName=uP;var Zq="DropdownMenuGroup",Yq=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Mq,{...i,...r,ref:e})});Yq.displayName=Zq;var Qq="DropdownMenuLabel",Xq=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Dq,{...i,...r,ref:e})});Xq.displayName=Qq;var Jq="DropdownMenuItem",hP=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Oq,{...i,...r,ref:e})});hP.displayName=Jq;var eG="DropdownMenuCheckboxItem",tG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Fq,{...i,...r,ref:e})});tG.displayName=eG;var nG="DropdownMenuRadioGroup",sG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Vq,{...i,...r,ref:e})});sG.displayName=nG;var rG="DropdownMenuRadioItem",iG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Bq,{...i,...r,ref:e})});iG.displayName=rG;var aG="DropdownMenuItemIndicator",oG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(zq,{...i,...r,ref:e})});oG.displayName=aG;var lG="DropdownMenuSeparator",cG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Uq,{...i,...r,ref:e})});cG.displayName=lG;var uG="DropdownMenuArrow",dG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx($q,{...i,...r,ref:e})});dG.displayName=uG;var hG="DropdownMenuSubTrigger",fG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Hq,{...i,...r,ref:e})});fG.displayName=hG;var mG="DropdownMenuSubContent",pG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ar(n);return s.jsx(Wq,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pG.displayName=mG;var gG=aP,xG=lP,vG=cP,yG=dP,wG=hP;function _G({...t}){return s.jsx(gG,{"data-slot":"dropdown-menu",...t})}function bG({...t}){return s.jsx(xG,{"data-slot":"dropdown-menu-trigger",...t})}function NG({className:t,sideOffset:e=4,...n}){return s.jsx(vG,{children:s.jsx(yG,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function jG({className:t,inset:e,variant:n="default",...r}){return s.jsx(wG,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:ft("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}const CG=t=>{switch(t){case"sending":return"";case"sent":return"";case"delivered":return"";case"read":return s.jsx("span",{className:"text-blue-500",children:""})}},EG=t=>{const n=new Date().getTime()-t.getTime(),r=Math.floor(n/36e5);if(r<1){const i=Math.floor(n/6e4);return i<1?"Just now":`${i}m ago`}else return r<24?`${r}h ago`:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};function SG({message:t,showAvatar:e}){return s.jsxs("div",{className:`flex ${t.isOwn?"justify-end":"justify-start"} items-end gap-2`,children:[e&&!t.isOwn&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm",children:t.senderAvatar}),s.jsxs("div",{className:`max-w-[70%] ${t.isOwn?"bg-[#C4A672] text-white":"bg-gray-100 text-gray-900"} rounded-2xl p-3`,children:[t.content&&s.jsx("p",{className:"text-sm",children:t.content}),t.images&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:t.images.map((n,r)=>s.jsx("img",{src:n,alt:"",className:"rounded-lg max-h-40 object-cover"},r))}),s.jsxs("div",{className:"flex justify-between items-center mt-1 text-xs opacity-70",children:[s.jsx("span",{children:EG(t.timestamp)}),t.isOwn&&s.jsx("span",{className:"ml-2",children:CG(t.status)})]})]}),e&&t.isOwn&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm",children:t.senderAvatar})]})}function TG({otherUser:t,bookContext:e,onBack:n,currentUserId:r}){const[i,o]=_.useState([]),[u,d]=_.useState(""),[f,p]=_.useState([]),[y,g]=_.useState(!1),[b,E]=_.useState(!1),N=_.useRef(null),S=_.useRef(null),k=[r,t.id].sort().join("_");_.useEffect(()=>{const F=Wt(lt(Te,"chats",k,"messages"),_s("timestamp","asc")),D=Yr(F,O=>{const U=O.docs.map($=>{const K=$.data();return{id:$.id,...K,timestamp:K.timestamp.toDate(),isOwn:K.senderId===r}});o(U)});return()=>D()},[k,r]);const R=()=>{E(!0),ue.success("Chat archived",{description:"This conversation has been moved to archives",action:{label:"Undo",onClick:()=>{E(!1),ue.info("Chat restored")}}})};_.useEffect(()=>{I()},[i]);const I=()=>{N.current?.scrollIntoView({behavior:"smooth"})},z=F=>{Array.from(F.target.files||[]).forEach(O=>{if(O.size>5*1024*1024){ue.error("Image size must be less than 5MB");return}const U=URL.createObjectURL(O);p($=>[...$,{file:O,preview:U}])})},H=F=>{p(D=>D.filter((O,U)=>U!==F))},G=async()=>{if(!(!u.trim()&&f.length===0))try{const F=[];for(const D of f)throw new Error("Cloudinary configuration missing");await Ns(lt(Te,"chats",k,"messages"),{senderId:r,senderName:"You",senderAvatar:"ME",content:u,images:F.length>0?F:void 0,timestamp:xn(),status:"sent"}),d(""),p([])}catch(F){ue.error("Failed to send message"),console.error(F)}},Q=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),G())};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-hidden",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] p-4 flex items-center justify-between text-white shadow-md",children:[s.jsxs("button",{onClick:n,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[s.jsx(zs,{className:"w-5 h-5"}),s.jsx("span",{children:"Back"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-xl",children:t.avatar}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg",children:t.name}),s.jsx("p",{className:"text-sm opacity-90",children:t.online?"Online":"Offline"})]})]}),s.jsxs(_G,{children:[s.jsx(bG,{asChild:!0,children:s.jsx(X,{variant:"ghost",className:"p-2 hover:bg-white/10",children:s.jsx(nS,{className:"w-5 h-5"})})}),s.jsx(NG,{align:"end",children:s.jsxs(jG,{onClick:R,children:[s.jsx(tS,{className:"w-4 h-4 mr-2"}),"Archive Chat"]})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-[#FAF8F3] to-white",children:s.jsxs("div",{className:"space-y-4",children:[i.map(F=>s.jsx(SG,{message:F,showAvatar:!0},F.id)),y&&s.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-bounce delay-100"}),s.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-bounce delay-200"})]})]}),s.jsx("div",{ref:N})]})}),s.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{ref:S,type:"file",accept:"image/*",multiple:!0,onChange:z,className:"hidden"}),s.jsx(X,{variant:"ghost",size:"sm",onClick:()=>S.current?.click(),className:"hover:bg-gray-100",children:s.jsx(md,{className:"w-5 h-5"})}),s.jsx(X,{variant:"ghost",size:"sm",className:"hover:bg-gray-100",children:s.jsx(XV,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ie,{value:u,onChange:F=>d(F.target.value),onKeyPress:Q,placeholder:"Type a message...",className:"pr-10"}),s.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(iS,{className:"w-5 h-5"})})]}),s.jsx(X,{onClick:G,disabled:!u.trim()&&f.length===0,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:s.jsx(Sp,{className:"w-5 h-5"})})]}),f.length>0&&s.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto",children:f.map((F,D)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:F.preview,alt:"Preview",className:"w-16 h-16 object-cover rounded"}),s.jsx("button",{onClick:()=>H(D),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:s.jsx(Dt,{className:"w-3 h-3"})})]},D))})]})]})})}function AG({announcement:t,onClose:e,onSave:n}){const[r,i]=_.useState({title:t?.title||"",content:t?.content||"",type:t?.type||"info",image:t?.image||null,date:t?.date||new Date,published:t?.published??!0}),[o,u]=_.useState({}),[d,f]=_.useState(!1),p=()=>{const E={};return r.title.trim()?r.title.length<5?E.title="Title must be at least 5 characters":r.title.length>100&&(E.title="Title must be less than 100 characters"):E.title="Title is required",r.content.trim()?r.content.length<20?E.content="Content must be at least 20 characters":r.content.length>2e3&&(E.content="Content must be less than 2000 characters"):E.content="Content is required",u(E),Object.keys(E).length===0},y=E=>{const N=E.target.files?.[0];if(N){if(N.size>5*1024*1024){ue.error("Image size must be less than 5MB");return}const S=new FileReader;S.onloadend=()=>{i(k=>({...k,image:S.result}))},S.readAsDataURL(N)}},g=async E=>{if(E.preventDefault(),!p()){ue.error("Please fix the errors before submitting");return}f(!0);try{const N={title:r.title,content:r.content,type:r.type,image:r.image,date:r.date,published:r.published,views:t?.views||0};t?(await $h(ht(Te,"announcements",t.id),N),ue.success("Announcement updated")):(await Ns(lt(Te,"announcements"),N),ue.success("Announcement created")),e()}catch(N){ue.error("Failed to save announcement"),console.error(N)}finally{f(!1)}},b=async()=>{if(t&&confirm("Are you sure you want to delete this announcement?"))try{await deleteDoc(ht(Te,"announcements",t.id)),ue.success("Announcement deleted"),e()}catch(E){ue.error("Failed to delete announcement"),console.error(E)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl my-8",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50]",children:t?"Edit Announcement":"Create Announcement"}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"title",className:"text-[#2C3E50] mb-2",children:"Title *"}),s.jsx(Ie,{id:"title",type:"text",value:r.title,onChange:E=>{i(N=>({...N,title:E.target.value})),u(N=>({...N,title:""}))},placeholder:"e.g., New Feature Launch!",className:o.title?"border-red-500":""}),o.title&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.title}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[r.title.length,"/100 characters"]})]}),s.jsxs("div",{children:[s.jsx(Ae,{className:"text-[#2C3E50] mb-2",children:"Type *"}),s.jsxs(vn,{value:r.type,onValueChange:E=>i(N=>({...N,type:E})),children:[s.jsx(wn,{children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"info",children:" Info - General information"}),s.jsx(Ve,{value:"promo",children:" Promo - Special offers & deals"}),s.jsx(Ve,{value:"update",children:" Update - Platform updates & features"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"content",className:"text-[#2C3E50] mb-2",children:"Content *"}),s.jsx(Ql,{id:"content",value:r.content,onChange:E=>{i(N=>({...N,content:E.target.value})),u(N=>({...N,content:""}))},placeholder:"Write the announcement content...",rows:6,className:o.content?"border-red-500":""}),o.content&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.content}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[r.content.length,"/2000 characters"]})]}),s.jsxs("div",{children:[s.jsx(Ae,{className:"text-[#2C3E50] mb-2",children:"Cover Image (Optional)"}),r.image?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:r.image,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>i(E=>({...E,image:null})),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:s.jsx(Dt,{className:"w-5 h-5"})})]}):s.jsxs("label",{className:"block w-full h-64 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#C4A672] transition-colors cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"}),s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[s.jsx(jg,{className:"w-12 h-12 mb-3"}),s.jsx("p",{className:"text-center",children:"Click to upload a cover image"}),s.jsx("p",{className:"text-xs mt-1",children:"Recommended: 1200x400px, Max 5MB"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"date",className:"text-[#2C3E50] mb-2",children:"Publication Date"}),s.jsx(Ie,{id:"date",type:"date",value:r.date.toISOString().split("T")[0],onChange:E=>i(N=>({...N,date:new Date(E.target.value)}))})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{id:"published",type:"checkbox",checked:r.published,onChange:E=>i(N=>({...N,published:E.target.checked})),className:"w-5 h-5 text-[#C4A672] border-gray-300 rounded focus:ring-[#C4A672]"}),s.jsx(Ae,{htmlFor:"published",className:"text-[#2C3E50] cursor-pointer",children:"Publish immediately (uncheck to save as draft)"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Preview:"}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:"text-2xl",children:[r.type==="info"&&"",r.type==="promo"&&"",r.type==="update"&&""]}),s.jsx("span",{className:"text-sm text-gray-500",children:r.date.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mb-2",children:r.title||"Announcement Title"}),s.jsx("p",{className:"text-gray-700",children:r.content||"Announcement content will appear here..."})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[s.jsx("div",{children:t&&s.jsx(X,{type:"button",variant:"outline",onClick:b,className:"text-red-600 hover:bg-red-50 border-red-200",children:"Delete Announcement"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{type:"button",variant:"outline",onClick:e,disabled:d,children:"Cancel"}),s.jsx(X,{type:"submit",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:d,children:d?"Saving...":t?"Update":"Create"})]})]})]})]})})}const kG=[{id:"1",title:" New Feature: Book Communities!",content:"We're excited to announce our new Communities feature! Join communities, discuss your favorite books, and connect with fellow readers. You can now create or join public and private communities, share posts, and engage in group chats. This is a major step forward in making BookBloom the ultimate platform for book lovers.",type:"update",image:"https://images.unsplash.com/photo-1512820790803-83ca734da794?w=1200&h=400&fit=crop",date:new Date("2024-11-14"),published:!0,views:1234},{id:"2",title:" Special Offer: 20% Off Textbooks",content:"Get 20% off all textbook purchases this week! Whether you're a student looking for course materials or just expanding your knowledge, now's the perfect time to save. Use code BOOKS20 at checkout. Offer valid until November 20th. Limited stock available on popular titles.",type:"promo",image:"https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=1200&h=400&fit=crop",date:new Date("2024-11-13"),published:!0,views:856},{id:"3",title:" Rental Period Extended",content:"Great news! All active rentals have been automatically extended by 7 days at no additional charge. We understand that sometimes you need a bit more time to finish a good book. This extension applies to all rentals active as of November 12th. Enjoy your reading!",type:"info",image:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=1200&h=400&fit=crop",date:new Date("2024-11-12"),published:!0,views:567},{id:"4",title:" Featured Genre: Science Fiction",content:`This month we're highlighting Science Fiction! Explore our curated collection of classic and modern sci-fi novels. From Asimov to Liu Cixin, discover worlds beyond imagination. Check out our featured communities like "Science Fiction Lovers" for discussions and recommendations.`,type:"info",image:"https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=1200&h=400&fit=crop",date:new Date("2024-11-10"),published:!0,views:432},{id:"5",title:" Referral Program Launch",content:"Invite your friends to BookBloom and earn rewards! For every friend who signs up and makes a purchase, you'll both receive a $10 credit. The more friends you refer, the more you save. Start sharing the love of reading today!",type:"promo",date:new Date("2024-11-08"),published:!0,views:298},{id:"6",title:" Platform Maintenance Scheduled",content:"We'll be performing routine maintenance on November 20th from 2 AM to 4 AM EST. The platform may be temporarily unavailable during this time. We apologize for any inconvenience and appreciate your patience as we work to improve your experience.",type:"info",date:new Date("2024-11-07"),published:!0,views:189}];function PG({isAdmin:t=!1,onBack:e}){const[n,r]=_.useState(kG),[i,o]=_.useState(""),[u,d]=_.useState("all"),[f,p]=_.useState(!1),[y,g]=_.useState(null),b=n.filter(H=>{const G=H.title.toLowerCase().includes(i.toLowerCase())||H.content.toLowerCase().includes(i.toLowerCase()),Q=u==="all"||H.type===u;return G&&Q}).sort((H,G)=>G.date.getTime()-H.date.getTime()),E=()=>{g(null),p(!0)},N=H=>{g(H),p(!0)},S=H=>{confirm("Are you sure you want to delete this announcement?")&&(r(G=>G.filter(Q=>Q.id!==H)),ue.success("Announcement deleted"))},k=H=>{if(y)r(G=>G.map(Q=>Q.id===y.id?{...Q,...H}:Q)),ue.success("Announcement updated");else{const G={...H,id:Date.now().toString(),views:0};r(Q=>[G,...Q]),ue.success("Announcement created")}p(!1),g(null)},R=H=>{r(Q=>Q.map(F=>F.id===H?{...F,published:!F.published}:F));const G=n.find(Q=>Q.id===H);ue.success(G?.published?"Announcement unpublished":"Announcement published")},I=H=>({info:"bg-blue-100 text-blue-700 border-blue-200",promo:"bg-yellow-100 text-yellow-700 border-yellow-200",update:"bg-green-100 text-green-700 border-green-200"})[H],z=H=>{switch(H){case"info":return"";case"promo":return"";case"update":return""}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 md:pb-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white py-12 shadow-card",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e&&s.jsxs(X,{variant:"ghost",onClick:e,className:"text-white hover:bg-white/10 mb-4 -ml-2",children:[s.jsx(zs,{className:"w-5 h-5 mr-2"}),"Back to Home"]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl mb-2",children:" Announcements"}),s.jsx("p",{className:"text-white/90",children:"Stay updated with the latest news and offers from Book Bloom"})]}),t&&s.jsxs(X,{onClick:E,size:"lg",className:"bg-white text-blue-600 hover:bg-gray-100 transition-smooth btn-scale shadow-subtle",children:[s.jsx(Ro,{className:"w-5 h-5 mr-2"}),"Create Announcement"]})]}),s.jsxs("div",{className:"flex gap-4 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 min-w-[300px]",children:[s.jsx($n,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Type to search announcements...",value:i,onChange:H=>o(H.target.value),className:"pl-12 pr-4 h-12 bg-white text-gray-900 border-2 border-white/20 focus:border-white focus-glow shadow-subtle"}),i&&s.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:[b.length," results"]})]}),s.jsxs(vn,{value:u,onValueChange:d,children:[s.jsx(wn,{className:"w-48 h-12 bg-white shadow-subtle",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All Types"}),s.jsx(Ve,{value:"info",children:" Info"}),s.jsx(Ve,{value:"promo",children:" Promo"}),s.jsx(Ve,{value:"update",children:" Update"})]})]})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 text-gray-600",children:[b.length," announcement",b.length!==1?"s":""," found"]}),s.jsxs("div",{className:"space-y-6",children:[b.map(H=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[H.image&&s.jsxs("div",{className:"relative h-48 bg-gray-100",children:[s.jsx("img",{src:H.image,alt:H.title,className:"w-full h-full object-cover"}),!H.published&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(Qe,{className:"bg-yellow-500 text-white",children:"Draft"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxs(Qe,{variant:"outline",className:I(H.type),children:[z(H.type)," ",H.type.charAt(0).toUpperCase()+H.type.slice(1)]}),s.jsx("span",{className:"text-sm text-gray-500",children:H.date.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}),t&&s.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[s.jsx(Qr,{className:"w-4 h-4"}),H.views.toLocaleString()," views"]})]}),s.jsx("h2",{className:"text-2xl text-[#2C3E50] mb-3",children:H.title}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:H.content})]}),t&&s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx(X,{variant:"outline",size:"sm",onClick:()=>N(H),children:s.jsx(Sy,{className:"w-4 h-4"})}),s.jsx(X,{variant:"outline",size:"sm",onClick:()=>S(H.id),className:"text-red-600 hover:bg-red-50 border-red-200",children:s.jsx(Wl,{className:"w-4 h-4"})})]})]}),t&&s.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-200",children:[s.jsx(X,{variant:"outline",size:"sm",onClick:()=>R(H.id),children:H.published?"Unpublish":"Publish"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["Status: ",H.published?s.jsx("span",{className:"text-green-600",children:"Published"}):s.jsx("span",{className:"text-yellow-600",children:"Draft"})]})]})]})]},H.id)),b.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx($l,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No announcements found"}),s.jsx("p",{className:"text-gray-500 mb-6",children:i||u!=="all"?"Try adjusting your search or filters":"No announcements have been posted yet"}),t&&s.jsxs(X,{onClick:E,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Create First Announcement"]})]})]})]}),f&&s.jsx(AG,{announcement:y,onClose:()=>{p(!1),g(null)},onSave:k})]})}function IG({onClose:t}){const e=[{id:"phone",title:"Call Us",description:"Speak with our support team",phone:"+1 (800) 555-BOOK",hours:"24/7 Available",icon:Hh,color:"bg-green-500"},{id:"voip",title:"In-App Call",description:"Free VoIP call via app",action:"Start VoIP Call",hours:"Mon-Fri: 9AM-6PM EST",icon:EV,color:"bg-blue-500"},{id:"video",title:"Video Support",description:"Screen share for technical help",action:"Schedule Video Call",hours:"Mon-Fri: 10AM-5PM EST",icon:Ay,color:"bg-purple-500"},{id:"chat",title:"Live Chat",description:"Chat with support agents",action:"Open Live Chat",hours:"24/7 Available",icon:sr,color:"bg-[#C4A672]"}],n=u=>{window.location.href=`tel:${u.replace(/\s/g,"")}`},r=()=>{alert(`Connecting to support via VoIP...

This would initiate an in-app voice call using WebRTC or similar technology.`)},i=()=>{alert(`Video Support

You would be redirected to schedule a video call with our technical support team.`)},o=()=>{t()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Kt,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white p-6 sticky top-0 z-10 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl mb-1",children:"Contact Support"}),s.jsx("p",{className:"text-white/90 text-sm",children:"We're here to help you"})]}),s.jsx("button",{onClick:t,className:"text-white/80 hover:text-white",children:s.jsx(Dt,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-green-800",children:"Support team is online"}),s.jsx("p",{className:"text-xs text-green-600",children:"Average response time: 2 minutes"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:e.map(u=>{const d=u.icon;return s.jsx(Kt,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-[#C4A672]",onClick:()=>{u.id==="phone"&&u.phone?n(u.phone):u.id==="voip"?r():u.id==="video"?i():u.id==="chat"&&o()},children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`w-12 h-12 ${u.color} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.jsx(d,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:u.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx(_g,{className:"w-3 h-3"}),s.jsx("span",{children:u.hours})]}),u.phone&&s.jsx("p",{className:"text-[#C4A672] mt-2",children:u.phone}),u.action&&s.jsx(Qe,{variant:"outline",className:"mt-2",children:u.action})]})]})},u.id)})}),s.jsx(Kt,{className:"p-6 bg-gray-50",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(su,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:"Email Support"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"For non-urgent inquiries or detailed questions"}),s.jsx("a",{href:"mailto:support@bookbloom.com",className:"text-[#C4A672] hover:underline text-sm",children:"support@bookbloom.com"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Response within 24 hours"})]})]})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Looking for quick answers? Check our FAQs first"}),s.jsx(X,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:"View FAQs"})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Emergency Contact"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"For urgent security or account issues:"}),s.jsxs(X,{onClick:()=>n("+1-800-555-9911"),className:"bg-red-600 hover:bg-red-700 text-white",children:[s.jsx(Hh,{className:"w-4 h-4 mr-2"}),"Emergency: +1 (800) 555-9911"]})]})]})]})})}function RG({onBack:t,onNavigateToCommunities:e}){const[n,r]=_.useState(!1),[i,o]=_.useState([{label:"Active Users",value:"50,000+",icon:Rn},{label:"Books Listed",value:"200,000+",icon:Wr},{label:"Communities",value:"500+",icon:ja},{label:"Transactions",value:"1M+",icon:oS}]);_.useEffect(()=>{(async()=>{})()},[]);const u=[{icon:Wr,title:"Accessibility",description:"We believe everyone should have access to books, whether through buying, renting, or community sharing."},{icon:Rn,title:"Community",description:"Building connections between book lovers through vibrant communities and meaningful conversations."},{icon:Lo,title:"Trust",description:"Safe and secure transactions with verified users and transparent communication channels."},{icon:zF,title:"Quality",description:"Curated marketplace ensuring high-quality books and authentic community interactions."}],d=[{name:"Sarah Johnson",role:"Founder & CEO",bio:"Book enthusiast with 15 years in tech"},{name:"Michael Chen",role:"Head of Community",bio:"Building connections through literature"},{name:"Emily Rodriguez",role:"Lead Developer",bio:"Creating seamless book experiences"},{name:"David Kim",role:"Operations Manager",bio:"Ensuring smooth transactions daily"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#F5F1E8] to-white",children:[s.jsxs("section",{className:"relative bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="1"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'}})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-20 relative",children:[s.jsx("button",{onClick:t,className:"mb-6 text-white/80 hover:text-white transition-colors flex items-center gap-2",children:" Back"}),s.jsx("h1",{className:"text-5xl md:text-6xl mb-6",children:"About BookBloom"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mb-8",children:"Connecting readers, building communities, and making books accessible to everyone through our innovative marketplace platform."}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx(X,{onClick:e,className:"bg-white text-[#C4A672] hover:bg-white/90",children:"Join Communities"}),s.jsx(X,{variant:"outline",className:"border-white text-white hover:bg-white/20",children:"Contact Us"})]})]})]}),s.jsx("section",{className:"py-16 px-6 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:i.map((f,p)=>{const y=f.icon;return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(y,{className:"w-8 h-8 text-white"})}),s.jsx("p",{className:"text-3xl text-[#2C3E50] mb-2",children:f.value}),s.jsx("p",{className:"text-gray-600",children:f.label})]},p)})})})}),s.jsx("section",{className:"py-20 px-6 bg-[#F5F1E8]",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-8 text-center",children:"Our Story"}),s.jsxs("div",{className:"space-y-6 text-gray-700 leading-relaxed",children:[s.jsx("p",{className:"text-lg",children:"BookBloom was born from a simple idea: books should be accessible to everyone, and readers should be able to connect with each other. In 2023, our founder Sarah Johnson recognized that many people had books sitting on shelves, while others were searching for affordable ways to access literature."}),s.jsx("p",{className:"text-lg",children:"We created BookBloom to solve this problem. Our platform enables users to buy, sell, and rent books while fostering vibrant communities where readers can discuss their favorite titles, share recommendations, and build lasting connections."}),s.jsx("p",{className:"text-lg",children:"Today, BookBloom has grown into a thriving marketplace with a large user base, numerous books listed, and active communities dedicated to every genre and interest imaginable. We're proud to have facilitated many transactions, making literature more accessible one book at a time."})]})]})}),s.jsx("section",{className:"py-20 px-6 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-4 text-center",children:"Our Values"}),s.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"The principles that guide everything we do at BookBloom"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:u.map((f,p)=>{const y=f.icon;return s.jsxs("div",{className:"bg-gradient-to-br from-[#F5F1E8] to-white rounded-2xl p-6 hover:shadow-xl transition-all duration-300 border border-[#C4A672]/20",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mb-4",children:s.jsx(y,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mb-3",children:f.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:f.description})]},p)})})]})}),s.jsx("section",{className:"py-20 px-6 bg-[#F5F1E8]",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-4 text-center",children:"Meet Our Team"}),s.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Passionate book lovers dedicated to making literature accessible"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:d.map((f,p)=>s.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center hover:shadow-xl transition-all duration-300",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-3xl text-white",children:f.name[0]})}),s.jsx("h3",{className:"text-xl text-[#2C3E50] mb-2",children:f.name}),s.jsx("p",{className:"text-[#C4A672] mb-3",children:f.role}),s.jsx("p",{className:"text-sm text-gray-600",children:f.bio})]},p))})]})}),s.jsx("section",{className:"py-20 px-6 bg-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-4xl text-[#2C3E50] mb-4 text-center",children:"Get In Touch"}),s.jsx("p",{className:"text-center text-gray-600 mb-12",children:"Have questions? We'd love to hear from you."}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[s.jsxs("div",{className:"text-center p-6 bg-[#F5F1E8] rounded-2xl",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(su,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-lg text-[#2C3E50] mb-2",children:"Email"}),s.jsx("p",{className:"text-gray-600",children:"support@bookbloom.com"})]}),s.jsxs("div",{className:"text-center p-6 bg-[#F5F1E8] rounded-2xl",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(Hh,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-lg text-[#2C3E50] mb-2",children:"Phone"}),s.jsx("p",{className:"text-gray-600",children:"+1 (555) 123-4567"})]}),s.jsxs("div",{className:"text-center p-6 bg-[#F5F1E8] rounded-2xl",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(Qn,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-lg text-[#2C3E50] mb-2",children:"Location"}),s.jsx("p",{className:"text-gray-600",children:"San Francisco, CA"})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs(X,{onClick:()=>r(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8 py-6 text-lg",children:[s.jsx(Hh,{className:"w-5 h-5 mr-2"}),"Contact Support"]})})]})}),s.jsx("section",{className:"py-20 px-6 bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("h2",{className:"text-4xl mb-6",children:"Ready to Start Your Journey?"}),s.jsx("p",{className:"text-xl text-white/90 mb-8",children:"Join thousands of readers in our vibrant book-loving community"}),s.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[s.jsx(X,{onClick:e,className:"bg-white text-[#C4A672] hover:bg-white/90 px-8 py-6 text-lg",children:"Explore Communities"}),s.jsx(X,{onClick:t,variant:"outline",className:"border-white text-white hover:bg-white/20 px-8 py-6 text-lg",children:"Browse Books"})]})]})}),n&&s.jsx(IG,{onClose:()=>r(!1)})]})}function LG({onBack:t,onNavigateToBook:e}){const[n,r]=_.useState(""),[i,o]=_.useState(!1),[u,d]=_.useState(!1),[f,p]=_.useState(""),[y,g]=_.useState([]),[b,E]=_.useState(!1),[N,S]=_.useState(!1),[k,R]=_.useState([0,100]),[I,z]=_.useState(""),[H,G]=_.useState(""),[Q,F]=_.useState(""),[D,O]=_.useState([]),[U,$]=_.useState(!1),K=async()=>{$(!0);try{let ne=Wt(lt(Te,"books"));n&&(ne=Wt(ne,Yn("title",">=",n),Yn("title","<=",n+""))),Q&&(ne=Wt(ne,Yn("category","==",Q))),H&&(ne=Wt(ne,Yn("condition","==",H))),ne=Wt(ne,Yn("price",">=",k[0]),Yn("price","<=",k[1])),I&&(ne=Wt(ne,Yn("location","==",I))),ne=Wt(ne,_s("title"),Pd(20));const Z=(await bs(ne)).docs.map(de=>({id:de.id,...de.data()}));O(Z)}catch(ne){ue.error("Search failed"),console.error(ne)}finally{$(!1)}};_.useEffect(()=>{K()},[n,k,I,H,Q]);const W=()=>{o(!0)},ce=()=>{S(!0),setTimeout(()=>{S(!1),r("Harry Potter"),o(!1)},2e3)},oe=()=>{if(!f.trim())return;const ne={role:"user",content:f},xe={role:"ai",content:`Based on "${f}", here are some recommendations:`,books:D.slice(0,2)};g([...y,ne,xe]),p("")};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white",children:[s.jsx("div",{className:"bg-[#C4A672] shadow-md",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-[#2C3E50] hover:text-[#1a252f]",children:[s.jsx(Dt,{className:"w-6 h-6"}),s.jsx("span",{children:"Close"})]}),s.jsx("h1",{className:"text-[#2C3E50] text-2xl",children:"Advanced Search"}),s.jsx("div",{className:"w-20"})," "]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs(Kt,{className:"p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-4 flex items-center gap-2",children:[s.jsx($n,{className:"w-5 h-5"}),"Search Books"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Title, author, ISBN...",value:n,onChange:ne=>r(ne.target.value),className:"pl-10 pr-10"}),s.jsx("button",{onClick:W,className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#C4A672] hover:text-[#8B7355]",children:s.jsx(Lv,{className:"w-5 h-5"})})]}),s.jsxs(X,{onClick:()=>d(!u),className:"w-full bg-gradient-to-r from-[#C4A672] to-[#8B7355] hover:from-[#8B7355] hover:to-[#C4A672] text-white",children:[s.jsx(Pv,{className:"w-5 h-5 mr-2"}),u?"Hide AI Assistant":"Ask AI Assistant"]}),s.jsxs(X,{onClick:()=>E(!b),variant:"outline",className:"w-full",children:[s.jsx(vw,{className:"w-5 h-5 mr-2"}),b?"Hide Filters":"Show Filters",s.jsx(wg,{className:`w-4 h-4 ml-auto transition-transform ${b?"rotate-180":""}`})]}),b&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-2 mb-2",children:[s.jsx(Io,{className:"w-4 h-4"}),"Price Range: $",k[0]," - $",k[1]]}),s.jsx(Yw,{value:k,onValueChange:R,max:100,step:5,className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-2 mb-2",children:[s.jsx(Hj,{className:"w-4 h-4"}),"Condition"]}),s.jsxs(vn,{value:H,onValueChange:G,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Any condition"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"new",children:"Brand New"}),s.jsx(Ve,{value:"like-new",children:"Like New"}),s.jsx(Ve,{value:"very-good",children:"Very Good"}),s.jsx(Ve,{value:"good",children:"Good"}),s.jsx(Ve,{value:"acceptable",children:"Acceptable"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-2 mb-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Location"]}),s.jsx(Ie,{type:"text",placeholder:"City or ZIP code",value:I,onChange:ne=>z(ne.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"Category"}),s.jsxs(vn,{value:Q,onValueChange:F,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"All categories"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"fiction",children:"Fiction"}),s.jsx(Ve,{value:"non-fiction",children:"Non-Fiction"}),s.jsx(Ve,{value:"science",children:"Science"}),s.jsx(Ve,{value:"fantasy",children:"Fantasy"}),s.jsx(Ve,{value:"classic",children:"Classic"}),s.jsx(Ve,{value:"textbook",children:"Textbooks"})]})]})]}),s.jsx(X,{onClick:()=>{R([0,100]),G(""),z(""),F("")},variant:"outline",className:"w-full",children:"Reset Filters"})]})]})]}),s.jsxs(Kt,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Popular Categories"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Qe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Fiction"}),s.jsx(Qe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Science"}),s.jsx(Qe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Business"}),s.jsx(Qe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Art"}),s.jsx(Qe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Textbooks"}),s.jsx(Qe,{variant:"outline",className:"cursor-pointer hover:bg-[#C4A672] hover:text-white",children:" Academic"})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u&&s.jsxs(Kt,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[#2C3E50] flex items-center gap-2",children:[s.jsx(Pv,{className:"w-6 h-6 text-[#C4A672]"}),"AI Book Assistant"]}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:y.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Pv,{className:"w-12 h-12 mx-auto mb-3 text-[#C4A672]"}),s.jsx("p",{className:"mb-2",children:"Ask me anything about books!"}),s.jsx("p",{className:"text-sm",children:'Try: "Suggest books like Harry Potter" or "Best science fiction books"'})]}):y.map((ne,xe)=>s.jsx("div",{children:ne.role==="user"?s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"bg-[#C4A672] text-white rounded-lg px-4 py-2 max-w-[80%]",children:ne.content})}):s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"bg-gray-100 text-gray-800 rounded-lg px-4 py-2 max-w-[80%]",children:[s.jsx("p",{className:"mb-2",children:ne.content}),ne.books&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3",children:ne.books.map(Z=>s.jsxs("div",{className:"bg-white rounded-lg p-3 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e?.(Z.id),children:[s.jsx(zc,{src:Z.image,alt:Z.title,className:"w-full h-32 object-cover rounded mb-2"}),s.jsx("p",{className:"text-sm text-[#2C3E50]",children:Z.title}),s.jsx("p",{className:"text-xs text-gray-500",children:Z.author}),s.jsxs("p",{className:"text-sm text-[#C4A672] mt-1",children:["$",Z.price]})]},Z.id))})]})})},xe))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{type:"text",placeholder:"Ask for book recommendations...",value:f,onChange:ne=>p(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&oe(),className:"flex-1"}),s.jsx(X,{onClick:oe,className:"bg-[#C4A672] hover:bg-[#8B7355]",children:"Send"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[#2C3E50] text-xl",children:["Search Results (",D.length,")"]}),s.jsxs(vn,{defaultValue:"relevance",children:[s.jsx(wn,{className:"w-40",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"relevance",children:"Relevance"}),s.jsx(Ve,{value:"price-low",children:"Price: Low to High"}),s.jsx(Ve,{value:"price-high",children:"Price: High to Low"}),s.jsx(Ve,{value:"newest",children:"Newest First"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:D.map(ne=>s.jsx(Kt,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e?.(ne.id),children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx(zc,{src:ne.image,alt:ne.title,className:"w-24 h-32 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-1",children:ne.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",ne.author]}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("p",{children:["ISBN: ",ne.isbn]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Qn,{className:"w-3 h-3"}),ne.location]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Hj,{className:"w-3 h-3"}),ne.condition]})]}),s.jsxs("p",{className:"text-[#C4A672] text-lg mt-2",children:["$",ne.price]})]})]})},ne.id))})]})]})]})}),i&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsx(Kt,{className:"w-full max-w-md p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:s.jsx(Dt,{className:"w-6 h-6"})}),s.jsx("div",{className:`w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center ${N?"bg-red-100 animate-pulse":"bg-[#C4A672]/20"}`,children:s.jsx(Lv,{className:`w-12 h-12 ${N?"text-red-500":"text-[#C4A672]"}`})}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:N?"Listening...":"Voice Search"}),s.jsx("p",{className:"text-gray-600 mb-6",children:N?"Speak now":"Tap the microphone to start"}),N?s.jsx("div",{className:"text-sm text-gray-500",children:"Transcribing your voice..."}):s.jsxs(X,{onClick:ce,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Lv,{className:"w-5 h-5 mr-2"}),"Start Recording"]})]})})})]})}function MG({onBack:t,onNavigateToMarketplace:e,onNavigateToBook:n}){const[r,i]=_.useState("buy"),o=[{id:"1",title:"The Hobbit",author:"J.R.R. Tolkien",price:14.99,condition:"Like New",available:!0,image:"https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400&q=80",addedDate:"2 days ago"},{id:"2",title:"Dune",author:"Frank Herbert",price:16.5,condition:"Very Good",available:!0,image:"https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&q=80",addedDate:"5 days ago"},{id:"3",title:"1984",author:"George Orwell",price:11.99,condition:"Good",available:!1,image:"https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400&q=80",addedDate:"1 week ago"}],u=[{id:"4",title:"To Kill a Mockingbird",author:"Harper Lee",price:5.99,duration:"2 weeks",available:!0,image:"https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400&q=80",addedDate:"3 days ago"},{id:"5",title:"The Great Gatsby",author:"F. Scott Fitzgerald",price:4.99,duration:"2 weeks",available:!0,image:"https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400&q=80",addedDate:"1 week ago"}],d=[{id:"r1",title:"Lord of the Rings",author:"J.R.R. Tolkien",price:24.99,image:"https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?w=400&q=80",reason:"Because you liked The Hobbit"},{id:"r2",title:"Foundation",author:"Isaac Asimov",price:15.99,image:"https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&q=80",reason:"Similar to Dune"}],f=g=>{console.log("Remove item:",g)},p=g=>{console.log("Add to cart:",g)},y=r==="buy"?o:u;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-8",children:[s.jsx("div",{className:"bg-[#C4A672] shadow-md",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-[#2C3E50] hover:text-[#1a252f]",children:[s.jsx(zs,{className:"w-5 h-5"}),s.jsx("span",{children:"Back"})]}),s.jsxs("h1",{className:"text-[#2C3E50] text-2xl flex items-center gap-2",children:[s.jsx(ja,{className:"w-7 h-7 text-red-500 fill-red-500"}),"My Wishlist"]}),s.jsx(X,{onClick:e,variant:"outline",className:"border-[#2C3E50] text-[#2C3E50] hover:bg-[#2C3E50] hover:text-white",children:"Browse Books"})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs(Lk,{value:r,onValueChange:g=>i(g),className:"mb-8",children:[s.jsxs(Mk,{className:"grid w-full max-w-md mx-auto grid-cols-2",children:[s.jsxs(Fp,{value:"buy",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:["Buy (",o.length,")"]}),s.jsxs(Fp,{value:"rent",className:"data-[state=active]:bg-[#C4A672] data-[state=active]:text-white",children:["Rent (",u.length,")"]})]}),s.jsx(Vp,{value:"buy",className:"mt-8",children:o.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(g=>s.jsxs(Kt,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zc,{src:g.image,alt:g.title,className:"w-full h-56 object-cover"}),!g.available&&s.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:s.jsx(Qe,{variant:"destructive",className:"text-lg",children:"Not Available"})}),s.jsx("button",{onClick:()=>f(g.id),className:"absolute top-2 right-2 bg-white/90 hover:bg-white rounded-full p-2 shadow-md",children:s.jsx(Dt,{className:"w-4 h-4 text-red-500"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:g.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",g.author]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",g.price.toFixed(2)]}),s.jsx(Qe,{variant:"outline",children:g.condition})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Added ",g.addedDate]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(X,{onClick:()=>n?.(g.id),variant:"outline",className:"flex-1",disabled:!g.available,children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"View"]}),g.available&&s.jsxs(X,{onClick:()=>p(g.id),className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ng,{className:"w-4 h-4 mr-2"}),"Buy Now"]})]})]})]},g.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(ja,{className:"w-20 h-20 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:"No books in your buy wishlist"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding books you want to purchase"}),s.jsx(X,{onClick:e,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Browse Books"})]})}),s.jsx(Vp,{value:"rent",className:"mt-8",children:u.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(g=>s.jsxs(Kt,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zc,{src:g.image,alt:g.title,className:"w-full h-56 object-cover"}),!g.available&&s.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:s.jsx(Qe,{variant:"destructive",className:"text-lg",children:"Not Available"})}),s.jsx("button",{onClick:()=>f(g.id),className:"absolute top-2 right-2 bg-white/90 hover:bg-white rounded-full p-2 shadow-md",children:s.jsx(Dt,{className:"w-4 h-4 text-red-500"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:g.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",g.author]}),s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("span",{className:"text-[#C4A672] text-xl",children:["$",g.price.toFixed(2),"/",g.duration]})}),s.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Added ",g.addedDate]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(X,{onClick:()=>n?.(g.id),variant:"outline",className:"flex-1",disabled:!g.available,children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"View"]}),g.available&&s.jsx(X,{onClick:()=>p(g.id),className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Rent Now"})]})]})]},g.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(ja,{className:"w-20 h-20 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-2",children:"No books in your rent wishlist"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding books you want to rent"}),s.jsx(X,{onClick:e,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Browse Books"})]})})]}),y.length>0&&s.jsxs("div",{className:"mt-12",children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl mb-6",children:"Recommended For You"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(g=>s.jsxs(Kt,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n?.(g.id),children:[s.jsx(zc,{src:g.image,alt:g.title,className:"w-full h-56 object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-1",children:g.title}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",g.author]}),s.jsx("p",{className:"text-xs text-gray-500 italic mb-2",children:g.reason}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",g.price]}),s.jsx(X,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600",children:s.jsx(ja,{className:"w-5 h-5"})})]})]})]},g.id))})]})]})]})}function DG({onBack:t,isLoggedIn:e}){const[n,r]=_.useState(""),[i,o]=_.useState("all"),[u,d]=_.useState(!1),[f,p]=_.useState({subject:"",specialization:"",hourlyRate:"",experience:"",availability:"Available",bio:""}),[y]=Kl(lt(Te,"tutors")),g=y?.docs.map(k=>({id:k.id,...k.data()}))||[],b=async()=>{if(!gt.currentUser){ue.error("Please login to become a tutor");return}try{await Ns(lt(Te,"tutors"),{userId:gt.currentUser.uid,name:gt.currentUser.displayName||"Anonymous",avatar:gt.currentUser.photoURL||"",subject:f.subject,specialization:f.specialization,hourlyRate:parseFloat(f.hourlyRate),experience:f.experience,availability:f.availability,bio:f.bio,rating:0,reviews:0,students:0,verified:!1,createdAt:xn()}),ue.success("Tutor profile created successfully!"),d(!1)}catch(k){console.error(k),ue.error("Failed to create profile")}},E=g.filter(k=>{const R=k.name?.toLowerCase().includes(n.toLowerCase())||k.subject?.toLowerCase().includes(n.toLowerCase()),I=i==="all"||k.subject?.toLowerCase().includes(i);return R&&I}),N=[{id:"s1",tutor:"Dr. Sarah Johnson",subject:"Calculus II",date:"Today",time:"3:00 PM - 4:00 PM",type:"Live Session"},{id:"s2",tutor:"Prof. Michael Chen",subject:"Quantum Mechanics",date:"Tomorrow",time:"2:00 PM - 3:30 PM",type:"Live Session"}],S=[{id:"all",label:"All Subjects",icon:Wr},{id:"math",label:"Mathematics",icon:Rv},{id:"science",label:"Science",icon:Wr},{id:"english",label:"English",icon:Wr},{id:"cs",label:"Computer Science",icon:Wr}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#FAF8F3] to-white pb-20 md:pb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#C4A672] to-[#8B7355] text-white shadow-md",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-white/90 hover:text-white mb-4",children:[s.jsx(zs,{className:"w-5 h-5"}),s.jsx("span",{children:"Back"})]}),s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:s.jsx(Rv,{className:"w-10 h-10"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl mb-2",children:"Online Tuition Hub"}),s.jsx("p",{className:"text-white/90",children:"Connect with expert tutors for personalized learning"})]})]}),s.jsxs("div",{className:"relative max-w-2xl",children:[s.jsx($n,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by subject, tutor name, or topic...",value:n,onChange:k=>r(k.target.value),className:"pl-12 h-14 bg-white border-0"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx(Rv,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"500+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Expert Tutors"})]}),s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx(Rn,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"10K+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Students"})]}),s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx(Wr,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"50+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Subjects"})]}),s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx(Gc,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("div",{className:"text-2xl text-[#2C3E50] mb-1",children:"4.8"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]}),e&&N.length>0&&s.jsxs(Kt,{className:"p-6 mb-8 bg-gradient-to-r from-[#C4A672]/10 to-transparent",children:[s.jsxs("h3",{className:"text-[#2C3E50] text-xl mb-4 flex items-center gap-2",children:[s.jsx(Ar,{className:"w-6 h-6 text-[#C4A672]"}),"Your Upcoming Sessions"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(k=>s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"w-12 h-12 bg-[#C4A672] rounded-lg flex items-center justify-center",children:s.jsx(Ay,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50]",children:k.subject}),s.jsxs("p",{className:"text-sm text-gray-600",children:["with ",k.tutor]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[k.date,"  ",k.time]})]}),s.jsx(X,{size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355]",children:"Join"})]},k.id))})]}),s.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2",children:S.map(k=>{const R=k.icon;return s.jsxs(X,{onClick:()=>o(k.id),variant:i===k.id?"default":"outline",className:i===k.id?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:[s.jsx(R,{className:"w-4 h-4 mr-2"}),k.label]},k.id)})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-[#2C3E50] text-2xl",children:["Available Tutors (",g.length,")"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(jo,{open:u,onOpenChange:d,children:[s.jsx(hk,{asChild:!0,children:s.jsx(X,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Become a Tutor"})}),s.jsxs(Ma,{className:"sm:max-w-[425px]",children:[s.jsx(Zl,{children:s.jsx(Yl,{children:"Register as a Tutor"})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"subject",children:"Subject"}),s.jsx(Ie,{id:"subject",value:f.subject,onChange:k=>p({...f,subject:k.target.value}),placeholder:"e.g. Mathematics"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"specialization",children:"Specialization"}),s.jsx(Ie,{id:"specialization",value:f.specialization,onChange:k=>p({...f,specialization:k.target.value}),placeholder:"e.g. Calculus"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"rate",children:"Hourly Rate ($)"}),s.jsx(Ie,{id:"rate",type:"number",value:f.hourlyRate,onChange:k=>p({...f,hourlyRate:k.target.value}),placeholder:"45"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"experience",children:"Experience"}),s.jsx(Ie,{id:"experience",value:f.experience,onChange:k=>p({...f,experience:k.target.value}),placeholder:"e.g. 5 years"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"bio",children:"Bio"}),s.jsx(Ql,{id:"bio",value:f.bio,onChange:k=>p({...f,bio:k.target.value}),placeholder:"Tell students about yourself..."})]}),s.jsx(X,{onClick:b,className:"bg-[#C4A672] text-white",children:"Submit Application"})]})]})]}),s.jsxs(X,{variant:"outline",children:[s.jsx(vw,{className:"w-4 h-4 mr-2"}),"Filters"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(k=>s.jsx(Kt,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zc,{src:k.avatar,alt:k.name,className:"w-16 h-16 rounded-full object-cover"}),k.verified&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:s.jsx("span",{className:"text-white text-xs",children:""})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2C3E50]",children:k.name}),s.jsx("p",{className:"text-sm text-gray-600",children:k.subject}),s.jsx(Qe,{variant:k.availability==="Available"?"default":"secondary",className:"mt-1",children:k.availability})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:k.specialization}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 text-yellow-500 mb-1",children:[s.jsx(Gc,{className:"w-4 h-4 fill-yellow-500"}),s.jsx("span",{className:"text-sm text-[#2C3E50]",children:k.rating})]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[k.reviews," reviews"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[s.jsx(Rn,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-sm text-[#2C3E50]",children:k.students})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"students"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[s.jsx(_g,{className:"w-4 h-4 text-[#C4A672]"}),s.jsx("span",{className:"text-sm text-[#2C3E50]",children:k.experience})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"experience"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Starting at"}),s.jsxs("p",{className:"text-[#C4A672] text-xl",children:["$",k.hourlyRate,"/hr"]})]}),s.jsx(X,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:!e,children:e?"Book Session":"Login to Book"})]})]})},k.id))})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl text-center mb-8",children:"How It Works"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-[#C4A672]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx($n,{className:"w-8 h-8 text-[#C4A672]"})}),s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"1. Find Your Tutor"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Browse through our verified tutors and find the perfect match for your learning needs"})]}),s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-[#C4A672]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ar,{className:"w-8 h-8 text-[#C4A672]"})}),s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"2. Book a Session"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Schedule a convenient time slot and choose between one-on-one or group sessions"})]}),s.jsxs(Kt,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-[#C4A672]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ay,{className:"w-8 h-8 text-[#C4A672]"})}),s.jsx("h3",{className:"text-[#2C3E50] mb-2",children:"3. Start Learning"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Join live video sessions and get personalized guidance from expert tutors"})]})]})]})]})]})}function OG({title:t,author:e="BookBloom",pages:n=1,onClose:r,downloadable:i=!0,fileUrl:o}){const[u,d]=_.useState(1),[f,p]=_.useState(100),y=()=>{f<200&&p(f+25)},g=()=>{f>50&&p(f-25)},b=()=>{o?window.open(o,"_blank"):alert("No file URL provided")},E=()=>{window.print()};return s.jsxs("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-50",children:[s.jsx("div",{className:"bg-[#1E1E1E] border-b border-gray-700 px-6 py-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Cp,{className:"w-8 h-8 text-[#C4A672]"}),s.jsxs("div",{className:"text-white",children:[s.jsx("h2",{className:"text-xl",children:t}),s.jsxs("p",{className:"text-sm text-gray-400",children:["by ",e]})]}),s.jsx(Qe,{variant:"outline",className:"border-gray-600 text-gray-300",children:"PDF Document"})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:s.jsx(Dt,{className:"w-6 h-6"})})]})}),s.jsx("div",{className:"bg-[#2A2A2A] border-b border-gray-700 px-6 py-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(X,{variant:"ghost",size:"sm",onClick:g,disabled:f<=50,className:"text-white hover:bg-gray-700",children:s.jsx(F7,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-white text-sm w-16 text-center",children:[f,"%"]}),s.jsx(X,{variant:"ghost",size:"sm",onClick:y,disabled:f>=200,className:"text-white hover:bg-gray-700",children:s.jsx(D7,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(X,{variant:"ghost",size:"sm",onClick:E,className:"text-white hover:bg-gray-700",children:[s.jsx(s7,{className:"w-4 h-4 mr-2"}),"Print"]}),i&&s.jsxs(X,{onClick:b,size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(gf,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-hidden bg-gray-800 relative",children:o?s.jsx("iframe",{src:o,className:"w-full h-full border-0",title:"PDF Viewer"}):s.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"No PDF URL provided"})}),s.jsx("div",{className:"bg-[#1E1E1E] border-t border-gray-700 px-6 py-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-sm text-gray-400",children:[s.jsx("div",{className:"flex items-center gap-6",children:s.jsx("span",{children:"Format: PDF"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Document loaded successfully"})]})]})})]})}function FG(){const t=Jn(),[e,n]=_.useState(""),[r,i]=_.useState(null),[o,u]=_.useState(!1),[d,f]=_.useState({title:"",subject:"",description:"",file:null}),[p,y]=Kl(Wt(lt(Te,"notes"),_s("createdAt","desc"))),g=p?.docs.map(S=>({id:S.id,...S.data()}))||[],b=S=>{if(S.target.files&&S.target.files[0]){const k=S.target.files[0];if(k.type!=="application/pdf"){ue.error("Only PDF files are allowed");return}f({...d,file:k})}},E=async()=>{if(!gt.currentUser){ue.error("Please login to upload notes");return}if(!d.file||!d.title||!d.subject){ue.error("Please fill in all fields");return}try{const S=QO(sF,`notes/${gt.currentUser.uid}/${Date.now()}-${d.file.name}`);await ZO(S,d.file);const k=await YO(S);await Ns(lt(Te,"notes"),{title:d.title,subject:d.subject,description:d.description,authorName:gt.currentUser.displayName||"Anonymous",authorId:gt.currentUser.uid,fileUrl:k,fileType:"pdf",createdAt:xn(),downloads:0,views:0}),ue.success("Notes uploaded successfully!"),u(!1),f({title:"",subject:"",description:"",file:null})}catch(S){console.error(S),ue.error("Failed to upload notes")}},N=g.filter(S=>S.title.toLowerCase().includes(e.toLowerCase())||S.subject.toLowerCase().includes(e.toLowerCase()));return s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 md:pb-8",children:[s.jsx("div",{className:"bg-[#2C3E50] text-white shadow-md",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-white/90 hover:text-white mb-4",children:[s.jsx(zs,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Home"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl mb-2 flex items-center gap-3",children:[s.jsx(Cp,{className:"w-8 h-8 text-[#C4A672]"}),"Notes Sharing Hub"]}),s.jsx("p",{className:"text-white/80",children:"Share and discover study materials"})]}),s.jsxs(jo,{open:o,onOpenChange:u,children:[s.jsx(hk,{asChild:!0,children:s.jsxs(X,{className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(jg,{className:"w-4 h-4 mr-2"}),"Upload Notes"]})}),s.jsxs(Ma,{children:[s.jsx(Zl,{children:s.jsx(Yl,{children:"Upload Study Notes (PDF)"})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"title",children:"Title"}),s.jsx(Ie,{id:"title",value:d.title,onChange:S=>f({...d,title:S.target.value}),placeholder:"e.g. Calculus Chapter 1"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"subject",children:"Subject"}),s.jsx(Ie,{id:"subject",value:d.subject,onChange:S=>f({...d,subject:S.target.value}),placeholder:"e.g. Mathematics"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"description",children:"Description"}),s.jsx(Ie,{id:"description",value:d.description,onChange:S=>f({...d,description:S.target.value}),placeholder:"Brief description of contents"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ae,{htmlFor:"file",children:"PDF File"}),s.jsx(Ie,{id:"file",type:"file",accept:".pdf",onChange:b})]}),s.jsx(X,{onClick:E,className:"bg-[#C4A672] text-white",children:"Upload"})]})]})]})]}),s.jsxs("div",{className:"mt-6 relative max-w-2xl",children:[s.jsx($n,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search notes by title or subject...",value:e,onChange:S=>n(S.target.value),className:"pl-12 h-12 bg-white/10 border-white/20 text-white placeholder:text-white/50 focus:bg-white/20"})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:y?s.jsx("div",{children:"Loading notes..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(S=>s.jsxs(Kt,{className:"hover:shadow-lg transition-shadow p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(Cp,{className:"w-6 h-6 text-red-500"})}),s.jsx(Qe,{variant:"outline",children:S.subject})]}),s.jsx("h3",{className:"text-lg font-semibold text-[#2C3E50] mb-2",children:S.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:S.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("span",{children:["By ",S.authorName]}),s.jsx("span",{children:new Date(S.createdAt?.toDate()).toLocaleDateString()})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(X,{className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800",onClick:()=>i(S),children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"View"]}),s.jsxs(X,{variant:"outline",className:"flex-1",onClick:()=>window.open(S.fileUrl,"_blank"),children:[s.jsx(gf,{className:"w-4 h-4 mr-2"}),"Download"]})]})]},S.id))})}),r&&s.jsx(OG,{title:r.title,author:r.authorName,fileUrl:r.fileUrl,onClose:()=>i(null)})]})}function VG({orderId:t="ORD123456",estimatedDelivery:e="Jan 18, 2024",onClose:n,onBack:r}){const[i]=_.useState([{id:1,title:"Order Confirmed",description:"Your order has been placed successfully",timestamp:"2024-01-15 10:30 AM",status:"completed",icon:Ni},{id:2,title:"Package Prepared",description:"Seller is preparing your package",timestamp:"2024-01-15 02:45 PM",status:"completed",icon:ji},{id:3,title:"Out for Delivery",description:"Package is on the way to your location",timestamp:"2024-01-16 09:00 AM",status:"active",icon:pd,location:"Distribution Center, Main Street"},{id:4,title:"Delivered",description:"Package will be delivered to your address",timestamp:"Expected: "+e,status:"pending",icon:Qn}]),[o]=_.useState({name:"Express Logistics",phone:"+1 (555) 123-4567",email:"support@expresslogistics.com",trackingNumber:"EXP"+Math.random().toString(36).substr(2,9).toUpperCase()});return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[r&&s.jsx(X,{variant:"ghost",size:"icon",onClick:r,className:"text-gray-500 hover:text-gray-700",children:s.jsx(Tl,{className:"w-5 h-5 rotate-180"})}),s.jsx("h2",{className:"text-2xl font-semibold text-[#2C3E50]",children:"Order Tracking"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(_g,{className:"w-4 h-4 mr-1 text-gray-400"}),"Estimated Delivery: ",s.jsx("span",{className:"font-medium ml-1",children:e})]}),s.jsx(X,{variant:"outline",onClick:n,className:"text-gray-500 hover:text-gray-700",children:"Close"})]})]}),s.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6 flex-grow",children:[s.jsxs(Kt,{className:"lg:col-span-2 p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-6",children:"Shipping Timeline"}),s.jsx("div",{className:"space-y-6",children:i.map((u,d)=>{const f=u.icon,p=u.status==="completed",y=u.status==="active";return u.status,s.jsxs("div",{className:"relative",children:[d<i.length-1&&s.jsx("div",{className:`absolute left-5 top-12 w-0.5 h-full ${p?"bg-[#C4A672]":"bg-gray-200"}`}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${p?"bg-[#C4A672] text-white":y?"bg-blue-500 text-white animate-pulse":"bg-gray-200 text-gray-400"}`,children:s.jsx(f,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 pb-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsx("h4",{className:`${p||y?"text-[#2C3E50]":"text-gray-400"}`,children:u.title}),y&&s.jsx(Qe,{variant:"outline",className:"text-blue-600 border-blue-600",children:"In Progress"})]}),s.jsx("p",{className:`text-sm mb-1 ${p||y?"text-gray-600":"text-gray-400"}`,children:u.description}),s.jsx("p",{className:"text-xs text-gray-500",children:u.timestamp}),u.location&&y&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-blue-600",children:[s.jsx(Qn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Current Location: ",u.location]})]})]})]})]},u.id)})})]}),s.jsxs(Kt,{className:"p-6 mt-6",children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl mb-4",children:"Live Tracking Map"}),s.jsx("div",{className:"bg-gray-100 rounded-lg overflow-hidden",style:{height:"300px"},children:s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50"}),s.jsx("svg",{className:"absolute inset-0 w-full h-full",children:s.jsx("path",{d:"M 50 250 Q 150 200, 250 150 T 450 50",stroke:"#C4A672",strokeWidth:"3",strokeDasharray:"10,5",fill:"none",className:"animate-pulse"})}),s.jsx("div",{className:"absolute left-12 bottom-12 w-8 h-8 bg-[#C4A672] rounded-full flex items-center justify-center shadow-lg",children:s.jsx(ji,{className:"w-4 h-4 text-white"})}),s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:s.jsx(pd,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"absolute right-12 top-12 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(Qn,{className:"w-4 h-4 text-white"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-4 text-center",children:[s.jsx(Qn,{className:"w-8 h-8 mx-auto mb-2 text-[#C4A672]"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Live tracking map"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Updates every 30 minutes"})]})})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Kt,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Courier Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Courier Service"}),s.jsx("p",{className:"text-[#2C3E50]",children:o.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tracking Number"}),s.jsx("p",{className:"text-[#2C3E50] font-mono text-sm",children:o.trackingNumber})]}),s.jsxs("div",{className:"pt-4 border-t space-y-3",children:[s.jsxs(X,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href=`tel:${o.phone}`,children:[s.jsx(Hh,{className:"w-4 h-4 mr-2"}),o.phone]}),s.jsxs(X,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href=`mailto:${o.email}`,children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Contact Support"]})]})]})]}),s.jsxs(Kt,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Delivery Address"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-[#2C3E50]",children:"John Doe"}),s.jsx("p",{className:"text-gray-600",children:"123 Main Street, Apt 4B"}),s.jsx("p",{className:"text-gray-600",children:"New York, NY 10001"}),s.jsx("p",{className:"text-gray-600",children:"United States"})]})]}),s.jsxs(Kt,{className:"p-6",children:[s.jsx("h3",{className:"text-[#2C3E50] mb-4",children:"Need Help?"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(X,{variant:"outline",className:"w-full justify-between",children:["Report an Issue",s.jsx(Tl,{className:"w-4 h-4"})]}),s.jsxs(X,{variant:"outline",className:"w-full justify-between",children:["Change Address",s.jsx(Tl,{className:"w-4 h-4"})]}),s.jsxs(X,{variant:"outline",className:"w-full justify-between",children:["Delivery Instructions",s.jsx(Tl,{className:"w-4 h-4"})]})]})]})]})]})})}function BG({onClose:t,onSuccess:e}){const[n,r]=_.useState({current:"",new:"",confirm:""}),[i,o]=_.useState({}),[u,d]=_.useState({current:!1,new:!1,confirm:!1}),[f,p]=_.useState(!1),y=E=>{d(N=>({...N,[E]:!N[E]}))},g=()=>{const E={};return n.current||(E.current="Current password is required"),n.new||(E.new="New password is required"),n.new&&n.new.length<8&&(E.new="Password must be at least 8 characters"),n.new!==n.confirm&&(E.confirm="Passwords do not match"),o(E),Object.keys(E).length===0},b=async E=>{if(E.preventDefault(),!!g()){p(!0);try{const N=gt.currentUser;if(!N||!N.email)throw new Error("No user logged in");const S=tc.credential(N.email,n.current);await O2(N,S),await B2(N,n.new),ue.success("Password updated successfully"),t(),e&&e()}catch(N){let S="Failed to update password";N.code==="auth/wrong-password"?S="Incorrect current password":N.code==="auth/weak-password"&&(S="New password is too weak"),o({current:S}),console.error(N)}finally{p(!1)}}};return s.jsx(jo,{open:!0,onOpenChange:t,children:s.jsxs(Ma,{className:"max-w-md",children:[s.jsxs(Zl,{children:[s.jsxs(Yl,{className:"text-2xl text-[#2C3E50] flex items-center gap-2",children:[s.jsx(Fs,{className:"w-6 h-6"}),"Change Password"]}),s.jsx(Al,{children:"Enter your current password and choose a new one"})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"current",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"current",type:u.current?"text":"password",value:n.current,onChange:E=>r({...n,current:E.target.value}),className:i.current?"border-red-500 pr-10":"pr-10"}),s.jsx("button",{type:"button",onClick:()=>y("current"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u.current?s.jsx(Xu,{className:"w-4 h-4"}):s.jsx(Qr,{className:"w-4 h-4"})})]}),i.current&&s.jsx("p",{className:"text-sm text-red-500",children:i.current})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"new",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"new",type:u.new?"text":"password",value:n.new,onChange:E=>r({...n,new:E.target.value}),className:i.new?"border-red-500 pr-10":"pr-10"}),s.jsx("button",{type:"button",onClick:()=>y("new"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u.new?s.jsx(Xu,{className:"w-4 h-4"}):s.jsx(Qr,{className:"w-4 h-4"})})]}),i.new&&s.jsx("p",{className:"text-sm text-red-500",children:i.new}),s.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"confirm",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"confirm",type:u.confirm?"text":"password",value:n.confirm,onChange:E=>r({...n,confirm:E.target.value}),className:i.confirm?"border-red-500 pr-10":"pr-10"}),s.jsx("button",{type:"button",onClick:()=>y("confirm"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u.confirm?s.jsx(Xu,{className:"w-4 h-4"}):s.jsx(Qr,{className:"w-4 h-4"})})]}),i.confirm&&s.jsx("p",{className:"text-sm text-red-500",children:i.confirm})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(X,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:f,children:"Cancel"}),s.jsx(X,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:f,children:f?"Updating...":"Update Password"})]})]})]})})}function zG({onClose:t}){const[e,n]=_.useState(""),[r,i]=_.useState(!1),[o,u]=_.useState(!1),d=async()=>{if(e==="DELETE"&&r){u(!0);try{const f=gt.currentUser;if(!f)throw new Error("No user logged in");await Po(ht(Te,"users",f.uid)),await $2(f),ue.success("Account deleted successfully"),t()}catch(f){f.code==="auth/requires-recent-login"?ue.error("Please log out and log in again to delete account"):ue.error("Failed to delete account"),console.error(f)}finally{u(!1)}}};return s.jsx(jo,{open:!0,onOpenChange:t,children:s.jsxs(Ma,{className:"max-w-md",children:[s.jsxs(Zl,{children:[s.jsxs(Yl,{className:"text-2xl text-red-600 flex items-center gap-2",children:[s.jsx(xw,{className:"w-6 h-6"}),"Delete Account"]}),s.jsx(Al,{children:"This action cannot be undone"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-red-900 mb-2",children:"Warning"}),s.jsx("p",{className:"text-sm text-red-800",children:"Deleting your account will permanently remove:"}),s.jsxs("ul",{className:"text-sm text-red-800 list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"All your book listings"}),s.jsx("li",{children:"Purchase and rental history"}),s.jsx("li",{children:"Saved payment methods"}),s.jsx("li",{children:"Wishlist and favorites"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"confirm",children:'Type "DELETE" to confirm'}),s.jsx(Ie,{id:"confirm",value:e,onChange:f=>n(f.target.value),placeholder:"DELETE"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Md,{id:"understood",checked:r,onCheckedChange:f=>i(f===!0)}),s.jsx(Ae,{htmlFor:"understood",className:"text-sm cursor-pointer",children:"I understand that this action is permanent and cannot be reversed"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(X,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:o,children:"Cancel"}),s.jsx(X,{onClick:d,disabled:e!=="DELETE"||!r||o,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:o?"Deleting...":"Delete Account"})]})]})]})})}var UG=Symbol("radix.slottable");function $G(t){const e=({children:n})=>s.jsx(s.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=UG,e}var fP="AlertDialog",[HG]=ir(fP,[JS]),Vo=JS(),mP=t=>{const{__scopeAlertDialog:e,...n}=t,r=Vo(e);return s.jsx(kw,{...r,...n,modal:!0})};mP.displayName=fP;var WG="AlertDialogTrigger",qG=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vo(n);return s.jsx(Pw,{...i,...r,ref:e})});qG.displayName=WG;var GG="AlertDialogPortal",pP=t=>{const{__scopeAlertDialog:e,...n}=t,r=Vo(e);return s.jsx(Iw,{...r,...n})};pP.displayName=GG;var KG="AlertDialogOverlay",gP=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vo(n);return s.jsx(Lg,{...i,...r,ref:e})});gP.displayName=KG;var td="AlertDialogContent",[ZG,YG]=HG(td),QG=$G("AlertDialogContent"),xP=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,o=Vo(n),u=_.useRef(null),d=mt(e,u),f=_.useRef(null);return s.jsx(Tz,{contentName:td,titleName:vP,docsSlug:"alert-dialog",children:s.jsx(ZG,{scope:n,cancelRef:f,children:s.jsxs(Mg,{role:"alertdialog",...o,...i,ref:d,onOpenAutoFocus:Fe(i.onOpenAutoFocus,p=>{p.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[s.jsx(QG,{children:r}),s.jsx(JG,{contentRef:u})]})})})});xP.displayName=td;var vP="AlertDialogTitle",yP=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vo(n);return s.jsx(Rw,{...i,...r,ref:e})});yP.displayName=vP;var wP="AlertDialogDescription",_P=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vo(n);return s.jsx(pT,{...i,...r,ref:e})});_P.displayName=wP;var XG="AlertDialogAction",bP=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vo(n);return s.jsx(Dg,{...i,...r,ref:e})});bP.displayName=XG;var NP="AlertDialogCancel",jP=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=YG(NP,n),o=Vo(n),u=mt(e,i);return s.jsx(Dg,{...o,...r,ref:u})});jP.displayName=NP;var JG=({contentRef:t})=>{const e=`\`${td}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${td}\` by passing a \`${wP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${td}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},eK=mP,tK=pP,nK=gP,sK=xP,rK=bP,iK=jP,aK=yP,oK=_P;function lK({...t}){return s.jsx(eK,{"data-slot":"alert-dialog",...t})}function cK({...t}){return s.jsx(tK,{"data-slot":"alert-dialog-portal",...t})}function uK({className:t,...e}){return s.jsx(nK,{"data-slot":"alert-dialog-overlay",className:ft("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function dK({className:t,...e}){return s.jsxs(cK,{children:[s.jsx(uK,{}),s.jsx(sK,{"data-slot":"alert-dialog-content",className:ft("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function hK({className:t,...e}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:ft("flex flex-col gap-2 text-center sm:text-left",t),...e})}function fK({className:t,...e}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:ft("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function mK({className:t,...e}){return s.jsx(aK,{"data-slot":"alert-dialog-title",className:ft("text-lg font-semibold",t),...e})}function pK({className:t,...e}){return s.jsx(oK,{"data-slot":"alert-dialog-description",className:ft("text-muted-foreground text-sm",t),...e})}function gK({className:t,...e}){return s.jsx(rK,{className:ft(_w(),t),...e})}function xK({className:t,...e}){return s.jsx(iK,{className:ft(_w({variant:"outline"}),t),...e})}function vK(){const[t,e]=_.useState(!1),[n,r]=_.useState(!1),[i,o]=_.useState(!1),[u,d]=_.useState(!1),f=gt.currentUser,[p,y,g]=ak(f?ht(Te,"users",f.uid):null,{snapshotListenOptions:{includeMetadataChanges:!0}}),[b,E]=_.useState({name:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",paymentMethod:""}),{onPasswordChangeSuccess:N}=QI()||{},S=Jn();_.useEffect(()=>{if(p&&p.exists()){const I=p.data();E(z=>({...z,...I,name:I.displayName||z.name,email:I.email||z.email}))}},[p]);const k=async()=>{if(f)try{await un(ht(Te,"users",f.uid),{...b,displayName:b.name}),e(!1),ue.success("Profile updated successfully!",{description:"Your changes have been saved."})}catch(I){ue.error("Failed to update profile"),console.error(I)}},R=()=>{d(!1),S("/admin/login")};return y?s.jsx("div",{children:"Loading profile..."}):g?s.jsxs("div",{children:["Error loading profile: ",g.message]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 bg-[#C4A672] rounded-full flex items-center justify-center text-white text-2xl",children:b.name?b.name.charAt(0):"U"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[#2C3E50] text-2xl",children:b.name||"User"}),s.jsx("p",{className:"text-gray-600",children:b.email}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Member since 2024"}),s.jsx("span",{className:"text-sm text-gray-500",children:""}),s.jsx("span",{className:"text-sm text-green-600",children:"Verified Account"})]})]})]}),!t&&s.jsx(X,{onClick:()=>e(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Edit Profile"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(qh,{className:"w-5 h-5"}),"Personal Information"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"name",children:"Full Name"}),s.jsx(Ie,{id:"name",value:b.name,onChange:I=>E({...b,name:I.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Ie,{id:"phone",value:b.phone,onChange:I=>E({...b,phone:I.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"email",children:"Email Address"}),s.jsx(Ie,{id:"email",type:"email",value:b.email,onChange:I=>E({...b,email:I.target.value}),disabled:!t})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5"}),"Location"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"address",children:"Street Address"}),s.jsx(Ie,{id:"address",value:b.address,onChange:I=>E({...b,address:I.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"city",children:"City"}),s.jsx(Ie,{id:"city",value:b.city,onChange:I=>E({...b,city:I.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"state",children:"State"}),s.jsx(Ie,{id:"state",value:b.state,onChange:I=>E({...b,state:I.target.value}),disabled:!t})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"zipCode",children:"ZIP Code"}),s.jsx(Ie,{id:"zipCode",value:b.zipCode,onChange:I=>E({...b,zipCode:I.target.value}),disabled:!t})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(hd,{className:"w-5 h-5"}),"Payment Methods"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hd,{className:"w-6 h-6 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:"Visa ending in 1234"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Expires 12/25"})]})]}),s.jsx(X,{variant:"outline",size:"sm",children:"Manage"})]}),s.jsx(X,{variant:"outline",className:"w-full",children:"Add Payment Method"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-[#2C3E50] mb-6 flex items-center gap-2",children:[s.jsx(Fs,{className:"w-5 h-5"}),"Security & Access"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(X,{variant:"outline",onClick:()=>r(!0),className:"w-full justify-start hover:bg-[#FAF8F3] transition-colors",children:[s.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Change Password"]}),s.jsx(qr,{}),s.jsxs(X,{variant:"outline",onClick:()=>d(!0),className:"w-full justify-start hover:bg-blue-50 border-blue-200 text-blue-700 transition-colors",children:[s.jsx(Lo,{className:"w-4 h-4 mr-2"}),"Login as Admin"]}),s.jsx(qr,{}),s.jsxs(X,{variant:"outline",onClick:()=>o(!0),className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors",children:[s.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})]}),t&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{variant:"outline",onClick:()=>e(!1),className:"flex-1",children:"Cancel"}),s.jsxs(X,{onClick:k,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(sS,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]}),n&&s.jsx(BG,{onClose:()=>r(!1),onSuccess:()=>{r(!1),N&&N()}}),i&&s.jsx(zG,{onClose:()=>o(!1)}),s.jsx(lK,{open:u,onOpenChange:d,children:s.jsxs(dK,{className:"bg-white",children:[s.jsxs(hK,{children:[s.jsxs(mK,{className:"flex items-center gap-2 text-[#2C3E50]",children:[s.jsx(Lo,{className:"w-5 h-5 text-blue-600"}),"Switch to Admin Portal"]}),s.jsx(pK,{className:"text-gray-600",children:"You are about to switch to the Admin Portal. You will be redirected to the admin login page. This action is only available to users with administrative privileges."})]}),s.jsxs(fK,{children:[s.jsx(xK,{className:"hover:bg-gray-100",children:"Cancel"}),s.jsx(gK,{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Continue to Admin Login"})]})]})})]})}function yK(){const[t,e]=Bg(gt),[n,r,i]=Kl(t?Wt(lt(Te,"purchases"),Yn("userId","==",t.uid),_s("date","desc")):null),o=d=>{switch(d){case"completed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};if(e||r)return s.jsx("div",{children:"Loading..."});if(i)return s.jsxs("div",{children:["Error: ",i.message]});const u=n?.docs.map(d=>({id:d.id,...d.data()}))||[];return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl",children:"Purchase History"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"View all your book purchases"})]}),s.jsxs(X,{variant:"outline",children:[s.jsx(gf,{className:"w-4 h-4 mr-2"}),"Export"]})]}),s.jsxs("div",{className:"space-y-4",children:[u.map(d=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-[#2C3E50]",children:d.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",d.author]})]}),s.jsx(Qe,{className:o(d.status),children:d.status})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["Order #",d.id]}),s.jsx("span",{children:""}),s.jsx("span",{children:new Date(d.date).toLocaleDateString()}),s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",d.price.toFixed(2)]})]})]},d.id)),u.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No purchase history found."})})]})]})})}function wK(){const[t,e]=Bg(gt),[n,r,i]=Kl(t?Wt(lt(Te,"sales"),Yn("sellerId","==",t.uid),_s("date","desc")):null);if(e||r)return s.jsx("div",{children:"Loading..."});if(i)return s.jsxs("div",{children:["Error: ",i.message]});const o=n?.docs.map(d=>({id:d.id,...d.data()}))||[],u=o.filter(d=>d.status==="sold").reduce((d,f)=>d+f.price,0);return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl",children:"Sales History"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Track your book sales and earnings"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Total Earnings"}),s.jsxs("p",{className:"text-2xl text-[#C4A672]",children:["$",u.toFixed(2)]})]})]}),s.jsxs("div",{className:"space-y-4",children:[o.map(d=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-2",children:d.bookTitle}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["Sold to: ",d.buyerName]}),s.jsx("span",{children:""}),s.jsx("span",{children:new Date(d.date).toLocaleDateString()}),s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",d.price.toFixed(2)]})]})]}),s.jsx(Qe,{className:"bg-green-100 text-green-800",children:d.status})]})},d.id)),o.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Io,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"No sales history"})]})]})]})})}function _K(){const[t,e]=Bg(gt),[n,r,i]=Kl(t?Wt(lt(Te,"rentals"),Yn("renterId","==",t.uid),_s("startDate","desc")):null);if(e||r)return s.jsx("div",{children:"Loading..."});if(i)return s.jsxs("div",{children:["Error: ",i.message]});const o=n?.docs.map(f=>({id:f.id,...f.data()}))||[],u=o.filter(f=>f.status==="active"),d=o.filter(f=>f.status!=="active");return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50] text-xl",children:"Rental History"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your active and past rentals"})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Active Rentals"}),s.jsxs("div",{className:"space-y-4",children:[u.map(f=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-[#2C3E50]",children:f.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",f.author]})]}),s.jsx(Qe,{className:"bg-green-100 text-green-800",children:"Active"})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",new Date(f.dueDate).toLocaleDateString()]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(X,{size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(i7,{className:"w-4 h-4 mr-2"}),"Renew"]}),s.jsx(X,{size:"sm",variant:"outline",children:"Return Book"})]})]},f.id)),u.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-4",children:"No active rentals"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Past Rentals"}),s.jsxs("div",{className:"space-y-3",children:[d.map(f=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-[#2C3E50]",children:f.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",f.author]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-2",children:[s.jsxs("span",{children:["Rented: ",new Date(f.startDate).toLocaleDateString()," - ",new Date(f.dueDate).toLocaleDateString()]}),s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#C4A672]",children:["$",f.price.toFixed(2)]})]})]}),s.jsx(Qe,{className:"bg-gray-100 text-gray-800",children:f.status})]})},f.id)),d.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-4",children:"No past rentals"})]})]})]})})}function bK({onNavigateToMarketplace:t}){const[e,n]=_.useState([]),[r,i]=_.useState(!0),o=gt.currentUser;_.useEffect(()=>{if(!o)return;(async()=>{i(!0);try{const f=Wt(lt(Te,"wishlists"),Yn("userId","==",o.uid)),y=(await bs(f)).docs.map(g=>({id:g.id,...g.data()}));n(y)}catch(f){ue.error("Failed to fetch wishlist"),console.error(f)}finally{i(!1)}})()},[o]);const u=async d=>{try{await Po(ht(Te,"wishlists",d)),n(f=>f.filter(p=>p.id!==d)),ue.success("Removed from wishlist")}catch(f){ue.error("Failed to remove"),console.error(f)}};return r?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[#2C3E50] text-xl flex items-center gap-2",children:[s.jsx(ja,{className:"w-6 h-6 text-red-500 fill-red-500"}),"My Wishlist"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Books you want to read"})]}),s.jsx(X,{onClick:t,variant:"outline",children:"Browse More Books"})]}),e.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(d=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[#2C3E50]",children:d.title}),s.jsxs("p",{className:"text-sm text-gray-600",children:["by ",d.author]}),s.jsxs("p",{className:"text-[#C4A672] text-lg mt-2",children:["$",d.price.toFixed(2)]})]}),s.jsx("button",{onClick:()=>u(d.id),className:"text-gray-400 hover:text-red-500",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),d.available&&s.jsxs(X,{className:"w-full bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ng,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]},d.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ja,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Your wishlist is empty"}),s.jsx(X,{onClick:t,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Start Adding Books"})]})]})})}function NK({onNavigateToCommunity:t,onNavigateToCreate:e}){const[n,r]=_.useState(""),[i,o]=_.useState("all"),[u,d]=_.useState([]),[f,p]=_.useState([]),[y,g]=_.useState(!0),b=gt.currentUser;_.useEffect(()=>{(async()=>{g(!0);try{if(b){const I=Wt(lt(Te,"communities"),Yn("members","array-contains",b.uid)),H=(await bs(I)).docs.map(G=>({id:G.id,...G.data()}));d(H)}const S=Wt(lt(Te,"communities"),limit(5)),R=(await bs(S)).docs.map(I=>({id:I.id,...I.data()}));p(R)}catch(S){ue.error("Failed to fetch communities"),console.error(S)}finally{g(!1)}})()},[b]);const E=u.filter(N=>{const S=N.name.toLowerCase().includes(n.toLowerCase())||N.description.toLowerCase().includes(n.toLowerCase()),k=i==="all"||i==="created"&&N.role==="admin"||i==="joined"&&N.role==="member";return S&&k});return y?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50] mb-2",children:"My Communities"}),s.jsx("p",{className:"text-gray-600",children:"Connect with fellow book lovers"})]}),s.jsxs(X,{onClick:e,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Create Community"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{placeholder:"Search communities...",value:n,onChange:N=>r(N.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(X,{variant:i==="all"?"default":"outline",onClick:()=>o("all"),className:i==="all"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:"All"}),s.jsx(X,{variant:i==="joined"?"default":"outline",onClick:()=>o("joined"),className:i==="joined"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:"Joined"}),s.jsx(X,{variant:i==="created"?"default":"outline",onClick:()=>o("created"),className:i==="created"?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:"Created"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg text-[#2C3E50]",children:["Joined Communities (",E.length,")"]}),E.length===0?s.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[s.jsx(Rn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No communities found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your search or filters"})]}):s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:E.map(N=>s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 hover:border-[#C4A672] transition-all hover:shadow-lg cursor-pointer overflow-hidden",onClick:()=>t?.(N.id),children:s.jsxs("div",{className:"flex gap-4 p-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl overflow-hidden",children:s.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"})}),N.unreadMessages>0&&s.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:N.unreadMessages})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"text-[#2C3E50] truncate",children:N.name}),s.jsx(Qe,{variant:N.role==="admin"?"default":"secondary",className:N.role==="admin"?"bg-[#C4A672]":"",children:N.role==="admin"?"Admin":"Member"})]}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:N.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{children:N.members.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"w-4 h-4"}),s.jsx("span",{children:N.posts})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),s.jsx("span",{children:N.lastActive})]})]})]})]})},N.id))})]}),i==="all"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg text-[#2C3E50]",children:"Suggested for You"}),s.jsx(X,{variant:"ghost",className:"text-[#C4A672] hover:text-[#8B7355]",children:"View All"})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:f.map(N=>s.jsx("div",{className:"bg-gradient-to-br from-[#F5F1E8] to-white rounded-xl p-4 hover:shadow-lg transition-all border border-[#C4A672]/20",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#C4A672] to-[#8B7355] rounded-xl overflow-hidden flex-shrink-0",children:s.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-1 truncate",children:N.name}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:N.description}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{children:N.members.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(oS,{className:"w-4 h-4"}),s.jsx("span",{children:N.posts})]})]}),s.jsx(X,{size:"sm",className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",onClick:S=>{S.stopPropagation(),t?.(N.id)},children:"Join"})]})]})]})},N.id))})]})]})}function jK({onOpenChat:t}){const[e,n]=_.useState(""),[r,i]=_.useState("all"),[o,u]=_.useState([]),[d,f]=_.useState([]),[p,y]=_.useState([]),[g,b]=_.useState(0),[E,N]=_.useState(!0),S=gt.currentUser;_.useEffect(()=>{if(!S)return;(async()=>{N(!0);try{const I=Wt(lt(Te,"privateChats"),Yn("participants","array-contains",S.uid),_s("lastMessageTimestamp","desc")),H=(await bs(I)).docs.map(U=>({id:U.id,...U.data()}));u(H);const G=Wt(lt(Te,"groups"),Yn("members","array-contains",S.uid),_s("lastMessageTimestamp","desc")),F=(await bs(G)).docs.map(U=>({id:U.id,...U.data()}));f(F);const D=[...H.map(U=>({...U,type:"private"})),...F.map(U=>({...U,type:"group"}))].sort((U,$)=>$.lastMessageTimestamp?.toDate().getTime()-U.lastMessageTimestamp?.toDate().getTime());y(D);const O=D.reduce((U,$)=>U+($.unreadCount||0),0);b(O)}catch(I){ue.error("Failed to fetch chats"),console.error(I)}finally{N(!1)}})()},[S]);const k=p.filter(R=>{const I=R.name.toLowerCase().includes(e.toLowerCase())||R.lastMessage.toLowerCase().includes(e.toLowerCase()),z=r==="all"||r==="private"&&R.type==="private"||r==="groups"&&R.type==="group";return I&&z});return E?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl text-[#2C3E50] mb-2",children:"Messages"}),s.jsx("p",{className:"text-gray-600",children:g>0?`${g} unread message${g>1?"s":""}`:"All caught up!"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(X,{variant:"outline",size:"sm",children:[s.jsx(tS,{className:"w-4 h-4 mr-2"}),"Archived"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{placeholder:"Search messages...",value:e,onChange:R=>n(R.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 border-b-2 transition-colors ${r==="all"?"border-[#C4A672] text-[#C4A672]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["All (",p.length,")"]}),s.jsxs("button",{onClick:()=>i("private"),className:`px-4 py-2 border-b-2 transition-colors ${r==="private"?"border-[#C4A672] text-[#C4A672]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Private (",o.length,")"]}),s.jsxs("button",{onClick:()=>i("groups"),className:`px-4 py-2 border-b-2 transition-colors ${r==="groups"?"border-[#C4A672] text-[#C4A672]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Groups (",d.length,")"]})]}),s.jsx("div",{className:"space-y-2",children:k.length===0?s.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[s.jsx(sr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No messages found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your search"})]}):k.map(R=>s.jsx("div",{onClick:()=>t?.(R.id,R.type),className:`bg-white rounded-xl border border-gray-200 p-4 hover:border-[#C4A672] hover:shadow-md transition-all cursor-pointer ${R.unread>0?"bg-[#F5F1E8]/30":""}`,children:s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-gradient-to-br from-[#C4A672] to-[#8B7355]",children:s.jsx("img",{src:R.avatar,alt:R.name,className:"w-full h-full object-cover"})}),R.type==="private"&&"online"in R&&R.online&&s.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-white"}),R.type==="group"&&s.jsx("div",{className:"absolute bottom-0 right-0 w-5 h-5 bg-[#2C3E50] rounded-full flex items-center justify-center border-2 border-white",children:s.jsx(Rn,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h4",{className:`text-[#2C3E50] truncate ${R.unread>0?"font-semibold":""}`,children:R.name}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(_g,{className:"w-3 h-3"}),R.timestamp]}),R.unread>0&&s.jsx(Qe,{className:"bg-[#C4A672] hover:bg-[#C4A672]",children:R.unread})]})]}),s.jsx("p",{className:`text-sm text-gray-600 line-clamp-1 mb-2 ${R.unread>0?"font-medium":""}`,children:R.lastMessage}),R.type==="private"&&"bookContext"in R&&R.bookContext&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Qe,{variant:"outline",className:"text-xs",children:[s.jsx(sr,{className:"w-3 h-3 mr-1"}),R.bookContext]})}),R.type==="group"&&"members"in R&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx(Rn,{className:"w-3 h-3"}),s.jsxs("span",{children:[R.members.toLocaleString()," members"]})]})]})]})},R.id))}),k.length>0&&s.jsx("div",{className:"bg-gradient-to-r from-[#F5F1E8] to-white rounded-xl p-4 border border-[#C4A672]/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[#2C3E50] mb-1",children:"Keep your conversations organized"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Star important chats and archive old ones"})]}),s.jsxs(X,{variant:"outline",size:"sm",children:[s.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Favorites"]})]})})]})}function P1({request:t,isIncoming:e}){const n=Jn(),[r,i]=_.useState(!1),o=p=>{switch(p){case"pending":return s.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Pending"});case"chatting":return s.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"Chatting"});case"accepted":return s.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Accepted"});case"rejected":return s.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"Rejected"});case"completed":return s.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:"Completed"});default:return null}},u=async()=>{if(confirm("Are you sure you want to accept this exchange? This may mark both books as unavailable.")){i(!0);try{await un(ht(Te,"exchanges",t.id),{status:"accepted",updatedAt:xn()}),ue.success("Exchange accepted!")}catch{ue.error("Failed to accept exchange")}finally{i(!1)}}},d=async()=>{const p=prompt("Please provide a reason for rejection:");if(p!==null){i(!0);try{await un(ht(Te,"exchanges",t.id),{status:"rejected",rejectionReason:p||"No reason provided",updatedAt:xn()}),ue.success("Exchange rejected.")}catch{ue.error("Failed to reject exchange")}finally{i(!1)}}},f=()=>{n("/chat",{state:{otherUser:{id:e?t.requesterId:t.ownerId,name:e?t.requesterName:t.ownerName,avatar:e?t.requesterAvatar:"",online:!1},bookContext:{id:t.requestedBookId,title:t.requestedBookTitle,price:0,image:t.requestedBookImage}}})};return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[o(t.status),s.jsx("span",{className:"text-xs text-gray-500",children:e?`From ${t.requesterName}`:`To ${t.ownerName}`})]}),s.jsx("span",{className:"text-xs text-gray-400",children:t.createdAt?.toDate?t.createdAt.toDate().toLocaleDateString():"Just now"})]}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:e?"Your Book":"Requested"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("img",{src:t.requestedBookImage,className:"w-12 h-16 object-cover rounded shadow-sm",alt:""}),s.jsx("div",{className:"min-w-0",children:s.jsx("p",{className:"font-medium text-sm truncate",children:t.requestedBookTitle})})]})]}),s.jsx("div",{className:"text-gray-300",children:s.jsx(pw,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 text-right",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:e?"Offered":"Your Offer"}),s.jsxs("div",{className:"flex gap-2 flex-row-reverse",children:[s.jsx("img",{src:t.offeredBookImage,className:"w-12 h-16 object-cover rounded shadow-sm",alt:""}),s.jsx("div",{className:"min-w-0 text-right",children:s.jsx("p",{className:"font-medium text-sm truncate",children:t.offeredBookTitle})})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[e&&t.status==="pending"?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(X,{size:"sm",onClick:u,disabled:r,className:"bg-green-600 hover:bg-green-700 text-white h-8",children:[s.jsx(Hl,{className:"w-4 h-4 mr-1"})," Accept"]}),s.jsxs(X,{size:"sm",onClick:d,disabled:r,variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50 h-8",children:[s.jsx(Dt,{className:"w-4 h-4 mr-1"})," Decline"]}),s.jsx(X,{size:"sm",variant:"ghost",onClick:f,className:"text-gray-600 h-8",children:s.jsx(sr,{className:"w-4 h-4"})})]}):s.jsx("div",{className:"flex gap-2",children:(t.status==="pending"||t.status==="chatting"||t.status==="accepted")&&s.jsxs(X,{size:"sm",variant:"outline",onClick:f,className:"text-[#C4A672] border-[#C4A672] h-8",children:[s.jsx(sr,{className:"w-4 h-4 mr-2"}),"Chat"]})}),t.status==="rejected"&&t.rejectionReason&&s.jsxs("span",{className:"text-xs text-red-500 italic",children:['" ',t.rejectionReason,' "']})]})]})}function CK(){const[t,e]=_.useState("incoming"),n=gt.currentUser?.uid,[r,i]=Kl(n?Wt(lt(Te,"exchanges"),Yn("ownerId","==",n),_s("createdAt","desc")):null),[o,u]=Kl(n?Wt(lt(Te,"exchanges"),Yn("requesterId","==",n),_s("createdAt","desc")):null),d=r?.docs.map(p=>({id:p.id,...p.data()}))||[],f=o?.docs.map(p=>({id:p.id,...p.data()}))||[];return n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(pw,{className:"w-6 h-6 text-[#C4A672]"}),s.jsx("h2",{className:"text-2xl font-semibold text-[#2C3E50]",children:"My Exchanges"})]}),s.jsxs("div",{className:"flex gap-4 border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>e("incoming"),className:`pb-3 px-1 font-medium text-sm transition-colors relative ${t==="incoming"?"text-[#C4A672] border-b-2 border-[#C4A672]":"text-gray-500 hover:text-gray-700"}`,children:["Incoming Requests",d.length>0&&s.jsx("span",{className:"ml-2 bg-red-100 text-red-600 px-2 py-0.5 rounded-full text-xs",children:d.filter(p=>p.status==="pending").length||d.length})]}),s.jsx("button",{onClick:()=>e("sent"),className:`pb-3 px-1 font-medium text-sm transition-colors relative ${t==="sent"?"text-[#C4A672] border-b-2 border-[#C4A672]":"text-gray-500 hover:text-gray-700"}`,children:"Sent Requests"})]}),s.jsx("div",{className:"min-h-[300px]",children:t==="incoming"?s.jsx("div",{className:"space-y-4",children:i?s.jsx("div",{className:"flex justify-center p-8",children:s.jsx(Cy,{className:"animate-spin text-[#C4A672]"})}):d.length===0?s.jsx("div",{className:"text-center p-8 text-gray-500 border border-dashed rounded-lg",children:"No incoming exchange requests."}):d.map(p=>s.jsx(P1,{request:p,isIncoming:!0},p.id))}):s.jsx("div",{className:"space-y-4",children:u?s.jsx("div",{className:"flex justify-center p-8",children:s.jsx(Cy,{className:"animate-spin text-[#C4A672]"})}):f.length===0?s.jsx("div",{className:"text-center p-8 text-gray-500 border border-dashed rounded-lg",children:"You haven't sent any exchange requests yet."}):f.map(p=>s.jsx(P1,{request:p,isIncoming:!1},p.id))})})]}):s.jsx("div",{children:"Please log in to view exchanges."})}function EK({user:t,onClose:e,onSave:n}){const[r,i]=_.useState(t),[o,u]=_.useState(!1),d=async()=>{u(!0);try{await un(ht(Te,"users",t.id),r),n(r),ue.success("User updated")}catch(f){ue.error("Failed to update user"),console.error(f)}finally{u(!1)}};return s.jsx(jo,{open:!0,onOpenChange:e,children:s.jsxs(Ma,{className:"max-w-2xl",children:[s.jsxs(Zl,{children:[s.jsx(Yl,{className:"text-2xl text-[#2C3E50]",children:"Edit User"}),s.jsx(Al,{children:"Update user information and account status"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"name",children:"Full Name"}),s.jsx(Ie,{id:"name",value:r.name,onChange:f=>i({...r,name:f.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"email",children:"Email Address"}),s.jsx(Ie,{id:"email",type:"email",value:r.email,onChange:f=>i({...r,email:f.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"status",children:"Account Status"}),s.jsxs(vn,{value:r.status,onValueChange:f=>i({...r,status:f}),children:[s.jsx(wn,{id:"status",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"suspended",children:"Suspended"}),s.jsx(Ve,{value:"banned",children:"Banned"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"location",children:"Location"}),s.jsx(Ie,{id:"location",value:r.location,onChange:f=>i({...r,location:f.target.value})})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-[#2C3E50] mb-3",children:"Account Activity"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total Purchases"}),s.jsx("p",{className:"text-[#2C3E50] text-xl",children:r.totalPurchases})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total Sales"}),s.jsx("p",{className:"text-[#2C3E50] text-xl",children:r.totalSales})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Member Since"}),s.jsx("p",{className:"text-[#2C3E50]",children:new Date(r.joinedDate).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(X,{variant:"outline",onClick:e,className:"flex-1",disabled:o,children:"Cancel"}),s.jsx(X,{onClick:d,className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:o,children:o?"Saving...":"Save Changes"})]})]})]})})}function SK(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[i,o]=_.useState(""),[u,d]=_.useState("all"),[f,p]=_.useState(null);_.useEffect(()=>{(async()=>{r(!0);try{const k=(await bs(lt(Te,"users"))).docs.map(R=>{const I=R.data();return{id:R.id,name:I.displayName||I.name||"Unknown",email:I.email||"",status:I.status||"active",totalPurchases:I.totalPurchases||0,totalSales:I.totalSales||0,joinedDate:I.createdAt?.toDate?I.createdAt.toDate().toISOString():I.joinedDate||new Date().toISOString(),location:I.location||"Unknown",role:I.role||"user"}});e(k)}catch(S){ue.error("Failed to fetch users"),console.error(S)}finally{r(!1)}})()},[]);const y=async N=>{if(confirm("Ban this user?"))try{await un(ht(Te,"users",N),{status:"banned"}),e(S=>S.map(k=>k.id===N?{...k,status:"banned"}:k)),ue.success("User banned")}catch{ue.error("Failed to ban user")}},g=async N=>{if(confirm("Grant admin privileges to this user?"))try{await un(ht(Te,"users",N),{role:"admin"}),e(S=>S.map(k=>k.id===N?{...k,role:"admin"}:k)),ue.success("User promoted to admin")}catch{ue.error("Failed to update user role")}},b=N=>{switch(N){case"active":return"bg-green-100 text-green-800";case"banned":return"bg-red-100 text-red-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},E=t.filter(N=>{const S=N.name.toLowerCase().includes(i.toLowerCase())||N.email.toLowerCase().includes(i.toLowerCase()),k=u==="all"||N.status===u;return S&&k});return n?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by name or email...",value:i,onChange:N=>o(N.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:["all","active","banned","suspended"].map(N=>s.jsx(X,{variant:u===N?"default":"outline",onClick:()=>d(N),className:u===N?"bg-[#C4A672] hover:bg-[#8B7355]":"",children:N.charAt(0).toUpperCase()+N.slice(1)},N))})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"User"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Email"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Role"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Location"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Activity"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Joined"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map(N=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-[#C4A672] rounded-full flex items-center justify-center text-white",children:N.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[#2C3E50]",children:N.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",N.id]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:N.email}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{variant:N.role==="admin"?"default":"outline",className:N.role==="admin"?"bg-[#C4A672]":"",children:N.role==="admin"?"Admin":"User"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{className:b(N.status),children:N.status})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:N.location}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"text-gray-600",children:[N.totalPurchases," purchases"]}),s.jsxs("p",{className:"text-gray-600",children:[N.totalSales," sales"]})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(N.joinedDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{size:"sm",variant:"outline",onClick:()=>p(N),children:s.jsx(aS,{className:"w-4 h-4"})}),s.jsx(X,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>y(N.id),children:s.jsx($F,{className:"w-4 h-4"})}),N.role!=="admin"&&s.jsx(X,{size:"sm",variant:"outline",className:"text-[#C4A672] hover:text-[#8B7355]",onClick:()=>g(N.id),title:"Make Admin",children:s.jsx(Lo,{className:"w-4 h-4"})})]})})]},N.id))})]})}),f&&s.jsx(EK,{user:f,onClose:()=>p(null),onSave:N=>{e(S=>S.map(k=>k.id===N.id?N:k)),p(null)}})]})}function TK({onClose:t}){const[e,n]=_.useState({isbn:"",title:"",author:"",condition:"Good",category:"Fiction",price:"",rentalPrice:"",description:""}),[r,i]=_.useState(!1),o=async u=>{u.preventDefault(),i(!0);try{await Ns(lt(Te,"books"),{...e,price:parseFloat(e.price)||0,rentalPrice:parseFloat(e.rentalPrice)||0,createdAt:new Date}),ue.success("Book added successfully"),t()}catch(d){ue.error("Failed to add book"),console.error(d)}finally{i(!1)}};return s.jsx(jo,{open:!0,onOpenChange:t,children:s.jsxs(Ma,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Zl,{children:[s.jsx(Yl,{className:"text-2xl text-[#2C3E50]",children:"Add New Book"}),s.jsx(Al,{children:"Add a book to the inventory"})]}),s.jsxs("form",{onSubmit:o,className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"isbn",children:"ISBN Number *"}),s.jsx(Ie,{id:"isbn",value:e.isbn,onChange:u=>n({...e,isbn:u.target.value}),placeholder:"978-3-16-148410-0",required:!0})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"title",children:"Book Title *"}),s.jsx(Ie,{id:"title",value:e.title,onChange:u=>n({...e,title:u.target.value}),placeholder:"Enter book title",required:!0})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"author",children:"Author *"}),s.jsx(Ie,{id:"author",value:e.author,onChange:u=>n({...e,author:u.target.value}),placeholder:"Author name",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"category",children:"Category"}),s.jsxs(vn,{value:e.category,onValueChange:u=>n({...e,category:u}),children:[s.jsx(wn,{id:"category",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"Fiction",children:"Fiction"}),s.jsx(Ve,{value:"Non-Fiction",children:"Non-Fiction"}),s.jsx(Ve,{value:"Science Fiction",children:"Science Fiction"}),s.jsx(Ve,{value:"Classic Literature",children:"Classic Literature"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"condition",children:"Condition"}),s.jsxs(vn,{value:e.condition,onValueChange:u=>n({...e,condition:u}),children:[s.jsx(wn,{id:"condition",children:s.jsx(yn,{})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"New",children:"New"}),s.jsx(Ve,{value:"Like New",children:"Like New"}),s.jsx(Ve,{value:"Good",children:"Good"}),s.jsx(Ve,{value:"Fair",children:"Fair"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"price",children:"Sale Price ($)"}),s.jsx(Ie,{id:"price",type:"number",step:"0.01",value:e.price,onChange:u=>n({...e,price:u.target.value}),placeholder:"15.99"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"rentalPrice",children:"Rental Price ($/month)"}),s.jsx(Ie,{id:"rentalPrice",type:"number",step:"0.01",value:e.rentalPrice,onChange:u=>n({...e,rentalPrice:u.target.value}),placeholder:"5.99"})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(Ae,{htmlFor:"description",children:"Description"}),s.jsx(Ql,{id:"description",value:e.description,onChange:u=>n({...e,description:u.target.value}),placeholder:"Book description...",rows:3})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(X,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:r,children:"Cancel"}),s.jsx(X,{type:"submit",className:"flex-1 bg-[#C4A672] hover:bg-[#8B7355] text-white",disabled:r,children:r?"Adding...":"Add Book"})]})]})]})})}function AK(){const[t,e]=_.useState(""),[n,r]=_.useState(!1),[i,o]=_.useState([]),[u,d]=_.useState(!0);_.useEffect(()=>{(async()=>{d(!0);try{const E=(await bs(lt(Te,"books"))).docs.map(N=>{const S=N.data();return{id:N.id,isbn:S.isbn||"N/A",title:S.title||"Untitled",author:S.author||"Unknown",condition:S.condition||"Good",category:S.category||"Uncategorized",price:S.price||0,status:S.status||"available",listedDate:S.listedDate||new Date().toISOString()}});o(E)}catch(b){ue.error("Failed to fetch books"),console.error(b)}finally{d(!1)}})()},[]);const f=i.filter(g=>g.title.toLowerCase().includes(t.toLowerCase())||g.author.toLowerCase().includes(t.toLowerCase())||g.isbn.includes(t)),p=g=>{switch(g){case"available":return"bg-green-100 text-green-800";case"rented":return"bg-blue-100 text-blue-800";case"sold":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},y=async g=>{if(confirm("Are you sure you want to delete this book?"))try{await Po(ht(Te,"books",g)),o(i.filter(b=>b.id!==g)),ue.success("Book deleted")}catch(b){ue.error("Failed to delete book"),console.error(b)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by title, author, or ISBN...",value:t,onChange:g=>e(g.target.value),className:"pl-10"})]}),s.jsxs(X,{onClick:()=>r(!0),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:[s.jsx(Ro,{className:"w-5 h-5 mr-2"}),"Add New Book"]})]})}),u?s.jsx("div",{className:"text-center py-12",children:"Loading books..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(g=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:g.title}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["by ",g.author]})]}),s.jsx(Qe,{className:p(g.status),children:g.status})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"ISBN:"}),s.jsx("span",{className:"text-[#2C3E50]",children:g.isbn})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Category:"}),s.jsx("span",{className:"text-[#2C3E50]",children:g.category})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Condition:"}),s.jsx("span",{className:"text-[#2C3E50]",children:g.condition})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Price:"}),s.jsxs("span",{className:"text-[#C4A672] text-lg",children:["$",g.price.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[s.jsxs(X,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(Qr,{className:"w-4 h-4 mr-1"}),"View"]}),s.jsxs(X,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(aS,{className:"w-4 h-4 mr-1"}),"Edit"]}),s.jsx(X,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>y(g.id),children:s.jsx(Wl,{className:"w-4 h-4"})})]})]},g.id))}),n&&s.jsx(TK,{onClose:()=>r(!1)})]})}function kK(){const[t,e]=_.useState(""),[n,r]=_.useState("all"),[i,o]=_.useState([]),[u,d]=_.useState(!0);_.useEffect(()=>{(async()=>{d(!0);try{const k=(await bs(lt(Te,"rentals"))).docs.map(R=>{const I=R.data();return{id:R.id,bookTitle:I.bookTitle||"Unknown Book",renterName:I.renterName||"Unknown Renter",renterEmail:I.renterEmail||"No Email",startDate:I.startDate||new Date().toISOString(),dueDate:I.dueDate||new Date().toISOString(),status:I.status||"pending",rentalPrice:I.rentalPrice||I.price||0}});o(k)}catch(S){ue.error("Failed to fetch rentals"),console.error(S)}finally{d(!1)}})()},[]);const f=i.filter(N=>{const S=N.bookTitle.toLowerCase().includes(t.toLowerCase())||N.renterName.toLowerCase().includes(t.toLowerCase()),k=n==="all"||N.status===n;return S&&k}),p=N=>{switch(N){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"returned":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},y=N=>{const S=new Date(N),k=new Date,R=S.getTime()-k.getTime();return Math.ceil(R/(1e3*60*60*24))},g=async N=>{try{await un(ht(Te,"rentals",N),{status:"active"}),o(S=>S.map(k=>k.id===N?{...k,status:"active"}:k)),ue.success("Rental approved")}catch{ue.error("Failed to approve")}},b=async N=>{if(confirm("Are you sure?"))try{await un(ht(Te,"rentals",N),{status:"returned"}),o(S=>S.map(k=>k.id===N?{...k,status:"returned"}:k)),ue.success("Rental denied")}catch{ue.error("Failed to deny")}},E=async N=>{ue.success("Reminder sent")};return u?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Active Rentals"}),s.jsx("p",{className:"text-3xl text-[#2C3E50] mt-2",children:i.filter(N=>N.status==="active").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Pending Approvals"}),s.jsx("p",{className:"text-3xl text-yellow-600 mt-2",children:i.filter(N=>N.status==="pending").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Overdue"}),s.jsx("p",{className:"text-3xl text-red-600 mt-2",children:i.filter(N=>N.status==="overdue").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Monthly Revenue"}),s.jsxs("p",{className:"text-3xl text-[#C4A672] mt-2",children:["$",i.reduce((N,S)=>N+S.rentalPrice,0).toFixed(2)]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search by book title or renter name...",value:t,onChange:N=>e(N.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:["all","active","pending","overdue","returned"].map(N=>s.jsx(X,{variant:n===N?"default":"outline",onClick:()=>r(N),className:n===N?"bg-[#C4A672] hover:bg-[#8B7355]":"",size:"sm",children:N.charAt(0).toUpperCase()+N.slice(1)},N))})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Book"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Renter"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Start Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Due Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Price"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(N=>{const S=y(N.dueDate);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-[#2C3E50]",children:N.bookTitle}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",N.id]})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-[#2C3E50]",children:N.renterName}),s.jsx("p",{className:"text-sm text-gray-500",children:N.renterEmail})]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(N.startDate).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-gray-600",children:new Date(N.dueDate).toLocaleDateString()}),N.status==="active"&&s.jsx("p",{className:`text-sm ${S<7?"text-red-600":"text-gray-500"}`,children:S>0?`${S} days left`:"Overdue"})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{className:p(N.status),children:N.status})}),s.jsxs("td",{className:"px-6 py-4 text-[#C4A672]",children:["$",N.rentalPrice.toFixed(2),"/mo"]}),s.jsx("td",{className:"px-6 py-4",children:N.status==="pending"?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(X,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>g(N.id),children:[s.jsx(Hl,{className:"w-4 h-4 mr-1"}),"Approve"]}),s.jsxs(X,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>b(N.id),children:[s.jsx(Dt,{className:"w-4 h-4 mr-1"}),"Deny"]})]}):N.status==="overdue"?s.jsxs(X,{size:"sm",variant:"outline",className:"text-orange-600",onClick:()=>E(N.id),children:[s.jsx(xw,{className:"w-4 h-4 mr-1"}),"Send Reminder"]}):s.jsx(X,{size:"sm",variant:"outline",children:"View Details"})})]},N.id)})})]})})]})}function PK(){const[t,e]=_.useState(""),[n,r]=_.useState("all"),[i,o]=_.useState([]),[u,d]=_.useState(!0);_.useEffect(()=>{(async()=>{d(!0);try{const S=(await bs(lt(Te,"transactions"))).docs.map(k=>{const R=k.data();return{id:k.id,type:R.type||"buy",bookTitle:R.bookTitle||"Unknown Book",user:R.user||R.userName||"Unknown User",amount:R.amount||R.price||0,date:R.date||R.createdAt?.toDate?.().toISOString()||new Date().toISOString(),status:R.status||"completed"}});o(S)}catch(N){ue.error("Failed to fetch transactions"),console.error(N)}finally{d(!1)}})()},[]);const f=i.filter(E=>{const N=E.bookTitle.toLowerCase().includes(t.toLowerCase())||E.user.toLowerCase().includes(t.toLowerCase()),S=n==="all"||E.type===n;return N&&S}),p=i.filter(E=>E.status==="completed").reduce((E,N)=>E+N.amount,0),y=E=>{switch(E){case"buy":return"bg-blue-100 text-blue-800";case"sell":return"bg-green-100 text-green-800";case"rent":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},g=E=>{switch(E){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=()=>{const E=f.map(N=>({ID:N.id,Type:N.type,Book:N.bookTitle,User:N.user,Amount:N.amount,Date:N.date,Status:N.status}));console.log("Exporting:",E),ue.success("Transactions downloaded")};return u?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-3xl text-[#C4A672] mt-2",children:["$",p.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Purchases"}),s.jsx("p",{className:"text-3xl text-blue-600 mt-2",children:i.filter(E=>E.type==="buy").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Sales"}),s.jsx("p",{className:"text-3xl text-green-600 mt-2",children:i.filter(E=>E.type==="sell").length})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Rentals"}),s.jsx("p",{className:"text-3xl text-purple-600 mt-2",children:i.filter(E=>E.type==="rent").length})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search transactions...",value:t,onChange:E=>e(E.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:["all","buy","sell","rent"].map(E=>s.jsx(X,{variant:n===E?"default":"outline",onClick:()=>r(E),className:n===E?"bg-[#C4A672] hover:bg-[#8B7355]":"",size:"sm",children:E.charAt(0).toUpperCase()+E.slice(1)},E))}),s.jsxs(X,{onClick:b,variant:"outline",children:[s.jsx(gf,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Transaction ID"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Book"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"User"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Amount"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(E=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("p",{className:"text-[#2C3E50]",children:E.id})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{className:y(E.type),children:E.type})}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:E.bookTitle}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:E.user}),s.jsxs("td",{className:"px-6 py-4 text-[#C4A672]",children:["$",E.amount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(E.date).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{className:g(E.status),children:E.status})})]},E.id))})]})})]})}function IK(){const[t,e]=_.useState([]),[n,r]=_.useState(""),[i,o]=_.useState("all"),[u,d]=_.useState("all"),[f,p]=_.useState("newest"),[y,g]=_.useState(!0);_.useEffect(()=>{(async()=>{g(!0);try{const F=(await bs(lt(Te,"communities"))).docs.map(D=>({id:D.id,...D.data()}));e(F)}catch(Q){ue.error("Failed to fetch communities"),console.error(Q)}finally{g(!1)}})()},[]);const b=t.filter(G=>{const Q=G.name.toLowerCase().includes(n.toLowerCase())||G.admin.toLowerCase().includes(n.toLowerCase()),F=i==="all"||G.status===i,D=u==="all"||G.privacy===u;return Q&&F&&D}).sort((G,Q)=>{switch(f){case"newest":return Q.createdAt.getTime()-G.createdAt.getTime();case"oldest":return G.createdAt.getTime()-Q.createdAt.getTime();case"members":return Q.memberCount-G.memberCount;case"posts":return Q.postsCount-G.postsCount;case"name":return G.name.localeCompare(Q.name);default:return 0}}),E=async G=>{try{await un(ht(Te,"communities",G),{status:"active"}),e(Q=>Q.map(F=>F.id===G?{...F,status:"active"}:F)),ue.success("Community approved")}catch(Q){ue.error("Failed to approve"),console.error(Q)}},N=async G=>{if(confirm("Are you sure you want to reject this community? It will be deleted."))try{await Po(ht(Te,"communities",G)),e(Q=>Q.filter(F=>F.id!==G)),ue.info("Community rejected and deleted")}catch(Q){ue.error("Failed to reject"),console.error(Q)}},S=async G=>{const Q=t.find(D=>D.id===G);if(!Q)return;const F=Q.status==="flagged"?"active":"flagged";try{await un(ht(Te,"communities",G),{status:F}),e(D=>D.map(O=>O.id===G?{...O,status:F}:O)),ue.success(F==="flagged"?"Community flagged":"Community unflagged")}catch(D){ue.error("Failed to update flag"),console.error(D)}},k=async G=>{if(confirm("Are you sure you want to permanently delete this community? This action cannot be undone."))try{await Po(ht(Te,"communities",G)),e(Q=>Q.filter(F=>F.id!==G)),ue.success("Community deleted")}catch(Q){ue.error("Failed to delete"),console.error(Q)}},R=G=>{ue.info(`Opening community details for ID: ${G}`)},I=G=>{ue.info(`Viewing admin action history for: ${G}`)},z=G=>{const Q={active:"bg-green-100 text-green-700 border-green-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200",flagged:"bg-red-100 text-red-700 border-red-200"},F={active:s.jsx(Ni,{className:"w-3 h-3 mr-1"}),pending:s.jsx(Lo,{className:"w-3 h-3 mr-1"}),flagged:s.jsx(Iv,{className:"w-3 h-3 mr-1"})};return s.jsxs(Qe,{variant:"outline",className:Q[G],children:[F[G],G.charAt(0).toUpperCase()+G.slice(1)]})},H={total:t.length,active:t.filter(G=>G.status==="active").length,pending:t.filter(G=>G.status==="pending").length,flagged:t.filter(G=>G.status==="flagged").length};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-3xl text-gray-900 mb-2",children:"Community Management"}),s.jsx("p",{className:"text-gray-600",children:"Monitor and manage all communities on the platform"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Communities"}),s.jsx("p",{className:"text-2xl text-gray-900 mt-1",children:H.total})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Rn,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("p",{className:"text-2xl text-green-600 mt-1",children:H.active})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Ni,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"}),s.jsx("p",{className:"text-2xl text-yellow-600 mt-1",children:H.pending})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(Lo,{className:"w-6 h-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Flagged"}),s.jsx("p",{className:"text-2xl text-red-600 mt-1",children:H.flagged})]}),s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx(Iv,{className:"w-6 h-6 text-red-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx($n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(Ie,{type:"text",placeholder:"Search communities or admins...",value:n,onChange:G=>r(G.target.value),className:"pl-10"})]}),s.jsxs(vn,{value:i,onValueChange:o,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Filter by status"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"pending",children:"Pending"}),s.jsx(Ve,{value:"flagged",children:"Flagged"})]})]}),s.jsxs(vn,{value:u,onValueChange:d,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Filter by privacy"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"all",children:"All Privacy"}),s.jsx(Ve,{value:"public",children:"Public"}),s.jsx(Ve,{value:"private",children:"Private"})]})]}),s.jsxs(vn,{value:f,onValueChange:p,children:[s.jsx(wn,{children:s.jsx(yn,{placeholder:"Sort by"})}),s.jsxs(_n,{children:[s.jsx(Ve,{value:"newest",children:"Newest First"}),s.jsx(Ve,{value:"oldest",children:"Oldest First"}),s.jsx(Ve,{value:"members",children:"Most Members"}),s.jsx(Ve,{value:"posts",children:"Most Posts"}),s.jsx(Ve,{value:"name",children:"Name A-Z"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Community"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Admin"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Stats"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Privacy"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Created"}),s.jsx("th",{className:"text-left p-4 text-sm text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map(G=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:G.name}),s.jsx("div",{className:"text-sm text-gray-500",children:G.topic}),G.reportCount>0&&s.jsxs(Qe,{variant:"outline",className:"mt-1 bg-red-50 text-red-600 border-red-200",children:[G.reportCount," reports"]})]})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"text-gray-900",children:G.admin}),s.jsx("button",{onClick:()=>I(G.adminId),className:"text-sm text-[#C4A672] hover:underline",children:"View actions"})]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Rn,{className:"w-4 h-4"}),G.memberCount.toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"w-4 h-4"}),G.postsCount]})]})}),s.jsx("td",{className:"p-4",children:s.jsx(Qe,{variant:"outline",children:G.privacy==="public"?" Public":" Private"})}),s.jsx("td",{className:"p-4",children:z(G.status)}),s.jsx("td",{className:"p-4 text-sm text-gray-600",children:G.createdAt.toLocaleDateString()}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex items-center gap-2",children:G.status==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(X,{size:"sm",onClick:()=>E(G.id),className:"bg-green-600 hover:bg-green-700 text-white",children:"Approve"}),s.jsx(X,{size:"sm",variant:"outline",onClick:()=>N(G.id),className:"text-red-600 border-red-200",children:"Reject"})]}):s.jsxs(s.Fragment,{children:[s.jsx(X,{size:"sm",variant:"outline",onClick:()=>R(G.id),children:s.jsx(Qr,{className:"w-4 h-4"})}),s.jsx(X,{size:"sm",variant:"outline",onClick:()=>S(G.id),className:G.status==="flagged"?"text-green-600 border-green-200":"text-yellow-600 border-yellow-200",children:s.jsx(Iv,{className:"w-4 h-4"})}),s.jsx(X,{size:"sm",variant:"outline",onClick:()=>k(G.id),className:"text-red-600 border-red-200",children:s.jsx(Wl,{className:"w-4 h-4"})})]})})})]},G.id))})]})}),b.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Rn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No communities found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Try adjusting your filters"})]})]}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",b.length," of ",t.length," communities"]})]})}var ex="Switch",[RK]=ir(ex),[LK,MK]=RK(ex),CP=_.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:o,required:u,disabled:d,value:f="on",onCheckedChange:p,form:y,...g}=t,[b,E]=_.useState(null),N=mt(e,z=>E(z)),S=_.useRef(!1),k=b?y||!!b.closest("form"):!0,[R,I]=Oa({prop:i,defaultProp:o??!1,onChange:p,caller:ex});return s.jsxs(LK,{scope:n,checked:R,disabled:d,children:[s.jsx(Je.button,{type:"button",role:"switch","aria-checked":R,"aria-required":u,"data-state":AP(R),"data-disabled":d?"":void 0,disabled:d,value:f,...g,ref:N,onClick:Fe(t.onClick,z=>{I(H=>!H),k&&(S.current=z.isPropagationStopped(),S.current||z.stopPropagation())})}),k&&s.jsx(TP,{control:b,bubbles:!S.current,name:r,value:f,checked:R,required:u,disabled:d,form:y,style:{transform:"translateX(-100%)"}})]})});CP.displayName=ex;var EP="SwitchThumb",SP=_.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=MK(EP,n);return s.jsx(Je.span,{"data-state":AP(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});SP.displayName=EP;var DK="SwitchBubbleInput",TP=_.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},o)=>{const u=_.useRef(null),d=mt(u,o),f=yf(n),p=vf(e);return _.useEffect(()=>{const y=u.current;if(!y)return;const g=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(g,"checked").set;if(f!==n&&E){const N=new Event("click",{bubbles:r});E.call(y,n),y.dispatchEvent(N)}},[f,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:d,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});TP.displayName=DK;function AP(t){return t?"checked":"unchecked"}var OK=CP,FK=SP;function Vu({className:t,...e}){return s.jsx(OK,{"data-slot":"switch",className:ft("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:s.jsx(FK,{"data-slot":"switch-thumb",className:ft("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function VK(){const[t,e]=_.useState({platformFeePercentage:10,minBookPrice:1,maxBookPrice:500,defaultRentalDuration:30,emailNotifications:!0,smsNotifications:!1,overdueReminders:!0,newListingAlerts:!0,requireEmailVerification:!0,twoFactorForAdmins:!0,sessionTimeout:60,maxLoginAttempts:5}),[n,r]=_.useState(!0);_.useEffect(()=>{(async()=>{r(!0);try{const u=ht(Te,"settings","system"),d=await vg(u);d.exists()&&e(d.data())}catch(u){ue.error("Failed to fetch settings"),console.error(u)}finally{r(!1)}})()},[]);const i=async()=>{try{await $h(ht(Te,"settings","system"),t),ue.success("Settings saved successfully!")}catch(o){ue.error("Failed to save settings"),console.error(o)}};return n?s.jsx("div",{children:"Loading settings..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#C4A672]/10 flex items-center justify-center",children:s.jsx(Io,{className:"w-6 h-6 text-[#C4A672]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Pricing Rules"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure platform fees and pricing limits"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"platformFee",children:"Platform Fee (%)"}),s.jsx(Ie,{id:"platformFee",type:"number",value:t.platformFeePercentage,onChange:o=>e({...t,platformFeePercentage:parseFloat(o.target.value)})}),s.jsx("p",{className:"text-xs text-gray-500",children:"Fee charged on each transaction"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"rentalDuration",children:"Default Rental Duration (days)"}),s.jsx(Ie,{id:"rentalDuration",type:"number",value:t.defaultRentalDuration,onChange:o=>e({...t,defaultRentalDuration:parseInt(o.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"minPrice",children:"Minimum Book Price ($)"}),s.jsx(Ie,{id:"minPrice",type:"number",step:"0.01",value:t.minBookPrice,onChange:o=>e({...t,minBookPrice:parseFloat(o.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"maxPrice",children:"Maximum Book Price ($)"}),s.jsx(Ie,{id:"maxPrice",type:"number",step:"0.01",value:t.maxBookPrice,onChange:o=>e({...t,maxBookPrice:parseFloat(o.target.value)})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx($l,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Notification Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage system notifications"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"emailNotif",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send notifications via email"})]}),s.jsx(Vu,{id:"emailNotif",checked:t.emailNotifications,onCheckedChange:o=>e({...t,emailNotifications:o})})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"smsNotif",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send notifications via SMS"})]}),s.jsx(Vu,{id:"smsNotif",checked:t.smsNotifications,onCheckedChange:o=>e({...t,smsNotifications:o})})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"overdueNotif",children:"Overdue Reminders"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Automatic reminders for overdue rentals"})]}),s.jsx(Vu,{id:"overdueNotif",checked:t.overdueReminders,onCheckedChange:o=>e({...t,overdueReminders:o})})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"newListingNotif",children:"New Listing Alerts"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify users of new book listings"})]}),s.jsx(Vu,{id:"newListingNotif",checked:t.newListingAlerts,onCheckedChange:o=>e({...t,newListingAlerts:o})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(Lo,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#2C3E50]",children:"Security Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure security and authentication"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"emailVerif",children:"Require Email Verification"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Users must verify email to use platform"})]}),s.jsx(Vu,{id:"emailVerif",checked:t.requireEmailVerification,onCheckedChange:o=>e({...t,requireEmailVerification:o})})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"twoFactor",children:"Two-Factor Auth for Admins"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for admin accounts"})]}),s.jsx(Vu,{id:"twoFactor",checked:t.twoFactorForAdmins,onCheckedChange:o=>e({...t,twoFactorForAdmins:o})})]}),s.jsx(qr,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),s.jsx(Ie,{id:"sessionTimeout",type:"number",value:t.sessionTimeout,onChange:o=>e({...t,sessionTimeout:parseInt(o.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"maxAttempts",children:"Max Login Attempts"}),s.jsx(Ie,{id:"maxAttempts",type:"number",value:t.maxLoginAttempts,onChange:o=>e({...t,maxLoginAttempts:parseInt(o.target.value)})})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(X,{onClick:i,className:"bg-[#C4A672] hover:bg-[#8B7355] text-white px-8",children:[s.jsx(sS,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})})]})}function BK(){const t=Jn();return s.jsx(DW,{onClose:()=>t("/")})}function zK(){const t=Jn();return s.jsx(dW,{onClose:()=>t("/")})}function UK(){const t=Jn();return s.jsx(OW,{onClose:()=>t("/")})}function $K(){const t=Qi(),{otherUser:e,bookContext:n}=t.state||{};return e?s.jsx(TG,{otherUser:e,bookContext:n}):s.jsx(Hp,{to:"/dashboard/chats",replace:!0})}function HK(){const t=Jn();return s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[s.jsx("h3",{className:"text-xl text-gray-700 mb-2",children:"Announcements Management"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Manage announcements from the main Announcements page"}),s.jsx(X,{onClick:()=>t("/announcements"),className:"bg-[#C4A672] hover:bg-[#8B7355] text-white",children:"Go to Announcements"})]})}function WK(){const[t,e]=_.useState(null),[n,r]=_.useState(null),[i,o]=_.useState(!0);_.useEffect(()=>{const d=g0(gt,f=>{f?(t||e("user"),r(f)):(e(null),r(null)),o(!1)});return()=>d()},[t]);const u=()=>{gt.signOut(),e(null),r(null)};return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):s.jsx(IF,{children:s.jsx(DR,{children:s.jsxs(fR,{children:[s.jsxs(_t,{element:s.jsx(P9,{}),children:[s.jsx(_t,{path:"/login",element:s.jsx(K9,{onLogin:()=>e("user")})}),s.jsx(_t,{path:"/register",element:s.jsx(Z9,{onSignUp:()=>e("user")})}),s.jsx(_t,{path:"/admin/login",element:s.jsx(J9,{onLogin:()=>e("admin")})})]}),s.jsxs(_t,{element:s.jsx(k9,{isLoggedIn:!!n,onLogout:u}),children:[s.jsx(_t,{path:"/",element:s.jsx(V9,{isLoggedIn:!!n})}),s.jsx(_t,{path:"/marketplace",element:s.jsx(FH,{})}),s.jsx(_t,{path:"/book/:id",element:s.jsx(rW,{})}),s.jsx(_t,{path:"/sell",element:s.jsx(BK,{})}),s.jsx(_t,{path:"/rent",element:s.jsx(zK,{})}),s.jsx(_t,{path:"/exchange",element:s.jsx(UK,{})}),s.jsx(_t,{path:"/communities",element:s.jsx(FW,{isLoggedIn:!!n})}),s.jsx(_t,{path:"/communities/create",element:s.jsx(VW,{userId:n?.uid,userName:n?.displayName})}),s.jsx(_t,{path:"/communities/:id",element:s.jsx(KW,{userId:n?.uid})}),s.jsx(_t,{path:"/communities/:id/chat",element:s.jsx(YW,{currentUserId:n?.uid})}),s.jsx(_t,{path:"/chat",element:s.jsx($K,{})}),s.jsx(_t,{path:"/announcements",element:s.jsx(PG,{isAdmin:t==="admin"})}),s.jsx(_t,{path:"/about",element:s.jsx(RG,{})}),s.jsx(_t,{path:"/search",element:s.jsx(LG,{})}),s.jsx(_t,{path:"/wishlist",element:s.jsx(MG,{})}),s.jsx(_t,{path:"/tuition",element:s.jsx(DG,{isLoggedIn:!!n})}),s.jsx(_t,{path:"/notes",element:s.jsx(FG,{})}),s.jsx(_t,{path:"/tracking/:orderId",element:s.jsx(VG,{})}),s.jsx(_t,{element:s.jsx(I9,{isLoggedIn:!!n}),children:s.jsxs(_t,{path:"/dashboard",element:s.jsx(nU,{onLogout:u}),children:[s.jsx(_t,{index:!0,element:s.jsx(vK,{})}),s.jsx(_t,{path:"purchases",element:s.jsx(yK,{})}),s.jsx(_t,{path:"sales",element:s.jsx(wK,{})}),s.jsx(_t,{path:"rentals",element:s.jsx(_K,{})}),s.jsx(_t,{path:"wishlist",element:s.jsx(bK,{})}),s.jsx(_t,{path:"communities",element:s.jsx(NK,{})}),s.jsx(_t,{path:"chats",element:s.jsx(jK,{})}),s.jsx(_t,{path:"exchanges",element:s.jsx(CK,{})})]})}),s.jsx(_t,{element:s.jsx(R9,{userRole:t}),children:s.jsxs(_t,{path:"/admin/dashboard",element:s.jsx(eU,{onLogout:u}),children:[s.jsx(_t,{index:!0,element:s.jsx(SK,{})}),s.jsx(_t,{path:"books",element:s.jsx(AK,{})}),s.jsx(_t,{path:"rentals",element:s.jsx(kK,{})}),s.jsx(_t,{path:"transactions",element:s.jsx(PK,{})}),s.jsx(_t,{path:"communities",element:s.jsx(IK,{})}),s.jsx(_t,{path:"announcements",element:s.jsx(HK,{})}),s.jsx(_t,{path:"settings",element:s.jsx(VK,{})})]})})]}),s.jsx(_t,{path:"*",element:s.jsx(Hp,{to:"/",replace:!0})})]})})})}yI.createRoot(document.getElementById("root")).render(s.jsx(WK,{}));
